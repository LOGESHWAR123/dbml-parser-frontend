(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=e(l);fetch(l.href,o)}})();function yw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Um={exports:{}},da={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function lT(){if(wv)return da;wv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,l,o){var a=null;if(o!==void 0&&(a=""+o),l.key!==void 0&&(a=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:n,type:i,key:a,ref:l!==void 0?l:null,props:o}}return da.Fragment=t,da.jsx=e,da.jsxs=e,da}var Av;function sT(){return Av||(Av=1,Um.exports=lT()),Um.exports}var Ct=sT(),qm={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function rT(){if(Mv)return kt;Mv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function b(E){return E===null||typeof E!="object"?null:(E=p&&E[p]||E["@@iterator"],typeof E=="function"?E:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function A(E,L,G){this.props=E,this.context=L,this.refs=w,this.updater=G||v}A.prototype.isReactComponent={},A.prototype.setState=function(E,L){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,L,"setState")},A.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function C(){}C.prototype=A.prototype;function O(E,L,G){this.props=E,this.context=L,this.refs=w,this.updater=G||v}var _=O.prototype=new C;_.constructor=O,S(_,A.prototype),_.isPureReactComponent=!0;var D=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function U(E,L,G,W,it,ut){return G=ut.ref,{$$typeof:n,type:E,key:L,ref:G!==void 0?G:null,props:ut}}function Q(E,L){return U(E.type,L,void 0,void 0,void 0,E.props)}function P(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function et(E){var L={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(G){return L[G]})}var J=/\/+/g;function F(E,L){return typeof E=="object"&&E!==null&&E.key!=null?et(""+E.key):L.toString(36)}function nt(){}function T(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(nt,nt):(E.status="pending",E.then(function(L){E.status==="pending"&&(E.status="fulfilled",E.value=L)},function(L){E.status==="pending"&&(E.status="rejected",E.reason=L)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function q(E,L,G,W,it){var ut=typeof E;(ut==="undefined"||ut==="boolean")&&(E=null);var ct=!1;if(E===null)ct=!0;else switch(ut){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(E.$$typeof){case n:case t:ct=!0;break;case m:return ct=E._init,q(ct(E._payload),L,G,W,it)}}if(ct)return it=it(E),ct=W===""?"."+F(E,0):W,D(it)?(G="",ct!=null&&(G=ct.replace(J,"$&/")+"/"),q(it,L,G,"",function(Tt){return Tt})):it!=null&&(P(it)&&(it=Q(it,G+(it.key==null||E&&E.key===it.key?"":(""+it.key).replace(J,"$&/")+"/")+ct)),L.push(it)),1;ct=0;var St=W===""?".":W+":";if(D(E))for(var vt=0;vt<E.length;vt++)W=E[vt],ut=St+F(W,vt),ct+=q(W,L,G,ut,it);else if(vt=b(E),typeof vt=="function")for(E=vt.call(E),vt=0;!(W=E.next()).done;)W=W.value,ut=St+F(W,vt++),ct+=q(W,L,G,ut,it);else if(ut==="object"){if(typeof E.then=="function")return q(T(E),L,G,W,it);throw L=String(E),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return ct}function k(E,L,G){if(E==null)return E;var W=[],it=0;return q(E,W,"","",function(ut){return L.call(G,ut,it++)}),W}function z(E){if(E._status===-1){var L=E._result;L=L(),L.then(function(G){(E._status===0||E._status===-1)&&(E._status=1,E._result=G)},function(G){(E._status===0||E._status===-1)&&(E._status=2,E._result=G)}),E._status===-1&&(E._status=0,E._result=L)}if(E._status===1)return E._result.default;throw E._result}var j=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function H(){}return kt.Children={map:k,forEach:function(E,L,G){k(E,function(){L.apply(this,arguments)},G)},count:function(E){var L=0;return k(E,function(){L++}),L},toArray:function(E){return k(E,function(L){return L})||[]},only:function(E){if(!P(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},kt.Component=A,kt.Fragment=e,kt.Profiler=l,kt.PureComponent=O,kt.StrictMode=i,kt.Suspense=f,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,kt.__COMPILER_RUNTIME={__proto__:null,c:function(E){return R.H.useMemoCache(E)}},kt.cache=function(E){return function(){return E.apply(null,arguments)}},kt.cloneElement=function(E,L,G){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var W=S({},E.props),it=E.key,ut=void 0;if(L!=null)for(ct in L.ref!==void 0&&(ut=void 0),L.key!==void 0&&(it=""+L.key),L)!B.call(L,ct)||ct==="key"||ct==="__self"||ct==="__source"||ct==="ref"&&L.ref===void 0||(W[ct]=L[ct]);var ct=arguments.length-2;if(ct===1)W.children=G;else if(1<ct){for(var St=Array(ct),vt=0;vt<ct;vt++)St[vt]=arguments[vt+2];W.children=St}return U(E.type,it,void 0,void 0,ut,W)},kt.createContext=function(E){return E={$$typeof:a,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:o,_context:E},E},kt.createElement=function(E,L,G){var W,it={},ut=null;if(L!=null)for(W in L.key!==void 0&&(ut=""+L.key),L)B.call(L,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(it[W]=L[W]);var ct=arguments.length-2;if(ct===1)it.children=G;else if(1<ct){for(var St=Array(ct),vt=0;vt<ct;vt++)St[vt]=arguments[vt+2];it.children=St}if(E&&E.defaultProps)for(W in ct=E.defaultProps,ct)it[W]===void 0&&(it[W]=ct[W]);return U(E,ut,void 0,void 0,null,it)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(E){return{$$typeof:c,render:E}},kt.isValidElement=P,kt.lazy=function(E){return{$$typeof:m,_payload:{_status:-1,_result:E},_init:z}},kt.memo=function(E,L){return{$$typeof:d,type:E,compare:L===void 0?null:L}},kt.startTransition=function(E){var L=R.T,G={};R.T=G;try{var W=E(),it=R.S;it!==null&&it(G,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(H,j)}catch(ut){j(ut)}finally{R.T=L}},kt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},kt.use=function(E){return R.H.use(E)},kt.useActionState=function(E,L,G){return R.H.useActionState(E,L,G)},kt.useCallback=function(E,L){return R.H.useCallback(E,L)},kt.useContext=function(E){return R.H.useContext(E)},kt.useDebugValue=function(){},kt.useDeferredValue=function(E,L){return R.H.useDeferredValue(E,L)},kt.useEffect=function(E,L,G){var W=R.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(E,L)},kt.useId=function(){return R.H.useId()},kt.useImperativeHandle=function(E,L,G){return R.H.useImperativeHandle(E,L,G)},kt.useInsertionEffect=function(E,L){return R.H.useInsertionEffect(E,L)},kt.useLayoutEffect=function(E,L){return R.H.useLayoutEffect(E,L)},kt.useMemo=function(E,L){return R.H.useMemo(E,L)},kt.useOptimistic=function(E,L){return R.H.useOptimistic(E,L)},kt.useReducer=function(E,L,G){return R.H.useReducer(E,L,G)},kt.useRef=function(E){return R.H.useRef(E)},kt.useState=function(E){return R.H.useState(E)},kt.useSyncExternalStore=function(E,L,G){return R.H.useSyncExternalStore(E,L,G)},kt.useTransition=function(){return R.H.useTransition()},kt.version="19.1.0",kt}var Cv;function uu(){return Cv||(Cv=1,qm.exports=rT()),qm.exports}var I=uu();const tt=yw(I);var Ym={exports:{}},ma={},Gm={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function oT(){return Ev||(Ev=1,function(n){function t(k,z){var j=k.length;k.push(z);t:for(;0<j;){var H=j-1>>>1,E=k[H];if(0<l(E,z))k[H]=z,k[j]=E,j=H;else break t}}function e(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var z=k[0],j=k.pop();if(j!==z){k[0]=j;t:for(var H=0,E=k.length,L=E>>>1;H<L;){var G=2*(H+1)-1,W=k[G],it=G+1,ut=k[it];if(0>l(W,j))it<E&&0>l(ut,W)?(k[H]=ut,k[it]=j,H=it):(k[H]=W,k[G]=j,H=G);else if(it<E&&0>l(ut,j))k[H]=ut,k[it]=j,H=it;else break t}}return z}function l(k,z){var j=k.sortIndex-z.sortIndex;return j!==0?j:k.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var f=[],d=[],m=1,p=null,b=3,v=!1,S=!1,w=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var z=e(d);z!==null;){if(z.callback===null)i(d);else if(z.startTime<=k)i(d),z.sortIndex=z.expirationTime,t(f,z);else break;z=e(d)}}function R(k){if(w=!1,D(k),!S)if(e(f)!==null)S=!0,B||(B=!0,F());else{var z=e(d);z!==null&&q(R,z.startTime-k)}}var B=!1,U=-1,Q=5,P=-1;function et(){return A?!0:!(n.unstable_now()-P<Q)}function J(){if(A=!1,B){var k=n.unstable_now();P=k;var z=!0;try{t:{S=!1,w&&(w=!1,O(U),U=-1),v=!0;var j=b;try{e:{for(D(k),p=e(f);p!==null&&!(p.expirationTime>k&&et());){var H=p.callback;if(typeof H=="function"){p.callback=null,b=p.priorityLevel;var E=H(p.expirationTime<=k);if(k=n.unstable_now(),typeof E=="function"){p.callback=E,D(k),z=!0;break e}p===e(f)&&i(f),D(k)}else i(f);p=e(f)}if(p!==null)z=!0;else{var L=e(d);L!==null&&q(R,L.startTime-k),z=!1}}break t}finally{p=null,b=j,v=!1}z=void 0}}finally{z?F():B=!1}}}var F;if(typeof _=="function")F=function(){_(J)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,T=nt.port2;nt.port1.onmessage=J,F=function(){T.postMessage(null)}}else F=function(){C(J,0)};function q(k,z){U=C(function(){k(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(k){switch(b){case 1:case 2:case 3:var z=3;break;default:z=b}var j=b;b=z;try{return k()}finally{b=j}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(k,z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var j=b;b=k;try{return z()}finally{b=j}},n.unstable_scheduleCallback=function(k,z,j){var H=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,k){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=j+E,k={id:m++,callback:z,priorityLevel:k,startTime:j,expirationTime:E,sortIndex:-1},j>H?(k.sortIndex=j,t(d,k),e(f)===null&&k===e(d)&&(w?(O(U),U=-1):w=!0,q(R,j-H))):(k.sortIndex=E,t(f,k),S||v||(S=!0,B||(B=!0,F()))),k},n.unstable_shouldYield=et,n.unstable_wrapCallback=function(k){var z=b;return function(){var j=b;b=z;try{return k.apply(this,arguments)}finally{b=j}}}}(Pm)),Pm}var kv;function aT(){return kv||(kv=1,Gm.exports=oT()),Gm.exports}var Xm={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function uT(){if(Tv)return Ze;Tv=1;var n=uu();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ze.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,m)},Ze.flushSync=function(f){var d=a.T,m=i.p;try{if(a.T=null,i.p=2,f)return f()}finally{a.T=d,i.p=m,i.d.f()}},Ze.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},Ze.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Ze.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:v}):m==="script"&&i.d.X(f,{crossOrigin:p,integrity:b,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ze.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},Ze.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);i.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ze.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},Ze.requestFormReset=function(f){i.d.r(f)},Ze.unstable_batchedUpdates=function(f,d){return f(d)},Ze.useFormState=function(f,d,m){return a.H.useFormState(f,d,m)},Ze.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ze.version="19.1.0",Ze}var Dv;function bw(){if(Dv)return Xm.exports;Dv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Xm.exports=uT(),Xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function cT(){if(Ov)return ma;Ov=1;var n=aT(),t=uu(),e=bw();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,u=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(u=r.return),s=r.return;while(s)}return r.tag===3?u:null}function a(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function c(s){if(o(s)!==s)throw Error(i(188))}function f(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var u=s,h=r;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return c(g),s;if(y===h)return c(g),r;y=y.sibling}throw Error(i(188))}if(u.return!==h.return)u=g,h=y;else{for(var x=!1,M=g.child;M;){if(M===u){x=!0,u=g,h=y;break}if(M===h){x=!0,h=g,u=y;break}M=M.sibling}if(!x){for(M=y.child;M;){if(M===u){x=!0,u=y,h=g;break}if(M===h){x=!0,h=y,u=g;break}M=M.sibling}if(!x)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:r}function d(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=d(s),r!==null)return r;s=s.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var nt=Symbol.for("react.client.reference");function T(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===nt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case A:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case B:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case _:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case D:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case U:return r=s.displayName||null,r!==null?r:T(s.type)||"Memo";case Q:r=s._payload,s=s._init;try{return T(s(r))}catch{}}return null}var q=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},H=[],E=-1;function L(s){return{current:s}}function G(s){0>E||(s.current=H[E],H[E]=null,E--)}function W(s,r){E++,H[E]=s.current,s.current=r}var it=L(null),ut=L(null),ct=L(null),St=L(null);function vt(s,r){switch(W(ct,r),W(ut,s),W(it,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Wb(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Wb(r),s=Fb(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}G(it),W(it,s)}function Tt(){G(it),G(ut),G(ct)}function zt(s){s.memoizedState!==null&&W(St,s);var r=it.current,u=Fb(r,s.type);r!==u&&(W(ut,s),W(it,u))}function ae(s){ut.current===s&&(G(it),G(ut)),St.current===s&&(G(St),aa._currentValue=j)}var le=Object.prototype.hasOwnProperty,Ae=n.unstable_scheduleCallback,ye=n.unstable_cancelCallback,se=n.unstable_shouldYield,tn=n.unstable_requestPaint,Dt=n.unstable_now,yt=n.unstable_getCurrentPriorityLevel,Oe=n.unstable_ImmediatePriority,_n=n.unstable_UserBlockingPriority,mi=n.unstable_NormalPriority,fl=n.unstable_LowPriority,Hi=n.unstable_IdlePriority,ti=n.log,hl=n.unstable_setDisableYieldValue,xn=null,he=null;function en(s){if(typeof ti=="function"&&hl(s),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(xn,s)}catch{}}var be=Math.clz32?Math.clz32:Sn,os=Math.log,Re=Math.LN2;function Sn(s){return s>>>=0,s===0?32:31-(os(s)/Re|0)|0}var Bn=256,zn=4194304;function nn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function an(s,r,u){var h=s.pendingLanes;if(h===0)return 0;var g=0,y=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~y,h!==0?g=nn(h):(x&=M,x!==0?g=nn(x):u||(u=M&~s,u!==0&&(g=nn(u))))):(M=h&~y,M!==0?g=nn(M):x!==0?g=nn(x):u||(u=h&~s,u!==0&&(g=nn(u)))),g===0?0:r!==0&&r!==g&&(r&y)===0&&(y=g&-g,u=r&-r,y>=u||y===32&&(u&4194048)!==0)?r:g}function $e(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function as(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(){var s=Bn;return Bn<<=1,(Bn&4194048)===0&&(Bn=256),s}function dl(){var s=zn;return zn<<=1,(zn&62914560)===0&&(zn=4194304),s}function us(s){for(var r=[],u=0;31>u;u++)r.push(s);return r}function ml(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Vi(s,r,u,h,g,y){var x=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,N=s.expirationTimes,$=s.hiddenUpdates;for(u=x&~u;0<u;){var lt=31-be(u),ot=1<<lt;M[lt]=0,N[lt]=-1;var K=$[lt];if(K!==null)for($[lt]=null,lt=0;lt<K.length;lt++){var Z=K[lt];Z!==null&&(Z.lane&=-536870913)}u&=~ot}h!==0&&wu(s,h,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(x&~r))}function wu(s,r,u){s.pendingLanes|=r,s.suspendedLanes&=~r;var h=31-be(r);s.entangledLanes|=r,s.entanglements[h]=s.entanglements[h]|1073741824|u&4194090}function Au(s,r){var u=s.entangledLanes|=r;for(s=s.entanglements;u;){var h=31-be(u),g=1<<h;g&r|s[h]&r&&(s[h]|=r),u&=~g}}function po(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function yo(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Mu(){var s=z.p;return s!==0?s:(s=window.event,s===void 0?32:pv(s.type))}function Nh(s,r){var u=z.p;try{return z.p=s,r()}finally{z.p=u}}var gi=Math.random().toString(36).slice(2),Ne="__reactFiber$"+gi,Ke="__reactProps$"+gi,gl="__reactContainer$"+gi,bo="__reactEvents$"+gi,_h="__reactListeners$"+gi,Bh="__reactHandles$"+gi,Cu="__reactResources$"+gi,cs="__reactMarker$"+gi;function vo(s){delete s[Ne],delete s[Ke],delete s[bo],delete s[_h],delete s[Bh]}function Ui(s){var r=s[Ne];if(r)return r;for(var u=s.parentNode;u;){if(r=u[gl]||u[Ne]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(s=ev(s);s!==null;){if(u=s[Ne])return u;s=ev(s)}return r}s=u,u=s.parentNode}return null}function pl(s){if(s=s[Ne]||s[gl]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function fs(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function yl(s){var r=s[Cu];return r||(r=s[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ve(s){s[cs]=!0}var Eu=new Set,ku={};function qi(s,r){bl(s,r),bl(s+"Capture",r)}function bl(s,r){for(ku[s]=r,s=0;s<r.length;s++)Eu.add(r[s])}var Tu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Du={},Ou={};function zh(s){return le.call(Ou,s)?!0:le.call(Du,s)?!1:Tu.test(s)?Ou[s]=!0:(Du[s]=!0,!1)}function Fs(s,r,u){if(zh(r))if(u===null)s.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+u)}}function Qs(s,r,u){if(u===null)s.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+u)}}function ei(s,r,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(r,u,""+h)}}var Js,Ru;function vl(s){if(Js===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);Js=r&&r[1]||"",Ru=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Js+s+Ru}var xo=!1;function hs(s,r){if(!s||xo)return"";xo=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(Z){var K=Z}Reflect.construct(s,[],ot)}else{try{ot.call()}catch(Z){K=Z}s.call(ot.prototype)}}else{try{throw Error()}catch(Z){K=Z}(ot=s())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),x=y[0],M=y[1];if(x&&M){var N=x.split(`
`),$=M.split(`
`);for(g=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;g<$.length&&!$[g].includes("DetermineComponentFrameRoot");)g++;if(h===N.length||g===$.length)for(h=N.length-1,g=$.length-1;1<=h&&0<=g&&N[h]!==$[g];)g--;for(;1<=h&&0<=g;h--,g--)if(N[h]!==$[g]){if(h!==1||g!==1)do if(h--,g--,0>g||N[h]!==$[g]){var lt=`
`+N[h].replace(" at new "," at ");return s.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",s.displayName)),lt}while(1<=h&&0<=g);break}}}finally{xo=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?vl(u):""}function QC(s){switch(s.tag){case 26:case 27:case 5:return vl(s.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 15:return hs(s.type,!1);case 11:return hs(s.type.render,!1);case 1:return hs(s.type,!0);case 31:return vl("Activity");default:return""}}function X0(s){try{var r="";do r+=QC(s),s=s.return;while(s);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Ln(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function j0(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function JC(s){var r=j0(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),h=""+s[r];if(!s.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,y.call(this,x)}}),Object.defineProperty(s,r,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Nu(s){s._valueTracker||(s._valueTracker=JC(s))}function $0(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var u=r.getValue(),h="";return s&&(h=j0(s)?s.checked?"true":"false":s.value),s=h,s!==u?(r.setValue(s),!0):!1}function _u(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var tE=/[\n"\\]/g;function Hn(s){return s.replace(tE,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Lh(s,r,u,h,g,y,x,M){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),r!=null?x==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Ln(r)):s.value!==""+Ln(r)&&(s.value=""+Ln(r)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),r!=null?Hh(s,x,Ln(r)):u!=null?Hh(s,x,Ln(u)):h!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+Ln(M):s.removeAttribute("name")}function K0(s,r,u,h,g,y,x,M){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),r!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||r!=null))return;u=u!=null?""+Ln(u):"",r=r!=null?""+Ln(r):u,M||r===s.value||(s.value=r),s.defaultValue=r}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x)}function Hh(s,r,u){r==="number"&&_u(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function tr(s,r,u,h){if(s=s.options,r){r={};for(var g=0;g<u.length;g++)r["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=r.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+Ln(u),r=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function I0(s,r,u){if(r!=null&&(r=""+Ln(r),r!==s.value&&(s.value=r),u==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=u!=null?""+Ln(u):""}function Z0(s,r,u,h){if(r==null){if(h!=null){if(u!=null)throw Error(i(92));if(q(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),r=u}u=Ln(r),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h)}function er(s,r){if(r){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=r;return}}s.textContent=r}var eE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function W0(s,r,u){var h=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":h?s.setProperty(r,u):typeof u!="number"||u===0||eE.has(r)?r==="float"?s.cssFloat=u:s[r]=(""+u).trim():s[r]=u+"px"}function F0(s,r,u){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in r)h=r[g],r.hasOwnProperty(g)&&u[g]!==h&&W0(s,g,h)}else for(var y in r)r.hasOwnProperty(y)&&W0(s,y,r[y])}function Vh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bu(s){return iE.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Uh=null;function qh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var nr=null,ir=null;function Q0(s){var r=pl(s);if(r&&(s=r.stateNode)){var u=s[Ke]||null;t:switch(s=r.stateNode,r.type){case"input":if(Lh(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Hn(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var h=u[r];if(h!==s&&h.form===s.form){var g=h[Ke]||null;if(!g)throw Error(i(90));Lh(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<u.length;r++)h=u[r],h.form===s.form&&$0(h)}break t;case"textarea":I0(s,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&tr(s,!!u.multiple,r,!1)}}}var Yh=!1;function J0(s,r,u){if(Yh)return s(r,u);Yh=!0;try{var h=s(r);return h}finally{if(Yh=!1,(nr!==null||ir!==null)&&(vc(),nr&&(r=nr,s=ir,ir=nr=null,Q0(r),s)))for(r=0;r<s.length;r++)Q0(s[r])}}function So(s,r){var u=s.stateNode;if(u===null)return null;var h=u[Ke]||null;if(h===null)return null;u=h[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,r,typeof u));return u}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gh=!1;if(Yi)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){Gh=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{Gh=!1}var xl=null,Ph=null,zu=null;function ty(){if(zu)return zu;var s,r=Ph,u=r.length,h,g="value"in xl?xl.value:xl.textContent,y=g.length;for(s=0;s<u&&r[s]===g[s];s++);var x=u-s;for(h=1;h<=x&&r[u-h]===g[y-h];h++);return zu=g.slice(s,1<h?1-h:void 0)}function Lu(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Hu(){return!0}function ey(){return!1}function un(s){function r(u,h,g,y,x){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Hu:ey,this.isPropagationStopped=ey,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),r}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vu=un(ds),Ao=m({},ds,{view:0,detail:0}),lE=un(Ao),Xh,jh,Mo,Uu=m({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mo&&(Mo&&s.type==="mousemove"?(Xh=s.screenX-Mo.screenX,jh=s.screenY-Mo.screenY):jh=Xh=0,Mo=s),Xh)},movementY:function(s){return"movementY"in s?s.movementY:jh}}),ny=un(Uu),sE=m({},Uu,{dataTransfer:0}),rE=un(sE),oE=m({},Ao,{relatedTarget:0}),$h=un(oE),aE=m({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),uE=un(aE),cE=m({},ds,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fE=un(cE),hE=m({},ds,{data:0}),iy=un(hE),dE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pE(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=gE[s])?!!r[s]:!1}function Kh(){return pE}var yE=m({},Ao,{key:function(s){if(s.key){var r=dE[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Lu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mE[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kh,charCode:function(s){return s.type==="keypress"?Lu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),bE=un(yE),vE=m({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ly=un(vE),xE=m({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kh}),SE=un(xE),wE=m({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),AE=un(wE),ME=m({},Uu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),CE=un(ME),EE=m({},ds,{newState:0,oldState:0}),kE=un(EE),TE=[9,13,27,32],Ih=Yi&&"CompositionEvent"in window,Co=null;Yi&&"documentMode"in document&&(Co=document.documentMode);var DE=Yi&&"TextEvent"in window&&!Co,sy=Yi&&(!Ih||Co&&8<Co&&11>=Co),ry=" ",oy=!1;function ay(s,r){switch(s){case"keyup":return TE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var lr=!1;function OE(s,r){switch(s){case"compositionend":return uy(r);case"keypress":return r.which!==32?null:(oy=!0,ry);case"textInput":return s=r.data,s===ry&&oy?null:s;default:return null}}function RE(s,r){if(lr)return s==="compositionend"||!Ih&&ay(s,r)?(s=ty(),zu=Ph=xl=null,lr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return sy&&r.locale!=="ko"?null:r.data;default:return null}}var NE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!NE[s.type]:r==="textarea"}function fy(s,r,u,h){nr?ir?ir.push(h):ir=[h]:nr=h,r=Cc(r,"onChange"),0<r.length&&(u=new Vu("onChange","change",null,u,h),s.push({event:u,listeners:r}))}var Eo=null,ko=null;function _E(s){jb(s,0)}function qu(s){var r=fs(s);if($0(r))return s}function hy(s,r){if(s==="change")return r}var dy=!1;if(Yi){var Zh;if(Yi){var Wh="oninput"in document;if(!Wh){var my=document.createElement("div");my.setAttribute("oninput","return;"),Wh=typeof my.oninput=="function"}Zh=Wh}else Zh=!1;dy=Zh&&(!document.documentMode||9<document.documentMode)}function gy(){Eo&&(Eo.detachEvent("onpropertychange",py),ko=Eo=null)}function py(s){if(s.propertyName==="value"&&qu(ko)){var r=[];fy(r,ko,s,qh(s)),J0(_E,r)}}function BE(s,r,u){s==="focusin"?(gy(),Eo=r,ko=u,Eo.attachEvent("onpropertychange",py)):s==="focusout"&&gy()}function zE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qu(ko)}function LE(s,r){if(s==="click")return qu(r)}function HE(s,r){if(s==="input"||s==="change")return qu(r)}function VE(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var wn=typeof Object.is=="function"?Object.is:VE;function To(s,r){if(wn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var u=Object.keys(s),h=Object.keys(r);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!le.call(r,g)||!wn(s[g],r[g]))return!1}return!0}function yy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function by(s,r){var u=yy(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=r&&h>=r)return{node:u,offset:r-s};s=h}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=yy(u)}}function vy(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?vy(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function xy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=_u(s.document);r instanceof s.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)s=r.contentWindow;else break;r=_u(s.document)}return r}function Fh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var UE=Yi&&"documentMode"in document&&11>=document.documentMode,sr=null,Qh=null,Do=null,Jh=!1;function Sy(s,r,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Jh||sr==null||sr!==_u(h)||(h=sr,"selectionStart"in h&&Fh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Do&&To(Do,h)||(Do=h,h=Cc(Qh,"onSelect"),0<h.length&&(r=new Vu("onSelect","select",null,r,u),s.push({event:r,listeners:h}),r.target=sr)))}function ms(s,r){var u={};return u[s.toLowerCase()]=r.toLowerCase(),u["Webkit"+s]="webkit"+r,u["Moz"+s]="moz"+r,u}var rr={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},td={},wy={};Yi&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function gs(s){if(td[s])return td[s];if(!rr[s])return s;var r=rr[s],u;for(u in r)if(r.hasOwnProperty(u)&&u in wy)return td[s]=r[u];return s}var Ay=gs("animationend"),My=gs("animationiteration"),Cy=gs("animationstart"),qE=gs("transitionrun"),YE=gs("transitionstart"),GE=gs("transitioncancel"),Ey=gs("transitionend"),ky=new Map,ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ed.push("scrollEnd");function ni(s,r){ky.set(s,r),qi(r,[s])}var Ty=new WeakMap;function Vn(s,r){if(typeof s=="object"&&s!==null){var u=Ty.get(s);return u!==void 0?u:(r={value:s,source:r,stack:X0(r)},Ty.set(s,r),r)}return{value:s,source:r,stack:X0(r)}}var Un=[],or=0,nd=0;function Yu(){for(var s=or,r=nd=or=0;r<s;){var u=Un[r];Un[r++]=null;var h=Un[r];Un[r++]=null;var g=Un[r];Un[r++]=null;var y=Un[r];if(Un[r++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}y!==0&&Dy(u,g,y)}}function Gu(s,r,u,h){Un[or++]=s,Un[or++]=r,Un[or++]=u,Un[or++]=h,nd|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function id(s,r,u,h){return Gu(s,r,u,h),Pu(s)}function ar(s,r){return Gu(s,null,null,r),Pu(s)}function Dy(s,r,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var g=!1,y=s.return;y!==null;)y.childLanes|=u,h=y.alternate,h!==null&&(h.childLanes|=u),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&r!==null&&(g=31-be(u),s=y.hiddenUpdates,h=s[g],h===null?s[g]=[r]:h.push(r),r.lane=u|536870912),y):null}function Pu(s){if(50<ta)throw ta=0,um=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ur={};function PE(s,r,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(s,r,u,h){return new PE(s,r,u,h)}function ld(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gi(s,r){var u=s.alternate;return u===null?(u=An(s.tag,r,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=r,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,r=s.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Oy(s,r){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,r=u.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Xu(s,r,u,h,g,y){var x=0;if(h=s,typeof s=="function")ld(s)&&(x=1);else if(typeof s=="string")x=jk(s,u,it.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case P:return s=An(31,u,r,g),s.elementType=P,s.lanes=y,s;case S:return ps(u.children,g,y,r);case w:x=8,g|=24;break;case A:return s=An(12,u,r,g|2),s.elementType=A,s.lanes=y,s;case R:return s=An(13,u,r,g),s.elementType=R,s.lanes=y,s;case B:return s=An(19,u,r,g),s.elementType=B,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case _:x=10;break t;case O:x=9;break t;case D:x=11;break t;case U:x=14;break t;case Q:x=16,h=null;break t}x=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return r=An(x,u,r,g),r.elementType=s,r.type=h,r.lanes=y,r}function ps(s,r,u,h){return s=An(7,s,h,r),s.lanes=u,s}function sd(s,r,u){return s=An(6,s,null,r),s.lanes=u,s}function rd(s,r,u){return r=An(4,s.children!==null?s.children:[],s.key,r),r.lanes=u,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var cr=[],fr=0,ju=null,$u=0,qn=[],Yn=0,ys=null,Pi=1,Xi="";function bs(s,r){cr[fr++]=$u,cr[fr++]=ju,ju=s,$u=r}function Ry(s,r,u){qn[Yn++]=Pi,qn[Yn++]=Xi,qn[Yn++]=ys,ys=s;var h=Pi;s=Xi;var g=32-be(h)-1;h&=~(1<<g),u+=1;var y=32-be(r)+g;if(30<y){var x=g-g%5;y=(h&(1<<x)-1).toString(32),h>>=x,g-=x,Pi=1<<32-be(r)+g|u<<g|h,Xi=y+s}else Pi=1<<y|u<<g|h,Xi=s}function od(s){s.return!==null&&(bs(s,1),Ry(s,1,0))}function ad(s){for(;s===ju;)ju=cr[--fr],cr[fr]=null,$u=cr[--fr],cr[fr]=null;for(;s===ys;)ys=qn[--Yn],qn[Yn]=null,Xi=qn[--Yn],qn[Yn]=null,Pi=qn[--Yn],qn[Yn]=null}var ln=null,ue=null,Gt=!1,vs=null,pi=!1,ud=Error(i(519));function xs(s){var r=Error(i(418,""));throw No(Vn(r,s)),ud}function Ny(s){var r=s.stateNode,u=s.type,h=s.memoizedProps;switch(r[Ne]=s,r[Ke]=h,u){case"dialog":Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":case"embed":Bt("load",r);break;case"video":case"audio":for(u=0;u<na.length;u++)Bt(na[u],r);break;case"source":Bt("error",r);break;case"img":case"image":case"link":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"input":Bt("invalid",r),K0(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Nu(r);break;case"select":Bt("invalid",r);break;case"textarea":Bt("invalid",r),Z0(r,h.value,h.defaultValue,h.children),Nu(r)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||h.suppressHydrationWarning===!0||Zb(r.textContent,u)?(h.popover!=null&&(Bt("beforetoggle",r),Bt("toggle",r)),h.onScroll!=null&&Bt("scroll",r),h.onScrollEnd!=null&&Bt("scrollend",r),h.onClick!=null&&(r.onclick=Ec),r=!0):r=!1,r||xs(s)}function _y(s){for(ln=s.return;ln;)switch(ln.tag){case 5:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:ln=ln.return}}function Oo(s){if(s!==ln)return!1;if(!Gt)return _y(s),Gt=!0,!1;var r=s.tag,u;if((u=r!==3&&r!==27)&&((u=r===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Cm(s.type,s.memoizedProps)),u=!u),u&&ue&&xs(s),_y(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(r===0){ue=li(s.nextSibling);break t}r--}else u!=="$"&&u!=="$!"&&u!=="$?"||r++;s=s.nextSibling}ue=null}}else r===27?(r=ue,Ll(s.type)?(s=Dm,Dm=null,ue=s):ue=r):ue=ln?li(s.stateNode.nextSibling):null;return!0}function Ro(){ue=ln=null,Gt=!1}function By(){var s=vs;return s!==null&&(hn===null?hn=s:hn.push.apply(hn,s),vs=null),s}function No(s){vs===null?vs=[s]:vs.push(s)}var cd=L(null),Ss=null,ji=null;function Sl(s,r,u){W(cd,r._currentValue),r._currentValue=u}function $i(s){s._currentValue=cd.current,G(cd)}function fd(s,r,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),s===u)break;s=s.return}}function hd(s,r,u,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var x=g.child;y=y.firstContext;t:for(;y!==null;){var M=y;y=g;for(var N=0;N<r.length;N++)if(M.context===r[N]){y.lanes|=u,M=y.alternate,M!==null&&(M.lanes|=u),fd(y.return,u,s),h||(x=null);break t}y=M.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(i(341));x.lanes|=u,y=x.alternate,y!==null&&(y.lanes|=u),fd(x,u,s),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function _o(s,r,u,h){s=null;for(var g=r,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var M=g.type;wn(g.pendingProps.value,x.value)||(s!==null?s.push(M):s=[M])}}else if(g===St.current){if(x=g.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(aa):s=[aa])}g=g.return}s!==null&&hd(r,s,u,h),r.flags|=262144}function Ku(s){for(s=s.firstContext;s!==null;){if(!wn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ws(s){Ss=s,ji=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ie(s){return zy(Ss,s)}function Iu(s,r){return Ss===null&&ws(s),zy(s,r)}function zy(s,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},ji===null){if(s===null)throw Error(i(308));ji=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ji=ji.next=r;return u}var XE=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){r.aborted=!0,s.forEach(function(u){return u()})}},jE=n.unstable_scheduleCallback,$E=n.unstable_NormalPriority,Me={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new XE,data:new Map,refCount:0}}function Bo(s){s.refCount--,s.refCount===0&&jE($E,function(){s.controller.abort()})}var zo=null,md=0,hr=0,dr=null;function KE(s,r){if(zo===null){var u=zo=[];md=0,hr=pm(),dr={status:"pending",value:void 0,then:function(h){u.push(h)}}}return md++,r.then(Ly,Ly),r}function Ly(){if(--md===0&&zo!==null){dr!==null&&(dr.status="fulfilled");var s=zo;zo=null,hr=0,dr=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function IE(s,r){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){h.status="fulfilled",h.value=r;for(var g=0;g<u.length;g++)(0,u[g])(r)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var Hy=k.S;k.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&KE(s,r),Hy!==null&&Hy(s,r)};var As=L(null);function gd(){var s=As.current;return s!==null?s:Qt.pooledCache}function Zu(s,r){r===null?W(As,As.current):W(As,r.pool)}function Vy(){var s=gd();return s===null?null:{parent:Me._currentValue,pool:s}}var Lo=Error(i(460)),Uy=Error(i(474)),Wu=Error(i(542)),pd={then:function(){}};function qy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Fu(){}function Yy(s,r,u){switch(u=s[u],u===void 0?s.push(r):u!==r&&(r.then(Fu,Fu),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Py(s),s;default:if(typeof r.status=="string")r.then(Fu,Fu);else{if(s=Qt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(h){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=h}},function(h){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Py(s),s}throw Ho=r,Lo}}var Ho=null;function Gy(){if(Ho===null)throw Error(i(459));var s=Ho;return Ho=null,s}function Py(s){if(s===Lo||s===Wu)throw Error(i(483))}var wl=!1;function yd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Al(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ml(s,r,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Pt&2)!==0){var g=h.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),h.pending=r,r=Pu(s),Dy(s,null,u),r}return Gu(s,h,r,u),Pu(s)}function Vo(s,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194048)!==0)){var h=r.lanes;h&=s.pendingLanes,u|=h,r.lanes=u,Au(s,u)}}function vd(s,r){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?g=y=x:y=y.next=x,u=u.next}while(u!==null);y===null?g=y=r:y=y.next=r}else g=y=r;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=r:s.next=r,u.lastBaseUpdate=r}var xd=!1;function Uo(){if(xd){var s=dr;if(s!==null)throw s}}function qo(s,r,u,h){xd=!1;var g=s.updateQueue;wl=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var N=M,$=N.next;N.next=null,x===null?y=$:x.next=$,x=N;var lt=s.alternate;lt!==null&&(lt=lt.updateQueue,M=lt.lastBaseUpdate,M!==x&&(M===null?lt.firstBaseUpdate=$:M.next=$,lt.lastBaseUpdate=N))}if(y!==null){var ot=g.baseState;x=0,lt=$=N=null,M=y;do{var K=M.lane&-536870913,Z=K!==M.lane;if(Z?(Ut&K)===K:(h&K)===K){K!==0&&K===hr&&(xd=!0),lt!==null&&(lt=lt.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var Mt=s,wt=M;K=r;var Kt=u;switch(wt.tag){case 1:if(Mt=wt.payload,typeof Mt=="function"){ot=Mt.call(Kt,ot,K);break t}ot=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=wt.payload,K=typeof Mt=="function"?Mt.call(Kt,ot,K):Mt,K==null)break t;ot=m({},ot,K);break t;case 2:wl=!0}}K=M.callback,K!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=g.callbacks,Z===null?g.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:M.tag,payload:M.payload,callback:M.callback,next:null},lt===null?($=lt=Z,N=ot):lt=lt.next=Z,x|=K;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;Z=M,M=Z.next,Z.next=null,g.lastBaseUpdate=Z,g.shared.pending=null}}while(!0);lt===null&&(N=ot),g.baseState=N,g.firstBaseUpdate=$,g.lastBaseUpdate=lt,y===null&&(g.shared.lanes=0),Nl|=x,s.lanes=x,s.memoizedState=ot}}function Xy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function jy(s,r){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Xy(u[s],r)}var mr=L(null),Qu=L(0);function $y(s,r){s=Ji,W(Qu,s),W(mr,r),Ji=s|r.baseLanes}function Sd(){W(Qu,Ji),W(mr,mr.current)}function wd(){Ji=Qu.current,G(mr),G(Qu)}var Cl=0,Ot=null,jt=null,xe=null,Ju=!1,gr=!1,Ms=!1,tc=0,Yo=0,pr=null,ZE=0;function de(){throw Error(i(321))}function Ad(s,r){if(r===null)return!1;for(var u=0;u<r.length&&u<s.length;u++)if(!wn(s[u],r[u]))return!1;return!0}function Md(s,r,u,h,g,y){return Cl=y,Ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,k.H=s===null||s.memoizedState===null?D1:O1,Ms=!1,y=u(h,g),Ms=!1,gr&&(y=Iy(r,u,h,g)),Ky(s),y}function Ky(s){k.H=rc;var r=jt!==null&&jt.next!==null;if(Cl=0,xe=jt=Ot=null,Ju=!1,Yo=0,pr=null,r)throw Error(i(300));s===null||_e||(s=s.dependencies,s!==null&&Ku(s)&&(_e=!0))}function Iy(s,r,u,h){Ot=s;var g=0;do{if(gr&&(pr=null),Yo=0,gr=!1,25<=g)throw Error(i(301));if(g+=1,xe=jt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}k.H=nk,y=r(u,h)}while(gr);return y}function WE(){var s=k.H,r=s.useState()[0];return r=typeof r.then=="function"?Go(r):r,s=s.useState()[0],(jt!==null?jt.memoizedState:null)!==s&&(Ot.flags|=1024),r}function Cd(){var s=tc!==0;return tc=0,s}function Ed(s,r,u){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~u}function kd(s){if(Ju){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ju=!1}Cl=0,xe=jt=Ot=null,gr=!1,Yo=tc=0,pr=null}function cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?Ot.memoizedState=xe=s:xe=xe.next=s,xe}function Se(){if(jt===null){var s=Ot.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var r=xe===null?Ot.memoizedState:xe.next;if(r!==null)xe=r,jt=s;else{if(s===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},xe===null?Ot.memoizedState=xe=s:xe=xe.next=s}return xe}function Td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(s){var r=Yo;return Yo+=1,pr===null&&(pr=[]),s=Yy(pr,s,r),r=Ot,(xe===null?r.memoizedState:xe.next)===null&&(r=r.alternate,k.H=r===null||r.memoizedState===null?D1:O1),s}function ec(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Go(s);if(s.$$typeof===_)return Ie(s)}throw Error(i(438,String(s)))}function Dd(s){var r=null,u=Ot.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=Td(),Ot.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(s),h=0;h<s;h++)u[h]=et;return r.index++,u}function Ki(s,r){return typeof r=="function"?r(s):r}function nc(s){var r=Se();return Od(r,jt,s)}function Od(s,r,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var g=s.baseQueue,y=h.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}r.baseQueue=g=y,h.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{r=g.next;var M=x=null,N=null,$=r,lt=!1;do{var ot=$.lane&-536870913;if(ot!==$.lane?(Ut&ot)===ot:(Cl&ot)===ot){var K=$.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ot===hr&&(lt=!0);else if((Cl&K)===K){$=$.next,K===hr&&(lt=!0);continue}else ot={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(M=N=ot,x=y):N=N.next=ot,Ot.lanes|=K,Nl|=K;ot=$.action,Ms&&u(y,ot),y=$.hasEagerState?$.eagerState:u(y,ot)}else K={lane:ot,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(M=N=K,x=y):N=N.next=K,Ot.lanes|=ot,Nl|=ot;$=$.next}while($!==null&&$!==r);if(N===null?x=y:N.next=M,!wn(y,s.memoizedState)&&(_e=!0,lt&&(u=dr,u!==null)))throw u;s.memoizedState=y,s.baseState=x,s.baseQueue=N,h.lastRenderedState=y}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Rd(s){var r=Se(),u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,y=r.memoizedState;if(g!==null){u.pending=null;var x=g=g.next;do y=s(y,x.action),x=x.next;while(x!==g);wn(y,r.memoizedState)||(_e=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),u.lastRenderedState=y}return[y,h]}function Zy(s,r,u){var h=Ot,g=Se(),y=Gt;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=r();var x=!wn((jt||g).memoizedState,u);x&&(g.memoizedState=u,_e=!0),g=g.queue;var M=Qy.bind(null,h,g,s);if(Po(2048,8,M,[s]),g.getSnapshot!==r||x||xe!==null&&xe.memoizedState.tag&1){if(h.flags|=2048,yr(9,ic(),Fy.bind(null,h,g,u,r),null),Qt===null)throw Error(i(349));y||(Cl&124)!==0||Wy(h,r,u)}return u}function Wy(s,r,u){s.flags|=16384,s={getSnapshot:r,value:u},r=Ot.updateQueue,r===null?(r=Td(),Ot.updateQueue=r,r.stores=[s]):(u=r.stores,u===null?r.stores=[s]:u.push(s))}function Fy(s,r,u,h){r.value=u,r.getSnapshot=h,Jy(r)&&t1(s)}function Qy(s,r,u){return u(function(){Jy(r)&&t1(s)})}function Jy(s){var r=s.getSnapshot;s=s.value;try{var u=r();return!wn(s,u)}catch{return!0}}function t1(s){var r=ar(s,2);r!==null&&Tn(r,s,2)}function Nd(s){var r=cn();if(typeof s=="function"){var u=s;if(s=u(),Ms){en(!0);try{u()}finally{en(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:s},r}function e1(s,r,u,h){return s.baseState=u,Od(s,jt,typeof h=="function"?h:Ki)}function FE(s,r,u,h,g){if(sc(s))throw Error(i(485));if(s=r.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};k.T!==null?u(!0):y.isTransition=!1,h(y),u=r.pending,u===null?(y.next=r.pending=y,n1(r,y)):(y.next=u.next,r.pending=u.next=y)}}function n1(s,r){var u=r.action,h=r.payload,g=s.state;if(r.isTransition){var y=k.T,x={};k.T=x;try{var M=u(g,h),N=k.S;N!==null&&N(x,M),i1(s,r,M)}catch($){_d(s,r,$)}finally{k.T=y}}else try{y=u(g,h),i1(s,r,y)}catch($){_d(s,r,$)}}function i1(s,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){l1(s,r,h)},function(h){return _d(s,r,h)}):l1(s,r,u)}function l1(s,r,u){r.status="fulfilled",r.value=u,s1(r),s.state=u,r=s.pending,r!==null&&(u=r.next,u===r?s.pending=null:(u=u.next,r.next=u,n1(s,u)))}function _d(s,r,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=u,s1(r),r=r.next;while(r!==h)}s.action=null}function s1(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function r1(s,r){return r}function o1(s,r){if(Gt){var u=Qt.formState;if(u!==null){t:{var h=Ot;if(Gt){if(ue){e:{for(var g=ue,y=pi;g.nodeType!==8;){if(!y){g=null;break e}if(g=li(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){ue=li(g.nextSibling),h=g.data==="F!";break t}}xs(h)}h=!1}h&&(r=u[0])}}return u=cn(),u.memoizedState=u.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r1,lastRenderedState:r},u.queue=h,u=E1.bind(null,Ot,h),h.dispatch=u,h=Nd(!1),y=Vd.bind(null,Ot,!1,h.queue),h=cn(),g={state:r,dispatch:null,action:s,pending:null},h.queue=g,u=FE.bind(null,Ot,g,y,u),g.dispatch=u,h.memoizedState=s,[r,u,!1]}function a1(s){var r=Se();return u1(r,jt,s)}function u1(s,r,u){if(r=Od(s,r,r1)[0],s=nc(Ki)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Go(r)}catch(x){throw x===Lo?Wu:x}else h=r;r=Se();var g=r.queue,y=g.dispatch;return u!==r.memoizedState&&(Ot.flags|=2048,yr(9,ic(),QE.bind(null,g,u),null)),[h,y,s]}function QE(s,r){s.action=r}function c1(s){var r=Se(),u=jt;if(u!==null)return u1(r,u,s);Se(),r=r.memoizedState,u=Se();var h=u.queue.dispatch;return u.memoizedState=s,[r,h,!1]}function yr(s,r,u,h){return s={tag:s,create:u,deps:h,inst:r,next:null},r=Ot.updateQueue,r===null&&(r=Td(),Ot.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,r.lastEffect=s),s}function ic(){return{destroy:void 0,resource:void 0}}function f1(){return Se().memoizedState}function lc(s,r,u,h){var g=cn();h=h===void 0?null:h,Ot.flags|=s,g.memoizedState=yr(1|r,ic(),u,h)}function Po(s,r,u,h){var g=Se();h=h===void 0?null:h;var y=g.memoizedState.inst;jt!==null&&h!==null&&Ad(h,jt.memoizedState.deps)?g.memoizedState=yr(r,y,u,h):(Ot.flags|=s,g.memoizedState=yr(1|r,y,u,h))}function h1(s,r){lc(8390656,8,s,r)}function d1(s,r){Po(2048,8,s,r)}function m1(s,r){return Po(4,2,s,r)}function g1(s,r){return Po(4,4,s,r)}function p1(s,r){if(typeof r=="function"){s=s();var u=r(s);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function y1(s,r,u){u=u!=null?u.concat([s]):null,Po(4,4,p1.bind(null,r,s),u)}function Bd(){}function b1(s,r){var u=Se();r=r===void 0?null:r;var h=u.memoizedState;return r!==null&&Ad(r,h[1])?h[0]:(u.memoizedState=[s,r],s)}function v1(s,r){var u=Se();r=r===void 0?null:r;var h=u.memoizedState;if(r!==null&&Ad(r,h[1]))return h[0];if(h=s(),Ms){en(!0);try{s()}finally{en(!1)}}return u.memoizedState=[h,r],h}function zd(s,r,u){return u===void 0||(Cl&1073741824)!==0?s.memoizedState=r:(s.memoizedState=u,s=wb(),Ot.lanes|=s,Nl|=s,u)}function x1(s,r,u,h){return wn(u,r)?u:mr.current!==null?(s=zd(s,u,h),wn(s,r)||(_e=!0),s):(Cl&42)===0?(_e=!0,s.memoizedState=u):(s=wb(),Ot.lanes|=s,Nl|=s,r)}function S1(s,r,u,h,g){var y=z.p;z.p=y!==0&&8>y?y:8;var x=k.T,M={};k.T=M,Vd(s,!1,r,u);try{var N=g(),$=k.S;if($!==null&&$(M,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var lt=IE(N,h);Xo(s,r,lt,kn(s))}else Xo(s,r,h,kn(s))}catch(ot){Xo(s,r,{then:function(){},status:"rejected",reason:ot},kn())}finally{z.p=y,k.T=x}}function JE(){}function Ld(s,r,u,h){if(s.tag!==5)throw Error(i(476));var g=w1(s).queue;S1(s,g,r,j,u===null?JE:function(){return A1(s),u(h)})}function w1(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:j},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:u},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function A1(s){var r=w1(s).next.queue;Xo(s,r,{},kn())}function Hd(){return Ie(aa)}function M1(){return Se().memoizedState}function C1(){return Se().memoizedState}function tk(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var u=kn();s=Al(u);var h=Ml(r,s,u);h!==null&&(Tn(h,r,u),Vo(h,r,u)),r={cache:dd()},s.payload=r;return}r=r.return}}function ek(s,r,u){var h=kn();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},sc(s)?k1(r,u):(u=id(s,r,u,h),u!==null&&(Tn(u,s,h),T1(u,r,h)))}function E1(s,r,u){var h=kn();Xo(s,r,u,h)}function Xo(s,r,u,h){var g={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(sc(s))k1(r,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var x=r.lastRenderedState,M=y(x,u);if(g.hasEagerState=!0,g.eagerState=M,wn(M,x))return Gu(s,r,g,0),Qt===null&&Yu(),!1}catch{}finally{}if(u=id(s,r,g,h),u!==null)return Tn(u,s,h),T1(u,r,h),!0}return!1}function Vd(s,r,u,h){if(h={lane:2,revertLane:pm(),action:h,hasEagerState:!1,eagerState:null,next:null},sc(s)){if(r)throw Error(i(479))}else r=id(s,u,h,2),r!==null&&Tn(r,s,2)}function sc(s){var r=s.alternate;return s===Ot||r!==null&&r===Ot}function k1(s,r){gr=Ju=!0;var u=s.pending;u===null?r.next=r:(r.next=u.next,u.next=r),s.pending=r}function T1(s,r,u){if((u&4194048)!==0){var h=r.lanes;h&=s.pendingLanes,u|=h,r.lanes=u,Au(s,u)}}var rc={readContext:Ie,use:ec,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de},D1={readContext:Ie,use:ec,useCallback:function(s,r){return cn().memoizedState=[s,r===void 0?null:r],s},useContext:Ie,useEffect:h1,useImperativeHandle:function(s,r,u){u=u!=null?u.concat([s]):null,lc(4194308,4,p1.bind(null,r,s),u)},useLayoutEffect:function(s,r){return lc(4194308,4,s,r)},useInsertionEffect:function(s,r){lc(4,2,s,r)},useMemo:function(s,r){var u=cn();r=r===void 0?null:r;var h=s();if(Ms){en(!0);try{s()}finally{en(!1)}}return u.memoizedState=[h,r],h},useReducer:function(s,r,u){var h=cn();if(u!==void 0){var g=u(r);if(Ms){en(!0);try{u(r)}finally{en(!1)}}}else g=r;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=ek.bind(null,Ot,s),[h.memoizedState,s]},useRef:function(s){var r=cn();return s={current:s},r.memoizedState=s},useState:function(s){s=Nd(s);var r=s.queue,u=E1.bind(null,Ot,r);return r.dispatch=u,[s.memoizedState,u]},useDebugValue:Bd,useDeferredValue:function(s,r){var u=cn();return zd(u,s,r)},useTransition:function(){var s=Nd(!1);return s=S1.bind(null,Ot,s.queue,!0,!1),cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,u){var h=Ot,g=cn();if(Gt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=r(),Qt===null)throw Error(i(349));(Ut&124)!==0||Wy(h,r,u)}g.memoizedState=u;var y={value:u,getSnapshot:r};return g.queue=y,h1(Qy.bind(null,h,y,s),[s]),h.flags|=2048,yr(9,ic(),Fy.bind(null,h,y,u,r),null),u},useId:function(){var s=cn(),r=Qt.identifierPrefix;if(Gt){var u=Xi,h=Pi;u=(h&~(1<<32-be(h)-1)).toString(32)+u,r="«"+r+"R"+u,u=tc++,0<u&&(r+="H"+u.toString(32)),r+="»"}else u=ZE++,r="«"+r+"r"+u.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:Hd,useFormState:o1,useActionState:o1,useOptimistic:function(s){var r=cn();r.memoizedState=r.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=Vd.bind(null,Ot,!0,u),u.dispatch=r,[s,r]},useMemoCache:Dd,useCacheRefresh:function(){return cn().memoizedState=tk.bind(null,Ot)}},O1={readContext:Ie,use:ec,useCallback:b1,useContext:Ie,useEffect:d1,useImperativeHandle:y1,useInsertionEffect:m1,useLayoutEffect:g1,useMemo:v1,useReducer:nc,useRef:f1,useState:function(){return nc(Ki)},useDebugValue:Bd,useDeferredValue:function(s,r){var u=Se();return x1(u,jt.memoizedState,s,r)},useTransition:function(){var s=nc(Ki)[0],r=Se().memoizedState;return[typeof s=="boolean"?s:Go(s),r]},useSyncExternalStore:Zy,useId:M1,useHostTransitionStatus:Hd,useFormState:a1,useActionState:a1,useOptimistic:function(s,r){var u=Se();return e1(u,jt,s,r)},useMemoCache:Dd,useCacheRefresh:C1},nk={readContext:Ie,use:ec,useCallback:b1,useContext:Ie,useEffect:d1,useImperativeHandle:y1,useInsertionEffect:m1,useLayoutEffect:g1,useMemo:v1,useReducer:Rd,useRef:f1,useState:function(){return Rd(Ki)},useDebugValue:Bd,useDeferredValue:function(s,r){var u=Se();return jt===null?zd(u,s,r):x1(u,jt.memoizedState,s,r)},useTransition:function(){var s=Rd(Ki)[0],r=Se().memoizedState;return[typeof s=="boolean"?s:Go(s),r]},useSyncExternalStore:Zy,useId:M1,useHostTransitionStatus:Hd,useFormState:c1,useActionState:c1,useOptimistic:function(s,r){var u=Se();return jt!==null?e1(u,jt,s,r):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:C1},br=null,jo=0;function oc(s){var r=jo;return jo+=1,br===null&&(br=[]),Yy(br,s,r)}function $o(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function ac(s,r){throw r.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function R1(s){var r=s._init;return r(s._payload)}function N1(s){function r(Y,V){if(s){var X=Y.deletions;X===null?(Y.deletions=[V],Y.flags|=16):X.push(V)}}function u(Y,V){if(!s)return null;for(;V!==null;)r(Y,V),V=V.sibling;return null}function h(Y){for(var V=new Map;Y!==null;)Y.key!==null?V.set(Y.key,Y):V.set(Y.index,Y),Y=Y.sibling;return V}function g(Y,V){return Y=Gi(Y,V),Y.index=0,Y.sibling=null,Y}function y(Y,V,X){return Y.index=X,s?(X=Y.alternate,X!==null?(X=X.index,X<V?(Y.flags|=67108866,V):X):(Y.flags|=67108866,V)):(Y.flags|=1048576,V)}function x(Y){return s&&Y.alternate===null&&(Y.flags|=67108866),Y}function M(Y,V,X,rt){return V===null||V.tag!==6?(V=sd(X,Y.mode,rt),V.return=Y,V):(V=g(V,X),V.return=Y,V)}function N(Y,V,X,rt){var gt=X.type;return gt===S?lt(Y,V,X.props.children,rt,X.key):V!==null&&(V.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===Q&&R1(gt)===V.type)?(V=g(V,X.props),$o(V,X),V.return=Y,V):(V=Xu(X.type,X.key,X.props,null,Y.mode,rt),$o(V,X),V.return=Y,V)}function $(Y,V,X,rt){return V===null||V.tag!==4||V.stateNode.containerInfo!==X.containerInfo||V.stateNode.implementation!==X.implementation?(V=rd(X,Y.mode,rt),V.return=Y,V):(V=g(V,X.children||[]),V.return=Y,V)}function lt(Y,V,X,rt,gt){return V===null||V.tag!==7?(V=ps(X,Y.mode,rt,gt),V.return=Y,V):(V=g(V,X),V.return=Y,V)}function ot(Y,V,X){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=sd(""+V,Y.mode,X),V.return=Y,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case b:return X=Xu(V.type,V.key,V.props,null,Y.mode,X),$o(X,V),X.return=Y,X;case v:return V=rd(V,Y.mode,X),V.return=Y,V;case Q:var rt=V._init;return V=rt(V._payload),ot(Y,V,X)}if(q(V)||F(V))return V=ps(V,Y.mode,X,null),V.return=Y,V;if(typeof V.then=="function")return ot(Y,oc(V),X);if(V.$$typeof===_)return ot(Y,Iu(Y,V),X);ac(Y,V)}return null}function K(Y,V,X,rt){var gt=V!==null?V.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return gt!==null?null:M(Y,V,""+X,rt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return X.key===gt?N(Y,V,X,rt):null;case v:return X.key===gt?$(Y,V,X,rt):null;case Q:return gt=X._init,X=gt(X._payload),K(Y,V,X,rt)}if(q(X)||F(X))return gt!==null?null:lt(Y,V,X,rt,null);if(typeof X.then=="function")return K(Y,V,oc(X),rt);if(X.$$typeof===_)return K(Y,V,Iu(Y,X),rt);ac(Y,X)}return null}function Z(Y,V,X,rt,gt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Y=Y.get(X)||null,M(V,Y,""+rt,gt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case b:return Y=Y.get(rt.key===null?X:rt.key)||null,N(V,Y,rt,gt);case v:return Y=Y.get(rt.key===null?X:rt.key)||null,$(V,Y,rt,gt);case Q:var Rt=rt._init;return rt=Rt(rt._payload),Z(Y,V,X,rt,gt)}if(q(rt)||F(rt))return Y=Y.get(X)||null,lt(V,Y,rt,gt,null);if(typeof rt.then=="function")return Z(Y,V,X,oc(rt),gt);if(rt.$$typeof===_)return Z(Y,V,X,Iu(V,rt),gt);ac(V,rt)}return null}function Mt(Y,V,X,rt){for(var gt=null,Rt=null,pt=V,At=V=0,ze=null;pt!==null&&At<X.length;At++){pt.index>At?(ze=pt,pt=null):ze=pt.sibling;var Yt=K(Y,pt,X[At],rt);if(Yt===null){pt===null&&(pt=ze);break}s&&pt&&Yt.alternate===null&&r(Y,pt),V=y(Yt,V,At),Rt===null?gt=Yt:Rt.sibling=Yt,Rt=Yt,pt=ze}if(At===X.length)return u(Y,pt),Gt&&bs(Y,At),gt;if(pt===null){for(;At<X.length;At++)pt=ot(Y,X[At],rt),pt!==null&&(V=y(pt,V,At),Rt===null?gt=pt:Rt.sibling=pt,Rt=pt);return Gt&&bs(Y,At),gt}for(pt=h(pt);At<X.length;At++)ze=Z(pt,Y,At,X[At],rt),ze!==null&&(s&&ze.alternate!==null&&pt.delete(ze.key===null?At:ze.key),V=y(ze,V,At),Rt===null?gt=ze:Rt.sibling=ze,Rt=ze);return s&&pt.forEach(function(Yl){return r(Y,Yl)}),Gt&&bs(Y,At),gt}function wt(Y,V,X,rt){if(X==null)throw Error(i(151));for(var gt=null,Rt=null,pt=V,At=V=0,ze=null,Yt=X.next();pt!==null&&!Yt.done;At++,Yt=X.next()){pt.index>At?(ze=pt,pt=null):ze=pt.sibling;var Yl=K(Y,pt,Yt.value,rt);if(Yl===null){pt===null&&(pt=ze);break}s&&pt&&Yl.alternate===null&&r(Y,pt),V=y(Yl,V,At),Rt===null?gt=Yl:Rt.sibling=Yl,Rt=Yl,pt=ze}if(Yt.done)return u(Y,pt),Gt&&bs(Y,At),gt;if(pt===null){for(;!Yt.done;At++,Yt=X.next())Yt=ot(Y,Yt.value,rt),Yt!==null&&(V=y(Yt,V,At),Rt===null?gt=Yt:Rt.sibling=Yt,Rt=Yt);return Gt&&bs(Y,At),gt}for(pt=h(pt);!Yt.done;At++,Yt=X.next())Yt=Z(pt,Y,At,Yt.value,rt),Yt!==null&&(s&&Yt.alternate!==null&&pt.delete(Yt.key===null?At:Yt.key),V=y(Yt,V,At),Rt===null?gt=Yt:Rt.sibling=Yt,Rt=Yt);return s&&pt.forEach(function(iT){return r(Y,iT)}),Gt&&bs(Y,At),gt}function Kt(Y,V,X,rt){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case b:t:{for(var gt=X.key;V!==null;){if(V.key===gt){if(gt=X.type,gt===S){if(V.tag===7){u(Y,V.sibling),rt=g(V,X.props.children),rt.return=Y,Y=rt;break t}}else if(V.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===Q&&R1(gt)===V.type){u(Y,V.sibling),rt=g(V,X.props),$o(rt,X),rt.return=Y,Y=rt;break t}u(Y,V);break}else r(Y,V);V=V.sibling}X.type===S?(rt=ps(X.props.children,Y.mode,rt,X.key),rt.return=Y,Y=rt):(rt=Xu(X.type,X.key,X.props,null,Y.mode,rt),$o(rt,X),rt.return=Y,Y=rt)}return x(Y);case v:t:{for(gt=X.key;V!==null;){if(V.key===gt)if(V.tag===4&&V.stateNode.containerInfo===X.containerInfo&&V.stateNode.implementation===X.implementation){u(Y,V.sibling),rt=g(V,X.children||[]),rt.return=Y,Y=rt;break t}else{u(Y,V);break}else r(Y,V);V=V.sibling}rt=rd(X,Y.mode,rt),rt.return=Y,Y=rt}return x(Y);case Q:return gt=X._init,X=gt(X._payload),Kt(Y,V,X,rt)}if(q(X))return Mt(Y,V,X,rt);if(F(X)){if(gt=F(X),typeof gt!="function")throw Error(i(150));return X=gt.call(X),wt(Y,V,X,rt)}if(typeof X.then=="function")return Kt(Y,V,oc(X),rt);if(X.$$typeof===_)return Kt(Y,V,Iu(Y,X),rt);ac(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,V!==null&&V.tag===6?(u(Y,V.sibling),rt=g(V,X),rt.return=Y,Y=rt):(u(Y,V),rt=sd(X,Y.mode,rt),rt.return=Y,Y=rt),x(Y)):u(Y,V)}return function(Y,V,X,rt){try{jo=0;var gt=Kt(Y,V,X,rt);return br=null,gt}catch(pt){if(pt===Lo||pt===Wu)throw pt;var Rt=An(29,pt,null,Y.mode);return Rt.lanes=rt,Rt.return=Y,Rt}finally{}}}var vr=N1(!0),_1=N1(!1),Gn=L(null),yi=null;function El(s){var r=s.alternate;W(Ce,Ce.current&1),W(Gn,s),yi===null&&(r===null||mr.current!==null||r.memoizedState!==null)&&(yi=s)}function B1(s){if(s.tag===22){if(W(Ce,Ce.current),W(Gn,s),yi===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(yi=s)}}else kl()}function kl(){W(Ce,Ce.current),W(Gn,Gn.current)}function Ii(s){G(Gn),yi===s&&(yi=null),G(Ce)}var Ce=L(0);function uc(s){for(var r=s;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Tm(u)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Ud(s,r,u,h){r=s.memoizedState,u=u(h,r),u=u==null?r:m({},r,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var qd={enqueueSetState:function(s,r,u){s=s._reactInternals;var h=kn(),g=Al(h);g.payload=r,u!=null&&(g.callback=u),r=Ml(s,g,h),r!==null&&(Tn(r,s,h),Vo(r,s,h))},enqueueReplaceState:function(s,r,u){s=s._reactInternals;var h=kn(),g=Al(h);g.tag=1,g.payload=r,u!=null&&(g.callback=u),r=Ml(s,g,h),r!==null&&(Tn(r,s,h),Vo(r,s,h))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var u=kn(),h=Al(u);h.tag=2,r!=null&&(h.callback=r),r=Ml(s,h,u),r!==null&&(Tn(r,s,u),Vo(r,s,u))}};function z1(s,r,u,h,g,y,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,x):r.prototype&&r.prototype.isPureReactComponent?!To(u,h)||!To(g,y):!0}function L1(s,r,u,h){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,h),r.state!==s&&qd.enqueueReplaceState(r,r.state,null)}function Cs(s,r){var u=r;if("ref"in r){u={};for(var h in r)h!=="ref"&&(u[h]=r[h])}if(s=s.defaultProps){u===r&&(u=m({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}var cc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function H1(s){cc(s)}function V1(s){console.error(s)}function U1(s){cc(s)}function fc(s,r){try{var u=s.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function q1(s,r,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Yd(s,r,u){return u=Al(u),u.tag=3,u.payload={element:null},u.callback=function(){fc(s,r)},u}function Y1(s){return s=Al(s),s.tag=3,s}function G1(s,r,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;s.payload=function(){return g(y)},s.callback=function(){q1(r,u,h)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){q1(r,u,h),typeof g!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function ik(s,r,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=u.alternate,r!==null&&_o(r,u,g,!0),u=Gn.current,u!==null){switch(u.tag){case 13:return yi===null?fm():u.alternate===null&&ce===0&&(ce=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===pd?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([h]):r.add(h),dm(s,h,g)),!1;case 22:return u.flags|=65536,h===pd?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([h]):u.add(h)),dm(s,h,g)),!1}throw Error(i(435,u.tag))}return dm(s,h,g),fm(),!1}if(Gt)return r=Gn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,h!==ud&&(s=Error(i(422),{cause:h}),No(Vn(s,u)))):(h!==ud&&(r=Error(i(423),{cause:h}),No(Vn(r,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=Vn(h,u),g=Yd(s.stateNode,h,g),vd(s,g),ce!==4&&(ce=2)),!1;var y=Error(i(520),{cause:h});if(y=Vn(y,u),Jo===null?Jo=[y]:Jo.push(y),ce!==4&&(ce=2),r===null)return!0;h=Vn(h,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=Yd(u.stateNode,h,s),vd(u,s),!1;case 1:if(r=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(_l===null||!_l.has(y))))return u.flags|=65536,g&=-g,u.lanes|=g,g=Y1(g),G1(g,s,u,h),vd(u,g),!1}u=u.return}while(u!==null);return!1}var P1=Error(i(461)),_e=!1;function Ve(s,r,u,h){r.child=s===null?_1(r,null,u,h):vr(r,s.child,u,h)}function X1(s,r,u,h,g){u=u.render;var y=r.ref;if("ref"in h){var x={};for(var M in h)M!=="ref"&&(x[M]=h[M])}else x=h;return ws(r),h=Md(s,r,u,x,y,g),M=Cd(),s!==null&&!_e?(Ed(s,r,g),Zi(s,r,g)):(Gt&&M&&od(r),r.flags|=1,Ve(s,r,h,g),r.child)}function j1(s,r,u,h,g){if(s===null){var y=u.type;return typeof y=="function"&&!ld(y)&&y.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=y,$1(s,r,y,h,g)):(s=Xu(u.type,null,h,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(y=s.child,!Zd(s,g)){var x=y.memoizedProps;if(u=u.compare,u=u!==null?u:To,u(x,h)&&s.ref===r.ref)return Zi(s,r,g)}return r.flags|=1,s=Gi(y,h),s.ref=r.ref,s.return=r,r.child=s}function $1(s,r,u,h,g){if(s!==null){var y=s.memoizedProps;if(To(y,h)&&s.ref===r.ref)if(_e=!1,r.pendingProps=h=y,Zd(s,g))(s.flags&131072)!==0&&(_e=!0);else return r.lanes=s.lanes,Zi(s,r,g)}return Gd(s,r,u,h,g)}function K1(s,r,u){var h=r.pendingProps,g=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=y!==null?y.baseLanes|u:u,s!==null){for(g=r.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;r.childLanes=y&~h}else r.childLanes=0,r.child=null;return I1(s,r,h,u)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Zu(r,y!==null?y.cachePool:null),y!==null?$y(r,y):Sd(),B1(r);else return r.lanes=r.childLanes=536870912,I1(s,r,y!==null?y.baseLanes|u:u,u)}else y!==null?(Zu(r,y.cachePool),$y(r,y),kl(),r.memoizedState=null):(s!==null&&Zu(r,null),Sd(),kl());return Ve(s,r,g,u),r.child}function I1(s,r,u,h){var g=gd();return g=g===null?null:{parent:Me._currentValue,pool:g},r.memoizedState={baseLanes:u,cachePool:g},s!==null&&Zu(r,null),Sd(),B1(r),s!==null&&_o(s,r,h,!0),null}function hc(s,r){var u=r.ref;if(u===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(r.flags|=4194816)}}function Gd(s,r,u,h,g){return ws(r),u=Md(s,r,u,h,void 0,g),h=Cd(),s!==null&&!_e?(Ed(s,r,g),Zi(s,r,g)):(Gt&&h&&od(r),r.flags|=1,Ve(s,r,u,g),r.child)}function Z1(s,r,u,h,g,y){return ws(r),r.updateQueue=null,u=Iy(r,h,u,g),Ky(s),h=Cd(),s!==null&&!_e?(Ed(s,r,y),Zi(s,r,y)):(Gt&&h&&od(r),r.flags|=1,Ve(s,r,u,y),r.child)}function W1(s,r,u,h,g){if(ws(r),r.stateNode===null){var y=ur,x=u.contextType;typeof x=="object"&&x!==null&&(y=Ie(x)),y=new u(h,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=qd,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=h,y.state=r.memoizedState,y.refs={},yd(r),x=u.contextType,y.context=typeof x=="object"&&x!==null?Ie(x):ur,y.state=r.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(Ud(r,u,x,h),y.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&qd.enqueueReplaceState(y,y.state,null),qo(r,h,y,g),Uo(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(s===null){y=r.stateNode;var M=r.memoizedProps,N=Cs(u,M);y.props=N;var $=y.context,lt=u.contextType;x=ur,typeof lt=="object"&&lt!==null&&(x=Ie(lt));var ot=u.getDerivedStateFromProps;lt=typeof ot=="function"||typeof y.getSnapshotBeforeUpdate=="function",M=r.pendingProps!==M,lt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M||$!==x)&&L1(r,y,h,x),wl=!1;var K=r.memoizedState;y.state=K,qo(r,h,y,g),Uo(),$=r.memoizedState,M||K!==$||wl?(typeof ot=="function"&&(Ud(r,u,ot,h),$=r.memoizedState),(N=wl||z1(r,u,N,h,K,$,x))?(lt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=$),y.props=h,y.state=$,y.context=x,h=N):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{y=r.stateNode,bd(s,r),x=r.memoizedProps,lt=Cs(u,x),y.props=lt,ot=r.pendingProps,K=y.context,$=u.contextType,N=ur,typeof $=="object"&&$!==null&&(N=Ie($)),M=u.getDerivedStateFromProps,($=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==ot||K!==N)&&L1(r,y,h,N),wl=!1,K=r.memoizedState,y.state=K,qo(r,h,y,g),Uo();var Z=r.memoizedState;x!==ot||K!==Z||wl||s!==null&&s.dependencies!==null&&Ku(s.dependencies)?(typeof M=="function"&&(Ud(r,u,M,h),Z=r.memoizedState),(lt=wl||z1(r,u,lt,h,K,Z,N)||s!==null&&s.dependencies!==null&&Ku(s.dependencies))?($||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,Z,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,Z,N)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Z),y.props=h,y.state=Z,y.context=N,h=lt):(typeof y.componentDidUpdate!="function"||x===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),h=!1)}return y=h,hc(s,r),h=(r.flags&128)!==0,y||h?(y=r.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,s!==null&&h?(r.child=vr(r,s.child,null,g),r.child=vr(r,null,u,g)):Ve(s,r,u,g),r.memoizedState=y.state,s=r.child):s=Zi(s,r,g),s}function F1(s,r,u,h){return Ro(),r.flags|=256,Ve(s,r,u,h),r.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(s){return{baseLanes:s,cachePool:Vy()}}function jd(s,r,u){return s=s!==null?s.childLanes&~u:0,r&&(s|=Pn),s}function Q1(s,r,u){var h=r.pendingProps,g=!1,y=(r.flags&128)!==0,x;if((x=y)||(x=s!==null&&s.memoizedState===null?!1:(Ce.current&2)!==0),x&&(g=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,s===null){if(Gt){if(g?El(r):kl(),Gt){var M=ue,N;if(N=M){t:{for(N=M,M=pi;N.nodeType!==8;){if(!M){M=null;break t}if(N=li(N.nextSibling),N===null){M=null;break t}}M=N}M!==null?(r.memoizedState={dehydrated:M,treeContext:ys!==null?{id:Pi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},N=An(18,null,null,0),N.stateNode=M,N.return=r,r.child=N,ln=r,ue=null,N=!0):N=!1}N||xs(r)}if(M=r.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Tm(M)?r.lanes=32:r.lanes=536870912,null;Ii(r)}return M=h.children,h=h.fallback,g?(kl(),g=r.mode,M=dc({mode:"hidden",children:M},g),h=ps(h,g,u,null),M.return=r,h.return=r,M.sibling=h,r.child=M,g=r.child,g.memoizedState=Xd(u),g.childLanes=jd(s,x,u),r.memoizedState=Pd,h):(El(r),$d(r,M))}if(N=s.memoizedState,N!==null&&(M=N.dehydrated,M!==null)){if(y)r.flags&256?(El(r),r.flags&=-257,r=Kd(s,r,u)):r.memoizedState!==null?(kl(),r.child=s.child,r.flags|=128,r=null):(kl(),g=h.fallback,M=r.mode,h=dc({mode:"visible",children:h.children},M),g=ps(g,M,u,null),g.flags|=2,h.return=r,g.return=r,h.sibling=g,r.child=h,vr(r,s.child,null,u),h=r.child,h.memoizedState=Xd(u),h.childLanes=jd(s,x,u),r.memoizedState=Pd,r=g);else if(El(r),Tm(M)){if(x=M.nextSibling&&M.nextSibling.dataset,x)var $=x.dgst;x=$,h=Error(i(419)),h.stack="",h.digest=x,No({value:h,source:null,stack:null}),r=Kd(s,r,u)}else if(_e||_o(s,r,u,!1),x=(u&s.childLanes)!==0,_e||x){if(x=Qt,x!==null&&(h=u&-u,h=(h&42)!==0?1:po(h),h=(h&(x.suspendedLanes|u))!==0?0:h,h!==0&&h!==N.retryLane))throw N.retryLane=h,ar(s,h),Tn(x,s,h),P1;M.data==="$?"||fm(),r=Kd(s,r,u)}else M.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=N.treeContext,ue=li(M.nextSibling),ln=r,Gt=!0,vs=null,pi=!1,s!==null&&(qn[Yn++]=Pi,qn[Yn++]=Xi,qn[Yn++]=ys,Pi=s.id,Xi=s.overflow,ys=r),r=$d(r,h.children),r.flags|=4096);return r}return g?(kl(),g=h.fallback,M=r.mode,N=s.child,$=N.sibling,h=Gi(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,$!==null?g=Gi($,g):(g=ps(g,M,u,null),g.flags|=2),g.return=r,h.return=r,h.sibling=g,r.child=h,h=g,g=r.child,M=s.child.memoizedState,M===null?M=Xd(u):(N=M.cachePool,N!==null?($=Me._currentValue,N=N.parent!==$?{parent:$,pool:$}:N):N=Vy(),M={baseLanes:M.baseLanes|u,cachePool:N}),g.memoizedState=M,g.childLanes=jd(s,x,u),r.memoizedState=Pd,h):(El(r),u=s.child,s=u.sibling,u=Gi(u,{mode:"visible",children:h.children}),u.return=r,u.sibling=null,s!==null&&(x=r.deletions,x===null?(r.deletions=[s],r.flags|=16):x.push(s)),r.child=u,r.memoizedState=null,u)}function $d(s,r){return r=dc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function dc(s,r){return s=An(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Kd(s,r,u){return vr(r,s.child,null,u),s=$d(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function J1(s,r,u){s.lanes|=r;var h=s.alternate;h!==null&&(h.lanes|=r),fd(s.return,r,u)}function Id(s,r,u,h,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=g)}function tb(s,r,u){var h=r.pendingProps,g=h.revealOrder,y=h.tail;if(Ve(s,r,h.children,u),h=Ce.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&J1(s,u,r);else if(s.tag===19)J1(s,u,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(W(Ce,h),g){case"forwards":for(u=r.child,g=null;u!==null;)s=u.alternate,s!==null&&uc(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=r.child,r.child=null):(g=u.sibling,u.sibling=null),Id(r,!1,g,u,y);break;case"backwards":for(u=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&uc(s)===null){r.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Id(r,!0,u,null,y);break;case"together":Id(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Zi(s,r,u){if(s!==null&&(r.dependencies=s.dependencies),Nl|=r.lanes,(u&r.childLanes)===0)if(s!==null){if(_o(s,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,u=Gi(s,s.pendingProps),r.child=u,u.return=r;s.sibling!==null;)s=s.sibling,u=u.sibling=Gi(s,s.pendingProps),u.return=r;u.sibling=null}return r.child}function Zd(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Ku(s)))}function lk(s,r,u){switch(r.tag){case 3:vt(r,r.stateNode.containerInfo),Sl(r,Me,s.memoizedState.cache),Ro();break;case 27:case 5:zt(r);break;case 4:vt(r,r.stateNode.containerInfo);break;case 10:Sl(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(El(r),r.flags|=128,null):(u&r.child.childLanes)!==0?Q1(s,r,u):(El(r),s=Zi(s,r,u),s!==null?s.sibling:null);El(r);break;case 19:var g=(s.flags&128)!==0;if(h=(u&r.childLanes)!==0,h||(_o(s,r,u,!1),h=(u&r.childLanes)!==0),g){if(h)return tb(s,r,u);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(Ce,Ce.current),h)break;return null;case 22:case 23:return r.lanes=0,K1(s,r,u);case 24:Sl(r,Me,s.memoizedState.cache)}return Zi(s,r,u)}function eb(s,r,u){if(s!==null)if(s.memoizedProps!==r.pendingProps)_e=!0;else{if(!Zd(s,u)&&(r.flags&128)===0)return _e=!1,lk(s,r,u);_e=(s.flags&131072)!==0}else _e=!1,Gt&&(r.flags&1048576)!==0&&Ry(r,$u,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var h=r.elementType,g=h._init;if(h=g(h._payload),r.type=h,typeof h=="function")ld(h)?(s=Cs(h,s),r.tag=1,r=W1(null,r,h,s,u)):(r.tag=0,r=Gd(null,r,h,s,u));else{if(h!=null){if(g=h.$$typeof,g===D){r.tag=11,r=X1(null,r,h,s,u);break t}else if(g===U){r.tag=14,r=j1(null,r,h,s,u);break t}}throw r=T(h)||h,Error(i(306,r,""))}}return r;case 0:return Gd(s,r,r.type,r.pendingProps,u);case 1:return h=r.type,g=Cs(h,r.pendingProps),W1(s,r,h,g,u);case 3:t:{if(vt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));h=r.pendingProps;var y=r.memoizedState;g=y.element,bd(s,r),qo(r,h,null,u);var x=r.memoizedState;if(h=x.cache,Sl(r,Me,h),h!==y.cache&&hd(r,[Me],u,!0),Uo(),h=x.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=F1(s,r,h,u);break t}else if(h!==g){g=Vn(Error(i(424)),r),No(g),r=F1(s,r,h,u);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ue=li(s.firstChild),ln=r,Gt=!0,vs=null,pi=!0,u=_1(r,null,h,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ro(),h===g){r=Zi(s,r,u);break t}Ve(s,r,h,u)}r=r.child}return r;case 26:return hc(s,r),s===null?(u=sv(r.type,null,r.pendingProps,null))?r.memoizedState=u:Gt||(u=r.type,s=r.pendingProps,h=kc(ct.current).createElement(u),h[Ne]=r,h[Ke]=s,qe(h,u,s),ve(h),r.stateNode=h):r.memoizedState=sv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return zt(r),s===null&&Gt&&(h=r.stateNode=nv(r.type,r.pendingProps,ct.current),ln=r,pi=!0,g=ue,Ll(r.type)?(Dm=g,ue=li(h.firstChild)):ue=g),Ve(s,r,r.pendingProps.children,u),hc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Gt&&((g=h=ue)&&(h=Nk(h,r.type,r.pendingProps,pi),h!==null?(r.stateNode=h,ln=r,ue=li(h.firstChild),pi=!1,g=!0):g=!1),g||xs(r)),zt(r),g=r.type,y=r.pendingProps,x=s!==null?s.memoizedProps:null,h=y.children,Cm(g,y)?h=null:x!==null&&Cm(g,x)&&(r.flags|=32),r.memoizedState!==null&&(g=Md(s,r,WE,null,null,u),aa._currentValue=g),hc(s,r),Ve(s,r,h,u),r.child;case 6:return s===null&&Gt&&((s=u=ue)&&(u=_k(u,r.pendingProps,pi),u!==null?(r.stateNode=u,ln=r,ue=null,s=!0):s=!1),s||xs(r)),null;case 13:return Q1(s,r,u);case 4:return vt(r,r.stateNode.containerInfo),h=r.pendingProps,s===null?r.child=vr(r,null,h,u):Ve(s,r,h,u),r.child;case 11:return X1(s,r,r.type,r.pendingProps,u);case 7:return Ve(s,r,r.pendingProps,u),r.child;case 8:return Ve(s,r,r.pendingProps.children,u),r.child;case 12:return Ve(s,r,r.pendingProps.children,u),r.child;case 10:return h=r.pendingProps,Sl(r,r.type,h.value),Ve(s,r,h.children,u),r.child;case 9:return g=r.type._context,h=r.pendingProps.children,ws(r),g=Ie(g),h=h(g),r.flags|=1,Ve(s,r,h,u),r.child;case 14:return j1(s,r,r.type,r.pendingProps,u);case 15:return $1(s,r,r.type,r.pendingProps,u);case 19:return tb(s,r,u);case 31:return h=r.pendingProps,u=r.mode,h={mode:h.mode,children:h.children},s===null?(u=dc(h,u),u.ref=r.ref,r.child=u,u.return=r,r=u):(u=Gi(s.child,h),u.ref=r.ref,r.child=u,u.return=r,r=u),r;case 22:return K1(s,r,u);case 24:return ws(r),h=Ie(Me),s===null?(g=gd(),g===null&&(g=Qt,y=dd(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=u),g=y),r.memoizedState={parent:h,cache:g},yd(r),Sl(r,Me,g)):((s.lanes&u)!==0&&(bd(s,r),qo(r,null,null,u),Uo()),g=s.memoizedState,y=r.memoizedState,g.parent!==h?(g={parent:h,cache:h},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Sl(r,Me,h)):(h=y.cache,Sl(r,Me,h),h!==g.cache&&hd(r,[Me],u,!0))),Ve(s,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Wi(s){s.flags|=4}function nb(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!cv(r)){if(r=Gn.current,r!==null&&((Ut&4194048)===Ut?yi!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||r!==yi))throw Ho=pd,Uy;s.flags|=8192}}function mc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?dl():536870912,s.lanes|=r,Ar|=r)}function Ko(s,r){if(!Gt)switch(s.tailMode){case"hidden":r=s.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function re(s){var r=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(r)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,r}function sk(s,r,u){var h=r.pendingProps;switch(ad(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(r),null;case 1:return re(r),null;case 3:return u=r.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),$i(Me),Tt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Oo(r)?Wi(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,By())),re(r),null;case 26:return u=r.memoizedState,s===null?(Wi(r),u!==null?(re(r),nb(r,u)):(re(r),r.flags&=-16777217)):u?u!==s.memoizedState?(Wi(r),re(r),nb(r,u)):(re(r),r.flags&=-16777217):(s.memoizedProps!==h&&Wi(r),re(r),r.flags&=-16777217),null;case 27:ae(r),u=ct.current;var g=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==h&&Wi(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return re(r),null}s=it.current,Oo(r)?Ny(r):(s=nv(g,h,u),r.stateNode=s,Wi(r))}return re(r),null;case 5:if(ae(r),u=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&Wi(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return re(r),null}if(s=it.current,Oo(r))Ny(r);else{switch(g=kc(ct.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?g.createElement(u,{is:h.is}):g.createElement(u)}}s[Ne]=r,s[Ke]=h;t:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break t;for(;g.sibling===null;){if(g.return===null||g.return===r)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=s;t:switch(qe(s,u,h),u){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Wi(r)}}return re(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==h&&Wi(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(s=ct.current,Oo(r)){if(s=r.stateNode,u=r.memoizedProps,h=null,g=ln,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[Ne]=r,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Zb(s.nodeValue,u)),s||xs(r)}else s=kc(s).createTextNode(h),s[Ne]=r,r.stateNode=s}return re(r),null;case 13:if(h=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Oo(r),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ne]=r}else Ro(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;re(r),g=!1}else g=By(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Ii(r),r):(Ii(r),null)}if(Ii(r),(r.flags&128)!==0)return r.lanes=u,r;if(u=h!==null,s=s!==null&&s.memoizedState!==null,u){h=r.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return u!==s&&u&&(r.child.flags|=8192),mc(r,r.updateQueue),re(r),null;case 4:return Tt(),s===null&&xm(r.stateNode.containerInfo),re(r),null;case 10:return $i(r.type),re(r),null;case 19:if(G(Ce),g=r.memoizedState,g===null)return re(r),null;if(h=(r.flags&128)!==0,y=g.rendering,y===null)if(h)Ko(g,!1);else{if(ce!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(y=uc(s),y!==null){for(r.flags|=128,Ko(g,!1),s=y.updateQueue,r.updateQueue=s,mc(r,s),r.subtreeFlags=0,s=u,u=r.child;u!==null;)Oy(u,s),u=u.sibling;return W(Ce,Ce.current&1|2),r.child}s=s.sibling}g.tail!==null&&Dt()>yc&&(r.flags|=128,h=!0,Ko(g,!1),r.lanes=4194304)}else{if(!h)if(s=uc(y),s!==null){if(r.flags|=128,h=!0,s=s.updateQueue,r.updateQueue=s,mc(r,s),Ko(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Gt)return re(r),null}else 2*Dt()-g.renderingStartTime>yc&&u!==536870912&&(r.flags|=128,h=!0,Ko(g,!1),r.lanes=4194304);g.isBackwards?(y.sibling=r.child,r.child=y):(s=g.last,s!==null?s.sibling=y:r.child=y,g.last=y)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Dt(),r.sibling=null,s=Ce.current,W(Ce,h?s&1|2:s&1),r):(re(r),null);case 22:case 23:return Ii(r),wd(),h=r.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(u&536870912)!==0&&(r.flags&128)===0&&(re(r),r.subtreeFlags&6&&(r.flags|=8192)):re(r),u=r.updateQueue,u!==null&&mc(r,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==u&&(r.flags|=2048),s!==null&&G(As),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),$i(Me),re(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function rk(s,r){switch(ad(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return $i(Me),Tt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ae(r),null;case 13:if(Ii(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ro()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return G(Ce),null;case 4:return Tt(),null;case 10:return $i(r.type),null;case 22:case 23:return Ii(r),wd(),s!==null&&G(As),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return $i(Me),null;case 25:return null;default:return null}}function ib(s,r){switch(ad(r),r.tag){case 3:$i(Me),Tt();break;case 26:case 27:case 5:ae(r);break;case 4:Tt();break;case 13:Ii(r);break;case 19:G(Ce);break;case 10:$i(r.type);break;case 22:case 23:Ii(r),wd(),s!==null&&G(As);break;case 24:$i(Me)}}function Io(s,r){try{var u=r.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&s)===s){h=void 0;var y=u.create,x=u.inst;h=y(),x.destroy=h}u=u.next}while(u!==g)}}catch(M){It(r,r.return,M)}}function Tl(s,r,u){try{var h=r.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&s)===s){var x=h.inst,M=x.destroy;if(M!==void 0){x.destroy=void 0,g=r;var N=u,$=M;try{$()}catch(lt){It(g,N,lt)}}}h=h.next}while(h!==y)}}catch(lt){It(r,r.return,lt)}}function lb(s){var r=s.updateQueue;if(r!==null){var u=s.stateNode;try{jy(r,u)}catch(h){It(s,s.return,h)}}}function sb(s,r,u){u.props=Cs(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){It(s,r,h)}}function Zo(s,r){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(g){It(s,r,g)}}function bi(s,r){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){It(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){It(s,r,g)}else u.current=null}function rb(s){var r=s.type,u=s.memoizedProps,h=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break t;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){It(s,s.return,g)}}function Wd(s,r,u){try{var h=s.stateNode;kk(h,s.type,u,r),h[Ke]=r}catch(g){It(s,s.return,g)}}function ob(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ll(s.type)||s.tag===4}function Fd(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||ob(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ll(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qd(s,r,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,r):(r=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,r.appendChild(s),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=Ec));else if(h!==4&&(h===27&&Ll(s.type)&&(u=s.stateNode,r=null),s=s.child,s!==null))for(Qd(s,r,u),s=s.sibling;s!==null;)Qd(s,r,u),s=s.sibling}function gc(s,r,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?u.insertBefore(s,r):u.appendChild(s);else if(h!==4&&(h===27&&Ll(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(gc(s,r,u),s=s.sibling;s!==null;)gc(s,r,u),s=s.sibling}function ab(s){var r=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);qe(r,h,u),r[Ne]=s,r[Ke]=u}catch(y){It(s,s.return,y)}}var Fi=!1,me=!1,Jd=!1,ub=typeof WeakSet=="function"?WeakSet:Set,Be=null;function ok(s,r){if(s=s.containerInfo,Am=_c,s=xy(s),Fh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break t}var x=0,M=-1,N=-1,$=0,lt=0,ot=s,K=null;e:for(;;){for(var Z;ot!==u||g!==0&&ot.nodeType!==3||(M=x+g),ot!==y||h!==0&&ot.nodeType!==3||(N=x+h),ot.nodeType===3&&(x+=ot.nodeValue.length),(Z=ot.firstChild)!==null;)K=ot,ot=Z;for(;;){if(ot===s)break e;if(K===u&&++$===g&&(M=x),K===y&&++lt===h&&(N=x),(Z=ot.nextSibling)!==null)break;ot=K,K=ot.parentNode}ot=Z}u=M===-1||N===-1?null:{start:M,end:N}}else u=null}u=u||{start:0,end:0}}else u=null;for(Mm={focusedElem:s,selectionRange:u},_c=!1,Be=r;Be!==null;)if(r=Be,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Be=s;else for(;Be!==null;){switch(r=Be,y=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,u=r,g=y.memoizedProps,y=y.memoizedState,h=u.stateNode;try{var Mt=Cs(u.type,g,u.elementType===u.type);s=h.getSnapshotBeforeUpdate(Mt,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(wt){It(u,u.return,wt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,u=s.nodeType,u===9)km(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":km(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Be=s;break}Be=r.return}}function cb(s,r,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Dl(s,u),h&4&&Io(5,u);break;case 1:if(Dl(s,u),h&4)if(s=u.stateNode,r===null)try{s.componentDidMount()}catch(x){It(u,u.return,x)}else{var g=Cs(u.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(x){It(u,u.return,x)}}h&64&&lb(u),h&512&&Zo(u,u.return);break;case 3:if(Dl(s,u),h&64&&(s=u.updateQueue,s!==null)){if(r=null,u.child!==null)switch(u.child.tag){case 27:case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}try{jy(s,r)}catch(x){It(u,u.return,x)}}break;case 27:r===null&&h&4&&ab(u);case 26:case 5:Dl(s,u),r===null&&h&4&&rb(u),h&512&&Zo(u,u.return);break;case 12:Dl(s,u);break;case 13:Dl(s,u),h&4&&db(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=pk.bind(null,u),Bk(s,u))));break;case 22:if(h=u.memoizedState!==null||Fi,!h){r=r!==null&&r.memoizedState!==null||me,g=Fi;var y=me;Fi=h,(me=r)&&!y?Ol(s,u,(u.subtreeFlags&8772)!==0):Dl(s,u),Fi=g,me=y}break;case 30:break;default:Dl(s,u)}}function fb(s){var r=s.alternate;r!==null&&(s.alternate=null,fb(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&vo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ne=null,fn=!1;function Qi(s,r,u){for(u=u.child;u!==null;)hb(s,r,u),u=u.sibling}function hb(s,r,u){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(xn,u)}catch{}switch(u.tag){case 26:me||bi(u,r),Qi(s,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:me||bi(u,r);var h=ne,g=fn;Ll(u.type)&&(ne=u.stateNode,fn=!1),Qi(s,r,u),la(u.stateNode),ne=h,fn=g;break;case 5:me||bi(u,r);case 6:if(h=ne,g=fn,ne=null,Qi(s,r,u),ne=h,fn=g,ne!==null)if(fn)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(u.stateNode)}catch(y){It(u,r,y)}else try{ne.removeChild(u.stateNode)}catch(y){It(u,r,y)}break;case 18:ne!==null&&(fn?(s=ne,tv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),ha(s)):tv(ne,u.stateNode));break;case 4:h=ne,g=fn,ne=u.stateNode.containerInfo,fn=!0,Qi(s,r,u),ne=h,fn=g;break;case 0:case 11:case 14:case 15:me||Tl(2,u,r),me||Tl(4,u,r),Qi(s,r,u);break;case 1:me||(bi(u,r),h=u.stateNode,typeof h.componentWillUnmount=="function"&&sb(u,r,h)),Qi(s,r,u);break;case 21:Qi(s,r,u);break;case 22:me=(h=me)||u.memoizedState!==null,Qi(s,r,u),me=h;break;default:Qi(s,r,u)}}function db(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ha(s)}catch(u){It(r,r.return,u)}}function ak(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new ub),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new ub),r;default:throw Error(i(435,s.tag))}}function tm(s,r){var u=ak(s);r.forEach(function(h){var g=yk.bind(null,s,h);u.has(h)||(u.add(h),h.then(g,g))})}function Mn(s,r){var u=r.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],y=s,x=r,M=x;t:for(;M!==null;){switch(M.tag){case 27:if(Ll(M.type)){ne=M.stateNode,fn=!1;break t}break;case 5:ne=M.stateNode,fn=!1;break t;case 3:case 4:ne=M.stateNode.containerInfo,fn=!0;break t}M=M.return}if(ne===null)throw Error(i(160));hb(y,x,g),ne=null,fn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)mb(r,s),r=r.sibling}var ii=null;function mb(s,r){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mn(r,s),Cn(s),h&4&&(Tl(3,s,s.return),Io(3,s),Tl(5,s,s.return));break;case 1:Mn(r,s),Cn(s),h&512&&(me||u===null||bi(u,u.return)),h&64&&Fi&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=ii;if(Mn(r,s),Cn(s),h&512&&(me||u===null||bi(u,u.return)),h&4){var y=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){t:{h=s.type,u=s.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[cs]||y[Ne]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),qe(y,h,u),y[Ne]=s,ve(y),h=y;break t;case"link":var x=av("link","href",g).get(h+(u.href||""));if(x){for(var M=0;M<x.length;M++)if(y=x[M],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(M,1);break e}}y=g.createElement(h),qe(y,h,u),g.head.appendChild(y);break;case"meta":if(x=av("meta","content",g).get(h+(u.content||""))){for(M=0;M<x.length;M++)if(y=x[M],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(M,1);break e}}y=g.createElement(h),qe(y,h,u),g.head.appendChild(y);break;default:throw Error(i(468,h))}y[Ne]=s,ve(y),h=y}s.stateNode=h}else uv(g,s.type,s.stateNode);else s.stateNode=ov(g,h,s.memoizedProps);else y!==h?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,h===null?uv(g,s.type,s.stateNode):ov(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Wd(s,s.memoizedProps,u.memoizedProps)}break;case 27:Mn(r,s),Cn(s),h&512&&(me||u===null||bi(u,u.return)),u!==null&&h&4&&Wd(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Mn(r,s),Cn(s),h&512&&(me||u===null||bi(u,u.return)),s.flags&32){g=s.stateNode;try{er(g,"")}catch(Z){It(s,s.return,Z)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,Wd(s,g,u!==null?u.memoizedProps:g)),h&1024&&(Jd=!0);break;case 6:if(Mn(r,s),Cn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Z){It(s,s.return,Z)}}break;case 3:if(Oc=null,g=ii,ii=Tc(r.containerInfo),Mn(r,s),ii=g,Cn(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{ha(r.containerInfo)}catch(Z){It(s,s.return,Z)}Jd&&(Jd=!1,gb(s));break;case 4:h=ii,ii=Tc(s.stateNode.containerInfo),Mn(r,s),Cn(s),ii=h;break;case 12:Mn(r,s),Cn(s);break;case 13:Mn(r,s),Cn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(rm=Dt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,tm(s,h)));break;case 22:g=s.memoizedState!==null;var N=u!==null&&u.memoizedState!==null,$=Fi,lt=me;if(Fi=$||g,me=lt||N,Mn(r,s),me=lt,Fi=$,Cn(s),h&8192)t:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(u===null||N||Fi||me||Es(s)),u=null,r=s;;){if(r.tag===5||r.tag===26){if(u===null){N=u=r;try{if(y=N.stateNode,g)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{M=N.stateNode;var ot=N.memoizedProps.style,K=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;M.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Z){It(N,N.return,Z)}}}else if(r.tag===6){if(u===null){N=r;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(Z){It(N,N.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,tm(s,u))));break;case 19:Mn(r,s),Cn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,tm(s,h)));break;case 30:break;case 21:break;default:Mn(r,s),Cn(s)}}function Cn(s){var r=s.flags;if(r&2){try{for(var u,h=s.return;h!==null;){if(ob(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,y=Fd(s);gc(s,y,g);break;case 5:var x=u.stateNode;u.flags&32&&(er(x,""),u.flags&=-33);var M=Fd(s);gc(s,M,x);break;case 3:case 4:var N=u.stateNode.containerInfo,$=Fd(s);Qd(s,$,N);break;default:throw Error(i(161))}}catch(lt){It(s,s.return,lt)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function gb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;gb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Dl(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)cb(s,r.alternate,r),r=r.sibling}function Es(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Tl(4,r,r.return),Es(r);break;case 1:bi(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&sb(r,r.return,u),Es(r);break;case 27:la(r.stateNode);case 26:case 5:bi(r,r.return),Es(r);break;case 22:r.memoizedState===null&&Es(r);break;case 30:Es(r);break;default:Es(r)}s=s.sibling}}function Ol(s,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,g=s,y=r,x=y.flags;switch(y.tag){case 0:case 11:case 15:Ol(g,y,u),Io(4,y);break;case 1:if(Ol(g,y,u),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch($){It(h,h.return,$)}if(h=y,g=h.updateQueue,g!==null){var M=h.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)Xy(N[g],M)}catch($){It(h,h.return,$)}}u&&x&64&&lb(y),Zo(y,y.return);break;case 27:ab(y);case 26:case 5:Ol(g,y,u),u&&h===null&&x&4&&rb(y),Zo(y,y.return);break;case 12:Ol(g,y,u);break;case 13:Ol(g,y,u),u&&x&4&&db(g,y);break;case 22:y.memoizedState===null&&Ol(g,y,u),Zo(y,y.return);break;case 30:break;default:Ol(g,y,u)}r=r.sibling}}function em(s,r){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Bo(u))}function nm(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Bo(s))}function vi(s,r,u,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)pb(s,r,u,h),r=r.sibling}function pb(s,r,u,h){var g=r.flags;switch(r.tag){case 0:case 11:case 15:vi(s,r,u,h),g&2048&&Io(9,r);break;case 1:vi(s,r,u,h);break;case 3:vi(s,r,u,h),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Bo(s)));break;case 12:if(g&2048){vi(s,r,u,h),s=r.stateNode;try{var y=r.memoizedProps,x=y.id,M=y.onPostCommit;typeof M=="function"&&M(x,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){It(r,r.return,N)}}else vi(s,r,u,h);break;case 13:vi(s,r,u,h);break;case 23:break;case 22:y=r.stateNode,x=r.alternate,r.memoizedState!==null?y._visibility&2?vi(s,r,u,h):Wo(s,r):y._visibility&2?vi(s,r,u,h):(y._visibility|=2,xr(s,r,u,h,(r.subtreeFlags&10256)!==0)),g&2048&&em(x,r);break;case 24:vi(s,r,u,h),g&2048&&nm(r.alternate,r);break;default:vi(s,r,u,h)}}function xr(s,r,u,h,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var y=s,x=r,M=u,N=h,$=x.flags;switch(x.tag){case 0:case 11:case 15:xr(y,x,M,N,g),Io(8,x);break;case 23:break;case 22:var lt=x.stateNode;x.memoizedState!==null?lt._visibility&2?xr(y,x,M,N,g):Wo(y,x):(lt._visibility|=2,xr(y,x,M,N,g)),g&&$&2048&&em(x.alternate,x);break;case 24:xr(y,x,M,N,g),g&&$&2048&&nm(x.alternate,x);break;default:xr(y,x,M,N,g)}r=r.sibling}}function Wo(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=s,h=r,g=h.flags;switch(h.tag){case 22:Wo(u,h),g&2048&&em(h.alternate,h);break;case 24:Wo(u,h),g&2048&&nm(h.alternate,h);break;default:Wo(u,h)}r=r.sibling}}var Fo=8192;function Sr(s){if(s.subtreeFlags&Fo)for(s=s.child;s!==null;)yb(s),s=s.sibling}function yb(s){switch(s.tag){case 26:Sr(s),s.flags&Fo&&s.memoizedState!==null&&Kk(ii,s.memoizedState,s.memoizedProps);break;case 5:Sr(s);break;case 3:case 4:var r=ii;ii=Tc(s.stateNode.containerInfo),Sr(s),ii=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Fo,Fo=16777216,Sr(s),Fo=r):Sr(s));break;default:Sr(s)}}function bb(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Qo(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var h=r[u];Be=h,xb(h,s)}bb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vb(s),s=s.sibling}function vb(s){switch(s.tag){case 0:case 11:case 15:Qo(s),s.flags&2048&&Tl(9,s,s.return);break;case 3:Qo(s);break;case 12:Qo(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,pc(s)):Qo(s);break;default:Qo(s)}}function pc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var h=r[u];Be=h,xb(h,s)}bb(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Tl(8,r,r.return),pc(r);break;case 22:u=r.stateNode,u._visibility&2&&(u._visibility&=-3,pc(r));break;default:pc(r)}s=s.sibling}}function xb(s,r){for(;Be!==null;){var u=Be;switch(u.tag){case 0:case 11:case 15:Tl(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Bo(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Be=h;else t:for(u=s;Be!==null;){h=Be;var g=h.sibling,y=h.return;if(fb(h),h===u){Be=null;break t}if(g!==null){g.return=y,Be=g;break t}Be=y}}}var uk={getCacheForType:function(s){var r=Ie(Me),u=r.data.get(s);return u===void 0&&(u=s(),r.data.set(s,u)),u}},ck=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Qt=null,_t=null,Ut=0,Xt=0,En=null,Rl=!1,wr=!1,im=!1,Ji=0,ce=0,Nl=0,ks=0,lm=0,Pn=0,Ar=0,Jo=null,hn=null,sm=!1,rm=0,yc=1/0,bc=null,_l=null,Ue=0,Bl=null,Mr=null,Cr=0,om=0,am=null,Sb=null,ta=0,um=null;function kn(){if((Pt&2)!==0&&Ut!==0)return Ut&-Ut;if(k.T!==null){var s=hr;return s!==0?s:pm()}return Mu()}function wb(){Pn===0&&(Pn=(Ut&536870912)===0||Gt?Ws():536870912);var s=Gn.current;return s!==null&&(s.flags|=32),Pn}function Tn(s,r,u){(s===Qt&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)&&(Er(s,0),zl(s,Ut,Pn,!1)),ml(s,u),((Pt&2)===0||s!==Qt)&&(s===Qt&&((Pt&2)===0&&(ks|=u),ce===4&&zl(s,Ut,Pn,!1)),xi(s))}function Ab(s,r,u){if((Pt&6)!==0)throw Error(i(327));var h=!u&&(r&124)===0&&(r&s.expiredLanes)===0||$e(s,r),g=h?dk(s,r):hm(s,r,!0),y=h;do{if(g===0){wr&&!h&&zl(s,r,0,!1);break}else{if(u=s.current.alternate,y&&!fk(u)){g=hm(s,r,!1),y=!1;continue}if(g===2){if(y=r,s.errorRecoveryDisabledLanes&y)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;t:{var M=s;g=Jo;var N=M.current.memoizedState.isDehydrated;if(N&&(Er(M,x).flags|=256),x=hm(M,x,!1),x!==2){if(im&&!N){M.errorRecoveryDisabledLanes|=y,ks|=y,g=4;break t}y=hn,hn=g,y!==null&&(hn===null?hn=y:hn.push.apply(hn,y))}g=x}if(y=!1,g!==2)continue}}if(g===1){Er(s,0),zl(s,r,0,!0);break}t:{switch(h=s,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:zl(h,r,Pn,!Rl);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=rm+300-Dt(),10<g)){if(zl(h,r,Pn,!Rl),an(h,0,!0)!==0)break t;h.timeoutHandle=Qb(Mb.bind(null,h,u,hn,bc,sm,r,Pn,ks,Ar,Rl,y,2,-0,0),g);break t}Mb(h,u,hn,bc,sm,r,Pn,ks,Ar,Rl,y,0,-0,0)}}break}while(!0);xi(s)}function Mb(s,r,u,h,g,y,x,M,N,$,lt,ot,K,Z){if(s.timeoutHandle=-1,ot=r.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(oa={stylesheets:null,count:0,unsuspend:$k},yb(r),ot=Ik(),ot!==null)){s.cancelPendingCommit=ot(Rb.bind(null,s,r,y,u,h,g,x,M,N,lt,1,K,Z)),zl(s,y,x,!$);return}Rb(s,r,y,u,h,g,x,M,N)}function fk(s){for(var r=s;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],y=g.getSnapshot;g=g.value;try{if(!wn(y(),g))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zl(s,r,u,h){r&=~lm,r&=~ks,s.suspendedLanes|=r,s.pingedLanes&=~r,h&&(s.warmLanes|=r),h=s.expirationTimes;for(var g=r;0<g;){var y=31-be(g),x=1<<y;h[y]=-1,g&=~x}u!==0&&wu(s,u,r)}function vc(){return(Pt&6)===0?(ea(0),!1):!0}function cm(){if(_t!==null){if(Xt===0)var s=_t.return;else s=_t,ji=Ss=null,kd(s),br=null,jo=0,s=_t;for(;s!==null;)ib(s.alternate,s),s=s.return;_t=null}}function Er(s,r){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,Dk(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),cm(),Qt=s,_t=u=Gi(s.current,null),Ut=r,Xt=0,En=null,Rl=!1,wr=$e(s,r),im=!1,Ar=Pn=lm=ks=Nl=ce=0,hn=Jo=null,sm=!1,(r&8)!==0&&(r|=r&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=r;0<h;){var g=31-be(h),y=1<<g;r|=s[g],h&=~y}return Ji=r,Yu(),u}function Cb(s,r){Ot=null,k.H=rc,r===Lo||r===Wu?(r=Gy(),Xt=3):r===Uy?(r=Gy(),Xt=4):Xt=r===P1?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,En=r,_t===null&&(ce=1,fc(s,Vn(r,s.current)))}function Eb(){var s=k.H;return k.H=rc,s===null?rc:s}function kb(){var s=k.A;return k.A=uk,s}function fm(){ce=4,Rl||(Ut&4194048)!==Ut&&Gn.current!==null||(wr=!0),(Nl&134217727)===0&&(ks&134217727)===0||Qt===null||zl(Qt,Ut,Pn,!1)}function hm(s,r,u){var h=Pt;Pt|=2;var g=Eb(),y=kb();(Qt!==s||Ut!==r)&&(bc=null,Er(s,r)),r=!1;var x=ce;t:do try{if(Xt!==0&&_t!==null){var M=_t,N=En;switch(Xt){case 8:cm(),x=6;break t;case 3:case 2:case 9:case 6:Gn.current===null&&(r=!0);var $=Xt;if(Xt=0,En=null,kr(s,M,N,$),u&&wr){x=0;break t}break;default:$=Xt,Xt=0,En=null,kr(s,M,N,$)}}hk(),x=ce;break}catch(lt){Cb(s,lt)}while(!0);return r&&s.shellSuspendCounter++,ji=Ss=null,Pt=h,k.H=g,k.A=y,_t===null&&(Qt=null,Ut=0,Yu()),x}function hk(){for(;_t!==null;)Tb(_t)}function dk(s,r){var u=Pt;Pt|=2;var h=Eb(),g=kb();Qt!==s||Ut!==r?(bc=null,yc=Dt()+500,Er(s,r)):wr=$e(s,r);t:do try{if(Xt!==0&&_t!==null){r=_t;var y=En;e:switch(Xt){case 1:Xt=0,En=null,kr(s,r,y,1);break;case 2:case 9:if(qy(y)){Xt=0,En=null,Db(r);break}r=function(){Xt!==2&&Xt!==9||Qt!==s||(Xt=7),xi(s)},y.then(r,r);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:qy(y)?(Xt=0,En=null,Db(r)):(Xt=0,En=null,kr(s,r,y,7));break;case 5:var x=null;switch(_t.tag){case 26:x=_t.memoizedState;case 5:case 27:var M=_t;if(!x||cv(x)){Xt=0,En=null;var N=M.sibling;if(N!==null)_t=N;else{var $=M.return;$!==null?(_t=$,xc($)):_t=null}break e}}Xt=0,En=null,kr(s,r,y,5);break;case 6:Xt=0,En=null,kr(s,r,y,6);break;case 8:cm(),ce=6;break t;default:throw Error(i(462))}}mk();break}catch(lt){Cb(s,lt)}while(!0);return ji=Ss=null,k.H=h,k.A=g,Pt=u,_t!==null?0:(Qt=null,Ut=0,Yu(),ce)}function mk(){for(;_t!==null&&!se();)Tb(_t)}function Tb(s){var r=eb(s.alternate,s,Ji);s.memoizedProps=s.pendingProps,r===null?xc(s):_t=r}function Db(s){var r=s,u=r.alternate;switch(r.tag){case 15:case 0:r=Z1(u,r,r.pendingProps,r.type,void 0,Ut);break;case 11:r=Z1(u,r,r.pendingProps,r.type.render,r.ref,Ut);break;case 5:kd(r);default:ib(u,r),r=_t=Oy(r,Ji),r=eb(u,r,Ji)}s.memoizedProps=s.pendingProps,r===null?xc(s):_t=r}function kr(s,r,u,h){ji=Ss=null,kd(r),br=null,jo=0;var g=r.return;try{if(ik(s,g,r,u,Ut)){ce=1,fc(s,Vn(u,s.current)),_t=null;return}}catch(y){if(g!==null)throw _t=g,y;ce=1,fc(s,Vn(u,s.current)),_t=null;return}r.flags&32768?(Gt||h===1?s=!0:wr||(Ut&536870912)!==0?s=!1:(Rl=s=!0,(h===2||h===9||h===3||h===6)&&(h=Gn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Ob(r,s)):xc(r)}function xc(s){var r=s;do{if((r.flags&32768)!==0){Ob(r,Rl);return}s=r.return;var u=sk(r.alternate,r,Ji);if(u!==null){_t=u;return}if(r=r.sibling,r!==null){_t=r;return}_t=r=s}while(r!==null);ce===0&&(ce=5)}function Ob(s,r){do{var u=rk(s.alternate,s);if(u!==null){u.flags&=32767,_t=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(s=s.sibling,s!==null)){_t=s;return}_t=s=u}while(s!==null);ce=6,_t=null}function Rb(s,r,u,h,g,y,x,M,N){s.cancelPendingCommit=null;do Sc();while(Ue!==0);if((Pt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(y=r.lanes|r.childLanes,y|=nd,Vi(s,u,y,x,M,N),s===Qt&&(_t=Qt=null,Ut=0),Mr=r,Bl=s,Cr=u,om=y,am=g,Sb=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,bk(mi,function(){return Lb(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=k.T,k.T=null,g=z.p,z.p=2,x=Pt,Pt|=4;try{ok(s,r,u)}finally{Pt=x,z.p=g,k.T=h}}Ue=1,Nb(),_b(),Bb()}}function Nb(){if(Ue===1){Ue=0;var s=Bl,r=Mr,u=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||u){u=k.T,k.T=null;var h=z.p;z.p=2;var g=Pt;Pt|=4;try{mb(r,s);var y=Mm,x=xy(s.containerInfo),M=y.focusedElem,N=y.selectionRange;if(x!==M&&M&&M.ownerDocument&&vy(M.ownerDocument.documentElement,M)){if(N!==null&&Fh(M)){var $=N.start,lt=N.end;if(lt===void 0&&(lt=$),"selectionStart"in M)M.selectionStart=$,M.selectionEnd=Math.min(lt,M.value.length);else{var ot=M.ownerDocument||document,K=ot&&ot.defaultView||window;if(K.getSelection){var Z=K.getSelection(),Mt=M.textContent.length,wt=Math.min(N.start,Mt),Kt=N.end===void 0?wt:Math.min(N.end,Mt);!Z.extend&&wt>Kt&&(x=Kt,Kt=wt,wt=x);var Y=by(M,wt),V=by(M,Kt);if(Y&&V&&(Z.rangeCount!==1||Z.anchorNode!==Y.node||Z.anchorOffset!==Y.offset||Z.focusNode!==V.node||Z.focusOffset!==V.offset)){var X=ot.createRange();X.setStart(Y.node,Y.offset),Z.removeAllRanges(),wt>Kt?(Z.addRange(X),Z.extend(V.node,V.offset)):(X.setEnd(V.node,V.offset),Z.addRange(X))}}}}for(ot=[],Z=M;Z=Z.parentNode;)Z.nodeType===1&&ot.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ot.length;M++){var rt=ot[M];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}_c=!!Am,Mm=Am=null}finally{Pt=g,z.p=h,k.T=u}}s.current=r,Ue=2}}function _b(){if(Ue===2){Ue=0;var s=Bl,r=Mr,u=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||u){u=k.T,k.T=null;var h=z.p;z.p=2;var g=Pt;Pt|=4;try{cb(s,r.alternate,r)}finally{Pt=g,z.p=h,k.T=u}}Ue=3}}function Bb(){if(Ue===4||Ue===3){Ue=0,tn();var s=Bl,r=Mr,u=Cr,h=Sb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ue=5:(Ue=0,Mr=Bl=null,zb(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(_l=null),yo(u),r=r.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(xn,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=k.T,g=z.p,z.p=2,k.T=null;try{for(var y=s.onRecoverableError,x=0;x<h.length;x++){var M=h[x];y(M.value,{componentStack:M.stack})}}finally{k.T=r,z.p=g}}(Cr&3)!==0&&Sc(),xi(s),g=s.pendingLanes,(u&4194090)!==0&&(g&42)!==0?s===um?ta++:(ta=0,um=s):ta=0,ea(0)}}function zb(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Bo(r)))}function Sc(s){return Nb(),_b(),Bb(),Lb()}function Lb(){if(Ue!==5)return!1;var s=Bl,r=om;om=0;var u=yo(Cr),h=k.T,g=z.p;try{z.p=32>u?32:u,k.T=null,u=am,am=null;var y=Bl,x=Cr;if(Ue=0,Mr=Bl=null,Cr=0,(Pt&6)!==0)throw Error(i(331));var M=Pt;if(Pt|=4,vb(y.current),pb(y,y.current,x,u),Pt=M,ea(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(xn,y)}catch{}return!0}finally{z.p=g,k.T=h,zb(s,r)}}function Hb(s,r,u){r=Vn(u,r),r=Yd(s.stateNode,r,2),s=Ml(s,r,2),s!==null&&(ml(s,2),xi(s))}function It(s,r,u){if(s.tag===3)Hb(s,s,u);else for(;r!==null;){if(r.tag===3){Hb(r,s,u);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_l===null||!_l.has(h))){s=Vn(u,s),u=Y1(2),h=Ml(r,u,2),h!==null&&(G1(u,h,r,s),ml(h,2),xi(h));break}}r=r.return}}function dm(s,r,u){var h=s.pingCache;if(h===null){h=s.pingCache=new ck;var g=new Set;h.set(r,g)}else g=h.get(r),g===void 0&&(g=new Set,h.set(r,g));g.has(u)||(im=!0,g.add(u),s=gk.bind(null,s,r,u),r.then(s,s))}function gk(s,r,u){var h=s.pingCache;h!==null&&h.delete(r),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Qt===s&&(Ut&u)===u&&(ce===4||ce===3&&(Ut&62914560)===Ut&&300>Dt()-rm?(Pt&2)===0&&Er(s,0):lm|=u,Ar===Ut&&(Ar=0)),xi(s)}function Vb(s,r){r===0&&(r=dl()),s=ar(s,r),s!==null&&(ml(s,r),xi(s))}function pk(s){var r=s.memoizedState,u=0;r!==null&&(u=r.retryLane),Vb(s,u)}function yk(s,r){var u=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),Vb(s,u)}function bk(s,r){return Ae(s,r)}var wc=null,Tr=null,mm=!1,Ac=!1,gm=!1,Ts=0;function xi(s){s!==Tr&&s.next===null&&(Tr===null?wc=Tr=s:Tr=Tr.next=s),Ac=!0,mm||(mm=!0,xk())}function ea(s,r){if(!gm&&Ac){gm=!0;do for(var u=!1,h=wc;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var x=h.suspendedLanes,M=h.pingedLanes;y=(1<<31-be(42|s)+1)-1,y&=g&~(x&~M),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Gb(h,y))}else y=Ut,y=an(h,h===Qt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||$e(h,y)||(u=!0,Gb(h,y));h=h.next}while(u);gm=!1}}function vk(){Ub()}function Ub(){Ac=mm=!1;var s=0;Ts!==0&&(Tk()&&(s=Ts),Ts=0);for(var r=Dt(),u=null,h=wc;h!==null;){var g=h.next,y=qb(h,r);y===0?(h.next=null,u===null?wc=g:u.next=g,g===null&&(Tr=u)):(u=h,(s!==0||(y&3)!==0)&&(Ac=!0)),h=g}ea(s)}function qb(s,r){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var x=31-be(y),M=1<<x,N=g[x];N===-1?((M&u)===0||(M&h)!==0)&&(g[x]=as(M,r)):N<=r&&(s.expiredLanes|=M),y&=~M}if(r=Qt,u=Ut,u=an(s,s===r?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===r&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&ye(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||$e(s,u)){if(r=u&-u,r===s.callbackPriority)return r;switch(h!==null&&ye(h),yo(u)){case 2:case 8:u=_n;break;case 32:u=mi;break;case 268435456:u=Hi;break;default:u=mi}return h=Yb.bind(null,s),u=Ae(u,h),s.callbackPriority=r,s.callbackNode=u,r}return h!==null&&h!==null&&ye(h),s.callbackPriority=2,s.callbackNode=null,2}function Yb(s,r){if(Ue!==0&&Ue!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Sc()&&s.callbackNode!==u)return null;var h=Ut;return h=an(s,s===Qt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Ab(s,h,r),qb(s,Dt()),s.callbackNode!=null&&s.callbackNode===u?Yb.bind(null,s):null)}function Gb(s,r){if(Sc())return null;Ab(s,r,!0)}function xk(){Ok(function(){(Pt&6)!==0?Ae(Oe,vk):Ub()})}function pm(){return Ts===0&&(Ts=Ws()),Ts}function Pb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Bu(""+s)}function Xb(s,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,s.id&&u.setAttribute("form",s.id),r.parentNode.insertBefore(u,r),s=new FormData(s),u.parentNode.removeChild(u),s}function Sk(s,r,u,h,g){if(r==="submit"&&u&&u.stateNode===g){var y=Pb((g[Ke]||null).action),x=h.submitter;x&&(r=(r=x[Ke]||null)?Pb(r.formAction):x.getAttribute("formAction"),r!==null&&(y=r,x=null));var M=new Vu("action","action",null,h,g);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ts!==0){var N=x?Xb(g,x):new FormData(g);Ld(u,{pending:!0,data:N,method:g.method,action:y},null,N)}}else typeof y=="function"&&(M.preventDefault(),N=x?Xb(g,x):new FormData(g),Ld(u,{pending:!0,data:N,method:g.method,action:y},y,N))},currentTarget:g}]})}}for(var ym=0;ym<ed.length;ym++){var bm=ed[ym],wk=bm.toLowerCase(),Ak=bm[0].toUpperCase()+bm.slice(1);ni(wk,"on"+Ak)}ni(Ay,"onAnimationEnd"),ni(My,"onAnimationIteration"),ni(Cy,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(qE,"onTransitionRun"),ni(YE,"onTransitionStart"),ni(GE,"onTransitionCancel"),ni(Ey,"onTransitionEnd"),bl("onMouseEnter",["mouseout","mouseover"]),bl("onMouseLeave",["mouseout","mouseover"]),bl("onPointerEnter",["pointerout","pointerover"]),bl("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(na));function jb(s,r){r=(r&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;t:{var y=void 0;if(r)for(var x=h.length-1;0<=x;x--){var M=h[x],N=M.instance,$=M.currentTarget;if(M=M.listener,N!==y&&g.isPropagationStopped())break t;y=M,g.currentTarget=$;try{y(g)}catch(lt){cc(lt)}g.currentTarget=null,y=N}else for(x=0;x<h.length;x++){if(M=h[x],N=M.instance,$=M.currentTarget,M=M.listener,N!==y&&g.isPropagationStopped())break t;y=M,g.currentTarget=$;try{y(g)}catch(lt){cc(lt)}g.currentTarget=null,y=N}}}}function Bt(s,r){var u=r[bo];u===void 0&&(u=r[bo]=new Set);var h=s+"__bubble";u.has(h)||($b(r,s,2,!1),u.add(h))}function vm(s,r,u){var h=0;r&&(h|=4),$b(u,s,h,r)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function xm(s){if(!s[Mc]){s[Mc]=!0,Eu.forEach(function(u){u!=="selectionchange"&&(Mk.has(u)||vm(u,!1,s),vm(u,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Mc]||(r[Mc]=!0,vm("selectionchange",!1,r))}}function $b(s,r,u,h){switch(pv(r)){case 2:var g=Fk;break;case 8:g=Qk;break;default:g=Bm}u=g.bind(null,r,u,s),g=void 0,!Gh||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(r,u,{capture:!0,passive:g}):s.addEventListener(r,u,!0):g!==void 0?s.addEventListener(r,u,{passive:g}):s.addEventListener(r,u,!1)}function Sm(s,r,u,h,g){var y=h;if((r&1)===0&&(r&2)===0&&h!==null)t:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var M=h.stateNode.containerInfo;if(M===g)break;if(x===4)for(x=h.return;x!==null;){var N=x.tag;if((N===3||N===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;M!==null;){if(x=Ui(M),x===null)return;if(N=x.tag,N===5||N===6||N===26||N===27){h=y=x;continue t}M=M.parentNode}}h=h.return}J0(function(){var $=y,lt=qh(u),ot=[];t:{var K=ky.get(s);if(K!==void 0){var Z=Vu,Mt=s;switch(s){case"keypress":if(Lu(u)===0)break t;case"keydown":case"keyup":Z=bE;break;case"focusin":Mt="focus",Z=$h;break;case"focusout":Mt="blur",Z=$h;break;case"beforeblur":case"afterblur":Z=$h;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=rE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=SE;break;case Ay:case My:case Cy:Z=uE;break;case Ey:Z=AE;break;case"scroll":case"scrollend":Z=lE;break;case"wheel":Z=CE;break;case"copy":case"cut":case"paste":Z=fE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ly;break;case"toggle":case"beforetoggle":Z=kE}var wt=(r&4)!==0,Kt=!wt&&(s==="scroll"||s==="scrollend"),Y=wt?K!==null?K+"Capture":null:K;wt=[];for(var V=$,X;V!==null;){var rt=V;if(X=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||X===null||Y===null||(rt=So(V,Y),rt!=null&&wt.push(ia(V,rt,X))),Kt)break;V=V.return}0<wt.length&&(K=new Z(K,Mt,null,u,lt),ot.push({event:K,listeners:wt}))}}if((r&7)===0){t:{if(K=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",K&&u!==Uh&&(Mt=u.relatedTarget||u.fromElement)&&(Ui(Mt)||Mt[gl]))break t;if((Z||K)&&(K=lt.window===lt?lt:(K=lt.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(Mt=u.relatedTarget||u.toElement,Z=$,Mt=Mt?Ui(Mt):null,Mt!==null&&(Kt=o(Mt),wt=Mt.tag,Mt!==Kt||wt!==5&&wt!==27&&wt!==6)&&(Mt=null)):(Z=null,Mt=$),Z!==Mt)){if(wt=ny,rt="onMouseLeave",Y="onMouseEnter",V="mouse",(s==="pointerout"||s==="pointerover")&&(wt=ly,rt="onPointerLeave",Y="onPointerEnter",V="pointer"),Kt=Z==null?K:fs(Z),X=Mt==null?K:fs(Mt),K=new wt(rt,V+"leave",Z,u,lt),K.target=Kt,K.relatedTarget=X,rt=null,Ui(lt)===$&&(wt=new wt(Y,V+"enter",Mt,u,lt),wt.target=X,wt.relatedTarget=Kt,rt=wt),Kt=rt,Z&&Mt)e:{for(wt=Z,Y=Mt,V=0,X=wt;X;X=Dr(X))V++;for(X=0,rt=Y;rt;rt=Dr(rt))X++;for(;0<V-X;)wt=Dr(wt),V--;for(;0<X-V;)Y=Dr(Y),X--;for(;V--;){if(wt===Y||Y!==null&&wt===Y.alternate)break e;wt=Dr(wt),Y=Dr(Y)}wt=null}else wt=null;Z!==null&&Kb(ot,K,Z,wt,!1),Mt!==null&&Kt!==null&&Kb(ot,Kt,Mt,wt,!0)}}t:{if(K=$?fs($):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var gt=hy;else if(cy(K))if(dy)gt=HE;else{gt=zE;var Rt=BE}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&Vh($.elementType)&&(gt=hy):gt=LE;if(gt&&(gt=gt(s,$))){fy(ot,gt,u,lt);break t}Rt&&Rt(s,K,$),s==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Hh(K,"number",K.value)}switch(Rt=$?fs($):window,s){case"focusin":(cy(Rt)||Rt.contentEditable==="true")&&(sr=Rt,Qh=$,Do=null);break;case"focusout":Do=Qh=sr=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,Sy(ot,u,lt);break;case"selectionchange":if(UE)break;case"keydown":case"keyup":Sy(ot,u,lt)}var pt;if(Ih)t:{switch(s){case"compositionstart":var At="onCompositionStart";break t;case"compositionend":At="onCompositionEnd";break t;case"compositionupdate":At="onCompositionUpdate";break t}At=void 0}else lr?ay(s,u)&&(At="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(At="onCompositionStart");At&&(sy&&u.locale!=="ko"&&(lr||At!=="onCompositionStart"?At==="onCompositionEnd"&&lr&&(pt=ty()):(xl=lt,Ph="value"in xl?xl.value:xl.textContent,lr=!0)),Rt=Cc($,At),0<Rt.length&&(At=new iy(At,s,null,u,lt),ot.push({event:At,listeners:Rt}),pt?At.data=pt:(pt=uy(u),pt!==null&&(At.data=pt)))),(pt=DE?OE(s,u):RE(s,u))&&(At=Cc($,"onBeforeInput"),0<At.length&&(Rt=new iy("onBeforeInput","beforeinput",null,u,lt),ot.push({event:Rt,listeners:At}),Rt.data=pt)),Sk(ot,s,$,u,lt)}jb(ot,r)})}function ia(s,r,u){return{instance:s,listener:r,currentTarget:u}}function Cc(s,r){for(var u=r+"Capture",h=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=So(s,u),g!=null&&h.unshift(ia(s,g,y)),g=So(s,r),g!=null&&h.push(ia(s,g,y))),s.tag===3)return h;s=s.return}return[]}function Dr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Kb(s,r,u,h,g){for(var y=r._reactName,x=[];u!==null&&u!==h;){var M=u,N=M.alternate,$=M.stateNode;if(M=M.tag,N!==null&&N===h)break;M!==5&&M!==26&&M!==27||$===null||(N=$,g?($=So(u,y),$!=null&&x.unshift(ia(u,$,N))):g||($=So(u,y),$!=null&&x.push(ia(u,$,N)))),u=u.return}x.length!==0&&s.push({event:r,listeners:x})}var Ck=/\r\n?/g,Ek=/\u0000|\uFFFD/g;function Ib(s){return(typeof s=="string"?s:""+s).replace(Ck,`
`).replace(Ek,"")}function Zb(s,r){return r=Ib(r),Ib(s)===r}function Ec(){}function $t(s,r,u,h,g,y){switch(u){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||er(s,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&er(s,""+h);break;case"className":Qs(s,"class",h);break;case"tabIndex":Qs(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Qs(s,u,h);break;case"style":F0(s,h,y);break;case"data":if(r!=="object"){Qs(s,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Bu(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(r!=="input"&&$t(s,r,"name",g.name,g,null),$t(s,r,"formEncType",g.formEncType,g,null),$t(s,r,"formMethod",g.formMethod,g,null),$t(s,r,"formTarget",g.formTarget,g,null)):($t(s,r,"encType",g.encType,g,null),$t(s,r,"method",g.method,g,null),$t(s,r,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Bu(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Ec);break;case"onScroll":h!=null&&Bt("scroll",s);break;case"onScrollEnd":h!=null&&Bt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Bu(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":Bt("beforetoggle",s),Bt("toggle",s),Fs(s,"popover",h);break;case"xlinkActuate":ei(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ei(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ei(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ei(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ei(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ei(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ei(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ei(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ei(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Fs(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=nE.get(u)||u,Fs(s,u,h))}}function wm(s,r,u,h,g,y){switch(u){case"style":F0(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?er(s,h):(typeof h=="number"||typeof h=="bigint")&&er(s,""+h);break;case"onScroll":h!=null&&Bt("scroll",s);break;case"onScrollEnd":h!=null&&Bt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ec);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ku.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),r=u.slice(2,g?u.length-7:void 0),y=s[Ke]||null,y=y!=null?y[u]:null,typeof y=="function"&&s.removeEventListener(r,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(r,h,g);break t}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Fs(s,u,h)}}}function qe(s,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",s),Bt("load",s);var h=!1,g=!1,y;for(y in u)if(u.hasOwnProperty(y)){var x=u[y];if(x!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:$t(s,r,y,x,u,null)}}g&&$t(s,r,"srcSet",u.srcSet,u,null),h&&$t(s,r,"src",u.src,u,null);return;case"input":Bt("invalid",s);var M=y=x=g=null,N=null,$=null;for(h in u)if(u.hasOwnProperty(h)){var lt=u[h];if(lt!=null)switch(h){case"name":g=lt;break;case"type":x=lt;break;case"checked":N=lt;break;case"defaultChecked":$=lt;break;case"value":y=lt;break;case"defaultValue":M=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,r));break;default:$t(s,r,h,lt,u,null)}}K0(s,y,M,N,$,x,g,!1),Nu(s);return;case"select":Bt("invalid",s),h=x=y=null;for(g in u)if(u.hasOwnProperty(g)&&(M=u[g],M!=null))switch(g){case"value":y=M;break;case"defaultValue":x=M;break;case"multiple":h=M;default:$t(s,r,g,M,u,null)}r=y,u=x,s.multiple=!!h,r!=null?tr(s,!!h,r,!1):u!=null&&tr(s,!!h,u,!0);return;case"textarea":Bt("invalid",s),y=g=h=null;for(x in u)if(u.hasOwnProperty(x)&&(M=u[x],M!=null))switch(x){case"value":h=M;break;case"defaultValue":g=M;break;case"children":y=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:$t(s,r,x,M,u,null)}Z0(s,h,g,y),Nu(s);return;case"option":for(N in u)if(u.hasOwnProperty(N)&&(h=u[N],h!=null))switch(N){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:$t(s,r,N,h,u,null)}return;case"dialog":Bt("beforetoggle",s),Bt("toggle",s),Bt("cancel",s),Bt("close",s);break;case"iframe":case"object":Bt("load",s);break;case"video":case"audio":for(h=0;h<na.length;h++)Bt(na[h],s);break;case"image":Bt("error",s),Bt("load",s);break;case"details":Bt("toggle",s);break;case"embed":case"source":case"link":Bt("error",s),Bt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in u)if(u.hasOwnProperty($)&&(h=u[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:$t(s,r,$,h,u,null)}return;default:if(Vh(r)){for(lt in u)u.hasOwnProperty(lt)&&(h=u[lt],h!==void 0&&wm(s,r,lt,h,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(h=u[M],h!=null&&$t(s,r,M,h,u,null))}function kk(s,r,u,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,x=null,M=null,N=null,$=null,lt=null;for(Z in u){var ot=u[Z];if(u.hasOwnProperty(Z)&&ot!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":N=ot;default:h.hasOwnProperty(Z)||$t(s,r,Z,null,h,ot)}}for(var K in h){var Z=h[K];if(ot=u[K],h.hasOwnProperty(K)&&(Z!=null||ot!=null))switch(K){case"type":y=Z;break;case"name":g=Z;break;case"checked":$=Z;break;case"defaultChecked":lt=Z;break;case"value":x=Z;break;case"defaultValue":M=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ot&&$t(s,r,K,Z,h,ot)}}Lh(s,x,M,N,$,lt,y,g);return;case"select":Z=x=M=K=null;for(y in u)if(N=u[y],u.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":Z=N;default:h.hasOwnProperty(y)||$t(s,r,y,null,h,N)}for(g in h)if(y=h[g],N=u[g],h.hasOwnProperty(g)&&(y!=null||N!=null))switch(g){case"value":K=y;break;case"defaultValue":M=y;break;case"multiple":x=y;default:y!==N&&$t(s,r,g,y,h,N)}r=M,u=x,h=Z,K!=null?tr(s,!!u,K,!1):!!h!=!!u&&(r!=null?tr(s,!!u,r,!0):tr(s,!!u,u?[]:"",!1));return;case"textarea":Z=K=null;for(M in u)if(g=u[M],u.hasOwnProperty(M)&&g!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:$t(s,r,M,null,h,g)}for(x in h)if(g=h[x],y=u[x],h.hasOwnProperty(x)&&(g!=null||y!=null))switch(x){case"value":K=g;break;case"defaultValue":Z=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&$t(s,r,x,g,h,y)}I0(s,K,Z);return;case"option":for(var Mt in u)if(K=u[Mt],u.hasOwnProperty(Mt)&&K!=null&&!h.hasOwnProperty(Mt))switch(Mt){case"selected":s.selected=!1;break;default:$t(s,r,Mt,null,h,K)}for(N in h)if(K=h[N],Z=u[N],h.hasOwnProperty(N)&&K!==Z&&(K!=null||Z!=null))switch(N){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:$t(s,r,N,K,h,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in u)K=u[wt],u.hasOwnProperty(wt)&&K!=null&&!h.hasOwnProperty(wt)&&$t(s,r,wt,null,h,K);for($ in h)if(K=h[$],Z=u[$],h.hasOwnProperty($)&&K!==Z&&(K!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:$t(s,r,$,K,h,Z)}return;default:if(Vh(r)){for(var Kt in u)K=u[Kt],u.hasOwnProperty(Kt)&&K!==void 0&&!h.hasOwnProperty(Kt)&&wm(s,r,Kt,void 0,h,K);for(lt in h)K=h[lt],Z=u[lt],!h.hasOwnProperty(lt)||K===Z||K===void 0&&Z===void 0||wm(s,r,lt,K,h,Z);return}}for(var Y in u)K=u[Y],u.hasOwnProperty(Y)&&K!=null&&!h.hasOwnProperty(Y)&&$t(s,r,Y,null,h,K);for(ot in h)K=h[ot],Z=u[ot],!h.hasOwnProperty(ot)||K===Z||K==null&&Z==null||$t(s,r,ot,K,h,Z)}var Am=null,Mm=null;function kc(s){return s.nodeType===9?s:s.ownerDocument}function Wb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fb(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Cm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Em=null;function Tk(){var s=window.event;return s&&s.type==="popstate"?s===Em?!1:(Em=s,!0):(Em=null,!1)}var Qb=typeof setTimeout=="function"?setTimeout:void 0,Dk=typeof clearTimeout=="function"?clearTimeout:void 0,Jb=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof Jb<"u"?function(s){return Jb.resolve(null).then(s).catch(Rk)}:Qb;function Rk(s){setTimeout(function(){throw s})}function Ll(s){return s==="head"}function tv(s,r){var u=r,h=0,g=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<h&&8>h){u=h;var x=s.ownerDocument;if(u&1&&la(x.documentElement),u&2&&la(x.body),u&4)for(u=x.head,la(u),x=u.firstChild;x;){var M=x.nextSibling,N=x.nodeName;x[cs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=M}}if(g===0){s.removeChild(y),ha(r);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:h=u.charCodeAt(0)-48;else h=0;u=y}while(u);ha(r)}function km(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":km(u),vo(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function Nk(s,r,u,h){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[cs])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=li(s.nextSibling),s===null)break}return null}function _k(s,r,u){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=li(s.nextSibling),s===null))return null;return s}function Tm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Bk(s,r){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")r();else{var h=function(){r(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function li(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Dm=null;function ev(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(r===0)return s;r--}else u==="/$"&&r++}s=s.previousSibling}return null}function nv(s,r,u){switch(r=kc(u),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function la(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);vo(s)}var Xn=new Map,iv=new Set;function Tc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tl=z.d;z.d={f:zk,r:Lk,D:Hk,C:Vk,L:Uk,m:qk,X:Gk,S:Yk,M:Pk};function zk(){var s=tl.f(),r=vc();return s||r}function Lk(s){var r=pl(s);r!==null&&r.tag===5&&r.type==="form"?A1(r):tl.r(s)}var Or=typeof document>"u"?null:document;function lv(s,r,u){var h=Or;if(h&&typeof r=="string"&&r){var g=Hn(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),iv.has(g)||(iv.add(g),s={rel:s,crossOrigin:u,href:r},h.querySelector(g)===null&&(r=h.createElement("link"),qe(r,"link",s),ve(r),h.head.appendChild(r)))}}function Hk(s){tl.D(s),lv("dns-prefetch",s,null)}function Vk(s,r){tl.C(s,r),lv("preconnect",s,r)}function Uk(s,r,u){tl.L(s,r,u);var h=Or;if(h&&s&&r){var g='link[rel="preload"][as="'+Hn(r)+'"]';r==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+Hn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+Hn(u.imageSizes)+'"]')):g+='[href="'+Hn(s)+'"]';var y=g;switch(r){case"style":y=Rr(s);break;case"script":y=Nr(s)}Xn.has(y)||(s=m({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:s,as:r},u),Xn.set(y,s),h.querySelector(g)!==null||r==="style"&&h.querySelector(sa(y))||r==="script"&&h.querySelector(ra(y))||(r=h.createElement("link"),qe(r,"link",s),ve(r),h.head.appendChild(r)))}}function qk(s,r){tl.m(s,r);var u=Or;if(u&&s){var h=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Hn(h)+'"][href="'+Hn(s)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Nr(s)}if(!Xn.has(y)&&(s=m({rel:"modulepreload",href:s},r),Xn.set(y,s),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ra(y)))return}h=u.createElement("link"),qe(h,"link",s),ve(h),u.head.appendChild(h)}}}function Yk(s,r,u){tl.S(s,r,u);var h=Or;if(h&&s){var g=yl(h).hoistableStyles,y=Rr(s);r=r||"default";var x=g.get(y);if(!x){var M={loading:0,preload:null};if(x=h.querySelector(sa(y)))M.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":r},u),(u=Xn.get(y))&&Om(s,u);var N=x=h.createElement("link");ve(N),qe(N,"link",s),N._p=new Promise(function($,lt){N.onload=$,N.onerror=lt}),N.addEventListener("load",function(){M.loading|=1}),N.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Dc(x,r,h)}x={type:"stylesheet",instance:x,count:1,state:M},g.set(y,x)}}}function Gk(s,r){tl.X(s,r);var u=Or;if(u&&s){var h=yl(u).hoistableScripts,g=Nr(s),y=h.get(g);y||(y=u.querySelector(ra(g)),y||(s=m({src:s,async:!0},r),(r=Xn.get(g))&&Rm(s,r),y=u.createElement("script"),ve(y),qe(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function Pk(s,r){tl.M(s,r);var u=Or;if(u&&s){var h=yl(u).hoistableScripts,g=Nr(s),y=h.get(g);y||(y=u.querySelector(ra(g)),y||(s=m({src:s,async:!0,type:"module"},r),(r=Xn.get(g))&&Rm(s,r),y=u.createElement("script"),ve(y),qe(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function sv(s,r,u,h){var g=(g=ct.current)?Tc(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=Rr(u.href),u=yl(g).hoistableStyles,h=u.get(r),h||(h={type:"style",instance:null,count:0,state:null},u.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Rr(u.href);var y=yl(g).hoistableStyles,x=y.get(s);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,x),(y=g.querySelector(sa(s)))&&!y._p&&(x.instance=y,x.state.loading=5),Xn.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Xn.set(s,u),y||Xk(g,s,u,x.state))),r&&h===null)throw Error(i(528,""));return x}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Nr(u),u=yl(g).hoistableScripts,h=u.get(r),h||(h={type:"script",instance:null,count:0,state:null},u.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Rr(s){return'href="'+Hn(s)+'"'}function sa(s){return'link[rel="stylesheet"]['+s+"]"}function rv(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function Xk(s,r,u,h){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=s.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),qe(r,"link",u),ve(r),s.head.appendChild(r))}function Nr(s){return'[src="'+Hn(s)+'"]'}function ra(s){return"script[async]"+s}function ov(s,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var h=s.querySelector('style[data-href~="'+Hn(u.href)+'"]');if(h)return r.instance=h,ve(h),h;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),ve(h),qe(h,"style",g),Dc(h,u.precedence,s),r.instance=h;case"stylesheet":g=Rr(u.href);var y=s.querySelector(sa(g));if(y)return r.state.loading|=4,r.instance=y,ve(y),y;h=rv(u),(g=Xn.get(g))&&Om(h,g),y=(s.ownerDocument||s).createElement("link"),ve(y);var x=y;return x._p=new Promise(function(M,N){x.onload=M,x.onerror=N}),qe(y,"link",h),r.state.loading|=4,Dc(y,u.precedence,s),r.instance=y;case"script":return y=Nr(u.src),(g=s.querySelector(ra(y)))?(r.instance=g,ve(g),g):(h=u,(g=Xn.get(y))&&(h=m({},u),Rm(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),ve(g),qe(g,"link",h),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Dc(h,u.precedence,s));return r.instance}function Dc(s,r,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,x=0;x<h.length;x++){var M=h[x];if(M.dataset.precedence===r)y=M;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(s,r.firstChild))}function Om(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Rm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Oc=null;function av(s,r,u){if(Oc===null){var h=new Map,g=Oc=new Map;g.set(u,h)}else g=Oc,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var y=u[g];if(!(y[cs]||y[Ne]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(r)||"";x=s+x;var M=h.get(x);M?M.push(y):h.set(x,[y])}}return h}function uv(s,r,u){s=s.ownerDocument||s,s.head.insertBefore(u,r==="title"?s.querySelector("head > title"):null)}function jk(s,r,u){if(u===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function cv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var oa=null;function $k(){}function Kk(s,r,u){if(oa===null)throw Error(i(475));var h=oa;if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Rr(u.href),y=s.querySelector(sa(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Rc.bind(h),s.then(h,h)),r.state.loading|=4,r.instance=y,ve(y);return}y=s.ownerDocument||s,u=rv(u),(g=Xn.get(g))&&Om(u,g),y=y.createElement("link"),ve(y);var x=y;x._p=new Promise(function(M,N){x.onload=M,x.onerror=N}),qe(y,"link",u),r.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=Rc.bind(h),s.addEventListener("load",r),s.addEventListener("error",r))}}function Ik(){if(oa===null)throw Error(i(475));var s=oa;return s.stylesheets&&s.count===0&&Nm(s,s.stylesheets),0<s.count?function(r){var u=setTimeout(function(){if(s.stylesheets&&Nm(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(u)}}:null}function Rc(){if(this.count--,this.count===0){if(this.stylesheets)Nm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Nc=null;function Nm(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Nc=new Map,r.forEach(Zk,s),Nc=null,Rc.call(s))}function Zk(s,r){if(!(r.state.loading&4)){var u=Nc.get(s);if(u)var h=u.get(null);else{u=new Map,Nc.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var x=g[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),h=x)}h&&u.set(null,h)}g=r.instance,x=g.getAttribute("data-precedence"),y=u.get(x)||h,y===h&&u.set(null,g),u.set(x,g),this.count++,h=Rc.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var aa={$$typeof:_,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function Wk(s,r,u,h,g,y,x,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function fv(s,r,u,h,g,y,x,M,N,$,lt,ot){return s=new Wk(s,r,u,x,M,N,$,ot),r=1,y===!0&&(r|=24),y=An(3,null,null,r),s.current=y,y.stateNode=s,r=dd(),r.refCount++,s.pooledCache=r,r.refCount++,y.memoizedState={element:h,isDehydrated:u,cache:r},yd(y),s}function hv(s){return s?(s=ur,s):ur}function dv(s,r,u,h,g,y){g=hv(g),h.context===null?h.context=g:h.pendingContext=g,h=Al(r),h.payload={element:u},y=y===void 0?null:y,y!==null&&(h.callback=y),u=Ml(s,h,r),u!==null&&(Tn(u,s,r),Vo(u,s,r))}function mv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<r?u:r}}function _m(s,r){mv(s,r),(s=s.alternate)&&mv(s,r)}function gv(s){if(s.tag===13){var r=ar(s,67108864);r!==null&&Tn(r,s,67108864),_m(s,67108864)}}var _c=!0;function Fk(s,r,u,h){var g=k.T;k.T=null;var y=z.p;try{z.p=2,Bm(s,r,u,h)}finally{z.p=y,k.T=g}}function Qk(s,r,u,h){var g=k.T;k.T=null;var y=z.p;try{z.p=8,Bm(s,r,u,h)}finally{z.p=y,k.T=g}}function Bm(s,r,u,h){if(_c){var g=zm(h);if(g===null)Sm(s,r,h,Bc,u),yv(s,h);else if(tT(g,s,r,u,h))h.stopPropagation();else if(yv(s,h),r&4&&-1<Jk.indexOf(s)){for(;g!==null;){var y=pl(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=nn(y.pendingLanes);if(x!==0){var M=y;for(M.pendingLanes|=2,M.entangledLanes|=2;x;){var N=1<<31-be(x);M.entanglements[1]|=N,x&=~N}xi(y),(Pt&6)===0&&(yc=Dt()+500,ea(0))}}break;case 13:M=ar(y,2),M!==null&&Tn(M,y,2),vc(),_m(y,2)}if(y=zm(h),y===null&&Sm(s,r,h,Bc,u),y===g)break;g=y}g!==null&&h.stopPropagation()}else Sm(s,r,h,null,u)}}function zm(s){return s=qh(s),Lm(s)}var Bc=null;function Lm(s){if(Bc=null,s=Ui(s),s!==null){var r=o(s);if(r===null)s=null;else{var u=r.tag;if(u===13){if(s=a(r),s!==null)return s;s=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Bc=s,null}function pv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yt()){case Oe:return 2;case _n:return 8;case mi:case fl:return 32;case Hi:return 268435456;default:return 32}default:return 32}}var Hm=!1,Hl=null,Vl=null,Ul=null,ua=new Map,ca=new Map,ql=[],Jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yv(s,r){switch(s){case"focusin":case"focusout":Hl=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":ua.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(r.pointerId)}}function fa(s,r,u,h,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:r,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},r!==null&&(r=pl(r),r!==null&&gv(r)),s):(s.eventSystemFlags|=h,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function tT(s,r,u,h,g){switch(r){case"focusin":return Hl=fa(Hl,s,r,u,h,g),!0;case"dragenter":return Vl=fa(Vl,s,r,u,h,g),!0;case"mouseover":return Ul=fa(Ul,s,r,u,h,g),!0;case"pointerover":var y=g.pointerId;return ua.set(y,fa(ua.get(y)||null,s,r,u,h,g)),!0;case"gotpointercapture":return y=g.pointerId,ca.set(y,fa(ca.get(y)||null,s,r,u,h,g)),!0}return!1}function bv(s){var r=Ui(s.target);if(r!==null){var u=o(r);if(u!==null){if(r=u.tag,r===13){if(r=a(u),r!==null){s.blockedOn=r,Nh(s.priority,function(){if(u.tag===13){var h=kn();h=po(h);var g=ar(u,h);g!==null&&Tn(g,u,h),_m(u,h)}});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var u=zm(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Uh=h,u.target.dispatchEvent(h),Uh=null}else return r=pl(u),r!==null&&gv(r),s.blockedOn=u,!1;r.shift()}return!0}function vv(s,r,u){zc(s)&&u.delete(r)}function eT(){Hm=!1,Hl!==null&&zc(Hl)&&(Hl=null),Vl!==null&&zc(Vl)&&(Vl=null),Ul!==null&&zc(Ul)&&(Ul=null),ua.forEach(vv),ca.forEach(vv)}function Lc(s,r){s.blockedOn===r&&(s.blockedOn=null,Hm||(Hm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,eT)))}var Hc=null;function xv(s){Hc!==s&&(Hc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hc===s&&(Hc=null);for(var r=0;r<s.length;r+=3){var u=s[r],h=s[r+1],g=s[r+2];if(typeof h!="function"){if(Lm(h||u)===null)continue;break}var y=pl(u);y!==null&&(s.splice(r,3),r-=3,Ld(y,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function ha(s){function r(N){return Lc(N,s)}Hl!==null&&Lc(Hl,s),Vl!==null&&Lc(Vl,s),Ul!==null&&Lc(Ul,s),ua.forEach(r),ca.forEach(r);for(var u=0;u<ql.length;u++){var h=ql[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<ql.length&&(u=ql[0],u.blockedOn===null);)bv(u),u.blockedOn===null&&ql.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],y=u[h+1],x=g[Ke]||null;if(typeof y=="function")x||xv(u);else if(x){var M=null;if(y&&y.hasAttribute("formAction")){if(g=y,x=y[Ke]||null)M=x.formAction;else if(Lm(g)!==null)continue}else M=x.action;typeof M=="function"?u[h+1]=M:(u.splice(h,3),h-=3),xv(u)}}}function Vm(s){this._internalRoot=s}Vc.prototype.render=Vm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var u=r.current,h=kn();dv(u,h,s,r,null,null)},Vc.prototype.unmount=Vm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;dv(s.current,2,null,s,null,null),vc(),r[gl]=null}};function Vc(s){this._internalRoot=s}Vc.prototype.unstable_scheduleHydration=function(s){if(s){var r=Mu();s={blockedOn:null,target:s,priority:r};for(var u=0;u<ql.length&&r!==0&&r<ql[u].priority;u++);ql.splice(u,0,s),u===0&&bv(s)}};var Sv=t.version;if(Sv!=="19.1.0")throw Error(i(527,Sv,"19.1.0"));z.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(r),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var nT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{xn=Uc.inject(nT),he=Uc}catch{}}return ma.createRoot=function(s,r){if(!l(s))throw Error(i(299));var u=!1,h="",g=H1,y=V1,x=U1,M=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(M=r.unstable_transitionCallbacks)),r=fv(s,1,!1,null,null,u,h,g,y,x,M,null),s[gl]=r.current,xm(s),new Vm(r)},ma.hydrateRoot=function(s,r,u){if(!l(s))throw Error(i(299));var h=!1,g="",y=H1,x=V1,M=U1,N=null,$=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(N=u.unstable_transitionCallbacks),u.formState!==void 0&&($=u.formState)),r=fv(s,1,!0,r,u??null,h,g,y,x,M,N,$),r.context=hv(null),u=r.current,h=kn(),h=po(h),g=Al(h),g.callback=null,Ml(u,g,h),u=h,r.current.lanes=u,ml(r,u),xi(r),s[gl]=r.current,xm(s),new Vc(r)},ma.version="19.1.0",ma}var Rv;function fT(){if(Rv)return Ym.exports;Rv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ym.exports=cT(),Ym.exports}var hT=fT();function Rg(){return Rg=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Rg.apply(null,arguments)}function dT(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)!==-1)continue;e[i]=n[i]}return e}let Ng=[],vw=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<n.length;t++)(t%2?vw:Ng).push(e=e+n[t])})();function mT(n){if(n<768)return!1;for(let t=0,e=Ng.length;;){let i=t+e>>1;if(n<Ng[i])e=i;else if(n>=vw[i])t=i+1;else return!0;if(t==e)return!1}}function Nv(n){return n>=127462&&n<=127487}const _v=8205;function gT(n,t,e=!0,i=!0){return(e?xw:pT)(n,t,i)}function xw(n,t,e){if(t==n.length)return t;t&&Sw(n.charCodeAt(t))&&ww(n.charCodeAt(t-1))&&t--;let i=jm(n,t);for(t+=Bv(i);t<n.length;){let l=jm(n,t);if(i==_v||l==_v||e&&mT(l))t+=Bv(l),i=l;else if(Nv(l)){let o=0,a=t-2;for(;a>=0&&Nv(jm(n,a));)o++,a-=2;if(o%2==0)break;t+=2}else break}return t}function pT(n,t,e){for(;t>0;){let i=xw(n,t-2,e);if(i<t)return i;t--}return 0}function jm(n,t){let e=n.charCodeAt(t);if(!ww(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return Sw(i)?(e-55296<<10)+(i-56320)+65536:e}function Sw(n){return n>=56320&&n<57344}function ww(n){return n>=55296&&n<56320}function Bv(n){return n<65536?1:2}class qt{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=Jr(this,t,e);let l=[];return this.decompose(0,t,l,2),i.length&&i.decompose(0,i.length,l,3),this.decompose(e,this.length,l,1),Ci.from(l,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=Jr(this,t,e);let i=[];return this.decompose(t,e,i,0),Ci.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),l=new _a(this),o=new _a(t);for(let a=e,c=e;;){if(l.next(a),o.next(a),a=0,l.lineBreak!=o.lineBreak||l.done!=o.done||l.value!=o.value)return!1;if(c+=l.value.length,l.done||c>=i)return!0}}iter(t=1){return new _a(this,t)}iterRange(t,e=this.length){return new Aw(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let l=this.line(t).from;i=this.iterRange(l,Math.max(l,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new Mw(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?qt.empty:t.length<=32?new ge(t):Ci.from(ge.split(t,[]))}}class ge extends qt{constructor(t,e=yT(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,l){for(let o=0;;o++){let a=this.text[o],c=l+a.length;if((e?i:c)>=t)return new bT(l,c,i,a);l=c+1,i++}}decompose(t,e,i,l){let o=t<=0&&e>=this.length?this:new ge(zv(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(l&1){let a=i.pop(),c=vf(o.text,a.text.slice(),0,o.length);if(c.length<=32)i.push(new ge(c,a.length+o.length));else{let f=c.length>>1;i.push(new ge(c.slice(0,f)),new ge(c.slice(f)))}}else i.push(o)}replace(t,e,i){if(!(i instanceof ge))return super.replace(t,e,i);[t,e]=Jr(this,t,e);let l=vf(this.text,vf(i.text,zv(this.text,0,t)),e),o=this.length+i.length-(e-t);return l.length<=32?new ge(l,o):Ci.from(ge.split(l,[]),o)}sliceString(t,e=this.length,i=`
`){[t,e]=Jr(this,t,e);let l="";for(let o=0,a=0;o<=e&&a<this.text.length;a++){let c=this.text[a],f=o+c.length;o>t&&a&&(l+=i),t<f&&e>o&&(l+=c.slice(Math.max(0,t-o),e-o)),o=f+1}return l}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],l=-1;for(let o of t)i.push(o),l+=o.length+1,i.length==32&&(e.push(new ge(i,l)),i=[],l=-1);return l>-1&&e.push(new ge(i,l)),e}}class Ci extends qt{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,l){for(let o=0;;o++){let a=this.children[o],c=l+a.length,f=i+a.lines-1;if((e?f:c)>=t)return a.lineInner(t,e,i,l);l=c+1,i=f+1}}decompose(t,e,i,l){for(let o=0,a=0;a<=e&&o<this.children.length;o++){let c=this.children[o],f=a+c.length;if(t<=f&&e>=a){let d=l&((a<=t?1:0)|(f>=e?2:0));a>=t&&f<=e&&!d?i.push(c):c.decompose(t-a,e-a,i,d)}a=f+1}}replace(t,e,i){if([t,e]=Jr(this,t,e),i.lines<this.lines)for(let l=0,o=0;l<this.children.length;l++){let a=this.children[l],c=o+a.length;if(t>=o&&e<=c){let f=a.replace(t-o,e-o,i),d=this.lines-a.lines+f.lines;if(f.lines<d>>4&&f.lines>d>>6){let m=this.children.slice();return m[l]=f,new Ci(m,this.length-(e-t)+i.length)}return super.replace(o,c,f)}o=c+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=Jr(this,t,e);let l="";for(let o=0,a=0;o<this.children.length&&a<=e;o++){let c=this.children[o],f=a+c.length;a>t&&o&&(l+=i),t<f&&e>a&&(l+=c.sliceString(t-a,e-a,i)),a=f+1}return l}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Ci))return 0;let i=0,[l,o,a,c]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;l+=e,o+=e){if(l==a||o==c)return i;let f=this.children[l],d=t.children[o];if(f!=d)return i+f.scanIdentical(d,e);i+=f.length+1}}static from(t,e=t.reduce((i,l)=>i+l.length+1,-1)){let i=0;for(let v of t)i+=v.lines;if(i<32){let v=[];for(let S of t)S.flatten(v);return new ge(v,e)}let l=Math.max(32,i>>5),o=l<<1,a=l>>1,c=[],f=0,d=-1,m=[];function p(v){let S;if(v.lines>o&&v instanceof Ci)for(let w of v.children)p(w);else v.lines>a&&(f>a||!f)?(b(),c.push(v)):v instanceof ge&&f&&(S=m[m.length-1])instanceof ge&&v.lines+S.lines<=32?(f+=v.lines,d+=v.length+1,m[m.length-1]=new ge(S.text.concat(v.text),S.length+1+v.length)):(f+v.lines>l&&b(),f+=v.lines,d+=v.length+1,m.push(v))}function b(){f!=0&&(c.push(m.length==1?m[0]:Ci.from(m,d)),d=-1,f=m.length=0)}for(let v of t)p(v);return b(),c.length==1?c[0]:new Ci(c,e)}}qt.empty=new ge([""],0);function yT(n){let t=-1;for(let e of n)t+=e.length+1;return t}function vf(n,t,e=0,i=1e9){for(let l=0,o=0,a=!0;o<n.length&&l<=i;o++){let c=n[o],f=l+c.length;f>=e&&(f>i&&(c=c.slice(0,i-l)),l<e&&(c=c.slice(e-l)),a?(t[t.length-1]+=c,a=!1):t.push(c)),l=f+1}return t}function zv(n,t,e){return vf(n,[""],t,e)}class _a{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof ge?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,l=this.nodes[i],o=this.offsets[i],a=o>>1,c=l instanceof ge?l.text.length:l.children.length;if(a==(e>0?c:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(l instanceof ge){let f=l.text[a+(e<0?-1:0)];if(this.offsets[i]+=e,f.length>Math.max(0,t))return this.value=t==0?f:e>0?f.slice(t):f.slice(0,f.length-t),this;t-=f.length}else{let f=l.children[a+(e<0?-1:0)];t>f.length?(t-=f.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(f),this.offsets.push(e>0?1:(f instanceof ge?f.text.length:f.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Aw{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new _a(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:l}=this.cursor.next(t);return this.pos+=(l.length+t)*e,this.value=l.length<=i?l:e<0?l.slice(l.length-i):l.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Mw{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:l}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=l,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(qt.prototype[Symbol.iterator]=function(){return this.iter()},_a.prototype[Symbol.iterator]=Aw.prototype[Symbol.iterator]=Mw.prototype[Symbol.iterator]=function(){return this});class bT{constructor(t,e,i,l){this.from=t,this.to=e,this.number=i,this.text=l}get length(){return this.to-this.from}}function Jr(n,t,e){return t=Math.max(0,Math.min(n.length,t)),[t,Math.max(t,Math.min(n.length,e))]}function Xe(n,t,e=!0,i=!0){return gT(n,t,e,i)}function vT(n){return n>=56320&&n<57344}function xT(n){return n>=55296&&n<56320}function dn(n,t){let e=n.charCodeAt(t);if(!xT(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return vT(i)?(e-55296<<10)+(i-56320)+65536:e}function Xp(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Ei(n){return n<65536?1:2}const _g=/\r\n?|\n/;var sn=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(sn||(sn={}));class Oi{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,l=0;e<this.sections.length;){let o=this.sections[e++],a=this.sections[e++];a<0?(t(i,l,o),l+=o):l+=a,i+=o}}iterChangedRanges(t,e=!1){Bg(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],l=this.sections[e++];l<0?t.push(i,l):t.push(l,i)}return new Oi(t)}composeDesc(t){return this.empty?t:t.empty?this:Cw(this,t)}mapDesc(t,e=!1){return t.empty?this:zg(this,t,e)}mapPos(t,e=-1,i=sn.Simple){let l=0,o=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],f=this.sections[a++],d=l+c;if(f<0){if(d>t)return o+(t-l);o+=c}else{if(i!=sn.Simple&&d>=t&&(i==sn.TrackDel&&l<t&&d>t||i==sn.TrackBefore&&l<t||i==sn.TrackAfter&&d>t))return null;if(d>t||d==t&&e<0&&!c)return t==l||e<0?o:o+f;o+=f}l=d}if(t>l)throw new RangeError(`Position ${t} is out of range for changeset of length ${l}`);return o}touchesRange(t,e=t){for(let i=0,l=0;i<this.sections.length&&l<=e;){let o=this.sections[i++],a=this.sections[i++],c=l+o;if(a>=0&&l<=e&&c>=t)return l<t&&c>e?"cover":!0;l=c}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],l=this.sections[e++];t+=(t?" ":"")+i+(l>=0?":"+l:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Oi(t)}static create(t){return new Oi(t)}}class Ee extends Oi{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Bg(this,(e,i,l,o,a)=>t=t.replace(l,l+(i-e),a),!1),t}mapDesc(t,e=!1){return zg(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let l=0,o=0;l<e.length;l+=2){let a=e[l],c=e[l+1];if(c>=0){e[l]=c,e[l+1]=a;let f=l>>1;for(;i.length<f;)i.push(qt.empty);i.push(a?t.slice(o,o+a):qt.empty)}o+=a}return new Ee(e,i)}compose(t){return this.empty?t:t.empty?this:Cw(this,t,!0)}map(t,e=!1){return t.empty?this:zg(this,t,e,!0)}iterChanges(t,e=!1){Bg(this,t,e)}get desc(){return Oi.create(this.sections)}filter(t){let e=[],i=[],l=[],o=new Ua(this);t:for(let a=0,c=0;;){let f=a==t.length?1e9:t[a++];for(;c<f||c==f&&o.len==0;){if(o.done)break t;let m=Math.min(o.len,f-c);We(l,m,-1);let p=o.ins==-1?-1:o.off==0?o.ins:0;We(e,m,p),p>0&&Zl(i,e,o.text),o.forward(m),c+=m}let d=t[a++];for(;c<d;){if(o.done)break t;let m=Math.min(o.len,d-c);We(e,m,-1),We(l,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),c+=m}}return{changes:new Ee(e,i),filtered:Oi.create(l)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],l=this.sections[e+1];l<0?t.push(i):l==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let l=[],o=[],a=0,c=null;function f(m=!1){if(!m&&!l.length)return;a<e&&We(l,e-a,-1);let p=new Ee(l,o);c=c?c.compose(p.map(c)):p,l=[],o=[],a=0}function d(m){if(Array.isArray(m))for(let p of m)d(p);else if(m instanceof Ee){if(m.length!=e)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${e})`);f(),c=c?c.compose(m.map(c)):m}else{let{from:p,to:b=p,insert:v}=m;if(p>b||p<0||b>e)throw new RangeError(`Invalid change range ${p} to ${b} (in doc of length ${e})`);let S=v?typeof v=="string"?qt.of(v.split(i||_g)):v:qt.empty,w=S.length;if(p==b&&w==0)return;p<a&&f(),p>a&&We(l,p-a,-1),We(l,b-p,w),Zl(o,l,S),a=b}}return d(t),f(!c),c}static empty(t){return new Ee(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let l=0;l<t.length;l++){let o=t[l];if(typeof o=="number")e.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)e.push(o[0],0);else{for(;i.length<l;)i.push(qt.empty);i[l]=qt.of(o.slice(1)),e.push(o[0],i[l].length)}}}return new Ee(e,i)}static createSet(t,e){return new Ee(t,e)}}function We(n,t,e,i=!1){if(t==0&&e<=0)return;let l=n.length-2;l>=0&&e<=0&&e==n[l+1]?n[l]+=t:l>=0&&t==0&&n[l]==0?n[l+1]+=e:i?(n[l]+=t,n[l+1]+=e):n.push(t,e)}function Zl(n,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(e);else{for(;n.length<i;)n.push(qt.empty);n.push(e)}}function Bg(n,t,e){let i=n.inserted;for(let l=0,o=0,a=0;a<n.sections.length;){let c=n.sections[a++],f=n.sections[a++];if(f<0)l+=c,o+=c;else{let d=l,m=o,p=qt.empty;for(;d+=c,m+=f,f&&i&&(p=p.append(i[a-2>>1])),!(e||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],f=n.sections[a++];t(l,d,o,m,p),l=d,o=m}}}function zg(n,t,e,i=!1){let l=[],o=i?[]:null,a=new Ua(n),c=new Ua(t);for(let f=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let d=Math.min(a.len,c.len);We(l,d,-1),a.forward(d),c.forward(d)}else if(c.ins>=0&&(a.ins<0||f==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!e))){let d=c.len;for(We(l,c.ins,-1);d;){let m=Math.min(a.len,d);a.ins>=0&&f<a.i&&a.len<=m&&(We(l,0,a.ins),o&&Zl(o,l,a.text),f=a.i),a.forward(m),d-=m}c.next()}else if(a.ins>=0){let d=0,m=a.len;for(;m;)if(c.ins==-1){let p=Math.min(m,c.len);d+=p,m-=p,c.forward(p)}else if(c.ins==0&&c.len<m)m-=c.len,c.next();else break;We(l,d,f<a.i?a.ins:0),o&&f<a.i&&Zl(o,l,a.text),f=a.i,a.forward(a.len-m)}else{if(a.done&&c.done)return o?Ee.createSet(l,o):Oi.create(l);throw new Error("Mismatched change set lengths")}}}function Cw(n,t,e=!1){let i=[],l=e?[]:null,o=new Ua(n),a=new Ua(t);for(let c=!1;;){if(o.done&&a.done)return l?Ee.createSet(i,l):Oi.create(i);if(o.ins==0)We(i,o.len,0,c),o.next();else if(a.len==0&&!a.done)We(i,0,a.ins,c),l&&Zl(l,i,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let f=Math.min(o.len2,a.len),d=i.length;if(o.ins==-1){let m=a.ins==-1?-1:a.off?0:a.ins;We(i,f,m,c),l&&m&&Zl(l,i,a.text)}else a.ins==-1?(We(i,o.off?0:o.len,f,c),l&&Zl(l,i,o.textBit(f))):(We(i,o.off?0:o.len,a.off?0:a.ins,c),l&&!a.off&&Zl(l,i,a.text));c=(o.ins>f||a.ins>=0&&a.len>f)&&(c||i.length>d),o.forward2(f),a.forward(f)}}}}class Ua{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?qt.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?qt.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class _s{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,l;return this.empty?i=l=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),l=t.mapPos(this.to,-1)),i==this.from&&l==this.to?this:new _s(i,l,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return at.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return at.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return at.range(t.anchor,t.head)}static create(t,e,i){return new _s(t,e,i)}}class at{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:at.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new at([this.main],0)}addRange(t,e=!0){return at.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,at.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new at(t.ranges.map(e=>_s.fromJSON(e)),t.main)}static single(t,e=t){return new at([at.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,l=0;l<t.length;l++){let o=t[l];if(o.empty?o.from<=i:o.from<i)return at.normalized(t.slice(),e);i=o.to}return new at(t,e)}static cursor(t,e=0,i,l){return _s.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(l??16777215)<<6)}static range(t,e,i,l){let o=(i??16777215)<<6|(l==null?7:Math.min(6,l));return e<t?_s.create(e,t,48|o):_s.create(t,e,(e>t?8:0)|o)}static normalized(t,e=0){let i=t[e];t.sort((l,o)=>l.from-o.from),e=t.indexOf(i);for(let l=1;l<t.length;l++){let o=t[l],a=t[l-1];if(o.empty?o.from<=a.to:o.from<a.to){let c=a.from,f=Math.max(o.to,a.to);l<=e&&e--,t.splice(--l,2,o.anchor>o.head?at.range(f,c):at.range(c,f))}}return new at(t,e)}}function Ew(n,t){for(let e of n.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let jp=0;class dt{constructor(t,e,i,l,o){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=l,this.id=jp++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(t={}){return new dt(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:$p),!!t.static,t.enables)}of(t){return new xf([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new xf(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new xf(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}}function $p(n,t){return n==t||n.length==t.length&&n.every((e,i)=>e===t[i])}class xf{constructor(t,e,i,l){this.dependencies=t,this.facet=e,this.type=i,this.value=l,this.id=jp++}dynamicSlot(t){var e;let i=this.value,l=this.facet.compareInput,o=this.id,a=t[o]>>1,c=this.type==2,f=!1,d=!1,m=[];for(let p of this.dependencies)p=="doc"?f=!0:p=="selection"?d=!0:(((e=t[p.id])!==null&&e!==void 0?e:1)&1)==0&&m.push(t[p.id]);return{create(p){return p.values[a]=i(p),1},update(p,b){if(f&&b.docChanged||d&&(b.docChanged||b.selection)||Lg(p,m)){let v=i(p);if(c?!Lv(v,p.values[a],l):!l(v,p.values[a]))return p.values[a]=v,1}return 0},reconfigure:(p,b)=>{let v,S=b.config.address[o];if(S!=null){let w=Lf(b,S);if(this.dependencies.every(A=>A instanceof dt?b.facet(A)===p.facet(A):A instanceof Te?b.field(A,!1)==p.field(A,!1):!0)||(c?Lv(v=i(p),w,l):l(v=i(p),w)))return p.values[a]=w,0}else v=i(p);return p.values[a]=v,1}}}}function Lv(n,t,e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!e(n[i],t[i]))return!1;return!0}function Lg(n,t){let e=!1;for(let i of t)Ba(n,i)&1&&(e=!0);return e}function ST(n,t,e){let i=e.map(f=>n[f.id]),l=e.map(f=>f.type),o=i.filter(f=>!(f&1)),a=n[t.id]>>1;function c(f){let d=[];for(let m=0;m<i.length;m++){let p=Lf(f,i[m]);if(l[m]==2)for(let b of p)d.push(b);else d.push(p)}return t.combine(d)}return{create(f){for(let d of i)Ba(f,d);return f.values[a]=c(f),1},update(f,d){if(!Lg(f,o))return 0;let m=c(f);return t.compare(m,f.values[a])?0:(f.values[a]=m,1)},reconfigure(f,d){let m=Lg(f,i),p=d.config.facets[t.id],b=d.facet(t);if(p&&!m&&$p(e,p))return f.values[a]=b,0;let v=c(f);return t.compare(v,b)?(f.values[a]=b,0):(f.values[a]=v,1)}}}const qc=dt.define({static:!0});class Te{constructor(t,e,i,l,o){this.id=t,this.createF=e,this.updateF=i,this.compareF=l,this.spec=o,this.provides=void 0}static define(t){let e=new Te(jp++,t.create,t.update,t.compare||((i,l)=>i===l),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(qc).find(i=>i.field==this);return((e==null?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,l)=>{let o=i.values[e],a=this.updateF(o,l);return this.compareF(o,a)?0:(i.values[e]=a,1)},reconfigure:(i,l)=>{let o=i.facet(qc),a=l.facet(qc),c;return(c=o.find(f=>f.field==this))&&c!=a.find(f=>f.field==this)?(i.values[e]=c.create(i),1):l.config.address[this.id]!=null?(i.values[e]=l.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,qc.of({field:this,create:t})]}get extension(){return this}}const Rs={lowest:4,low:3,default:2,high:1,highest:0};function ga(n){return t=>new kw(t,n)}const Zs={highest:ga(Rs.highest),high:ga(Rs.high),default:ga(Rs.default),low:ga(Rs.low),lowest:ga(Rs.lowest)};class kw{constructor(t,e){this.inner=t,this.prec=e}}class fh{of(t){return new Hg(this,t)}reconfigure(t){return fh.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Hg{constructor(t,e){this.compartment=t,this.inner=e}}class zf{constructor(t,e,i,l,o,a){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=l,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let l=[],o=Object.create(null),a=new Map;for(let b of wT(t,e,a))b instanceof Te?l.push(b):(o[b.facet.id]||(o[b.facet.id]=[])).push(b);let c=Object.create(null),f=[],d=[];for(let b of l)c[b.id]=d.length<<1,d.push(v=>b.slot(v));let m=i==null?void 0:i.config.facets;for(let b in o){let v=o[b],S=v[0].facet,w=m&&m[b]||[];if(v.every(A=>A.type==0))if(c[S.id]=f.length<<1|1,$p(w,v))f.push(i.facet(S));else{let A=S.combine(v.map(C=>C.value));f.push(i&&S.compare(A,i.facet(S))?i.facet(S):A)}else{for(let A of v)A.type==0?(c[A.id]=f.length<<1|1,f.push(A.value)):(c[A.id]=d.length<<1,d.push(C=>A.dynamicSlot(C)));c[S.id]=d.length<<1,d.push(A=>ST(A,S,v))}}let p=d.map(b=>b(c));return new zf(t,a,p,c,f,o)}}function wT(n,t,e){let i=[[],[],[],[],[]],l=new Map;function o(a,c){let f=l.get(a);if(f!=null){if(f<=c)return;let d=i[f].indexOf(a);d>-1&&i[f].splice(d,1),a instanceof Hg&&e.delete(a.compartment)}if(l.set(a,c),Array.isArray(a))for(let d of a)o(d,c);else if(a instanceof Hg){if(e.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=t.get(a.compartment)||a.inner;e.set(a.compartment,d),o(d,c)}else if(a instanceof kw)o(a.inner,a.prec);else if(a instanceof Te)i[c].push(a),a.provides&&o(a.provides,c);else if(a instanceof xf)i[c].push(a),a.facet.extensions&&o(a.facet.extensions,Rs.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,c)}}return o(n,Rs.default),i.reduce((a,c)=>a.concat(c))}function Ba(n,t){if(t&1)return 2;let e=t>>1,i=n.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[e]=4;let l=n.computeSlot(n,n.config.dynamicSlots[e]);return n.status[e]=2|l}function Lf(n,t){return t&1?n.config.staticValues[t>>1]:n.values[t>>1]}const Tw=dt.define(),Vg=dt.define({combine:n=>n.some(t=>t),static:!0}),Dw=dt.define({combine:n=>n.length?n[0]:void 0,static:!0}),Ow=dt.define(),Rw=dt.define(),Nw=dt.define(),_w=dt.define({combine:n=>n.length?n[0]:!1});class Bi{constructor(t,e){this.type=t,this.value=e}static define(){return new AT}}class AT{of(t){return new Bi(this,t)}}class MT{constructor(t){this.map=t}of(t){return new Et(this,t)}}class Et{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new Et(this.type,e)}is(t){return this.type==t}static define(t={}){return new MT(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let l of t){let o=l.map(e);o&&i.push(o)}return i}}Et.reconfigure=Et.define();Et.appendConfig=Et.define();class ke{constructor(t,e,i,l,o,a){this.startState=t,this.changes=e,this.selection=i,this.effects=l,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Ew(i,e.newLength),o.some(c=>c.type==ke.time)||(this.annotations=o.concat(ke.time.of(Date.now())))}static create(t,e,i,l,o,a){return new ke(t,e,i,l,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(ke.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}ke.time=Bi.define();ke.userEvent=Bi.define();ke.addToHistory=Bi.define();ke.remote=Bi.define();function CT(n,t){let e=[];for(let i=0,l=0;;){let o,a;if(i<n.length&&(l==t.length||t[l]>=n[i]))o=n[i++],a=n[i++];else if(l<t.length)o=t[l++],a=t[l++];else return e;!e.length||e[e.length-1]<o?e.push(o,a):e[e.length-1]<a&&(e[e.length-1]=a)}}function Bw(n,t,e){var i;let l,o,a;return e?(l=t.changes,o=Ee.empty(t.changes.length),a=n.changes.compose(t.changes)):(l=t.changes.map(n.changes),o=n.changes.mapDesc(t.changes,!0),a=n.changes.compose(l)),{changes:a,selection:t.selection?t.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(l),effects:Et.mapEffects(n.effects,l).concat(Et.mapEffects(t.effects,o)),annotations:n.annotations.length?n.annotations.concat(t.annotations):t.annotations,scrollIntoView:n.scrollIntoView||t.scrollIntoView}}function Ug(n,t,e){let i=t.selection,l=jr(t.annotations);return t.userEvent&&(l=l.concat(ke.userEvent.of(t.userEvent))),{changes:t.changes instanceof Ee?t.changes:Ee.of(t.changes||[],e,n.facet(Dw)),selection:i&&(i instanceof at?i:at.single(i.anchor,i.head)),effects:jr(t.effects),annotations:l,scrollIntoView:!!t.scrollIntoView}}function zw(n,t,e){let i=Ug(n,t.length?t[0]:{},n.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(e=!1);let a=!!t[o].sequential;i=Bw(i,Ug(n,t[o],a?i.changes.newLength:n.doc.length),a)}let l=ke.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return kT(e?ET(l):l)}function ET(n){let t=n.startState,e=!0;for(let l of t.facet(Ow)){let o=l(n);if(o===!1){e=!1;break}Array.isArray(o)&&(e=e===!0?o:CT(e,o))}if(e!==!0){let l,o;if(e===!1)o=n.changes.invertedDesc,l=Ee.empty(t.doc.length);else{let a=n.changes.filter(e);l=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}n=ke.create(t,l,n.selection&&n.selection.map(o),Et.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=t.facet(Rw);for(let l=i.length-1;l>=0;l--){let o=i[l](n);o instanceof ke?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof ke?n=o[0]:n=zw(t,jr(o),!1)}return n}function kT(n){let t=n.startState,e=t.facet(Nw),i=n;for(let l=e.length-1;l>=0;l--){let o=e[l](n);o&&Object.keys(o).length&&(i=Bw(i,Ug(t,o,n.changes.newLength),!0))}return i==n?n:ke.create(t,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const TT=[];function jr(n){return n==null?TT:Array.isArray(n)?n:[n]}var ie=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ie||(ie={}));const DT=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let qg;try{qg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function OT(n){if(qg)return qg.test(n);for(let t=0;t<n.length;t++){let e=n[t];if(/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||DT.test(e)))return!0}return!1}function RT(n){return t=>{if(!/\S/.test(t))return ie.Space;if(OT(t))return ie.Word;for(let e=0;e<n.length;e++)if(t.indexOf(n[e])>-1)return ie.Word;return ie.Other}}class Ht{constructor(t,e,i,l,o,a){this.config=t,this.doc=e,this.selection=i,this.values=l,this.status=t.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Ba(this,c<<1);this.computeSlot=null}field(t,e=!0){let i=this.config.address[t.id];if(i==null){if(e)throw new RangeError("Field is not present in this state");return}return Ba(this,i),Lf(this,i)}update(...t){return zw(this,t,!0)}applyTransaction(t){let e=this.config,{base:i,compartments:l}=e;for(let c of t.effects)c.is(fh.reconfigure)?(e&&(l=new Map,e.compartments.forEach((f,d)=>l.set(d,f)),e=null),l.set(c.value.compartment,c.value.extension)):c.is(Et.reconfigure)?(e=null,i=c.value):c.is(Et.appendConfig)&&(e=null,i=jr(i).concat(c.value));let o;e?o=t.startState.values.slice():(e=zf.resolve(i,l,this),o=new Ht(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(f,d)=>d.reconfigure(f,this),null).values);let a=t.startState.facet(Vg)?t.newSelection:t.newSelection.asSingle();new Ht(e,t.newDoc,a,o,(c,f)=>f.update(c,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:at.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),l=this.changes(i.changes),o=[i.range],a=jr(i.effects);for(let c=1;c<e.ranges.length;c++){let f=t(e.ranges[c]),d=this.changes(f.changes),m=d.map(l);for(let b=0;b<c;b++)o[b]=o[b].map(m);let p=l.mapDesc(d,!0);o.push(f.range.map(p)),l=l.compose(m),a=Et.mapEffects(a,m).concat(Et.mapEffects(jr(f.effects),p))}return{changes:l,selection:at.create(o,e.mainIndex),effects:a}}changes(t=[]){return t instanceof Ee?t:Ee.of(t,this.doc.length,this.facet(Ht.lineSeparator))}toText(t){return qt.of(t.split(this.facet(Ht.lineSeparator)||_g))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(Ba(this,e),Lf(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let l=t[i];l instanceof Te&&this.config.address[l.id]!=null&&(e[i]=l.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t,e={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let l=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(t,o)){let a=i[o],c=t[o];l.push(a.init(f=>a.spec.fromJSON(c,f)))}}return Ht.create({doc:t.doc,selection:at.fromJSON(t.selection),extensions:e.extensions?l.concat([e.extensions]):l})}static create(t={}){let e=zf.resolve(t.extensions||[],new Map),i=t.doc instanceof qt?t.doc:qt.of((t.doc||"").split(e.staticFacet(Ht.lineSeparator)||_g)),l=t.selection?t.selection instanceof at?t.selection:at.single(t.selection.anchor,t.selection.head):at.single(0);return Ew(l,i.length),e.staticFacet(Vg)||(l=l.asSingle()),new Ht(e,i,l,e.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(Ht.tabSize)}get lineBreak(){return this.facet(Ht.lineSeparator)||`
`}get readOnly(){return this.facet(_w)}phrase(t,...e){for(let i of this.facet(Ht.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(i,l)=>{if(l=="$")return"$";let o=+(l||1);return!o||o>e.length?i:e[o-1]})),t}languageDataAt(t,e,i=-1){let l=[];for(let o of this.facet(Tw))for(let a of o(this,e,i))Object.prototype.hasOwnProperty.call(a,t)&&l.push(a[t]);return l}charCategorizer(t){return RT(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:i,length:l}=this.doc.lineAt(t),o=this.charCategorizer(t),a=t-i,c=t-i;for(;a>0;){let f=Xe(e,a,!1);if(o(e.slice(f,a))!=ie.Word)break;a=f}for(;c<l;){let f=Xe(e,c);if(o(e.slice(c,f))!=ie.Word)break;c=f}return a==c?null:at.range(a+i,c+i)}}Ht.allowMultipleSelections=Vg;Ht.tabSize=dt.define({combine:n=>n.length?n[0]:4});Ht.lineSeparator=Dw;Ht.readOnly=_w;Ht.phrases=dt.define({compare(n,t){let e=Object.keys(n),i=Object.keys(t);return e.length==i.length&&e.every(l=>n[l]==t[l])}});Ht.languageData=Tw;Ht.changeFilter=Ow;Ht.transactionFilter=Rw;Ht.transactionExtender=Nw;fh.reconfigure=Et.define();function fi(n,t,e={}){let i={};for(let l of n)for(let o of Object.keys(l)){let a=l[o],c=i[o];if(c===void 0)i[o]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(e,o))i[o]=e[o](c,a);else throw new Error("Config merge conflict for field "+o)}for(let l in t)i[l]===void 0&&(i[l]=t[l]);return i}class Ys{eq(t){return this==t}range(t,e=t){return Yg.create(t,e,this)}}Ys.prototype.startSide=Ys.prototype.endSide=0;Ys.prototype.point=!1;Ys.prototype.mapMode=sn.TrackDel;let Yg=class Lw{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new Lw(t,e,i)}};function Gg(n,t){return n.from-t.from||n.value.startSide-t.value.startSide}class Kp{constructor(t,e,i,l){this.from=t,this.to=e,this.value=i,this.maxPoint=l}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,l=0){let o=i?this.to:this.from;for(let a=l,c=o.length;;){if(a==c)return a;let f=a+c>>1,d=o[f]-t||(i?this.value[f].endSide:this.value[f].startSide)-e;if(f==a)return d>=0?a:c;d>=0?c=f:a=f+1}}between(t,e,i,l){for(let o=this.findIndex(e,-1e9,!0),a=this.findIndex(i,1e9,!1,o);o<a;o++)if(l(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,e){let i=[],l=[],o=[],a=-1,c=-1;for(let f=0;f<this.value.length;f++){let d=this.value[f],m=this.from[f]+t,p=this.to[f]+t,b,v;if(m==p){let S=e.mapPos(m,d.startSide,d.mapMode);if(S==null||(b=v=S,d.startSide!=d.endSide&&(v=e.mapPos(m,d.endSide),v<b)))continue}else if(b=e.mapPos(m,d.startSide),v=e.mapPos(p,d.endSide),b>v||b==v&&d.startSide>0&&d.endSide<=0)continue;(v-b||d.endSide-d.startSide)<0||(a<0&&(a=b),d.point&&(c=Math.max(c,v-b)),i.push(d),l.push(b-a),o.push(v-a))}return{mapped:i.length?new Kp(l,o,i,c):null,pos:a}}}class Vt{constructor(t,e,i,l){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=l}static create(t,e,i,l){return new Vt(t,e,i,l)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:l=0,filterTo:o=this.length}=t,a=t.filter;if(e.length==0&&!a)return this;if(i&&(e=e.slice().sort(Gg)),this.isEmpty)return e.length?Vt.of(e):this;let c=new Hw(this,null,-1).goto(0),f=0,d=[],m=new rl;for(;c.value||f<e.length;)if(f<e.length&&(c.from-e[f].from||c.startSide-e[f].value.startSide)>=0){let p=e[f++];m.addInner(p.from,p.to,p.value)||d.push(p)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(f==e.length||this.chunkEnd(c.chunkIndex)<e[f].from)&&(!a||l>this.chunkEnd(c.chunkIndex)||o<this.chunkPos[c.chunkIndex])&&m.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||l>c.to||o<c.from||a(c.from,c.to,c.value))&&(m.addInner(c.from,c.to,c.value)||d.push(Yg.create(c.from,c.to,c.value))),c.next());return m.finishInner(this.nextLayer.isEmpty&&!d.length?Vt.empty:this.nextLayer.update({add:d,filter:a,filterFrom:l,filterTo:o}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],l=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],f=this.chunk[a],d=t.touchesRange(c,c+f.length);if(d===!1)l=Math.max(l,f.maxPoint),e.push(f),i.push(t.mapPos(c));else if(d===!0){let{mapped:m,pos:p}=f.map(c,t);m&&(l=Math.max(l,m.maxPoint),e.push(m),i.push(p))}}let o=this.nextLayer.map(t);return e.length==0?o:new Vt(i,e,o||Vt.empty,l)}between(t,e,i){if(!this.isEmpty){for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l];if(e>=o&&t<=o+a.length&&a.between(o,t-o,e-o,i)===!1)return}this.nextLayer.between(t,e,i)}}iter(t=0){return qa.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return qa.from(t).goto(e)}static compare(t,e,i,l,o=-1){let a=t.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),c=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),f=Hv(a,c,i),d=new pa(a,f,o),m=new pa(c,f,o);i.iterGaps((p,b,v)=>Vv(d,p,m,b,v,l)),i.empty&&i.length==0&&Vv(d,0,m,0,0,l)}static eq(t,e,i=0,l){l==null&&(l=999999999);let o=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0),a=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let c=Hv(o,a),f=new pa(o,c,0).goto(i),d=new pa(a,c,0).goto(i);for(;;){if(f.to!=d.to||!Pg(f.active,d.active)||f.point&&(!d.point||!f.point.eq(d.point)))return!1;if(f.to>l)return!0;f.next(),d.next()}}static spans(t,e,i,l,o=-1){let a=new pa(t,null,o).goto(e),c=e,f=a.openStart;for(;;){let d=Math.min(a.to,i);if(a.point){let m=a.activeForPoint(a.to),p=a.pointFrom<e?m.length+1:a.point.startSide<0?m.length:Math.min(m.length,f);l.point(c,d,a.point,m,p,a.pointRank),f=Math.min(a.openEnd(d),m.length)}else d>c&&(l.span(c,d,a.active,f),f=a.openEnd(d));if(a.to>i)return f+(a.point&&a.to>i?1:0);c=a.to,a.next()}}static of(t,e=!1){let i=new rl;for(let l of t instanceof Yg?[t]:e?NT(t):t)i.add(l.from,l.to,l.value);return i.finish()}static join(t){if(!t.length)return Vt.empty;let e=t[t.length-1];for(let i=t.length-2;i>=0;i--)for(let l=t[i];l!=Vt.empty;l=l.nextLayer)e=new Vt(l.chunkPos,l.chunk,e,Math.max(l.maxPoint,e.maxPoint));return e}}Vt.empty=new Vt([],[],null,-1);function NT(n){if(n.length>1)for(let t=n[0],e=1;e<n.length;e++){let i=n[e];if(Gg(t,i)>0)return n.slice().sort(Gg);t=i}return n}Vt.empty.nextLayer=Vt.empty;class rl{finishChunk(t){this.chunks.push(new Kp(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new rl)).add(t,e,i)}addInner(t,e,i){let l=t-this.lastTo||i.startSide-this.last.endSide;if(l<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return l<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(Vt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=Vt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Hv(n,t,e){let i=new Map;for(let o of n)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&i.set(o.chunk[a],o.chunkPos[a]);let l=new Set;for(let o of t)for(let a=0;a<o.chunk.length;a++){let c=i.get(o.chunk[a]);c!=null&&(e?e.mapPos(c):c)==o.chunkPos[a]&&!(e!=null&&e.touchesRange(c,c+o.chunk[a].length))&&l.add(o.chunk[a])}return l}class Hw{constructor(t,e,i,l=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=l}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let l=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(l)||this.layer.chunkEnd(this.chunkIndex)<t||l.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let l=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<l)&&this.setRangeIndex(l)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class qa{constructor(t){this.heap=t}static from(t,e=null,i=-1){let l=[];for(let o=0;o<t.length;o++)for(let a=t[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&l.push(new Hw(a,e,i,o));return l.length==1?l[0]:new qa(l)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)$m(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)$m(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),$m(this.heap,0)}}}function $m(n,t){for(let e=n[t];;){let i=(t<<1)+1;if(i>=n.length)break;let l=n[i];if(i+1<n.length&&l.compare(n[i+1])>=0&&(l=n[i+1],i++),e.compare(l)<0)break;n[i]=e,n[t]=l,t=i}}class pa{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=qa.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Yc(this.active,t),Yc(this.activeTo,t),Yc(this.activeRank,t),this.minActive=Uv(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:l,rank:o}=this.cursor;for(;e<this.activeRank.length&&(o-this.activeRank[e]||l-this.activeTo[e])>0;)e++;Gc(this.active,e,i),Gc(this.activeTo,e,l),Gc(this.activeRank,e,o),t&&Gc(t,e,this.cursor.from),this.minActive=Uv(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let l=this.minActive;if(l>-1&&(this.activeTo[l]-this.cursor.from||this.active[l].endSide-this.cursor.startSide)<0){if(this.activeTo[l]>t){this.to=this.activeTo[l],this.endSide=this.active[l].endSide;break}this.removeActive(l),i&&Yc(i,l)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let l=i.length-1;l>=0&&i[l]<t;l--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}}function Vv(n,t,e,i,l,o){n.goto(t),e.goto(i);let a=i+l,c=i,f=i-t;for(;;){let d=n.to+f-e.to,m=d||n.endSide-e.endSide,p=m<0?n.to+f:e.to,b=Math.min(p,a);if(n.point||e.point?n.point&&e.point&&(n.point==e.point||n.point.eq(e.point))&&Pg(n.activeForPoint(n.to),e.activeForPoint(e.to))||o.comparePoint(c,b,n.point,e.point):b>c&&!Pg(n.active,e.active)&&o.compareRange(c,b,n.active,e.active),p>a)break;(d||n.openEnd!=e.openEnd)&&o.boundChange&&o.boundChange(p),c=p,m<=0&&n.next(),m>=0&&e.next()}}function Pg(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!=t[e]&&!n[e].eq(t[e]))return!1;return!0}function Yc(n,t){for(let e=t,i=n.length-1;e<i;e++)n[e]=n[e+1];n.pop()}function Gc(n,t,e){for(let i=n.length-1;i>=t;i--)n[i+1]=n[i];n[t]=e}function Uv(n,t){let e=-1,i=1e9;for(let l=0;l<t.length;l++)(t[l]-i||n[l].endSide-n[e].endSide)<0&&(e=l,i=t[l]);return e}function ho(n,t,e=n.length){let i=0;for(let l=0;l<e&&l<n.length;)n.charCodeAt(l)==9?(i+=t-i%t,l++):(i++,l=Xe(n,l));return i}function Xg(n,t,e,i){for(let l=0,o=0;;){if(o>=t)return l;if(l==n.length)break;o+=n.charCodeAt(l)==9?e-o%e:1,l=Xe(n,l)}return i===!0?-1:n.length}const jg="ͼ",qv=typeof Symbol>"u"?"__"+jg:Symbol.for(jg),$g=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class es{constructor(t,e){this.rules=[];let{finish:i}=e||{};function l(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,c,f,d){let m=[],p=/^@(\w+)\b/.exec(a[0]),b=p&&p[1]=="keyframes";if(p&&c==null)return f.push(a[0]+";");for(let v in c){let S=c[v];if(/&/.test(v))o(v.split(/,\s*/).map(w=>a.map(A=>w.replace(/&/,A))).reduce((w,A)=>w.concat(A)),S,f);else if(S&&typeof S=="object"){if(!p)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(l(v),S,m,b)}else S!=null&&m.push(v.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+S+";")}(m.length||b)&&f.push((i&&!p&&!d?a.map(i):a).join(", ")+" {"+m.join(" ")+"}")}for(let a in t)o(l(a),t[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Yv[qv]||1;return Yv[qv]=t+1,jg+t.toString(36)}static mount(t,e,i){let l=t[$g],o=i&&i.nonce;l?o&&l.setNonce(o):l=new _T(t,o),l.mount(Array.isArray(e)?e:[e],t)}}let Gv=new Map;class _T{constructor(t,e){let i=t.ownerDocument||t,l=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&l.CSSStyleSheet){let o=Gv.get(i);if(o)return t[$g]=o;this.sheet=new l.CSSStyleSheet,Gv.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[$g]=this}mount(t,e){let i=this.sheet,l=0,o=0;for(let a=0;a<t.length;a++){let c=t[a],f=this.modules.indexOf(c);if(f<o&&f>-1&&(this.modules.splice(f,1),o--,f=-1),f==-1){if(this.modules.splice(o++,0,c),i)for(let d=0;d<c.rules.length;d++)i.insertRule(c.rules[d],l++)}else{for(;o<f;)l+=this.modules[o++].rules.length;l+=c.rules.length,o++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let a="";for(let f=0;f<this.modules.length;f++)a+=this.modules[f].getRules()+`
`;this.styleTag.textContent=a;let c=e.head||e;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var ns={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ya={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},BT=typeof navigator<"u"&&/Mac/.test(navigator.platform),zT=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ge=0;Ge<10;Ge++)ns[48+Ge]=ns[96+Ge]=String(Ge);for(var Ge=1;Ge<=24;Ge++)ns[Ge+111]="F"+Ge;for(var Ge=65;Ge<=90;Ge++)ns[Ge]=String.fromCharCode(Ge+32),Ya[Ge]=String.fromCharCode(Ge);for(var Km in ns)Ya.hasOwnProperty(Km)||(Ya[Km]=ns[Km]);function LT(n){var t=BT&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||zT&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Ya:ns)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Zt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=e[i];typeof l=="string"?n.setAttribute(i,l):l!=null&&(n[i]=l)}t++}for(;t<arguments.length;t++)Vw(n,arguments[t]);return n}function Vw(n,t){if(typeof t=="string")n.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)n.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)Vw(n,t[e]);else throw new RangeError("Unsupported child node: "+t)}function Ga(n){let t;return n.nodeType==11?t=n.getSelection?n:n.ownerDocument:t=n,t.getSelection()}function Kg(n,t){return t?n==t||n.contains(t.nodeType!=1?t.parentNode:t):!1}function Sf(n,t){if(!t.anchorNode)return!1;try{return Kg(n,t.anchorNode)}catch{return!1}}function to(n){return n.nodeType==3?Ps(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function za(n,t,e,i){return e?Pv(n,t,e,i,-1)||Pv(n,t,e,i,1):!1}function Gs(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t}function Hf(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Pv(n,t,e,i,l){for(;;){if(n==e&&t==i)return!0;if(t==(l<0?0:Ni(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;t=Gs(n)+(l<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[t+(l<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;t=l<0?Ni(n):0}else return!1}}function Ni(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function cu(n,t){let e=t?n.left:n.right;return{left:e,right:e,top:n.top,bottom:n.bottom}}function HT(n){let t=n.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Uw(n,t){let e=t.width/n.offsetWidth,i=t.height/n.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-n.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-n.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function VT(n,t,e,i,l,o,a,c){let f=n.ownerDocument,d=f.defaultView||window;for(let m=n,p=!1;m&&!p;)if(m.nodeType==1){let b,v=m==f.body,S=1,w=1;if(v)b=HT(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(p=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let O=m.getBoundingClientRect();({scaleX:S,scaleY:w}=Uw(m,O)),b={left:O.left,right:O.left+m.clientWidth*S,top:O.top,bottom:O.top+m.clientHeight*w}}let A=0,C=0;if(l=="nearest")t.top<b.top?(C=t.top-(b.top+a),e>0&&t.bottom>b.bottom+C&&(C=t.bottom-b.bottom+a)):t.bottom>b.bottom&&(C=t.bottom-b.bottom+a,e<0&&t.top-C<b.top&&(C=t.top-(b.top+a)));else{let O=t.bottom-t.top,_=b.bottom-b.top;C=(l=="center"&&O<=_?t.top+O/2-_/2:l=="start"||l=="center"&&e<0?t.top-a:t.bottom-_+a)-b.top}if(i=="nearest"?t.left<b.left?(A=t.left-(b.left+o),e>0&&t.right>b.right+A&&(A=t.right-b.right+o)):t.right>b.right&&(A=t.right-b.right+o,e<0&&t.left<b.left+A&&(A=t.left-(b.left+o))):A=(i=="center"?t.left+(t.right-t.left)/2-(b.right-b.left)/2:i=="start"==c?t.left-o:t.right-(b.right-b.left)+o)-b.left,A||C)if(v)d.scrollBy(A,C);else{let O=0,_=0;if(C){let D=m.scrollTop;m.scrollTop+=C/w,_=(m.scrollTop-D)*w}if(A){let D=m.scrollLeft;m.scrollLeft+=A/S,O=(m.scrollLeft-D)*S}t={left:t.left-O,top:t.top-_,right:t.right-O,bottom:t.bottom-_},O&&Math.abs(O-A)<1&&(i="nearest"),_&&Math.abs(_-C)<1&&(l="nearest")}if(v)break;(t.top<b.top||t.bottom>b.bottom||t.left<b.left||t.right>b.right)&&(t={left:Math.max(t.left,b.left),right:Math.min(t.right,b.right),top:Math.max(t.top,b.top),bottom:Math.min(t.bottom,b.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function UT(n){let t=n.ownerDocument,e,i;for(let l=n.parentNode;l&&!(l==t.body||e&&i);)if(l.nodeType==1)!i&&l.scrollHeight>l.clientHeight&&(i=l),!e&&l.scrollWidth>l.clientWidth&&(e=l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;return{x:e,y:i}}class qT{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?Ni(e):0),i,Math.min(t.focusOffset,i?Ni(i):0))}set(t,e,i,l){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=l}}let _r=null;function qw(n){if(n.setActive)return n.setActive();if(_r)return n.focus(_r);let t=[];for(let e=n;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(n.focus(_r==null?{get preventScroll(){return _r={preventScroll:!0},!0}}:void 0),!_r){_r=!1;for(let e=0;e<t.length;){let i=t[e++],l=t[e++],o=t[e++];i.scrollTop!=l&&(i.scrollTop=l),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let Xv;function Ps(n,t,e=t){let i=Xv||(Xv=document.createRange());return i.setEnd(n,e),i.setStart(n,t),i}function $r(n,t,e,i){let l={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:l.altKey,ctrlKey:l.ctrlKey,shiftKey:l.shiftKey,metaKey:l.metaKey}=i);let o=new KeyboardEvent("keydown",l);o.synthetic=!0,n.dispatchEvent(o);let a=new KeyboardEvent("keyup",l);return a.synthetic=!0,n.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function YT(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Yw(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function GT(n,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,Ni(e));;)if(i){if(e.nodeType!=1)return!1;let l=e.childNodes[i-1];l.contentEditable=="false"?i--:(e=l,i=Ni(e))}else{if(e==n)return!0;i=Gs(e),e=e.parentNode}}function Gw(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Pw(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=Ni(e)}else if(e.parentNode&&!Hf(e))i=Gs(e),e=e.parentNode;else return null}}function Xw(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!Hf(e))i=Gs(e)+1,e=e.parentNode;else return null}}class Fe{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new Fe(t.parentNode,Gs(t),e)}static after(t,e){return new Fe(t.parentNode,Gs(t)+1,e)}}const Ip=[];class Ft{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let i of this.children){if(i==t)return e;e+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(this.flags&2){let i=this.dom,l=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=l?l.nextSibling:i.firstChild)){let c=Ft.get(o);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(t,e),a.flags&=-8}if(o=l?l.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&o!=a.dom&&(e.written=!0),a.dom.parentNode==i)for(;o&&o!=a.dom;)o=jv(o);else i.insertBefore(a.dom,o);l=a.dom}for(o=l?l.nextSibling:i.firstChild,o&&e&&e.node==i&&(e.written=!0);o;)o=jv(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(t,e),i.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let i;if(t==this.dom)i=this.dom.childNodes[e];else{let l=Ni(t)==0?0:e==0?-1:1;for(;;){let o=t.parentNode;if(o==this.dom)break;l==0&&o.firstChild!=o.lastChild&&(t==o.firstChild?l=-1:l=1),t=o}l<0?i=t:i=t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ft.get(i);)i=i.nextSibling;if(!i)return this.length;for(let l=0,o=0;;l++){let a=this.children[l];if(a.dom==i)return o;o+=a.length+a.breakAfter}}domBoundsAround(t,e,i=0){let l=-1,o=-1,a=-1,c=-1;for(let f=0,d=i,m=i;f<this.children.length;f++){let p=this.children[f],b=d+p.length;if(d<t&&b>e)return p.domBoundsAround(t,e,d);if(b>=t&&l==-1&&(l=f,o=d),d>e&&p.dom.parentNode==this.dom){a=f,c=m;break}m=b,d=b+p.breakAfter}return{from:o,to:c<0?i+this.length:c,startDOM:(l?this.children[l-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),e.flags&1)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.flags&7&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,i=Ip){this.markDirty();for(let l=t;l<e;l++){let o=this.children[l];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(t,e-t,...i):this.children=[].concat(this.children.slice(0,t),i,this.children.slice(e));for(let l=0;l<i.length;l++)i[l].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new jw(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,i,l,o,a){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!((this.flags|t.flags)&8)}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}Ft.prototype.breakAfter=0;function jv(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class jw{constructor(t,e,i){this.children=t,this.pos=e,this.i=i,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function $w(n,t,e,i,l,o,a,c,f){let{children:d}=n,m=d.length?d[t]:null,p=o.length?o[o.length-1]:null,b=p?p.breakAfter:a;if(!(t==i&&m&&!a&&!b&&o.length<2&&m.merge(e,l,o.length?p:null,e==0,c,f))){if(i<d.length){let v=d[i];v&&(l<v.length||v.breakAfter&&(p!=null&&p.breakAfter))?(t==i&&(v=v.split(l),l=0),!b&&p&&v.merge(0,l,p,!0,0,f)?o[o.length-1]=v:((l||v.children.length&&!v.children[0].length)&&v.merge(0,l,null,!1,0,f),o.push(v))):v!=null&&v.breakAfter&&(p?p.breakAfter=1:a=1),i++}for(m&&(m.breakAfter=a,e>0&&(!a&&o.length&&m.merge(e,m.length,o[0],!1,c,0)?m.breakAfter=o.shift().breakAfter:(e<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(e,m.length,null,!1,c,0),t++));t<i&&o.length;)if(d[i-1].become(o[o.length-1]))i--,o.pop(),f=o.length?0:c;else if(d[t].become(o[0]))t++,o.shift(),c=o.length?0:f;else break;!o.length&&t&&i<d.length&&!d[t-1].breakAfter&&d[i].merge(0,0,d[t-1],!1,c,f)&&t--,(t<i||o.length)&&n.replaceChildren(t,i,o)}}function Kw(n,t,e,i,l,o){let a=n.childCursor(),{i:c,off:f}=a.findPos(e,1),{i:d,off:m}=a.findPos(t,-1),p=t-e;for(let b of i)p+=b.length;n.length+=p,$w(n,d,m,c,f,i,0,l,o)}let mn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ig=typeof document<"u"?document:{documentElement:{style:{}}};const Zg=/Edge\/(\d+)/.exec(mn.userAgent),Iw=/MSIE \d/.test(mn.userAgent),Wg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mn.userAgent),hh=!!(Iw||Wg||Zg),$v=!hh&&/gecko\/(\d+)/i.test(mn.userAgent),Im=!hh&&/Chrome\/(\d+)/.exec(mn.userAgent),PT="webkitFontSmoothing"in Ig.documentElement.style,Zw=!hh&&/Apple Computer/.test(mn.vendor),Kv=Zw&&(/Mobile\/\w+/.test(mn.userAgent)||mn.maxTouchPoints>2);var mt={mac:Kv||/Mac/.test(mn.platform),windows:/Win/.test(mn.platform),linux:/Linux|X11/.test(mn.platform),ie:hh,ie_version:Iw?Ig.documentMode||6:Wg?+Wg[1]:Zg?+Zg[1]:0,gecko:$v,gecko_version:$v?+(/Firefox\/(\d+)/.exec(mn.userAgent)||[0,0])[1]:0,chrome:!!Im,chrome_version:Im?+Im[1]:0,ios:Kv,android:/Android\b/.test(mn.userAgent),safari:Zw,webkit_version:PT?+(/\bAppleWebKit\/(\d+)/.exec(mn.userAgent)||[0,0])[1]:0,tabSize:Ig.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const XT=256;class ui extends Ft{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,i){return this.flags&8||i&&(!(i instanceof ui)||this.length-(e-t)+i.length>XT||i.flags&8)?!1:(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new ui(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=this.flags&8,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Fe(this.dom,t)}domBoundsAround(t,e,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return jT(this.dom,t,e)}}class ol extends Ft{constructor(t,e=[],i=0){super(),this.mark=t,this.children=e,this.length=i;for(let l of e)l.setParent(this)}setAttrs(t){if(Yw(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!((this.flags|t.flags)&8)}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,i,l,o,a){return i&&(!(i instanceof ol&&i.mark.eq(this.mark))||t&&o<=0||e<this.length&&a<=0)?!1:(Kw(this,t,e,i?i.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(t){let e=[],i=0,l=-1,o=0;for(let c of this.children){let f=i+c.length;f>t&&e.push(i<t?c.split(t-i):c),l<0&&i>=t&&(l=o),i=f,o++}let a=this.length-t;return this.length=t,l>-1&&(this.children.length=l,this.markDirty()),new ol(this.mark,e,a)}domAtPos(t){return Ww(this,t)}coordsAt(t,e){return Qw(this,t,e)}}function jT(n,t,e){let i=n.nodeValue.length;t>i&&(t=i);let l=t,o=t,a=0;t==0&&e<0||t==i&&e>=0?mt.chrome||mt.gecko||(t?(l--,a=1):o<i&&(o++,a=-1)):e<0?l--:o<i&&o++;let c=Ps(n,l,o).getClientRects();if(!c.length)return null;let f=c[(a?a<0:e>=0)?0:c.length-1];return mt.safari&&!a&&f.width==0&&(f=Array.prototype.find.call(c,d=>d.width)||f),a?cu(f,a<0):f||null}class Wl extends Ft{static create(t,e,i){return new Wl(t,e,i)}constructor(t,e,i){super(),this.widget=t,this.length=e,this.side=i,this.prevWidget=null}split(t){let e=Wl.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,i,l,o,a){return i&&(!(i instanceof Wl)||!this.widget.compare(i.widget)||t>0&&o<=0||e<this.length&&a<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-e),!0)}become(t){return t instanceof Wl&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return qt.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,i=e&&e.state.doc,l=this.posAtStart;return i?i.slice(l,l+this.length):qt.empty}domAtPos(t){return(this.length?t==0:this.side>0)?Fe.before(this.dom):Fe.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);if(i)return i;let l=this.dom.getClientRects(),o=null;if(!l.length)return null;let a=this.side?this.side<0:t>0;for(let c=a?l.length-1:0;o=l[c],!(t>0?c==0:c==l.length-1||o.top<o.bottom);c+=a?-1:1);return cu(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class eo extends Ft{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof eo&&t.side==this.side}split(){return new eo(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Fe.before(this.dom):Fe.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return qt.empty}get isHidden(){return!0}}ui.prototype.children=Wl.prototype.children=eo.prototype.children=Ip;function Ww(n,t){let e=n.dom,{children:i}=n,l=0;for(let o=0;l<i.length;l++){let a=i[l],c=o+a.length;if(!(c==o&&a.getSide()<=0)){if(t>o&&t<c&&a.dom.parentNode==e)return a.domAtPos(t-o);if(t<=o)break;o=c}}for(let o=l;o>0;o--){let a=i[o-1];if(a.dom.parentNode==e)return a.domAtPos(a.length)}for(let o=l;o<i.length;o++){let a=i[o];if(a.dom.parentNode==e)return a.domAtPos(0)}return new Fe(e,0)}function Fw(n,t,e){let i,{children:l}=n;e>0&&t instanceof ol&&l.length&&(i=l[l.length-1])instanceof ol&&i.mark.eq(t.mark)?Fw(i,t.children[0],e-1):(l.push(t),t.setParent(n)),n.length+=t.length}function Qw(n,t,e){let i=null,l=-1,o=null,a=-1;function c(d,m){for(let p=0,b=0;p<d.children.length&&b<=m;p++){let v=d.children[p],S=b+v.length;S>=m&&(v.children.length?c(v,m-b):(!o||o.isHidden&&(e>0||KT(o,v)))&&(S>m||b==S&&v.getSide()>0)?(o=v,a=m-b):(b<m||b==S&&v.getSide()<0&&!v.isHidden)&&(i=v,l=m-b)),b=S}}c(n,t);let f=(e<0?i:o)||i||o;return f?f.coordsAt(Math.max(0,f==i?l:a),e):$T(n)}function $T(n){let t=n.dom.lastChild;if(!t)return n.dom.getBoundingClientRect();let e=to(t);return e[e.length-1]||null}function KT(n,t){let e=n.coordsAt(0,1),i=t.coordsAt(0,1);return e&&i&&i.top<e.bottom}function Fg(n,t){for(let e in n)e=="class"&&t.class?t.class+=" "+n.class:e=="style"&&t.style?t.style+=";"+n.style:t[e]=n[e];return t}const Iv=Object.create(null);function Vf(n,t,e){if(n==t)return!0;n||(n=Iv),t||(t=Iv);let i=Object.keys(n),l=Object.keys(t);if(i.length-(e&&i.indexOf(e)>-1?1:0)!=l.length-(e&&l.indexOf(e)>-1?1:0))return!1;for(let o of i)if(o!=e&&(l.indexOf(o)==-1||n[o]!==t[o]))return!1;return!0}function Qg(n,t,e){let i=!1;if(t)for(let l in t)e&&l in e||(i=!0,l=="style"?n.style.cssText="":n.removeAttribute(l));if(e)for(let l in e)t&&t[l]==e[l]||(i=!0,l=="style"?n.style.cssText=e[l]:n.setAttribute(l,e[l]));return i}function IT(n){let t=Object.create(null);for(let e=0;e<n.attributes.length;e++){let i=n.attributes[e];t[i.name]=i.value}return t}class cl{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var rn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(rn||(rn={}));class xt extends Ys{constructor(t,e,i,l){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=l}get heightRelevant(){return!1}static mark(t){return new fu(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new is(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,l;if(t.isBlockGap)i=-5e8,l=4e8;else{let{start:o,end:a}=Jw(t,e);i=(o?e?-3e8:-1:5e8)-1,l=(a?e?2e8:1:-6e8)+1}return new is(t,i,l,e,t.widget||null,!0)}static line(t){return new hu(t)}static set(t,e=!1){return Vt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}xt.none=Vt.empty;class fu extends xt{constructor(t){let{start:e,end:i}=Jw(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,i;return this==t||t instanceof fu&&this.tagName==t.tagName&&(this.class||((e=this.attrs)===null||e===void 0?void 0:e.class))==(t.class||((i=t.attrs)===null||i===void 0?void 0:i.class))&&Vf(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}fu.prototype.point=!1;class hu extends xt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof hu&&this.spec.class==t.spec.class&&Vf(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}hu.prototype.mapMode=sn.TrackBefore;hu.prototype.point=!0;class is extends xt{constructor(t,e,i,l,o,a){super(e,i,o,t),this.block=l,this.isReplace=a,this.mapMode=l?e<=0?sn.TrackBefore:sn.TrackAfter:sn.TrackDel}get type(){return this.startSide!=this.endSide?rn.WidgetRange:this.startSide<=0?rn.WidgetBefore:rn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof is&&ZT(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}is.prototype.point=!0;function Jw(n,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=n;return e==null&&(e=n.inclusive),i==null&&(i=n.inclusive),{start:e??t,end:i??t}}function ZT(n,t){return n==t||!!(n&&t&&n.compare(t))}function wf(n,t,e,i=0){let l=e.length-1;l>=0&&e[l]+i>=n?e[l]=Math.max(e[l],t):e.push(n,t)}class we extends Ft{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,i,l,o,a){if(i){if(!(i instanceof we))return!1;this.dom||i.transferDOM(this)}return l&&this.setDeco(i?i.attrs:null),Kw(this,t,e,i?i.children.slice():[],o,a),!0}split(t){let e=new we;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i,off:l}=this.childPos(t);l&&(e.append(this.children[i].split(l),0),this.children[i].merge(l,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)e.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Vf(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){Fw(this,t,e)}addLineDeco(t){let e=t.spec.attributes,i=t.spec.class;e&&(this.attrs=Fg(e,this.attrs||{})),i&&(this.attrs=Fg({class:i},this.attrs||{}))}domAtPos(t){return Ww(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.flags|=6)}sync(t,e){var i;this.dom?this.flags&4&&(Yw(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Qg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let l=this.dom.lastChild;for(;l&&Ft.get(l)instanceof ol;)l=l.lastChild;if(!l||!this.length||l.nodeName!="BR"&&((i=Ft.get(l))===null||i===void 0?void 0:i.isEditable)==!1&&(!mt.ios||!this.children.some(o=>o instanceof ui))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0,e;for(let i of this.children){if(!(i instanceof ui)||/[^ -~]/.test(i.text))return null;let l=to(i.dom);if(l.length!=1)return null;t+=l[0].width,e=l[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(t,e){let i=Qw(this,t,e);if(!this.children.length&&i&&this.parent){let{heightOracle:l}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-l.lineHeight)<2&&l.textHeight<o){let a=(o-l.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(t){return t instanceof we&&this.children.length==0&&t.children.length==0&&Vf(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let i=0,l=0;i<t.children.length;i++){let o=t.children[i],a=l+o.length;if(a>=e){if(o instanceof we)return o;if(a>e)break}l=a+o.breakAfter}return null}}class ll extends Ft{constructor(t,e,i){super(),this.widget=t,this.length=e,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(t,e,i,l,o,a){return i&&(!(i instanceof ll)||!this.widget.compare(i.widget)||t>0&&o<=0||e<this.length&&a<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?Fe.before(this.dom):Fe.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let i=new ll(this.widget,e,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Ip}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):qt.empty}domBoundsAround(){return null}become(t){return t instanceof ll&&t.widget.constructor==this.widget.constructor?(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);return i||(this.widget instanceof Jg?null:cu(this.dom.getBoundingClientRect(),this.length?t==0:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:i}=this.deco;return e==i?!1:t<0?e<0:i>0}}class Jg extends cl{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class La{constructor(t,e,i,l){this.doc=t,this.pos=e,this.end=i,this.disallowBlockEffectsFor=l,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof ll&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new we),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Pc(new eo(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(t&&this.content.length&&this.content[this.content.length-1]instanceof ll)&&this.getLine()}buildText(t,e,i){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=o,this.textOff=0}let l=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-i)),this.getLine().append(Pc(new ui(this.text.slice(this.textOff,this.textOff+l)),e),i),this.atCursorPos=!0,this.textOff+=l,t-=l,i=0}}span(t,e,i,l){this.buildText(e-t,i,l),this.pos=e,this.openStart<0&&(this.openStart=l)}point(t,e,i,l,o,a){if(this.disallowBlockEffectsFor[a]&&i instanceof is){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=e-t;if(i instanceof is)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ll(i.widget||no.block,c,i));else{let f=Wl.create(i.widget||no.inline,c,c?0:i.startSide),d=this.atCursorPos&&!f.isEditable&&o<=l.length&&(t<e||i.startSide>0),m=!f.isEditable&&(t<e||o>l.length||i.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!d&&!f.isEditable&&(this.pendingBuffer=0),this.flushBuffer(l),d&&(p.append(Pc(new eo(1),l),o),o=l.length+Math.max(0,o-l.length)),p.append(Pc(f,l),o),this.atCursorPos=m,this.pendingBuffer=m?t<e||o>l.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=l.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=o)}static build(t,e,i,l,o){let a=new La(t,e,i,o);return a.openEnd=Vt.spans(l,e,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Pc(n,t){for(let e of t)n=new ol(e,[n],n.length);return n}class no extends cl{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}no.inline=new no("span");no.block=new no("div");var ee=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(ee||(ee={}));const Xs=ee.LTR,Zp=ee.RTL;function t2(n){let t=[];for(let e=0;e<n.length;e++)t.push(1<<+n[e]);return t}const WT=t2("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),FT=t2("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),tp=Object.create(null),Si=[];for(let n of["()","[]","{}"]){let t=n.charCodeAt(0),e=n.charCodeAt(1);tp[t]=e,tp[e]=-t}function e2(n){return n<=247?WT[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?FT[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const QT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Fl{get dir(){return this.level%2?Zp:Xs}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,l){let o=-1;for(let a=0;a<t.length;a++){let c=t[a];if(c.from<=e&&c.to>=e){if(c.level==i)return a;(o<0||(l!=0?l<0?c.from<e:c.to>e:t[o].level>c.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function n2(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++){let i=n[e],l=t[e];if(i.from!=l.from||i.to!=l.to||i.direction!=l.direction||!n2(i.inner,l.inner))return!1}return!0}const Wt=[];function JT(n,t,e,i,l){for(let o=0;o<=i.length;o++){let a=o?i[o-1].to:t,c=o<i.length?i[o].from:e,f=o?256:l;for(let d=a,m=f,p=f;d<c;d++){let b=e2(n.charCodeAt(d));b==512?b=m:b==8&&p==4&&(b=16),Wt[d]=b==4?2:b,b&7&&(p=b),m=b}for(let d=a,m=f,p=f;d<c;d++){let b=Wt[d];if(b==128)d<c-1&&m==Wt[d+1]&&m&24?b=Wt[d]=m:Wt[d]=256;else if(b==64){let v=d+1;for(;v<c&&Wt[v]==64;)v++;let S=d&&m==8||v<e&&Wt[v]==8?p==1?1:8:256;for(let w=d;w<v;w++)Wt[w]=S;d=v-1}else b==8&&p==1&&(Wt[d]=1);m=b,b&7&&(p=b)}}}function tD(n,t,e,i,l){let o=l==1?2:1;for(let a=0,c=0,f=0;a<=i.length;a++){let d=a?i[a-1].to:t,m=a<i.length?i[a].from:e;for(let p=d,b,v,S;p<m;p++)if(v=tp[b=n.charCodeAt(p)])if(v<0){for(let w=c-3;w>=0;w-=3)if(Si[w+1]==-v){let A=Si[w+2],C=A&2?l:A&4?A&1?o:l:0;C&&(Wt[p]=Wt[Si[w]]=C),c=w;break}}else{if(Si.length==189)break;Si[c++]=p,Si[c++]=b,Si[c++]=f}else if((S=Wt[p])==2||S==1){let w=S==l;f=w?0:1;for(let A=c-3;A>=0;A-=3){let C=Si[A+2];if(C&2)break;if(w)Si[A+2]|=2;else{if(C&4)break;Si[A+2]|=4}}}}}function eD(n,t,e,i){for(let l=0,o=i;l<=e.length;l++){let a=l?e[l-1].to:n,c=l<e.length?e[l].from:t;for(let f=a;f<c;){let d=Wt[f];if(d==256){let m=f+1;for(;;)if(m==c){if(l==e.length)break;m=e[l++].to,c=l<e.length?e[l].from:t}else if(Wt[m]==256)m++;else break;let p=o==1,b=(m<t?Wt[m]:i)==1,v=p==b?p?1:2:i;for(let S=m,w=l,A=w?e[w-1].to:n;S>f;)S==A&&(S=e[--w].from,A=w?e[w-1].to:n),Wt[--S]=v;f=m}else o=d,f++}}}function ep(n,t,e,i,l,o,a){let c=i%2?2:1;if(i%2==l%2)for(let f=t,d=0;f<e;){let m=!0,p=!1;if(d==o.length||f<o[d].from){let w=Wt[f];w!=c&&(m=!1,p=w==16)}let b=!m&&c==1?[]:null,v=m?i:i+1,S=f;t:for(;;)if(d<o.length&&S==o[d].from){if(p)break t;let w=o[d];if(!m)for(let A=w.to,C=d+1;;){if(A==e)break t;if(C<o.length&&o[C].from==A)A=o[C++].to;else{if(Wt[A]==c)break t;break}}if(d++,b)b.push(w);else{w.from>f&&a.push(new Fl(f,w.from,v));let A=w.direction==Xs!=!(v%2);np(n,A?i+1:i,l,w.inner,w.from,w.to,a),f=w.to}S=w.to}else{if(S==e||(m?Wt[S]!=c:Wt[S]==c))break;S++}b?ep(n,f,S,i+1,l,b,a):f<S&&a.push(new Fl(f,S,v)),f=S}else for(let f=e,d=o.length;f>t;){let m=!0,p=!1;if(!d||f>o[d-1].to){let w=Wt[f-1];w!=c&&(m=!1,p=w==16)}let b=!m&&c==1?[]:null,v=m?i:i+1,S=f;t:for(;;)if(d&&S==o[d-1].to){if(p)break t;let w=o[--d];if(!m)for(let A=w.from,C=d;;){if(A==t)break t;if(C&&o[C-1].to==A)A=o[--C].from;else{if(Wt[A-1]==c)break t;break}}if(b)b.push(w);else{w.to<f&&a.push(new Fl(w.to,f,v));let A=w.direction==Xs!=!(v%2);np(n,A?i+1:i,l,w.inner,w.from,w.to,a),f=w.from}S=w.from}else{if(S==t||(m?Wt[S-1]!=c:Wt[S-1]==c))break;S--}b?ep(n,S,f,i+1,l,b,a):S<f&&a.push(new Fl(S,f,v)),f=S}}function np(n,t,e,i,l,o,a){let c=t%2?2:1;JT(n,l,o,i,c),tD(n,l,o,i,c),eD(l,o,i,c),ep(n,l,o,t,e,i,a)}function nD(n,t,e){if(!n)return[new Fl(0,0,t==Zp?1:0)];if(t==Xs&&!e.length&&!QT.test(n))return i2(n.length);if(e.length)for(;n.length>Wt.length;)Wt[Wt.length]=256;let i=[],l=t==Xs?0:1;return np(n,l,l,e,0,n.length,i),i}function i2(n){return[new Fl(0,n,0)]}let l2="";function iD(n,t,e,i,l){var o;let a=i.head-n.from,c=Fl.find(t,a,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),f=t[c],d=f.side(l,e);if(a==d){let b=c+=l?1:-1;if(b<0||b>=t.length)return null;f=t[c=b],a=f.side(!l,e),d=f.side(l,e)}let m=Xe(n.text,a,f.forward(l,e));(m<f.from||m>f.to)&&(m=d),l2=n.text.slice(Math.min(a,m),Math.max(a,m));let p=c==(l?t.length-1:0)?null:t[c+(l?1:-1)];return p&&m==d&&p.level+(l?0:1)<f.level?at.cursor(p.side(!l,e)+n.from,p.forward(l,e)?1:-1,p.level):at.cursor(m+n.from,f.forward(l,e)?-1:1,f.level)}function lD(n,t,e){for(let i=t;i<e;i++){let l=e2(n.charCodeAt(i));if(l==1)return Xs;if(l==2||l==4)return Zp}return Xs}const s2=dt.define(),r2=dt.define(),o2=dt.define(),a2=dt.define(),ip=dt.define(),u2=dt.define(),c2=dt.define(),Wp=dt.define(),Fp=dt.define(),f2=dt.define({combine:n=>n.some(t=>t)}),h2=dt.define({combine:n=>n.some(t=>t)}),d2=dt.define();class Kr{constructor(t,e="nearest",i="nearest",l=5,o=5,a=!1){this.range=t,this.y=e,this.x=i,this.yMargin=l,this.xMargin=o,this.isSnapshot=a}map(t){return t.empty?this:new Kr(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Kr(at.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Xc=Et.define({map:(n,t)=>n.map(t)}),m2=Et.define();function pn(n,t,e){let i=n.facet(a2);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}const nl=dt.define({combine:n=>n.length?n[0]:!0});let sD=0;const qr=dt.define({combine(n){return n.filter((t,e)=>{for(let i=0;i<e;i++)if(n[i].plugin==t.plugin)return!1;return!0})}});class pe{constructor(t,e,i,l,o){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=l,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(qr.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(qr.of({plugin:this,arg:t}))}static define(t,e){const{eventHandlers:i,eventObservers:l,provide:o,decorations:a}=e||{};return new pe(sD++,t,i,l,c=>{let f=[];return a&&f.push(Pa.of(d=>{let m=d.plugin(c);return m?a(m):xt.none})),o&&f.push(o(c)),f})}static fromClass(t,e){return pe.define((i,l)=>new t(i,l),e)}}class Zm{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if(pn(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){pn(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){pn(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const g2=dt.define(),Qp=dt.define(),Pa=dt.define(),p2=dt.define(),Jp=dt.define(),y2=dt.define();function Zv(n,t){let e=n.state.facet(y2);if(!e.length)return e;let i=e.map(o=>o instanceof Function?o(n):o),l=[];return Vt.spans(i,t.from,t.to,{point(){},span(o,a,c,f){let d=o-t.from,m=a-t.from,p=l;for(let b=c.length-1;b>=0;b--,f--){let v=c[b].spec.bidiIsolate,S;if(v==null&&(v=lD(t.text,d,m)),f>0&&p.length&&(S=p[p.length-1]).to==d&&S.direction==v)S.to=m,p=S.inner;else{let w={from:d,to:m,direction:v,inner:[]};p.push(w),p=w.inner}}}}),l}const b2=dt.define();function t0(n){let t=0,e=0,i=0,l=0;for(let o of n.state.facet(b2)){let a=o(n);a&&(a.left!=null&&(t=Math.max(t,a.left)),a.right!=null&&(e=Math.max(e,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(l=Math.max(l,a.bottom)))}return{left:t,right:e,top:i,bottom:l}}const Ea=dt.define();class Wn{constructor(t,e,i,l){this.fromA=t,this.toA=e,this.fromB=i,this.toB=l}join(t){return new Wn(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let l=t[e-1];if(!(l.fromA>i.toA)){if(l.toA<i.fromA)break;i=i.join(l),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let l=0,o=0,a=0,c=0;;l++){let f=l==t.length?null:t[l],d=a-c,m=f?f.fromB:1e9;for(;o<e.length&&e[o]<m;){let p=e[o],b=e[o+1],v=Math.max(c,p),S=Math.min(m,b);if(v<=S&&new Wn(v+d,S+d,v,S).addToSet(i),b>m)break;o+=2}if(!f)return i;new Wn(f.fromA,f.toA,f.fromB,f.toB).addToSet(i),a=f.toA,c=f.toB}}}class Uf{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=Ee.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let l=[];this.changes.iterChangedRanges((o,a,c,f)=>l.push(new Wn(o,a,c,f))),this.changedRanges=l}static create(t,e,i){return new Uf(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Wv extends Ft{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=xt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new we],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Wn(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:m})=>m<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let l=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?l=this.domChanged.newSel.head:!hD(t.changes,this.hasComposition)&&!t.selectionSet&&(l=t.state.selection.main.head));let o=l>-1?oD(this.view,t.changes,l):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:m}=this.hasComposition;i=new Wn(d,m,t.changes.mapPos(d,-1),t.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(mt.ie||mt.chrome)&&!o&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),f=cD(a,c,t.changes);return i=Wn.extendWithRanges(i,f),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,t.startState.doc.length,o),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,i);let{observer:l}=this.view;l.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=mt.chrome||mt.ios?{node:l.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||l.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof ll&&a.widget instanceof Jg&&o.push(a.dom);l.updateGaps(o)}updateChildren(t,e,i){let l=i?i.range.addToSet(t.slice()):t,o=this.childCursor(e);for(let a=l.length-1;;a--){let c=a>=0?l[a]:null;if(!c)break;let{fromA:f,toA:d,fromB:m,toB:p}=c,b,v,S,w;if(i&&i.range.fromB<p&&i.range.toB>m){let D=La.build(this.view.state.doc,m,i.range.fromB,this.decorations,this.dynamicDecorationMap),R=La.build(this.view.state.doc,i.range.toB,p,this.decorations,this.dynamicDecorationMap);v=D.breakAtStart,S=D.openStart,w=R.openEnd;let B=this.compositionView(i);R.breakAtStart?B.breakAfter=1:R.content.length&&B.merge(B.length,B.length,R.content[0],!1,R.openStart,0)&&(B.breakAfter=R.content[0].breakAfter,R.content.shift()),D.content.length&&B.merge(0,0,D.content[D.content.length-1],!0,0,D.openEnd)&&D.content.pop(),b=D.content.concat(B).concat(R.content)}else({content:b,breakAtStart:v,openStart:S,openEnd:w}=La.build(this.view.state.doc,m,p,this.decorations,this.dynamicDecorationMap));let{i:A,off:C}=o.findPos(d,1),{i:O,off:_}=o.findPos(f,-1);$w(this,O,_,A,C,b,v,S,w)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(m2)&&(this.editContextFormatting=i.value)}compositionView(t){let e=new ui(t.text.nodeValue);e.flags|=8;for(let{deco:l}of t.marks)e=new ol(l,[e],e.length);let i=new we;return i.append(e,0),i}fixCompositionDOM(t){let e=(o,a)=>{a.flags|=8|(a.children.some(f=>f.flags&7)?1:0),this.markedForComposition.add(a);let c=Ft.get(o);c&&c!=a&&(c.dom=null),a.setDOM(o)},i=this.childPos(t.range.fromB,1),l=this.children[i.i];e(t.line,l);for(let o=t.marks.length-1;o>=-1;o--)i=l.childPos(i.off,1),l=l.children[i.i],e(o>=0?t.marks[o].node:t.text,l)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,l=i==this.dom,o=!l&&!(this.view.state.facet(nl)||this.dom.tabIndex>-1)&&Sf(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(l||e||o))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,f=this.moveToLine(this.domAtPos(c.anchor)),d=c.empty?f:this.moveToLine(this.domAtPos(c.head));if(mt.gecko&&c.empty&&!this.hasComposition&&rD(f)){let p=document.createTextNode("");this.view.observer.ignore(()=>f.node.insertBefore(p,f.node.childNodes[f.offset]||null)),f=d=new Fe(p,0),a=!0}let m=this.view.observer.selectionRange;(a||!m.focusNode||(!za(f.node,f.offset,m.anchorNode,m.anchorOffset)||!za(d.node,d.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,c))&&(this.view.observer.ignore(()=>{mt.android&&mt.chrome&&this.dom.contains(m.focusNode)&&fD(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=Ga(this.view.root);if(p)if(c.empty){if(mt.gecko){let b=aD(f.node,f.offset);if(b&&b!=3){let v=(b==1?Pw:Xw)(f.node,f.offset);v&&(f=new Fe(v.node,v.offset))}}p.collapse(f.node,f.offset),c.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=c.bidiLevel)}else if(p.extend){p.collapse(f.node,f.offset);try{p.extend(d.node,d.offset)}catch{}}else{let b=document.createRange();c.anchor>c.head&&([f,d]=[d,f]),b.setEnd(d.node,d.offset),b.setStart(f.node,f.offset),p.removeAllRanges(),p.addRange(b)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(f,d)),this.impreciseAnchor=f.precise?null:new Fe(m.anchorNode,m.anchorOffset),this.impreciseHead=d.precise?null:new Fe(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&za(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=Ga(t.root),{anchorNode:l,anchorOffset:o}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let a=we.find(this,e.head);if(!a)return;let c=a.posAtStart;if(e.head==c||e.head==c+a.length)return;let f=this.coordsAt(e.head,-1),d=this.coordsAt(e.head,1);if(!f||!d||f.bottom>d.top)return;let m=this.domAtPos(e.head+e.assoc);i.collapse(m.node,m.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let p=t.observer.selectionRange;t.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=e.from&&i.collapse(l,o)}moveToLine(t){let e=this.dom,i;if(t.node!=e)return t;for(let l=t.offset;!i&&l<e.childNodes.length;l++){let o=Ft.get(e.childNodes[l]);o instanceof we&&(i=o.domAtPos(0))}for(let l=t.offset-1;!i&&l>=0;l--){let o=Ft.get(e.childNodes[l]);o instanceof we&&(i=o.domAtPos(o.length))}return i?new Fe(i.node,i.offset,!0):t}nearest(t){for(let e=t;e;){let i=Ft.get(e);if(i&&i.rootView==this)return i;e=e.parentNode}return null}posFromDOM(t,e){let i=this.nearest(t);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t,e)+i.posAtStart}domAtPos(t){let{i:e,off:i}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let l=this.children[e];if(i<l.length||l instanceof we)break;e++,i=0}return this.children[e].domAtPos(i)}coordsAt(t,e){let i=null,l=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],f=o-c.breakAfter,d=f-c.length;if(f<t)break;if(d<=t&&(d<t||c.covers(-1))&&(f>t||c.covers(1))&&(!i||c instanceof we&&!(i instanceof we&&e>=0)))i=c,l=d;else if(i&&d==t&&f==t&&c instanceof ll&&Math.abs(e)<2){if(c.deco.startSide<0)break;a&&(i=null)}o=d}return i?i.coordsAt(t-l,e):null}coordsForChar(t){let{i:e,off:i}=this.childPos(t,1),l=this.children[e];if(!(l instanceof we))return null;for(;l.children.length;){let{i:c,off:f}=l.childPos(i,1);for(;;c++){if(c==l.children.length)return null;if((l=l.children[c]).length)break}i=f}if(!(l instanceof ui))return null;let o=Xe(l.text,i);if(o==i)return null;let a=Ps(l.dom,i,o).getClientRects();for(let c=0;c<a.length;c++){let f=a[c];if(c==a.length-1||f.top<f.bottom&&f.left<f.right)return f}return null}measureVisibleLineHeights(t){let e=[],{from:i,to:l}=t,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,f=this.view.textDirection==ee.LTR;for(let d=0,m=0;m<this.children.length;m++){let p=this.children[m],b=d+p.length;if(b>l)break;if(d>=i){let v=p.dom.getBoundingClientRect();if(e.push(v.height),a){let S=p.dom.lastChild,w=S?to(S):[];if(w.length){let A=w[w.length-1],C=f?A.right-v.left:v.right-A.left;C>c&&(c=C,this.minWidth=o,this.minWidthFrom=d,this.minWidthTo=b)}}}d=b+p.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?ee.RTL:ee.LTR}measureTextSize(){for(let o of this.children)if(o instanceof we){let a=o.measureTextSize();if(a)return a}let t=document.createElement("div"),e,i,l;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let o=to(t.firstChild)[0];e=t.getBoundingClientRect().height,i=o?o.width/27:7,l=o?o.height:e,t.remove()}),{lineHeight:e,charWidth:i,textHeight:l}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new jw(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,l=0;;l++){let o=l==e.viewports.length?null:e.viewports[l],a=o?o.from-1:this.length;if(a>i){let c=(e.lineBlockAt(a).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(xt.replace({widget:new Jg(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!o)break;i=o.to+1}return xt.set(t)}updateDeco(){let t=1,e=this.view.state.facet(Pa).map(o=>(this.dynamicDecorationMap[t++]=typeof o=="function")?o(this.view):o),i=!1,l=this.view.state.facet(p2).map((o,a)=>{let c=typeof o=="function";return c&&(i=!0),c?o(this.view):o});for(l.length&&(this.dynamicDecorationMap[t++]=i,e.push(Vt.join(l))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let d=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=d.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let d of this.view.state.facet(d2))try{if(d(this.view,t.range,t))return!0}catch(m){pn(this.view.state,m,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),l;if(!i)return;!e.empty&&(l=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,l.left),top:Math.min(i.top,l.top),right:Math.max(i.right,l.right),bottom:Math.max(i.bottom,l.bottom)});let o=t0(this.view),a={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:c,offsetHeight:f}=this.view.scrollDOM;VT(this.view.scrollDOM,a,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,c),-c),Math.max(Math.min(t.yMargin,f),-f),this.view.textDirection==ee.LTR)}}function rD(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function v2(n,t){let e=n.observer.selectionRange;if(!e.focusNode)return null;let i=Pw(e.focusNode,e.focusOffset),l=Xw(e.focusNode,e.focusOffset),o=i||l;if(l&&i&&l.node!=i.node){let c=Ft.get(l.node);if(!c||c instanceof ui&&c.text!=l.node.nodeValue)o=l;else if(n.docView.lastCompositionAfterCursor){let f=Ft.get(i.node);!f||f instanceof ui&&f.text!=i.node.nodeValue||(o=l)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let a=t-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function oD(n,t,e){let i=v2(n,e);if(!i)return null;let{node:l,from:o,to:a}=i,c=l.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(i.from,i.to)!=c)return null;let f=t.invertedDesc,d=new Wn(f.mapPos(o),f.mapPos(a),o,a),m=[];for(let p=l.parentNode;;p=p.parentNode){let b=Ft.get(p);if(b instanceof ol)m.push({node:p,deco:b.mark});else{if(b instanceof we||p.nodeName=="DIV"&&p.parentNode==n.contentDOM)return{range:d,text:l,marks:m,line:p};if(p!=n.contentDOM)m.push({node:p,deco:new fu({inclusive:!0,attributes:IT(p),tagName:p.tagName.toLowerCase()})});else return null}}}function aD(n,t){return n.nodeType!=1?0:(t&&n.childNodes[t-1].contentEditable=="false"?1:0)|(t<n.childNodes.length&&n.childNodes[t].contentEditable=="false"?2:0)}let uD=class{constructor(){this.changes=[]}compareRange(t,e){wf(t,e,this.changes)}comparePoint(t,e){wf(t,e,this.changes)}boundChange(t){wf(t,t,this.changes)}};function cD(n,t,e){let i=new uD;return Vt.compare(n,t,e,i),i.changes}function fD(n,t){for(let e=n;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function hD(n,t){let e=!1;return t&&n.iterChangedRanges((i,l)=>{i<t.to&&l>t.from&&(e=!0)}),e}function dD(n,t,e=1){let i=n.charCategorizer(t),l=n.doc.lineAt(t),o=t-l.from;if(l.length==0)return at.cursor(t);o==0?e=1:o==l.length&&(e=-1);let a=o,c=o;e<0?a=Xe(l.text,o,!1):c=Xe(l.text,o);let f=i(l.text.slice(a,c));for(;a>0;){let d=Xe(l.text,a,!1);if(i(l.text.slice(d,a))!=f)break;a=d}for(;c<l.length;){let d=Xe(l.text,c);if(i(l.text.slice(c,d))!=f)break;c=d}return at.range(a+l.from,c+l.from)}function mD(n,t){return t.left>n?t.left-n:Math.max(0,n-t.right)}function gD(n,t){return t.top>n?t.top-n:Math.max(0,n-t.bottom)}function Wm(n,t){return n.top<t.bottom-1&&n.bottom>t.top+1}function Fv(n,t){return t<n.top?{top:t,left:n.left,right:n.right,bottom:n.bottom}:n}function Qv(n,t){return t>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:t}:n}function lp(n,t,e){let i,l,o,a,c=!1,f,d,m,p;for(let S=n.firstChild;S;S=S.nextSibling){let w=to(S);for(let A=0;A<w.length;A++){let C=w[A];l&&Wm(l,C)&&(C=Fv(Qv(C,l.bottom),l.top));let O=mD(t,C),_=gD(e,C);if(O==0&&_==0)return S.nodeType==3?Jv(S,t,e):lp(S,t,e);(!i||a>_||a==_&&o>O)&&(i=S,l=C,o=O,a=_,c=O?t<C.left?A>0:A<w.length-1:!0),O==0?e>C.bottom&&(!m||m.bottom<C.bottom)?(f=S,m=C):e<C.top&&(!p||p.top>C.top)&&(d=S,p=C):m&&Wm(m,C)?m=Qv(m,C.bottom):p&&Wm(p,C)&&(p=Fv(p,C.top))}}if(m&&m.bottom>=e?(i=f,l=m):p&&p.top<=e&&(i=d,l=p),!i)return{node:n,offset:0};let b=Math.max(l.left,Math.min(l.right,t));if(i.nodeType==3)return Jv(i,b,e);if(c&&i.contentEditable!="false")return lp(i,b,e);let v=Array.prototype.indexOf.call(n.childNodes,i)+(t>=(l.left+l.right)/2?1:0);return{node:n,offset:v}}function Jv(n,t,e){let i=n.nodeValue.length,l=-1,o=1e9,a=0;for(let c=0;c<i;c++){let f=Ps(n,c,c+1).getClientRects();for(let d=0;d<f.length;d++){let m=f[d];if(m.top==m.bottom)continue;a||(a=t-m.left);let p=(m.top>e?m.top-e:e-m.bottom)-1;if(m.left-1<=t&&m.right+1>=t&&p<o){let b=t>=(m.left+m.right)/2,v=b;if((mt.chrome||mt.gecko)&&Ps(n,c).getBoundingClientRect().left==m.right&&(v=!b),p<=0)return{node:n,offset:c+(v?1:0)};l=c+(v?1:0),o=p}}}return{node:n,offset:l>-1?l:a>0?n.nodeValue.length:0}}function x2(n,t,e,i=-1){var l,o;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,f,{docHeight:d}=n.viewState,{x:m,y:p}=t,b=p-c;if(b<0)return 0;if(b>d)return n.state.doc.length;for(let D=n.viewState.heightOracle.textHeight/2,R=!1;f=n.elementAtHeight(b),f.type!=rn.Text;)for(;b=i>0?f.bottom+D:f.top-D,!(b>=0&&b<=d);){if(R)return e?null:0;R=!0,i=-i}p=c+b;let v=f.from;if(v<n.viewport.from)return n.viewport.from==0?0:e?null:tx(n,a,f,m,p);if(v>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:e?null:tx(n,a,f,m,p);let S=n.dom.ownerDocument,w=n.root.elementFromPoint?n.root:S,A=w.elementFromPoint(m,p);A&&!n.contentDOM.contains(A)&&(A=null),A||(m=Math.max(a.left+1,Math.min(a.right-1,m)),A=w.elementFromPoint(m,p),A&&!n.contentDOM.contains(A)&&(A=null));let C,O=-1;if(A&&((l=n.docView.nearest(A))===null||l===void 0?void 0:l.isEditable)!=!1){if(S.caretPositionFromPoint){let D=S.caretPositionFromPoint(m,p);D&&({offsetNode:C,offset:O}=D)}else if(S.caretRangeFromPoint){let D=S.caretRangeFromPoint(m,p);D&&({startContainer:C,startOffset:O}=D,(!n.contentDOM.contains(C)||mt.safari&&pD(C,O,m)||mt.chrome&&yD(C,O,m))&&(C=void 0))}C&&(O=Math.min(Ni(C),O))}if(!C||!n.docView.dom.contains(C)){let D=we.find(n.docView,v);if(!D)return b>f.top+f.height/2?f.to:f.from;({node:C,offset:O}=lp(D.dom,m,p))}let _=n.docView.nearest(C);if(!_)return null;if(_.isWidget&&((o=_.dom)===null||o===void 0?void 0:o.nodeType)==1){let D=_.dom.getBoundingClientRect();return t.y<D.top||t.y<=D.bottom&&t.x<=(D.left+D.right)/2?_.posAtStart:_.posAtEnd}else return _.localPosFromDOM(C,O)+_.posAtStart}function tx(n,t,e,i,l){let o=Math.round((i-t.left)*n.defaultCharacterWidth);if(n.lineWrapping&&e.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,f=Math.floor((l-e.top-(n.defaultLineHeight-c)*.5)/c);o+=f*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(e.from,e.to);return e.from+Xg(a,o,n.state.tabSize)}function pD(n,t,e){let i,l=n;if(n.nodeType!=3||t!=(i=n.nodeValue.length))return!1;for(;;){let o=l.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let a=l.parentNode;if(!a||a.nodeName=="DIV")break;l=a}}return Ps(n,i-1,i).getBoundingClientRect().right>e}function yD(n,t,e){if(t!=0)return!1;for(let l=n;;){let o=l.parentNode;if(!o||o.nodeType!=1||o.firstChild!=l)return!1;if(o.classList.contains("cm-line"))break;l=o}let i=n.nodeType==1?n.getBoundingClientRect():Ps(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return e-i.left>5}function sp(n,t,e){let i=n.lineBlockAt(t);if(Array.isArray(i.type)){let l;for(let o of i.type){if(o.from>t)break;if(!(o.to<t)){if(o.from<t&&o.to>t)return o;(!l||o.type==rn.Text&&(l.type!=o.type||(e<0?o.from<t:o.to>t)))&&(l=o)}}return l||i}return i}function bD(n,t,e,i){let l=sp(n,t.head,t.assoc||-1),o=!i||l.type!=rn.Text||!(n.lineWrapping||l.widgetLineBreaks)?null:n.coordsAtPos(t.assoc<0&&t.head>l.from?t.head-1:t.head);if(o){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(l.from),f=n.posAtCoords({x:e==(c==ee.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(f!=null)return at.cursor(f,e?-1:1)}return at.cursor(e?l.to:l.from,e?-1:1)}function ex(n,t,e,i){let l=n.state.doc.lineAt(t.head),o=n.bidiSpans(l),a=n.textDirectionAt(l.from);for(let c=t,f=null;;){let d=iD(l,o,a,c,e),m=l2;if(!d){if(l.number==(e?n.state.doc.lines:1))return c;m=`
`,l=n.state.doc.line(l.number+(e?1:-1)),o=n.bidiSpans(l),d=n.visualLineSide(l,!e)}if(f){if(!f(m))return c}else{if(!i)return d;f=i(m)}c=d}}function vD(n,t,e){let i=n.state.charCategorizer(t),l=i(e);return o=>{let a=i(o);return l==ie.Space&&(l=a),l==a}}function xD(n,t,e,i){let l=t.head,o=e?1:-1;if(l==(e?n.state.doc.length:0))return at.cursor(l,t.assoc);let a=t.goalColumn,c,f=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(l,t.assoc||-1),m=n.documentTop;if(d)a==null&&(a=d.left-f.left),c=o<0?d.top:d.bottom;else{let v=n.viewState.lineBlockAt(l);a==null&&(a=Math.min(f.right-f.left,n.defaultCharacterWidth*(l-v.from))),c=(o<0?v.top:v.bottom)+m}let p=f.left+a,b=i??n.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let S=c+(b+v)*o,w=x2(n,{x:p,y:S},!1,o);if(S<f.top||S>f.bottom||(o<0?w<l:w>l)){let A=n.docView.coordsForChar(w),C=!A||S<A.top?-1:1;return at.cursor(w,C,void 0,a)}}}function Af(n,t,e){for(;;){let i=0;for(let l of n)l.between(t-1,t+1,(o,a,c)=>{if(t>o&&t<a){let f=i||e||(t-o<a-t?-1:1);t=f<0?o:a,i=f}});if(!i)return t}}function Fm(n,t,e){let i=Af(n.state.facet(Jp).map(l=>l(n)),e.from,t.head>e.from?-1:1);return i==e.from?e:at.cursor(i,i<e.from?1:-1)}const ka="￿";class SD{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Ht.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=ka}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let l=t;;){this.findPointBefore(i,l);let o=this.text.length;this.readNode(l);let a=l.nextSibling;if(a==e)break;let c=Ft.get(l),f=Ft.get(a);(c&&f?c.breakAfter:(c?c.breakAfter:Hf(l))||Hf(a)&&(l.nodeName!="BR"||l.cmIgnore)&&this.text.length>o)&&this.lineBreak(),l=a}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,l=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,c;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(c=l.exec(e))&&(o=c.index,a=c[0].length),this.append(e.slice(i,o<0?e.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let f of this.points)f.node==t&&f.pos>this.text.length&&(f.pos-=a-1);i=o+a}}readNode(t){if(t.cmIgnore)return;let e=Ft.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let l=i.iter();!l.next().done;)l.lineBreak?this.lineBreak():this.append(l.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+(wD(t,i.node,i.offset)?e:0))}}function wD(n,t,e){for(;;){if(!t||e<Ni(t))return!1;if(t==n)return!0;e=Gs(t)+1,t=t.parentNode}}class nx{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class AD{constructor(t,e,i,l){this.typeOver=l,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:o,impreciseAnchor:a}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,i,0))){let c=o||a?[]:ED(t),f=new SD(c,t.state);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=kD(c,this.bounds.from)}else{let c=t.observer.selectionRange,f=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!Kg(t.contentDOM,c.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(c.focusNode,c.focusOffset),d=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Kg(t.contentDOM,c.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(c.anchorNode,c.anchorOffset),m=t.viewport;if((mt.ios||mt.chrome)&&t.state.selection.main.empty&&f!=d&&(m.from>0||m.to<t.state.doc.length)){let p=Math.min(f,d),b=Math.max(f,d),v=m.from-p,S=m.to-b;(v==0||v==1||p==0)&&(S==0||S==-1||b==t.state.doc.length)&&(f=0,d=t.state.doc.length)}this.newSel=at.single(d,f)}}}function S2(n,t){let e,{newSel:i}=t,l=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(t.bounds){let{from:a,to:c}=t.bounds,f=l.from,d=null;(o===8||mt.android&&t.text.length<c-a)&&(f=l.to,d="end");let m=CD(n.state.doc.sliceString(a,c,ka),t.text,f-a,d);m&&(mt.chrome&&o==13&&m.toB==m.from+2&&t.text.slice(m.from,m.toB)==ka+ka&&m.toB--,e={from:a+m.from,to:a+m.toA,insert:qt.of(t.text.slice(m.from,m.toB).split(ka))})}else i&&(!n.hasFocus&&n.state.facet(nl)||i.main.eq(l))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!l.empty&&i&&i.main.empty?e={from:l.from,to:l.to,insert:n.state.doc.slice(l.from,l.to)}:(mt.mac||mt.android)&&e&&e.from==e.to&&e.from==l.head-1&&/^\. ?$/.test(e.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=at.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:qt.of([e.insert.toString().replace("."," ")])}):e&&e.from>=l.from&&e.to<=l.to&&(e.from!=l.from||e.to!=l.to)&&l.to-l.from-(e.to-e.from)<=4?e={from:l.from,to:l.to,insert:n.state.doc.slice(l.from,e.from).append(e.insert).append(n.state.doc.slice(e.to,l.to))}:mt.chrome&&e&&e.from==e.to&&e.from==l.head&&e.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=at.single(i.main.anchor-1,i.main.head-1)),e={from:l.from,to:l.to,insert:qt.of([" "])}),e)return e0(n,e,i,o);if(i&&!i.main.eq(l)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:a,userEvent:c}),!0}else return!1}function e0(n,t,e,i=-1){if(mt.ios&&n.inputState.flushIOSKey(t))return!0;let l=n.state.selection.main;if(mt.android&&(t.to==l.to&&(t.from==l.from||t.from==l.from-1&&n.state.sliceDoc(t.from,l.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&$r(n.contentDOM,"Enter",13)||(t.from==l.from-1&&t.to==l.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>l.head)&&$r(n.contentDOM,"Backspace",8)||t.from==l.from&&t.to==l.to+1&&t.insert.length==0&&$r(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=MD(n,t,e));return n.state.facet(u2).some(f=>f(n,t.from,t.to,o,c))||n.dispatch(c()),!0}function MD(n,t,e){let i,l=n.state,o=l.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let c=o.from<t.from?l.sliceDoc(o.from,t.from):"",f=o.to>t.to?l.sliceDoc(t.to,o.to):"";i=l.replaceSelection(n.state.toText(c+t.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let c=l.changes(t),f=e&&e.main.to<=c.newLength?e.main:void 0;if(l.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let d=n.state.sliceDoc(t.from,t.to),m,p=e&&v2(n,e.main.head);if(p){let S=t.insert.length-(t.to-t.from);m={from:p.from,to:p.to-S}}else m=n.state.doc.lineAt(o.head);let b=o.to-t.to,v=o.to-o.from;i=l.changeByRange(S=>{if(S.from==o.from&&S.to==o.to)return{changes:c,range:f||S.map(c)};let w=S.to-b,A=w-d.length;if(S.to-S.from!=v||n.state.sliceDoc(A,w)!=d||S.to>=m.from&&S.from<=m.to)return{range:S};let C=l.changes({from:A,to:w,insert:t.insert}),O=S.to-o.to;return{changes:C,range:f?at.range(Math.max(0,f.anchor+O),Math.max(0,f.head+O)):S.map(C)}})}else i={changes:c,selection:f&&l.selection.replaceRange(f)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),l.update(i,{userEvent:a,scrollIntoView:!0})}function CD(n,t,e,i){let l=Math.min(n.length,t.length),o=0;for(;o<l&&n.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==l&&n.length==t.length)return null;let a=n.length,c=t.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==t.charCodeAt(c-1);)a--,c--;if(i=="end"){let f=Math.max(0,o-Math.min(a,c));e-=a+f-o}if(a<o&&n.length<t.length){let f=e<=o&&e>=a?o-e:0;o-=f,c=o+(c-a),a=o}else if(c<o){let f=e<=o&&e>=c?o-e:0;o-=f,a=o+(a-c),c=o}return{from:o,toA:a,toB:c}}function ED(n){let t=[];if(n.root.activeElement!=n.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:l,focusOffset:o}=n.observer.selectionRange;return e&&(t.push(new nx(e,i)),(l!=e||o!=i)&&t.push(new nx(l,o))),t}function kD(n,t){if(n.length==0)return null;let e=n[0].pos,i=n.length==2?n[1].pos:e;return e>-1&&i>-1?at.single(e+t,i+t):null}class TD{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,mt.safari&&t.contentDOM.addEventListener("input",()=>null),mt.gecko&&XD(t.contentDOM.ownerDocument)}handleEvent(t){!LD(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let l of i.observers)l(this.view,e);for(let l of i.handlers){if(e.defaultPrevented)break;if(l(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=DD(t),i=this.handlers,l=this.view.contentDOM;for(let o in e)if(o!="scroll"){let a=!e[o].handlers.length,c=i[o];c&&a!=!c.handlers.length&&(l.removeEventListener(o,this.handleEvent),c=null),c||l.addEventListener(o,this.handleEvent,{passive:a})}for(let o in i)o!="scroll"&&!e[o]&&l.removeEventListener(o,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&A2.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),mt.android&&mt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return mt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=w2.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||OD.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,$r(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:mt.safari&&!mt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ix(n,t){return(e,i)=>{try{return t.call(n,i,e)}catch(l){pn(e.state,l)}}}function DD(n){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of n){let l=i.spec,o=l&&l.plugin.domEventHandlers,a=l&&l.plugin.domEventObservers;if(o)for(let c in o){let f=o[c];f&&e(c).handlers.push(ix(i.value,f))}if(a)for(let c in a){let f=a[c];f&&e(c).observers.push(ix(i.value,f))}}for(let i in ci)e(i).handlers.push(ci[i]);for(let i in Qn)e(i).observers.push(Qn[i]);return t}const w2=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],OD="dthko",A2=[16,17,18,20,91,92,224,225],jc=6;function $c(n){return Math.max(0,n)*.7+8}function RD(n,t){return Math.max(Math.abs(n.clientX-t.clientX),Math.abs(n.clientY-t.clientY))}class ND{constructor(t,e,i,l){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=l,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=UT(t.contentDOM),this.atoms=t.state.facet(Jp).map(a=>a(t));let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Ht.allowMultipleSelections)&&_D(t,e),this.dragging=zD(t,e)&&E2(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&RD(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,l=0,o=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:l,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:c}=this.scrollParents.y.getBoundingClientRect());let f=t0(this.view);t.clientX-f.left<=l+jc?e=-$c(l-t.clientX):t.clientX+f.right>=a-jc&&(e=$c(t.clientX-a)),t.clientY-f.top<=o+jc?i=-$c(o-t.clientY):t.clientY+f.bottom>=c-jc&&(i=$c(t.clientY-c)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let i=0;i<t.ranges.length;i++){let l=t.ranges[i],o=null;if(l.empty){let a=Af(this.atoms,l.from,0);a!=l.from&&(o=at.cursor(a,-1))}else{let a=Af(this.atoms,l.from,-1),c=Af(this.atoms,l.to,1);(a!=l.from||c!=l.to)&&(o=at.range(l.from==l.anchor?a:c,l.from==l.head?a:c))}o&&(e||(e=t.ranges.slice()),e[i]=o)}return e?at.create(e,t.mainIndex):t}select(t){let{view:e}=this,i=this.skipAtoms(this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function _D(n,t){let e=n.state.facet(s2);return e.length?e[0](t):mt.mac?t.metaKey:t.ctrlKey}function BD(n,t){let e=n.state.facet(r2);return e.length?e[0](t):mt.mac?!t.altKey:!t.ctrlKey}function zD(n,t){let{main:e}=n.state.selection;if(e.empty)return!1;let i=Ga(n.root);if(!i||i.rangeCount==0)return!0;let l=i.getRangeAt(0).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(a.left<=t.clientX&&a.right>=t.clientX&&a.top<=t.clientY&&a.bottom>=t.clientY)return!0}return!1}function LD(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=n.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=Ft.get(e))&&i.ignoreEvent(t))return!1;return!0}const ci=Object.create(null),Qn=Object.create(null),M2=mt.ie&&mt.ie_version<15||mt.ios&&mt.webkit_version<604;function HD(n){let t=n.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{n.focus(),e.remove(),C2(n,e.value)},50)}function dh(n,t,e){for(let i of n.facet(t))e=i(e,n);return e}function C2(n,t){t=dh(n.state,Wp,t);let{state:e}=n,i,l=1,o=e.toText(t),a=o.lines==e.selection.ranges.length;if(rp!=null&&e.selection.ranges.every(f=>f.empty)&&rp==o.toString()){let f=-1;i=e.changeByRange(d=>{let m=e.doc.lineAt(d.from);if(m.from==f)return{range:d};f=m.from;let p=e.toText((a?o.line(l++).text:t)+e.lineBreak);return{changes:{from:m.from,insert:p},range:at.cursor(d.from+p.length)}})}else a?i=e.changeByRange(f=>{let d=o.line(l++);return{changes:{from:f.from,to:f.to,insert:d.text},range:at.cursor(f.from+d.length)}}):i=e.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Qn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};ci.keydown=(n,t)=>(n.inputState.setSelectionOrigin("select"),t.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Qn.touchstart=(n,t)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Qn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};ci.mousedown=(n,t)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of n.state.facet(o2))if(e=i(n,t),e)break;if(!e&&t.button==0&&(e=qD(n,t)),e){let i=!n.hasFocus;n.inputState.startMouseSelection(new ND(n,t,e,i)),i&&n.observer.ignore(()=>{qw(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let l=n.inputState.mouseSelection;if(l)return l.start(t),l.dragging===!1}return!1};function lx(n,t,e,i){if(i==1)return at.cursor(t,e);if(i==2)return dD(n.state,t,e);{let l=we.find(n.docView,t),o=n.state.doc.lineAt(l?l.posAtEnd:t),a=l?l.posAtStart:o.from,c=l?l.posAtEnd:o.to;return c<n.state.doc.length&&c==o.to&&c++,at.range(a,c)}}let sx=(n,t,e)=>t>=e.top&&t<=e.bottom&&n>=e.left&&n<=e.right;function VD(n,t,e,i){let l=we.find(n.docView,t);if(!l)return 1;let o=t-l.posAtStart;if(o==0)return 1;if(o==l.length)return-1;let a=l.coordsAt(o,-1);if(a&&sx(e,i,a))return-1;let c=l.coordsAt(o,1);return c&&sx(e,i,c)?1:a&&a.bottom>=i?-1:1}function rx(n,t){let e=n.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:VD(n,e,t.clientX,t.clientY)}}const UD=mt.ie&&mt.ie_version<=11;let ox=null,ax=0,ux=0;function E2(n){if(!UD)return n.detail;let t=ox,e=ux;return ox=n,ux=Date.now(),ax=!t||e>Date.now()-400&&Math.abs(t.clientX-n.clientX)<2&&Math.abs(t.clientY-n.clientY)<2?(ax+1)%3:1}function qD(n,t){let e=rx(n,t),i=E2(t),l=n.state.selection;return{update(o){o.docChanged&&(e.pos=o.changes.mapPos(e.pos),l=l.map(o.changes))},get(o,a,c){let f=rx(n,o),d,m=lx(n,f.pos,f.bias,i);if(e.pos!=f.pos&&!a){let p=lx(n,e.pos,e.bias,i),b=Math.min(p.from,m.from),v=Math.max(p.to,m.to);m=b<m.from?at.range(b,v):at.range(v,b)}return a?l.replaceRange(l.main.extend(m.from,m.to)):c&&i==1&&l.ranges.length>1&&(d=YD(l,f.pos))?d:c?l.addRange(m):at.create([m])}}}function YD(n,t){for(let e=0;e<n.ranges.length;e++){let{from:i,to:l}=n.ranges[e];if(i<=t&&l>=t)return at.create(n.ranges.slice(0,e).concat(n.ranges.slice(e+1)),n.mainIndex==e?0:n.mainIndex-(n.mainIndex>e?1:0))}return null}ci.dragstart=(n,t)=>{let{selection:{main:e}}=n.state;if(t.target.draggable){let l=n.docView.nearest(t.target);if(l&&l.isWidget){let o=l.posAtStart,a=o+l.length;(o>=e.to||a<=e.from)&&(e=at.range(o,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",dh(n.state,Fp,n.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};ci.dragend=n=>(n.inputState.draggedContent=null,!1);function cx(n,t,e,i){if(e=dh(n.state,Wp,e),!e)return;let l=n.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=n.inputState,a=i&&o&&BD(n,t)?{from:o.from,to:o.to}:null,c={from:l,insert:e},f=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:f,selection:{anchor:f.mapPos(l,-1),head:f.mapPos(l,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}ci.drop=(n,t)=>{if(!t.dataTransfer)return!1;if(n.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),l=0,o=()=>{++l==e.length&&cx(n,t,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<e.length;a++){let c=new FileReader;c.onerror=o,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[a]=c.result),o()},c.readAsText(e[a])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return cx(n,t,i,!0),!0}return!1};ci.paste=(n,t)=>{if(n.state.readOnly)return!0;n.observer.flush();let e=M2?null:t.clipboardData;return e?(C2(n,e.getData("text/plain")||e.getData("text/uri-list")),!0):(HD(n),!1)};function GD(n,t){let e=n.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function PD(n){let t=[],e=[],i=!1;for(let l of n.selection.ranges)l.empty||(t.push(n.sliceDoc(l.from,l.to)),e.push(l));if(!t.length){let l=-1;for(let{from:o}of n.selection.ranges){let a=n.doc.lineAt(o);a.number>l&&(t.push(a.text),e.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),l=a.number}i=!0}return{text:dh(n,Fp,t.join(n.lineBreak)),ranges:e,linewise:i}}let rp=null;ci.copy=ci.cut=(n,t)=>{let{text:e,ranges:i,linewise:l}=PD(n.state);if(!e&&!l)return!1;rp=l?e:null,t.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=M2?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",e),!0):(GD(n,e),!1)};const k2=Bi.define();function T2(n,t){let e=[];for(let i of n.facet(c2)){let l=i(n,t);l&&e.push(l)}return e.length?n.update({effects:e,annotations:k2.of(!0)}):null}function D2(n){setTimeout(()=>{let t=n.hasFocus;if(t!=n.inputState.notifiedFocused){let e=T2(n.state,t);e?n.dispatch(e):n.update([])}},10)}Qn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),D2(n)};Qn.blur=n=>{n.observer.clearSelectionRange(),D2(n)};Qn.compositionstart=Qn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Qn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,mt.chrome&&mt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Qn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ci.beforeinput=(n,t)=>{var e,i;if(t.inputType=="insertReplacementText"&&n.observer.editContext){let o=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),a=t.getTargetRanges();if(o&&a.length){let c=a[0],f=n.posAtDOM(c.startContainer,c.startOffset),d=n.posAtDOM(c.endContainer,c.endOffset);return e0(n,{from:f,to:d,insert:n.state.toText(o)},null),!0}}let l;if(mt.chrome&&mt.android&&(l=w2.find(o=>o.inputType==t.inputType))&&(n.observer.delayAndroidKey(l.key,l.keyCode),l.key=="Backspace"||l.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return mt.ios&&t.inputType=="deleteContentForward"&&n.observer.flushSoon(),mt.safari&&t.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Qn.compositionend(n,t),20),!1};const fx=new Set;function XD(n){fx.has(n)||(fx.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const hx=["pre-wrap","normal","pre-line","break-spaces"];let io=!1;function dx(){io=!1}class jD{constructor(t){this.lineWrapping=t,this.doc=qt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return hx.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let l=t[i];l<0?i++:this.heightSamples[Math.floor(l*10)]||(e=!0,this.heightSamples[Math.floor(l*10)]=!0)}return e}refresh(t,e,i,l,o,a){let c=hx.indexOf(t)>-1,f=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=e,this.charWidth=i,this.textHeight=l,this.lineLength=o,f){this.heightSamples={};for(let d=0;d<a.length;d++){let m=a[d];m<0?d++:this.heightSamples[Math.floor(m*10)]=!0}}return f}}class $D{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class ki{constructor(t,e,i,l,o){this.from=t,this.length=e,this.top=i,this.height=l,this._content=o}get type(){return typeof this._content=="number"?rn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof is?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new ki(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var te=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(te||(te={}));const Mf=.001;class on{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Mf&&(io=!0),this.height=t)}replace(t,e,i){return on.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,l){let o=this,a=i.doc;for(let c=l.length-1;c>=0;c--){let{fromA:f,toA:d,fromB:m,toB:p}=l[c],b=o.lineAt(f,te.ByPosNoHeight,i.setDoc(e),0,0),v=b.to>=d?b:o.lineAt(d,te.ByPosNoHeight,i,0,0);for(p+=v.to-d,d=v.to;c>0&&b.from<=l[c-1].toA;)f=l[c-1].fromA,m=l[c-1].fromB,c--,f<b.from&&(b=o.lineAt(f,te.ByPosNoHeight,i,0,0));m+=b.from-f,f=b.from;let S=n0.build(i.setDoc(a),t,m,p);o=qf(o,o.replace(f,d,S))}return o.updateHeight(i,0)}static empty(){return new On(0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,l=0,o=0;for(;;)if(e==i)if(l>o*2){let c=t[e-1];c.break?t.splice(--e,1,c.left,null,c.right):t.splice(--e,1,c.left,c.right),i+=1+c.break,l-=c.size}else if(o>l*2){let c=t[i];c.break?t.splice(i,1,c.left,null,c.right):t.splice(i,1,c.left,c.right),i+=2+c.break,o-=c.size}else break;else if(l<o){let c=t[e++];c&&(l+=c.size)}else{let c=t[--i];c&&(o+=c.size)}let a=0;return t[e-1]==null?(a=1,e--):t[e]==null&&(a=1,i++),new KD(on.of(t.slice(0,e)),a,on.of(t.slice(i)))}}function qf(n,t){return n==t?n:(n.constructor!=t.constructor&&(io=!0),t)}on.prototype.size=1;class O2 extends on{constructor(t,e,i){super(t,e),this.deco=i}blockAt(t,e,i,l){return new ki(l,this.length,i,this.height,this.deco||0)}lineAt(t,e,i,l,o){return this.blockAt(0,i,l,o)}forEachLine(t,e,i,l,o,a){t<=o+this.length&&e>=o&&a(this.blockAt(0,i,l,o))}updateHeight(t,e=0,i=!1,l){return l&&l.from<=e&&l.more&&this.setHeight(l.heights[l.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class On extends O2{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,i,l){return new ki(l,this.length,i,this.height,this.breaks)}replace(t,e,i){let l=i[0];return i.length==1&&(l instanceof On||l instanceof Ye&&l.flags&4)&&Math.abs(this.length-l.length)<10?(l instanceof Ye?l=new On(l.length,this.height):l.height=this.height,this.outdated||(l.outdated=!1),l):on.of(i)}updateHeight(t,e=0,i=!1,l){return l&&l.from<=e&&l.more?this.setHeight(l.heights[l.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ye extends on{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,l=t.doc.lineAt(e+this.length).number,o=l-i+1,a,c=0;if(t.lineWrapping){let f=Math.min(this.height,t.lineHeight*o);a=f/o,this.length>o+1&&(c=(this.height-f)/(this.length-o-1))}else a=this.height/o;return{firstLine:i,lastLine:l,perLine:a,perChar:c}}blockAt(t,e,i,l){let{firstLine:o,lastLine:a,perLine:c,perChar:f}=this.heightMetrics(e,l);if(e.lineWrapping){let d=l+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),m=e.doc.lineAt(d),p=c+m.length*f,b=Math.max(i,t-p/2);return new ki(m.from,m.length,b,p,0)}else{let d=Math.max(0,Math.min(a-o,Math.floor((t-i)/c))),{from:m,length:p}=e.doc.line(o+d);return new ki(m,p,i+c*d,c,0)}}lineAt(t,e,i,l,o){if(e==te.ByHeight)return this.blockAt(t,i,l,o);if(e==te.ByPosNoHeight){let{from:v,to:S}=i.doc.lineAt(t);return new ki(v,S-v,0,0,0)}let{firstLine:a,perLine:c,perChar:f}=this.heightMetrics(i,o),d=i.doc.lineAt(t),m=c+d.length*f,p=d.number-a,b=l+c*p+f*(d.from-o-p);return new ki(d.from,d.length,Math.max(l,Math.min(b,l+this.height-m)),m,0)}forEachLine(t,e,i,l,o,a){t=Math.max(t,o),e=Math.min(e,o+this.length);let{firstLine:c,perLine:f,perChar:d}=this.heightMetrics(i,o);for(let m=t,p=l;m<=e;){let b=i.doc.lineAt(m);if(m==t){let S=b.number-c;p+=f*S+d*(t-o-S)}let v=f+d*b.length;a(new ki(b.from,b.length,p,v,0)),p+=v,m=b.to+1}}replace(t,e,i){let l=this.length-e;if(l>0){let o=i[i.length-1];o instanceof Ye?i[i.length-1]=new Ye(o.length+l):i.push(null,new Ye(l-1))}if(t>0){let o=i[0];o instanceof Ye?i[0]=new Ye(t+o.length):i.unshift(new Ye(t-1),null)}return on.of(i)}decomposeLeft(t,e){e.push(new Ye(t-1),null)}decomposeRight(t,e){e.push(null,new Ye(this.length-t-1))}updateHeight(t,e=0,i=!1,l){let o=e+this.length;if(l&&l.from<=e+this.length&&l.more){let a=[],c=Math.max(e,l.from),f=-1;for(l.from>e&&a.push(new Ye(l.from-e-1).updateHeight(t,e));c<=o&&l.more;){let m=t.doc.lineAt(c).length;a.length&&a.push(null);let p=l.heights[l.index++];f==-1?f=p:Math.abs(p-f)>=Mf&&(f=-2);let b=new On(m,p);b.outdated=!1,a.push(b),c+=m+1}c<=o&&a.push(null,new Ye(o-c).updateHeight(t,c));let d=on.of(a);return(f<0||Math.abs(d.height-this.height)>=Mf||Math.abs(f-this.heightMetrics(t,e).perLine)>=Mf)&&(io=!0),qf(this,d)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class KD extends on{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,l){let o=i+this.left.height;return t<o?this.left.blockAt(t,e,i,l):this.right.blockAt(t,e,o,l+this.left.length+this.break)}lineAt(t,e,i,l,o){let a=l+this.left.height,c=o+this.left.length+this.break,f=e==te.ByHeight?t<a:t<c,d=f?this.left.lineAt(t,e,i,l,o):this.right.lineAt(t,e,i,a,c);if(this.break||(f?d.to<c:d.from>c))return d;let m=e==te.ByPosNoHeight?te.ByPosNoHeight:te.ByPos;return f?d.join(this.right.lineAt(c,m,i,a,c)):this.left.lineAt(c,m,i,l,o).join(d)}forEachLine(t,e,i,l,o,a){let c=l+this.left.height,f=o+this.left.length+this.break;if(this.break)t<f&&this.left.forEachLine(t,e,i,l,o,a),e>=f&&this.right.forEachLine(t,e,i,c,f,a);else{let d=this.lineAt(f,te.ByPos,i,l,o);t<d.from&&this.left.forEachLine(t,d.from-1,i,l,o,a),d.to>=t&&d.from<=e&&a(d),e>d.to&&this.right.forEachLine(d.to+1,e,i,c,f,a)}}replace(t,e,i){let l=this.left.length+this.break;if(e<l)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-l,e-l,i));let o=[];t>0&&this.decomposeLeft(t,o);let a=o.length;for(let c of i)o.push(c);if(t>0&&mx(o,a-1),e<this.length){let c=o.length;this.decomposeRight(e,o),mx(o,c)}return on.of(o)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,l=i+this.break;if(t>=l)return this.right.decomposeRight(t-l,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<l&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?on.of(this.break?[t,null,e]:[t,e]):(this.left=qf(this.left,t),this.right=qf(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,l){let{left:o,right:a}=this,c=e+o.length+this.break,f=null;return l&&l.from<=e+o.length&&l.more?f=o=o.updateHeight(t,e,i,l):o.updateHeight(t,e,i),l&&l.from<=c+a.length&&l.more?f=a=a.updateHeight(t,c,i,l):a.updateHeight(t,c,i),f?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mx(n,t){let e,i;n[t]==null&&(e=n[t-1])instanceof Ye&&(i=n[t+1])instanceof Ye&&n.splice(t-1,3,new Ye(e.length+1+i.length))}const ID=5;class n0{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),l=this.nodes[this.nodes.length-1];l instanceof On?l.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new On(i-this.pos,-1)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let l=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;l<0&&(l=this.oracle.lineHeight);let a=e-t;i.block?this.addBlock(new O2(a,l,i)):(a||o||l>=ID)&&this.addLineDeco(l,o,a)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new On(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let i=new Ye(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof On)return t;let e=new On(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let l=this.ensureLine();l.length+=i,l.collapsed+=i,l.widgetHeight=Math.max(l.widgetHeight,t),l.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof On)&&!this.isCovered?this.nodes.push(new On(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let l of this.nodes)l instanceof On&&l.updateHeight(this.oracle,i),i+=l?l.length:1;return this.nodes}static build(t,e,i,l){let o=new n0(i,t);return Vt.spans(e,i,l,o,0),o.finish(i)}}function ZD(n,t,e){let i=new WD;return Vt.compare(n,t,e,i,0),i.changes}class WD{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,l){(t<e||i&&i.heightRelevant||l&&l.heightRelevant)&&wf(t,e,this.changes,5)}}function FD(n,t){let e=n.getBoundingClientRect(),i=n.ownerDocument,l=i.defaultView||window,o=Math.max(0,e.left),a=Math.min(l.innerWidth,e.right),c=Math.max(0,e.top),f=Math.min(l.innerHeight,e.bottom);for(let d=n.parentNode;d&&d!=i.body;)if(d.nodeType==1){let m=d,p=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&p.overflow!="visible"){let b=m.getBoundingClientRect();o=Math.max(o,b.left),a=Math.min(a,b.right),c=Math.max(c,b.top),f=Math.min(d==n.parentNode?l.innerHeight:f,b.bottom)}d=p.position=="absolute"||p.position=="fixed"?m.offsetParent:m.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-e.left,right:Math.max(o,a)-e.left,top:c-(e.top+t),bottom:Math.max(c,f)-(e.top+t)}}function QD(n){let t=n.getBoundingClientRect(),e=n.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function JD(n,t){let e=n.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class Qm{constructor(t,e,i,l){this.from=t,this.to=e,this.size=i,this.displaySize=l}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let l=t[i],o=e[i];if(l.from!=o.from||l.to!=o.to||l.size!=o.size)return!1}return!0}draw(t,e){return xt.replace({widget:new tO(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class tO extends cl{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class gx{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=px,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ee.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Qp).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new jD(e),this.stateDeco=t.facet(Pa).filter(i=>typeof i!="function"),this.heightMap=on.empty().applyChanges(this.stateDeco,qt.empty,this.heightOracle.setDoc(t.doc),[new Wn(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=xt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let l=i?e.head:e.anchor;if(!t.some(({from:o,to:a})=>l>=o&&l<=a)){let{from:o,to:a}=this.lineBlockAt(l);t.push(new Kc(o,a))}}return this.viewports=t.sort((i,l)=>i.from-l.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?px:new i0(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Ta(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Pa).filter(m=>typeof m!="function");let l=t.changedRanges,o=Wn.extendWithRanges(l,ZD(i,this.stateDeco,t?t.changes:Ee.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);dx(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||io)&&(t.flags|=2),c?(this.scrollAnchorPos=t.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let f=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<f.from||e.range.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,e));let d=f.from!=this.viewport.from||f.to!=this.viewport.to;this.viewport=f,t.flags|=this.updateForViewport(),(d||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(h2)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),l=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ee.RTL:ee.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),c=e.getBoundingClientRect(),f=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,m=0;if(c.width&&c.height){let{scaleX:D,scaleY:R}=Uw(e,c);(D>.005&&Math.abs(this.scaleX-D)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=D,this.scaleY=R,d|=16,a=f=!0)}let p=(parseInt(i.paddingTop)||0)*this.scaleY,b=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=b)&&(this.paddingTop=p,this.paddingBottom=b,d|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(l.lineWrapping&&(f=!0),this.editorWidth=t.scrollDOM.clientWidth,d|=16);let v=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=Gw(t.scrollDOM);let S=(this.printing?JD:FD)(e,this.paddingTop),w=S.top-this.pixelViewport.top,A=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(f=!0)),!this.inView&&!this.scrollTarget&&!QD(t.dom))return 0;let O=c.width;if((this.contentDOMWidth!=O||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=t.scrollDOM.clientHeight,d|=16),f){let D=t.docView.measureVisibleLineHeights(this.viewport);if(l.mustRefreshForHeights(D)&&(a=!0),a||l.lineWrapping&&Math.abs(O-this.contentDOMWidth)>l.charWidth){let{lineHeight:R,charWidth:B,textHeight:U}=t.docView.measureTextSize();a=R>0&&l.refresh(o,R,B,U,O/B,D),a&&(t.docView.minWidth=0,d|=16)}w>0&&A>0?m=Math.max(w,A):w<0&&A<0&&(m=Math.min(w,A)),dx();for(let R of this.viewports){let B=R.from==this.viewport.from?D:t.docView.measureVisibleLineHeights(R);this.heightMap=(a?on.empty().applyChanges(this.stateDeco,qt.empty,this.heightOracle,[new Wn(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(l,0,a,new $D(R.from,B))}io&&(d|=2)}let _=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),d|=this.updateForViewport()),(d&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,t)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),l=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,f=new Kc(l.lineAt(a-i*1e3,te.ByHeight,o,0,0).from,l.lineAt(c+(1-i)*1e3,te.ByHeight,o,0,0).to);if(e){let{head:d}=e.range;if(d<f.from||d>f.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=l.lineAt(d,te.ByPos,o,0,0),b;e.y=="center"?b=(p.top+p.bottom)/2-m/2:e.y=="start"||e.y=="nearest"&&d<f.from?b=p.top:b=p.bottom-m,f=new Kc(l.lineAt(b-1e3/2,te.ByHeight,o,0,0).from,l.lineAt(b+m+1e3/2,te.ByHeight,o,0,0).to)}}return f}mapViewport(t,e){let i=e.mapPos(t.from,-1),l=e.mapPos(t.to,1);return new Kc(this.heightMap.lineAt(i,te.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(l,te.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:l}=this.heightMap.lineAt(t,te.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(e,te.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(t==0||l<=a-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||o>=c+Math.max(10,Math.min(i,250)))&&l>a-2*1e3&&o<c+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let l of t)e.touchesRange(l.from,l.to)||i.push(new Qm(e.mapPos(l.from),e.mapPos(l.to),l.size,l.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,l=i?1e4:2e3,o=l>>1,a=l<<1;if(this.defaultTextDirection!=ee.LTR&&!i)return[];let c=[],f=(m,p,b,v)=>{if(p-m<o)return;let S=this.state.selection.main,w=[S.from];S.empty||w.push(S.to);for(let C of w)if(C>m&&C<p){f(m,C-10,b,v),f(C+10,p,b,v);return}let A=nO(t,C=>C.from>=b.from&&C.to<=b.to&&Math.abs(C.from-m)<o&&Math.abs(C.to-p)<o&&!w.some(O=>C.from<O&&C.to>O));if(!A){if(p<b.to&&e&&i&&e.visibleRanges.some(_=>_.from<=p&&_.to>=p)){let _=e.moveToLineBoundary(at.cursor(p),!1,!0).head;_>m&&(p=_)}let C=this.gapSize(b,m,p,v),O=i||C<2e6?C:2e6;A=new Qm(m,p,C,O)}c.push(A)},d=m=>{if(m.length<a||m.type!=rn.Text)return;let p=eO(m.from,m.to,this.stateDeco);if(p.total<a)return;let b=this.scrollTarget?this.scrollTarget.range.head:null,v,S;if(i){let w=l/this.heightOracle.lineLength*this.heightOracle.lineHeight,A,C;if(b!=null){let O=Zc(p,b),_=((this.visibleBottom-this.visibleTop)/2+w)/m.height;A=O-_,C=O+_}else A=(this.visibleTop-m.top-w)/m.height,C=(this.visibleBottom-m.top+w)/m.height;v=Ic(p,A),S=Ic(p,C)}else{let w=p.total*this.heightOracle.charWidth,A=l*this.heightOracle.charWidth,C=0;if(w>2e6)for(let B of t)B.from>=m.from&&B.from<m.to&&B.size!=B.displaySize&&B.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=B.size-B.displaySize);let O=this.pixelViewport.left+C,_=this.pixelViewport.right+C,D,R;if(b!=null){let B=Zc(p,b),U=((_-O)/2+A)/w;D=B-U,R=B+U}else D=(O-A)/w,R=(_+A)/w;v=Ic(p,D),S=Ic(p,R)}v>m.from&&f(m.from,v,m,p),S<m.to&&f(S,m.to,m,p)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(d):d(m);return c}gapSize(t,e,i,l){let o=Zc(l,i)-Zc(l,e);return this.heightOracle.lineWrapping?t.height*o:l.total*this.heightOracle.charWidth*o}updateLineGaps(t){Qm.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=xt.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];Vt.spans(e,this.viewport.from,this.viewport.to,{span(o,a){i.push({from:o,to:a})},point(){}},20);let l=0;if(i.length!=this.visibleRanges.length)l=12;else for(let o=0;o<i.length&&!(l&8);o++){let a=this.visibleRanges[o],c=i[o];(a.from!=c.from||a.to!=c.to)&&(l|=4,t&&t.mapPos(a.from,-1)==c.from&&t.mapPos(a.to,1)==c.to||(l|=8))}return this.visibleRanges=i,l}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Ta(this.heightMap.lineAt(t,te.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||Ta(this.heightMap.lineAt(this.scaler.fromDOM(t),te.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Ta(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Kc=class{constructor(t,e){this.from=t,this.to=e}};function eO(n,t,e){let i=[],l=n,o=0;return Vt.spans(e,n,t,{span(){},point(a,c){a>l&&(i.push({from:l,to:a}),o+=a-l),l=c}},20),l<t&&(i.push({from:l,to:t}),o+=t-l),{total:o,ranges:i}}function Ic({total:n,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(n*e);for(let l=0;;l++){let{from:o,to:a}=t[l],c=a-o;if(i<=c)return o+i;i-=c}}function Zc(n,t){let e=0;for(let{from:i,to:l}of n.ranges){if(t<=l){e+=t-i;break}e+=l-i}return e/n.total}function nO(n,t){for(let e of n)if(t(e))return e}const px={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class i0{constructor(t,e,i){let l=0,o=0,a=0;this.viewports=i.map(({from:c,to:f})=>{let d=e.lineAt(c,te.ByPos,t,0,0).top,m=e.lineAt(f,te.ByPos,t,0,0).bottom;return l+=m-d,{from:c,to:f,top:d,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-l)/(e.height-l);for(let c of this.viewports)c.domTop=a+(c.top-o)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),o=c.bottom}toDOM(t){for(let e=0,i=0,l=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.top)return l+(t-i)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);i=o.bottom,l=o.domBottom}}fromDOM(t){for(let e=0,i=0,l=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.domTop)return i+(t-l)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);i=o.bottom,l=o.domBottom}}eq(t){return t instanceof i0?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}}function Ta(n,t){if(t.scale==1)return n;let e=t.toDOM(n.top),i=t.toDOM(n.bottom);return new ki(n.from,n.length,e,i-e,Array.isArray(n._content)?n._content.map(l=>Ta(l,t)):n._content)}const Wc=dt.define({combine:n=>n.join(" ")}),op=dt.define({combine:n=>n.indexOf(!0)>-1}),ap=es.newName(),R2=es.newName(),N2=es.newName(),_2={"&light":"."+R2,"&dark":"."+N2};function up(n,t,e){return new es(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,l=>{if(l=="&")return n;if(!e||!e[l])throw new RangeError(`Unsupported selector: ${l}`);return e[l]}):n+" "+i}})}const iO=up("."+ap,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_2),lO={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Jm=mt.ie&&mt.ie_version<=11;class sO{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new qT,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(mt.ie&&mt.ie_version<=11||mt.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&t.constructor.EDIT_CONTEXT!==!1&&!(mt.chrome&&mt.chrome_version<126)&&(this.editContext=new oO(t),t.state.facet(nl)&&(t.contentDOM.editContext=this.editContext.editContext)),Jm&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,l=this.selectionRange;if(i.state.facet(nl)?i.root.activeElement!=this.dom:!Sf(this.dom,l))return;let o=l.anchorNode&&i.docView.nearest(l.anchorNode);if(o&&o.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(mt.ie&&mt.ie_version<=11||mt.android&&mt.chrome)&&!i.state.selection.main.empty&&l.focusNode&&za(l.focusNode,l.focusOffset,l.anchorNode,l.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Ga(t.root);if(!e)return!1;let i=mt.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&rO(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let l=Sf(this.dom,i);return l&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&GT(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),l&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,lO),Jm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Jm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let l=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&$r(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(l)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,l=!1;for(let o of t){let a=this.readMutation(o);a&&(a.typeOver&&(l=!0),e==-1?{from:e,to:i}=a:(e=Math.min(a.from,e),i=Math.max(a.to,i)))}return{from:e,to:i,typeOver:l}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),l=this.selectionChanged&&Sf(this.dom,this.selectionRange);if(t<0&&!l)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new AD(this.view,t,e,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,l=S2(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),l}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.flags|=4),t.type=="childList"){let i=yx(e,t.previousSibling||t.target.previousSibling,-1),l=yx(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:l?e.posBefore(l):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(nl)!=t.state.facet(nl)&&(t.view.contentDOM.editContext=t.state.facet(nl)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function yx(n,t,e){for(;t;){let i=Ft.get(t);if(i&&i.parent==n)return i;let l=t.parentNode;t=l!=n.dom?l:e>0?t.nextSibling:t.previousSibling}return null}function bx(n,t){let e=t.startContainer,i=t.startOffset,l=t.endContainer,o=t.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return za(a.node,a.offset,l,o)&&([e,i,l,o]=[l,o,e,i]),{anchorNode:e,anchorOffset:i,focusNode:l,focusOffset:o}}function rO(n,t){if(t.getComposedRanges){let l=t.getComposedRanges(n.root)[0];if(l)return bx(n,l)}let e=null;function i(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),e?bx(n,e):null}class oO{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let l=t.state.selection.main,{anchor:o,head:a}=l,c=this.toEditorPos(i.updateRangeStart),f=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:c,drifted:!1});let d={from:c,to:f,insert:qt.of(i.text.split(`
`))};if(d.from==this.from&&o<this.from?d.from=o:d.to==this.to&&o>this.to&&(d.to=o),d.from==d.to&&!d.insert.length){let m=at.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));m.main.eq(l)||t.dispatch({selection:m,userEvent:"select"});return}if((mt.mac||mt.android)&&d.from==a-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:c,to:f,insert:qt.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!t.state.readOnly){let m=this.to-this.from+(d.to-d.from+d.insert.length);e0(t,d,at.single(this.toEditorPos(i.selectionStart,m),this.toEditorPos(i.selectionEnd,m)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))},this.handlers.characterboundsupdate=i=>{let l=[],o=null;for(let a=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);a<c;a++){let f=t.coordsForChar(a);o=f&&new DOMRect(f.left,f.top,f.right-f.left,f.bottom-f.top)||o||new DOMRect,l.push(o)}e.updateCharacterBounds(i.rangeStart,l)},this.handlers.textformatupdate=i=>{let l=[];for(let o of i.getTextFormats()){let a=o.underlineStyle,c=o.underlineThickness;if(a!="None"&&c!="None"){let f=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(f<d){let m=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${c=="Thin"?1:2}px`;l.push(xt.mark({attributes:{style:m}}).range(f,d))}}}t.dispatch({effects:m2.of(xt.set(l))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let l=Ga(i.root);l&&l.rangeCount&&this.editContext.updateSelectionBounds(l.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,l=this.pendingContextChange;return t.changes.iterChanges((o,a,c,f,d)=>{if(i)return;let m=d.length-(a-o);if(l&&a>=l.to)if(l.from==o&&l.to==a&&l.insert.eq(d)){l=this.pendingContextChange=null,e+=m,this.to+=m;return}else l=null,this.revertPending(t.state);if(o+=e,a+=e,a<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),d.toString()),this.to+=m}e+=m}),l&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(l=>!l.isUserEvent("input.type")&&l.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),l=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=l)&&this.editContext.updateSelection(i,l)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class ht{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:i}=t;this.dispatchTransactions=t.dispatchTransactions||i&&(l=>l.forEach(o=>i(o,this)))||(l=>this.update(l)),this.dispatch=this.dispatch.bind(this),this._root=t.root||YT(t.parent)||document,this.viewState=new gx(t.state||Ht.create(t)),t.scrollTo&&t.scrollTo.is(Xc)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(qr).map(l=>new Zm(l));for(let l of this.plugins)l.update(this);this.observer=new sO(this),this.inputState=new TD(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Wv(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let e=t.length==1&&t[0]instanceof ke?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,i=!1,l,o=this.state;for(let b of t){if(b.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=b.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,c=0,f=null;t.some(b=>b.annotation(k2))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,f=T2(o,a),f||(c=1));let d=this.observer.delayedAndroidKey,m=null;if(d?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(Ht.phrases)!=this.state.facet(Ht.phrases))return this.setState(o);l=Uf.create(this,o,t),l.flags|=c;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let b of t){if(p&&(p=p.map(b.changes)),b.scrollIntoView){let{main:v}=b.state.selection;p=new Kr(v.empty?v:at.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of b.effects)v.is(Xc)&&(p=v.value.clip(this.state))}this.viewState.update(l,p),this.bidiCache=Yf.update(this.bidiCache,l.changes),l.empty||(this.updatePlugins(l),this.inputState.update(l)),e=this.docView.update(l),this.state.facet(Ea)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(l.startState.facet(Wc)!=l.state.facet(Wc)&&(this.viewState.mustMeasureContent=!0),(e||i||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!l.empty)for(let b of this.state.facet(ip))try{b(l)}catch(v){pn(this.state,v,"update listener")}(f||m)&&Promise.resolve().then(()=>{f&&this.state==f.startState&&this.dispatch(f),m&&!S2(this,m)&&d.force&&$r(this.contentDOM,d.key,d.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new gx(t),this.plugins=t.facet(qr).map(i=>new Zm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Wv(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(qr),i=t.state.facet(qr);if(e!=i){let l=[];for(let o of i){let a=e.indexOf(o);if(a<0)l.push(new Zm(o));else{let c=this.plugins[a];c.mustUpdate=t,l.push(c)}}for(let o of this.plugins)o.mustUpdate!=t&&o.destroy(this);this.plugins=l,this.pluginMap.clear()}else for(let l of this.plugins)l.mustUpdate=t;for(let l=0;l<this.plugins.length;l++)this.plugins[l].update(this);e!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(i){pn(this.state,i,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,l=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(l-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(Gw(i))o=-1,a=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(l);o=v.from,a=v.top}this.updateState=1;let f=this.viewState.measure(this);if(!f&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];f&4||([this.measureRequests,d]=[d,this.measureRequests]);let m=d.map(v=>{try{return v.read(this)}catch(S){return pn(this.state,S),vx}}),p=Uf.create(this,this.state,[]),b=!1;p.flags|=f,e?e.flags|=f:e=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),b=this.docView.update(p),b&&this.docViewUpdate());for(let v=0;v<d.length;v++)if(m[v]!=vx)try{let S=d[v];S.write&&S.write(m[v],this)}catch(S){pn(this.state,S)}if(b&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let S=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(S>1||S<-1){l=l+S,i.scrollTop=l/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let c of this.state.facet(ip))c(e)}get themeClasses(){return ap+" "+(this.state.facet(op)?N2:R2)+" "+this.state.facet(Wc)}updateAttrs(){let t=xx(this,g2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(nl)?"true":"false",class:"cm-content",style:`${mt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),xx(this,Qp,e);let i=this.observer.ignore(()=>{let l=Qg(this.contentDOM,this.contentAttrs,e),o=Qg(this.dom,this.editorAttrs,t);return l||o});return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let l of i.effects)if(l.is(ht.announce)){e&&(this.announceDOM.textContent=""),e=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=l.value}}mountStyles(){this.styleModules=this.state.facet(Ea);let t=this.state.facet(ht.cspNonce);es.mount(this.root,this.styleModules.concat(iO).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(i=>i.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return Fm(this,t,ex(this,t,e,i))}moveByGroup(t,e){return Fm(this,t,ex(this,t,e,i=>vD(this,t.head,i)))}visualLineSide(t,e){let i=this.bidiSpans(t),l=this.textDirectionAt(t.from),o=i[e?i.length-1:0];return at.cursor(o.side(e,l)+t.from,o.forward(!e,l)?1:-1)}moveToLineBoundary(t,e,i=!0){return bD(this,t,e,i)}moveVertically(t,e,i){return Fm(this,t,xD(this,t,e,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),x2(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let l=this.state.doc.lineAt(t),o=this.bidiSpans(l),a=o[Fl.find(o,t-l.from,-1,e)];return cu(i,a.dir==ee.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(f2)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>aO)return i2(t.length);let e=this.textDirectionAt(t.from),i;for(let o of this.bidiCache)if(o.from==t.from&&o.dir==e&&(o.fresh||n2(o.isolates,i=Zv(this,t))))return o.order;i||(i=Zv(this,t));let l=nD(t.text,e,i);return this.bidiCache.push(new Yf(t.from,t.to,e,i,!0,l)),l}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||mt.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{qw(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Xc.of(new Kr(typeof t=="number"?at.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,i=this.viewState.scrollAnchorAt(t);return Xc.of(new Kr(at.cursor(i.from),"start","start",i.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return pe.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return pe.define(()=>({}),{eventObservers:t})}static theme(t,e){let i=es.newName(),l=[Wc.of(i),Ea.of(up(`.${i}`,t))];return e&&e.dark&&l.push(op.of(!0)),l}static baseTheme(t){return Zs.lowest(Ea.of(up("."+ap,t,_2)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),l=i&&Ft.get(i)||Ft.get(t);return((e=l==null?void 0:l.rootView)===null||e===void 0?void 0:e.view)||null}}ht.styleModule=Ea;ht.inputHandler=u2;ht.clipboardInputFilter=Wp;ht.clipboardOutputFilter=Fp;ht.scrollHandler=d2;ht.focusChangeEffect=c2;ht.perLineTextDirection=f2;ht.exceptionSink=a2;ht.updateListener=ip;ht.editable=nl;ht.mouseSelectionStyle=o2;ht.dragMovesSelection=r2;ht.clickAddsSelectionRange=s2;ht.decorations=Pa;ht.outerDecorations=p2;ht.atomicRanges=Jp;ht.bidiIsolatedRanges=y2;ht.scrollMargins=b2;ht.darkTheme=op;ht.cspNonce=dt.define({combine:n=>n.length?n[0]:""});ht.contentAttributes=Qp;ht.editorAttributes=g2;ht.lineWrapping=ht.contentAttributes.of({class:"cm-lineWrapping"});ht.announce=Et.define();const aO=4096,vx={};class Yf{constructor(t,e,i,l,o,a){this.from=t,this.to=e,this.dir=i,this.isolates=l,this.fresh=o,this.order=a}static update(t,e){if(e.empty&&!t.some(o=>o.fresh))return t;let i=[],l=t.length?t[t.length-1].dir:ee.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let a=t[o];a.dir==l&&!e.touchesRange(a.from,a.to)&&i.push(new Yf(e.mapPos(a.from,1),e.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function xx(n,t,e){for(let i=n.state.facet(t),l=i.length-1;l>=0;l--){let o=i[l],a=typeof o=="function"?o(n):o;a&&Fg(a,e)}return e}const uO=mt.mac?"mac":mt.windows?"win":mt.linux?"linux":"key";function cO(n,t){const e=n.split(/-(?!$)/);let i=e[e.length-1];i=="Space"&&(i=" ");let l,o,a,c;for(let f=0;f<e.length-1;++f){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))l=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))t=="mac"?c=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return l&&(i="Alt-"+i),o&&(i="Ctrl-"+i),c&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Fc(n,t,e){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e!==!1&&t.shiftKey&&(n="Shift-"+n),n}const fO=Zs.default(ht.domEventHandlers({keydown(n,t){return z2(B2(t.state),n,t,"editor")}})),du=dt.define({enables:fO}),Sx=new WeakMap;function B2(n){let t=n.facet(du),e=Sx.get(t);return e||Sx.set(t,e=mO(t.reduce((i,l)=>i.concat(l),[]))),e}function hO(n,t,e){return z2(B2(n.state),t,n,e)}let Kl=null;const dO=4e3;function mO(n,t=uO){let e=Object.create(null),i=Object.create(null),l=(a,c)=>{let f=i[a];if(f==null)i[a]=c;else if(f!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,c,f,d,m)=>{var p,b;let v=e[a]||(e[a]=Object.create(null)),S=c.split(/ (?!$)/).map(C=>cO(C,t));for(let C=1;C<S.length;C++){let O=S.slice(0,C).join(" ");l(O,!0),v[O]||(v[O]={preventDefault:!0,stopPropagation:!1,run:[_=>{let D=Kl={view:_,prefix:O,scope:a};return setTimeout(()=>{Kl==D&&(Kl=null)},dO),!0}]})}let w=S.join(" ");l(w,!1);let A=v[w]||(v[w]={preventDefault:!1,stopPropagation:!1,run:((b=(p=v._any)===null||p===void 0?void 0:p.run)===null||b===void 0?void 0:b.slice())||[]});f&&A.run.push(f),d&&(A.preventDefault=!0),m&&(A.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of c){let m=e[d]||(e[d]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=a;for(let b in m)m[b].run.push(v=>p(v,cp))}let f=a[t]||a.key;if(f)for(let d of c)o(d,f,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(d,"Shift-"+f,a.shift,a.preventDefault,a.stopPropagation)}return e}let cp=null;function z2(n,t,e,i){cp=t;let l=LT(t),o=dn(l,0),a=Ei(o)==l.length&&l!=" ",c="",f=!1,d=!1,m=!1;Kl&&Kl.view==e&&Kl.scope==i&&(c=Kl.prefix+" ",A2.indexOf(t.keyCode)<0&&(d=!0,Kl=null));let p=new Set,b=A=>{if(A){for(let C of A.run)if(!p.has(C)&&(p.add(C),C(e)))return A.stopPropagation&&(m=!0),!0;A.preventDefault&&(A.stopPropagation&&(m=!0),d=!0)}return!1},v=n[i],S,w;return v&&(b(v[c+Fc(l,t,!a)])?f=!0:a&&(t.altKey||t.metaKey||t.ctrlKey)&&!(mt.windows&&t.ctrlKey&&t.altKey)&&(S=ns[t.keyCode])&&S!=l?(b(v[c+Fc(S,t,!0)])||t.shiftKey&&(w=Ya[t.keyCode])!=l&&w!=S&&b(v[c+Fc(w,t,!1)]))&&(f=!0):a&&t.shiftKey&&b(v[c+Fc(l,t,!0)])&&(f=!0),!f&&b(v._any)&&(f=!0)),d&&(f=!0),f&&m&&t.stopPropagation(),cp=null,f}class mu{constructor(t,e,i,l,o){this.className=t,this.left=e,this.top=i,this.width=l,this.height=o}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,i){if(i.empty){let l=t.coordsAtPos(i.head,i.assoc||1);if(!l)return[];let o=L2(t);return[new mu(e,l.left-o.left,l.top-o.top,null,l.bottom-l.top)]}else return gO(t,e,i)}}function L2(n){let t=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==ee.LTR?t.left:t.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:t.top-n.scrollDOM.scrollTop*n.scaleY}}function wx(n,t,e,i){let l=n.coordsAtPos(t,e*2);if(!l)return i;let o=n.dom.getBoundingClientRect(),a=(l.top+l.bottom)/2,c=n.posAtCoords({x:o.left+1,y:a}),f=n.posAtCoords({x:o.right-1,y:a});return c==null||f==null?i:{from:Math.max(i.from,Math.min(c,f)),to:Math.min(i.to,Math.max(c,f))}}function gO(n,t,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let i=Math.max(e.from,n.viewport.from),l=Math.min(e.to,n.viewport.to),o=n.textDirection==ee.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),f=L2(n),d=a.querySelector(".cm-line"),m=d&&window.getComputedStyle(d),p=c.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),b=c.right-(m?parseInt(m.paddingRight):0),v=sp(n,i,1),S=sp(n,l,-1),w=v.type==rn.Text?v:null,A=S.type==rn.Text?S:null;if(w&&(n.lineWrapping||v.widgetLineBreaks)&&(w=wx(n,i,1,w)),A&&(n.lineWrapping||S.widgetLineBreaks)&&(A=wx(n,l,-1,A)),w&&A&&w.from==A.from&&w.to==A.to)return O(_(e.from,e.to,w));{let R=w?_(e.from,null,w):D(v,!1),B=A?_(null,e.to,A):D(S,!0),U=[];return(w||v).to<(A||S).from-(w&&A?1:0)||v.widgetLineBreaks>1&&R.bottom+n.defaultLineHeight/2<B.top?U.push(C(p,R.bottom,b,B.top)):R.bottom<B.top&&n.elementAtHeight((R.bottom+B.top)/2).type==rn.Text&&(R.bottom=B.top=(R.bottom+B.top)/2),O(R).concat(U).concat(O(B))}function C(R,B,U,Q){return new mu(t,R-f.left,B-f.top,U-R,Q-B)}function O({top:R,bottom:B,horizontal:U}){let Q=[];for(let P=0;P<U.length;P+=2)Q.push(C(U[P],R,U[P+1],B));return Q}function _(R,B,U){let Q=1e9,P=-1e9,et=[];function J(T,q,k,z,j){let H=n.coordsAtPos(T,T==U.to?-2:2),E=n.coordsAtPos(k,k==U.from?2:-2);!H||!E||(Q=Math.min(H.top,E.top,Q),P=Math.max(H.bottom,E.bottom,P),j==ee.LTR?et.push(o&&q?p:H.left,o&&z?b:E.right):et.push(!o&&z?p:E.left,!o&&q?b:H.right))}let F=R??U.from,nt=B??U.to;for(let T of n.visibleRanges)if(T.to>F&&T.from<nt)for(let q=Math.max(T.from,F),k=Math.min(T.to,nt);;){let z=n.state.doc.lineAt(q);for(let j of n.bidiSpans(z)){let H=j.from+z.from,E=j.to+z.from;if(H>=k)break;E>q&&J(Math.max(H,q),R==null&&H<=F,Math.min(E,k),B==null&&E>=nt,j.dir)}if(q=z.to+1,q>=k)break}return et.length==0&&J(F,R==null,nt,B==null,n.textDirection),{top:Q,bottom:P,horizontal:et}}function D(R,B){let U=c.top+(B?R.top:R.bottom);return{top:U,bottom:U,horizontal:[]}}}function pO(n,t){return n.constructor==t.constructor&&n.eq(t)}class yO{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(Cf)!=t.state.facet(Cf)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,i=t.facet(Cf);for(;e<i.length&&i[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,i)=>!pO(e,this.drawn[i]))){let e=this.dom.firstChild,i=0;for(let l of t)l.update&&e&&l.constructor&&this.drawn[i].constructor&&l.update(e,this.drawn[i])?(e=e.nextSibling,i++):this.dom.insertBefore(l.draw(),e);for(;e;){let l=e.nextSibling;e.remove(),e=l}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Cf=dt.define();function H2(n){return[pe.define(t=>new yO(t,n)),Cf.of(n)]}const Xa=dt.define({combine(n){return fi(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function bO(n={}){return[Xa.of(n),vO,xO,SO,h2.of(!0)]}function V2(n){return n.startState.facet(Xa)!=n.state.facet(Xa)}const vO=H2({above:!0,markers(n){let{state:t}=n,e=t.facet(Xa),i=[];for(let l of t.selection.ranges){let o=l==t.selection.main;if(l.empty||e.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=l.empty?l:at.cursor(l.head,l.head>l.anchor?-1:1);for(let f of mu.forRange(n,a,c))i.push(f)}}return i},update(n,t){n.transactions.some(i=>i.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=V2(n);return e&&Ax(n.state,t),n.docChanged||n.selectionSet||e},mount(n,t){Ax(t.state,n)},class:"cm-cursorLayer"});function Ax(n,t){t.style.animationDuration=n.facet(Xa).cursorBlinkRate+"ms"}const xO=H2({above:!1,markers(n){return n.state.selection.ranges.map(t=>t.empty?[]:mu.forRange(n,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(n,t){return n.docChanged||n.selectionSet||n.viewportChanged||V2(n)},class:"cm-selectionLayer"}),SO=Zs.highest(ht.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),U2=Et.define({map(n,t){return n==null?null:t.mapPos(n)}}),Da=Te.define({create(){return null},update(n,t){return n!=null&&(n=t.changes.mapPos(n)),t.effects.reduce((e,i)=>i.is(U2)?i.value:e,n)}}),wO=pe.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var t;let e=n.state.field(Da);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Da)!=e||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,t=n.state.field(Da),e=t!=null&&n.coordsAtPos(t);if(!e)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:e.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:e.bottom-e.top}}drawCursor(n){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;n?(this.cursor.style.left=n.left/t+"px",this.cursor.style.top=n.top/e+"px",this.cursor.style.height=n.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Da)!=n&&this.view.dispatch({effects:U2.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function AO(){return[Da,wO]}function Mx(n,t,e,i,l){t.lastIndex=0;for(let o=n.iterRange(e,i),a=e,c;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;c=t.exec(o.value);)l(a+c.index,c)}function MO(n,t){let e=n.visibleRanges;if(e.length==1&&e[0].from==n.viewport.from&&e[0].to==n.viewport.to)return e;let i=[];for(let{from:l,to:o}of e)l=Math.max(n.state.doc.lineAt(l).from,l-t),o=Math.min(n.state.doc.lineAt(o).to,o+t),i.length&&i[i.length-1].to>=l?i[i.length-1].to=o:i.push({from:l,to:o});return i}class CO{constructor(t){const{regexp:e,decoration:i,decorate:l,boundary:o,maxLength:a=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,l)this.addMatch=(c,f,d,m)=>l(m,d,d+c[0].length,c,f);else if(typeof i=="function")this.addMatch=(c,f,d,m)=>{let p=i(c,f,d);p&&m(d,d+c[0].length,p)};else if(i)this.addMatch=(c,f,d,m)=>m(d,d+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(t){let e=new rl,i=e.add.bind(e);for(let{from:l,to:o}of MO(t,this.maxLength))Mx(t.state.doc,this.regexp,l,o,(a,c)=>this.addMatch(c,t,a,i));return e.finish()}updateDeco(t,e){let i=1e9,l=-1;return t.docChanged&&t.changes.iterChanges((o,a,c,f)=>{f>=t.view.viewport.from&&c<=t.view.viewport.to&&(i=Math.min(c,i),l=Math.max(f,l))}),t.viewportMoved||l-i>1e3?this.createDeco(t.view):l>-1?this.updateRange(t.view,e.map(t.changes),i,l):e}updateRange(t,e,i,l){for(let o of t.visibleRanges){let a=Math.max(o.from,i),c=Math.min(o.to,l);if(c>=a){let f=t.state.doc.lineAt(a),d=f.to<c?t.state.doc.lineAt(c):f,m=Math.max(o.from,f.from),p=Math.min(o.to,d.to);if(this.boundary){for(;a>f.from;a--)if(this.boundary.test(f.text[a-1-f.from])){m=a;break}for(;c<d.to;c++)if(this.boundary.test(d.text[c-d.from])){p=c;break}}let b=[],v,S=(w,A,C)=>b.push(C.range(w,A));if(f==d)for(this.regexp.lastIndex=m-f.from;(v=this.regexp.exec(f.text))&&v.index<p-f.from;)this.addMatch(v,t,v.index+f.from,S);else Mx(t.state.doc,this.regexp,m,p,(w,A)=>this.addMatch(A,t,w,S));e=e.update({filterFrom:m,filterTo:p,filter:(w,A)=>w<m||A>p,add:b})}}return e}}const fp=/x/.unicode!=null?"gu":"g",EO=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,fp),kO={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let tg=null;function TO(){var n;if(tg==null&&typeof document<"u"&&document.body){let t=document.body.style;tg=((n=t.tabSize)!==null&&n!==void 0?n:t.MozTabSize)!=null}return tg||!1}const Ef=dt.define({combine(n){let t=fi(n,{render:null,specialChars:EO,addSpecialChars:null});return(t.replaceTabs=!TO())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,fp)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,fp)),t}});function DO(n={}){return[Ef.of(n),OO()]}let Cx=null;function OO(){return Cx||(Cx=pe.fromClass(class{constructor(n){this.view=n,this.decorations=xt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Ef)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new CO({regexp:n.specialChars,decoration:(t,e,i)=>{let{doc:l}=e.state,o=dn(t[0],0);if(o==9){let a=l.lineAt(i),c=e.state.tabSize,f=ho(a.text,c,i-a.from);return xt.replace({widget:new BO((c-f%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=xt.replace({widget:new _O(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let t=n.state.facet(Ef);n.startState.facet(Ef)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const RO="•";function NO(n){return n>=32?RO:n==10?"␤":String.fromCharCode(9216+n)}class _O extends cl{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=NO(this.code),i=t.state.phrase("Control character")+" "+(kO[this.code]||"0x"+this.code.toString(16)),l=this.options.render&&this.options.render(this.code,i,e);if(l)return l;let o=document.createElement("span");return o.textContent=e,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class BO extends cl{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function zO(){return HO}const LO=xt.line({class:"cm-activeLine"}),HO=pe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let t=-1,e=[];for(let i of n.state.selection.ranges){let l=n.lineBlockAt(i.head);l.from>t&&(e.push(LO.range(l.from)),t=l.from)}return xt.set(e)}},{decorations:n=>n.decorations});class VO extends cl{constructor(t){super(),this.content=t}toDOM(t){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(t):this.content.cloneNode(!0)),e.setAttribute("aria-hidden","true"),e}coordsAt(t){let e=t.firstChild?to(t.firstChild):[];if(!e.length)return null;let i=window.getComputedStyle(t.parentNode),l=cu(e[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return l.bottom-l.top>o*1.5?{left:l.left,right:l.right,top:l.top,bottom:l.top+o}:l}ignoreEvent(){return!1}}function UO(n){let t=pe.fromClass(class{constructor(e){this.view=e,this.placeholder=n?xt.set([xt.widget({widget:new VO(n),side:1}).range(0)]):xt.none}get decorations(){return this.view.state.doc.length?xt.none:this.placeholder}},{decorations:e=>e.decorations});return typeof n=="string"?[t,ht.contentAttributes.of({"aria-placeholder":n})]:t}const hp=2e3;function qO(n,t,e){let i=Math.min(t.line,e.line),l=Math.max(t.line,e.line),o=[];if(t.off>hp||e.off>hp||t.col<0||e.col<0){let a=Math.min(t.off,e.off),c=Math.max(t.off,e.off);for(let f=i;f<=l;f++){let d=n.doc.line(f);d.length<=c&&o.push(at.range(d.from+a,d.to+c))}}else{let a=Math.min(t.col,e.col),c=Math.max(t.col,e.col);for(let f=i;f<=l;f++){let d=n.doc.line(f),m=Xg(d.text,a,n.tabSize,!0);if(m<0)o.push(at.cursor(d.to));else{let p=Xg(d.text,c,n.tabSize);o.push(at.range(d.from+m,d.from+p))}}}return o}function YO(n,t){let e=n.coordsAtPos(n.viewport.from);return e?Math.round(Math.abs((e.left-t)/n.defaultCharacterWidth)):-1}function Ex(n,t){let e=n.posAtCoords({x:t.clientX,y:t.clientY},!1),i=n.state.doc.lineAt(e),l=e-i.from,o=l>hp?-1:l==i.length?YO(n,t.clientX):ho(i.text,n.state.tabSize,e-i.from);return{line:i.number,col:o,off:l}}function GO(n,t){let e=Ex(n,t),i=n.state.selection;return e?{update(l){if(l.docChanged){let o=l.changes.mapPos(l.startState.doc.line(e.line).from),a=l.state.doc.lineAt(o);e={line:a.number,col:e.col,off:Math.min(e.off,a.length)},i=i.map(l.changes)}},get(l,o,a){let c=Ex(n,l);if(!c)return i;let f=qO(n.state,e,c);return f.length?a?at.create(f.concat(i.ranges)):at.create(f):i}}:null}function PO(n){let t=e=>e.altKey&&e.button==0;return ht.mouseSelectionStyle.of((e,i)=>t(i)?GO(e,i):null)}const XO={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},jO={style:"cursor: crosshair"};function $O(n={}){let[t,e]=XO[n.key||"Alt"],i=pe.fromClass(class{constructor(l){this.view=l,this.isDown=!1}set(l){this.isDown!=l&&(this.isDown=l,this.view.update([]))}},{eventObservers:{keydown(l){this.set(l.keyCode==t||e(l))},keyup(l){(l.keyCode==t||!e(l))&&this.set(!1)},mousemove(l){this.set(e(l))}}});return[i,ht.contentAttributes.of(l=>{var o;return!((o=l.plugin(i))===null||o===void 0)&&o.isDown?jO:null})]}const ya="-10000px";class q2{constructor(t,e,i,l){this.facet=e,this.createTooltipView=i,this.removeTooltipView=l,this.input=t.state.facet(e),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=i(a,o))}update(t,e){var i;let l=t.state.facet(this.facet),o=l.filter(f=>f);if(l===this.input){for(let f of this.tooltipViews)f.update&&f.update(t);return!1}let a=[],c=e?[]:null;for(let f=0;f<o.length;f++){let d=o[f],m=-1;if(d){for(let p=0;p<this.tooltips.length;p++){let b=this.tooltips[p];b&&b.create==d.create&&(m=p)}if(m<0)a[f]=this.createTooltipView(d,f?a[f-1]:null),c&&(c[f]=!!d.above);else{let p=a[f]=this.tooltipViews[m];c&&(c[f]=e[m]),p.update&&p.update(t)}}}for(let f of this.tooltipViews)a.indexOf(f)<0&&(this.removeTooltipView(f),(i=f.destroy)===null||i===void 0||i.call(f));return e&&(c.forEach((f,d)=>e[d]=f),e.length=c.length),this.input=l,this.tooltips=o,this.tooltipViews=a,!0}}function KO(n){let t=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const eg=dt.define({combine:n=>{var t,e,i;return{position:mt.ios?"absolute":((t=n.find(l=>l.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=n.find(l=>l.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((i=n.find(l=>l.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||KO}}}),kx=new WeakMap,l0=pe.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(eg);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new q2(n,mh,(e,i)=>this.createTooltip(e,i),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(n,this.above);t&&this.observeIntersection();let e=t||n.geometryChanged,i=n.state.facet(eg);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let l of this.manager.tooltipViews)l.dom.style.position=this.position;e=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let l of this.manager.tooltipViews)this.container.appendChild(l.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(n,t){let e=n.create(this.view),i=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let l=document.createElement("div");l.className="cm-tooltip-arrow",e.dom.appendChild(l)}return e.dom.style.position=this.position,e.dom.style.top=ya,e.dom.style.left="0px",this.container.insertBefore(e.dom,i),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var n,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(mt.gecko)e=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==ya&&o.style.left=="0px"){let a=o.getBoundingClientRect();e=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(e||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,t=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:t}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),l=t0(this.view);return{visible:{left:i.left+l.left,top:i.top+l.top,right:i.right-l.right,bottom:i.bottom-l.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,a)=>{let c=this.manager.tooltipViews[a];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(eg).tooltipSpace(this.view),scaleX:n,scaleY:t,makeAbsolute:e}}writeMeasure(n){var t;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{visible:e,space:i,scaleX:l,scaleY:o}=n,a=[];for(let c=0;c<this.manager.tooltips.length;c++){let f=this.manager.tooltips[c],d=this.manager.tooltipViews[c],{dom:m}=d,p=n.pos[c],b=n.size[c];if(!p||f.clip!==!1&&(p.bottom<=Math.max(e.top,i.top)||p.top>=Math.min(e.bottom,i.bottom)||p.right<Math.max(e.left,i.left)-.1||p.left>Math.min(e.right,i.right)+.1)){m.style.top=ya;continue}let v=f.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,S=v?7:0,w=b.right-b.left,A=(t=kx.get(d))!==null&&t!==void 0?t:b.bottom-b.top,C=d.offset||ZO,O=this.view.textDirection==ee.LTR,_=b.width>i.right-i.left?O?i.left:i.right-b.width:O?Math.max(i.left,Math.min(p.left-(v?14:0)+C.x,i.right-w)):Math.min(Math.max(i.left,p.left-w+(v?14:0)-C.x),i.right-w),D=this.above[c];!f.strictSide&&(D?p.top-A-S-C.y<i.top:p.bottom+A+S+C.y>i.bottom)&&D==i.bottom-p.bottom>p.top-i.top&&(D=this.above[c]=!D);let R=(D?p.top-i.top:i.bottom-p.bottom)-S;if(R<A&&d.resize!==!1){if(R<this.view.defaultLineHeight){m.style.top=ya;continue}kx.set(d,A),m.style.height=(A=R)/o+"px"}else m.style.height&&(m.style.height="");let B=D?p.top-A-S-C.y:p.bottom+S+C.y,U=_+w;if(d.overlap!==!0)for(let Q of a)Q.left<U&&Q.right>_&&Q.top<B+A&&Q.bottom>B&&(B=D?Q.top-A-2-S:Q.bottom+S+2);if(this.position=="absolute"?(m.style.top=(B-n.parent.top)/o+"px",Tx(m,(_-n.parent.left)/l)):(m.style.top=B/o+"px",Tx(m,_/l)),v){let Q=p.left+(O?C.x:-C.x)-(_+14-7);v.style.left=Q/l+"px"}d.overlap!==!0&&a.push({left:_,top:B,right:U,bottom:B+A}),m.classList.toggle("cm-tooltip-above",D),m.classList.toggle("cm-tooltip-below",!D),d.positioned&&d.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=ya}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Tx(n,t){let e=parseInt(n.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(n.style.left=t+"px")}const IO=ht.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ZO={x:0,y:0},mh=dt.define({enables:[l0,IO]}),Gf=dt.define({combine:n=>n.reduce((t,e)=>t.concat(e),[])});class gh{static create(t){return new gh(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new q2(t,Gf,(e,i)=>this.createHostedView(e,i),e=>e.dom.remove())}createHostedView(t,e){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let i of this.manager.tooltipViews){let l=i[t];if(l!==void 0){if(e===void 0)e=l;else if(e!==l)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const WO=mh.compute([Gf],n=>{let t=n.facet(Gf);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var i;return(i=e.end)!==null&&i!==void 0?i:e.pos})),create:gh.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class FO{constructor(t,e,i,l,o){this.view=t,this.source=e,this.field=i,this.setHover=l,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,i=t.docView.nearest(e.target);if(!i)return;let l,o=1;if(i instanceof Wl)l=i.posAtStart;else{if(l=t.posAtCoords(e),l==null)return;let c=t.coordsAtPos(l);if(!c||e.y<c.top||e.y>c.bottom||e.x<c.left-t.defaultCharacterWidth||e.x>c.right+t.defaultCharacterWidth)return;let f=t.bidiSpans(t.state.doc.lineAt(l)).find(m=>m.from<=l&&m.to>=l),d=f&&f.dir==ee.RTL?-1:1;o=e.x<c.left?-d:d}let a=this.source(t,l,o);if(a!=null&&a.then){let c=this.pending={pos:l};a.then(f=>{this.pending==c&&(this.pending=null,f&&!(Array.isArray(f)&&!f.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(f)?f:[f])}))},f=>pn(t.state,f,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let t=this.view.plugin(l0),e=t?t.manager.tooltips.findIndex(i=>i.create==gh.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:l,tooltip:o}=this;if(l.length&&o&&!QO(o.dom,t)||this.pending){let{pos:a}=l[0]||this.pending,c=(i=(e=l[0])===null||e===void 0?void 0:e.end)!==null&&i!==void 0?i:a;(a==c?this.view.posAtCoords(this.lastMove)!=a:!JO(this.view,a,c,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:i}=this;i&&i.dom.contains(t.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=i=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Qc=4;function QO(n,t){let{left:e,right:i,top:l,bottom:o}=n.getBoundingClientRect(),a;if(a=n.querySelector(".cm-tooltip-arrow")){let c=a.getBoundingClientRect();l=Math.min(c.top,l),o=Math.max(c.bottom,o)}return t.clientX>=e-Qc&&t.clientX<=i+Qc&&t.clientY>=l-Qc&&t.clientY<=o+Qc}function JO(n,t,e,i,l,o){let a=n.scrollDOM.getBoundingClientRect(),c=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>l||Math.min(a.bottom,c)<l)return!1;let f=n.posAtCoords({x:i,y:l},!1);return f>=t&&f<=e}function t3(n,t={}){let e=Et.define(),i=Te.define({create(){return[]},update(l,o){if(l.length&&(t.hideOnChange&&(o.docChanged||o.selection)?l=[]:t.hideOn&&(l=l.filter(a=>!t.hideOn(o,a))),o.docChanged)){let a=[];for(let c of l){let f=o.changes.mapPos(c.pos,-1,sn.TrackDel);if(f!=null){let d=Object.assign(Object.create(null),c);d.pos=f,d.end!=null&&(d.end=o.changes.mapPos(d.end)),a.push(d)}}l=a}for(let a of o.effects)a.is(e)&&(l=a.value),a.is(e3)&&(l=[]);return l},provide:l=>Gf.from(l)});return{active:i,extension:[i,pe.define(l=>new FO(l,n,i,e,t.hoverTime||300)),WO]}}function Y2(n,t){let e=n.plugin(l0);if(!e)return null;let i=e.manager.tooltips.indexOf(t);return i<0?null:e.manager.tooltipViews[i]}const e3=Et.define(),Dx=dt.define({combine(n){let t,e;for(let i of n)t=t||i.topContainer,e=e||i.bottomContainer;return{topContainer:t,bottomContainer:e}}});function ja(n,t){let e=n.plugin(G2),i=e?e.specs.indexOf(t):-1;return i>-1?e.panels[i]:null}const G2=pe.fromClass(class{constructor(n){this.input=n.state.facet($a),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(n));let t=n.state.facet(Dx);this.top=new Jc(n,!0,t.topContainer),this.bottom=new Jc(n,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(n){let t=n.state.facet(Dx);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Jc(n.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Jc(n.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=n.state.facet($a);if(e!=this.input){let i=e.filter(f=>f),l=[],o=[],a=[],c=[];for(let f of i){let d=this.specs.indexOf(f),m;d<0?(m=f(n.view),c.push(m)):(m=this.panels[d],m.update&&m.update(n)),l.push(m),(m.top?o:a).push(m)}this.specs=i,this.panels=l,this.top.sync(o),this.bottom.sync(a);for(let f of c)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ht.scrollMargins.of(t=>{let e=t.plugin(n);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class Jc{constructor(t,e,i){this.view=t,this.top=e,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Ox(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Ox(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Ox(n){let t=n.nextSibling;return n.remove(),t}const $a=dt.define({enables:G2});class _i extends Ys{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}_i.prototype.elementClass="";_i.prototype.toDOM=void 0;_i.prototype.mapMode=sn.TrackBefore;_i.prototype.startSide=_i.prototype.endSide=-1;_i.prototype.point=!0;const kf=dt.define(),n3=dt.define(),i3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Vt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ha=dt.define();function P2(n){return[X2(),Ha.of({...i3,...n})]}const Rx=dt.define({combine:n=>n.some(t=>t)});function X2(n){return[l3]}const l3=pe.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Ha).map(t=>new _x(n,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!n.state.facet(Rx),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let t=this.prevViewport,e=n.view.viewport,i=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(i<(e.to-e.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Rx)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let t=this.dom.nextSibling;n&&this.dom.remove();let e=Vt.iter(this.view.state.facet(kf),this.view.viewport.from),i=[],l=this.gutters.map(o=>new s3(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let a=!0;for(let c of o.type)if(c.type==rn.Text&&a){dp(e,i,c.from);for(let f of l)f.line(this.view,c,i);a=!1}else if(c.widget)for(let f of l)f.widget(this.view,c)}else if(o.type==rn.Text){dp(e,i,o.from);for(let a of l)a.line(this.view,o,i)}else if(o.widget)for(let a of l)a.widget(this.view,o);for(let o of l)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(n){let t=n.startState.facet(Ha),e=n.state.facet(Ha),i=n.docChanged||n.heightChanged||n.viewportChanged||!Vt.eq(n.startState.facet(kf),n.state.facet(kf),n.view.viewport.from,n.view.viewport.to);if(t==e)for(let l of this.gutters)l.update(n)&&(i=!0);else{i=!0;let l=[];for(let o of e){let a=t.indexOf(o);a<0?l.push(new _x(this.view,o)):(this.gutters[a].update(n),l.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),l.indexOf(o)<0&&o.destroy();for(let o of l)this.dom.appendChild(o.dom);this.gutters=l}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>ht.scrollMargins.of(t=>{let e=t.plugin(n);return!e||e.gutters.length==0||!e.fixed?null:t.textDirection==ee.LTR?{left:e.dom.offsetWidth*t.scaleX}:{right:e.dom.offsetWidth*t.scaleX}})});function Nx(n){return Array.isArray(n)?n:[n]}function dp(n,t,e){for(;n.value&&n.from<=e;)n.from==e&&t.push(n.value),n.next()}class s3{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=Vt.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:l}=this,o=(e.top-this.height)/t.scaleY,a=e.height/t.scaleY;if(this.i==l.elements.length){let c=new j2(t,a,o,i);l.elements.push(c),l.dom.appendChild(c.dom)}else l.elements[this.i].update(t,a,o,i);this.height=e.bottom,this.i++}line(t,e,i){let l=[];dp(this.cursor,l,e.from),i.length&&(l=l.concat(i));let o=this.gutter.config.lineMarker(t,e,l);o&&l.unshift(o);let a=this.gutter;l.length==0&&!a.config.renderEmptyElements||this.addElement(t,e,l)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e),l=i?[i]:null;for(let o of t.state.facet(n3)){let a=o(t,e.widget,e);a&&(l||(l=[])).push(a)}l&&this.addElement(t,e,l)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class _x{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,l=>{let o=l.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let f=o.getBoundingClientRect();a=(f.top+f.bottom)/2}else a=l.clientY;let c=t.lineBlockAtHeight(a-t.documentTop);e.domEventHandlers[i](t,c,l)&&l.preventDefault()});this.markers=Nx(e.markers(t)),e.initialSpacer&&(this.spacer=new j2(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Nx(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let l=this.config.updateSpacer(this.spacer.markers[0],t);l!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[l])}let i=t.view.viewport;return!Vt.eq(this.markers,e,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class j2{constructor(t,e,i,l){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,l)}update(t,e,i,l){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),r3(this.markers,l)||this.setMarkers(t,l)}setMarkers(t,e){let i="cm-gutterElement",l=this.dom.firstChild;for(let o=0,a=0;;){let c=a,f=o<e.length?e[o++]:null,d=!1;if(f){let m=f.elementClass;m&&(i+=" "+m);for(let p=a;p<this.markers.length;p++)if(this.markers[p].compare(f)){c=p,d=!0;break}}else c=this.markers.length;for(;a<c;){let m=this.markers[a++];if(m.toDOM){m.destroy(l);let p=l.nextSibling;l.remove(),l=p}}if(!f)break;f.toDOM&&(d?l=l.nextSibling:this.dom.insertBefore(f.toDOM(t),l)),d&&a++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}}function r3(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].compare(t[e]))return!1;return!0}const o3=dt.define(),a3=dt.define(),Yr=dt.define({combine(n){return fi(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let l in e){let o=i[l],a=e[l];i[l]=o?(c,f,d)=>o(c,f,d)||a(c,f,d):a}return i}})}});class ng extends _i{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function ig(n,t){return n.state.facet(Yr).formatNumber(t,n.state)}const u3=Ha.compute([Yr],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(o3)},lineMarker(t,e,i){return i.some(l=>l.toDOM)?null:new ng(ig(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,i)=>{for(let l of t.state.facet(a3)){let o=l(t,e,i);if(o)return o}return null},lineMarkerChange:t=>t.startState.facet(Yr)!=t.state.facet(Yr),initialSpacer(t){return new ng(ig(t,Bx(t.state.doc.lines)))},updateSpacer(t,e){let i=ig(e.view,Bx(e.view.state.doc.lines));return i==t.number?t:new ng(i)},domEventHandlers:n.facet(Yr).domEventHandlers}));function c3(n={}){return[Yr.of(n),X2(),u3]}function Bx(n){let t=9;for(;t<n;)t=t*10+9;return t}const f3=new class extends _i{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},h3=kf.compute(["selection"],n=>{let t=[],e=-1;for(let i of n.selection.ranges){let l=n.doc.lineAt(i.head).from;l>e&&(e=l,t.push(f3.range(l)))}return Vt.of(t)});function d3(){return h3}const m3=1024;let g3=0;class lg{constructor(t,e){this.from=t,this.to=e}}class Lt{constructor(t={}){this.id=g3++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=vn.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}}Lt.closedBy=new Lt({deserialize:n=>n.split(" ")});Lt.openedBy=new Lt({deserialize:n=>n.split(" ")});Lt.group=new Lt({deserialize:n=>n.split(" ")});Lt.isolate=new Lt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Lt.contextHash=new Lt({perNode:!0});Lt.lookAhead=new Lt({perNode:!0});Lt.mounted=new Lt({perNode:!0});class Pf{constructor(t,e,i){this.tree=t,this.overlay=e,this.parser=i}static get(t){return t&&t.props&&t.props[Lt.mounted.id]}}const p3=Object.create(null);class vn{constructor(t,e,i,l=0){this.name=t,this.props=e,this.id=i,this.flags=l}static define(t){let e=t.props&&t.props.length?Object.create(null):p3,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),l=new vn(t.name||"",e,t.id,i);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(l)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[o[0].id]=o[1]}}return l}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(Lt.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let l of i.split(" "))e[l]=t[i];return i=>{for(let l=i.prop(Lt.group),o=-1;o<(l?l.length:0);o++){let a=e[o<0?i.name:l[o]];if(a)return a}}}}vn.none=new vn("",Object.create(null),0,8);class s0{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let l=null;for(let o of t){let a=o(i);a&&(l||(l=Object.assign({},i.props)),l[a[0].id]=a[1])}e.push(l?new vn(i.name,l,i.id,i.flags):i)}return new s0(e)}}const tf=new WeakMap,zx=new WeakMap;var Pe;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Pe||(Pe={}));class oe{constructor(t,e,i,l,o){if(this.type=t,this.children=e,this.positions=i,this.length=l,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,c]of o)this.props[typeof a=="number"?a:a.id]=c}}toString(){let t=Pf.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let l=i.toString();l&&(e&&(e+=","),e+=l)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new gp(this.topNode,t)}cursorAt(t,e=0,i=0){let l=tf.get(this)||this.topNode,o=new gp(l);return o.moveTo(t,e),tf.set(this,o._tree),o}get topNode(){return new Fn(this,0,0,null)}resolve(t,e=0){let i=Ka(tf.get(this)||this.topNode,t,e,!1);return tf.set(this,i),i}resolveInner(t,e=0){let i=Ka(zx.get(this)||this.topNode,t,e,!0);return zx.set(this,i),i}resolveStack(t,e=0){return v3(this,t,e)}iterate(t){let{enter:e,leave:i,from:l=0,to:o=this.length}=t,a=t.mode||0,c=(a&Pe.IncludeAnonymous)>0;for(let f=this.cursor(a|Pe.IncludeAnonymous);;){let d=!1;if(f.from<=o&&f.to>=l&&(!c&&f.type.isAnonymous||e(f)!==!1)){if(f.firstChild())continue;d=!0}for(;d&&i&&(c||!f.type.isAnonymous)&&i(f),!f.nextSibling();){if(!f.parent())return;d=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:a0(vn.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,l)=>new oe(this.type,e,i,l,this.propValues),t.makeTree||((e,i,l)=>new oe(vn.none,e,i,l)))}static build(t){return x3(t)}}oe.empty=new oe(vn.none,[],[],0);class r0{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new r0(this.buffer,this.index)}}class ls{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return vn.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],l=this.set.types[e],o=l.name;if(/\W/.test(o)&&!l.isError&&(o=JSON.stringify(o)),t+=4,i==t)return o;let a=[];for(;t<i;)a.push(this.childString(t)),t=this.buffer[t+3];return o+"("+a.join(",")+")"}findChild(t,e,i,l,o){let{buffer:a}=this,c=-1;for(let f=t;f!=e&&!($2(o,l,a[f+1],a[f+2])&&(c=f,i>0));f=a[f+3]);return c}slice(t,e,i){let l=this.buffer,o=new Uint16Array(e-t),a=0;for(let c=t,f=0;c<e;){o[f++]=l[c++],o[f++]=l[c++]-i;let d=o[f++]=l[c++]-i;o[f++]=l[c++]-t,a=Math.max(a,d)}return new ls(o,a,this.set)}}function $2(n,t,e,i){switch(n){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function Ka(n,t,e,i){for(var l;n.from==n.to||(e<1?n.from>=t:n.from>t)||(e>-1?n.to<=t:n.to<t);){let a=!i&&n instanceof Fn&&n.index<0?null:n.parent;if(!a)return n;n=a}let o=i?0:Pe.IgnoreOverlays;if(i)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof Fn&&a.index<0&&((l=c.enter(t,e,o))===null||l===void 0?void 0:l.from)!=a.from&&(n=c);for(;;){let a=n.enter(t,e,o);if(!a)return n;n=a}}class K2{cursor(t=0){return new gp(this,t)}getChild(t,e=null,i=null){let l=Lx(this,t,e,i);return l.length?l[0]:null}getChildren(t,e=null,i=null){return Lx(this,t,e,i)}resolve(t,e=0){return Ka(this,t,e,!1)}resolveInner(t,e=0){return Ka(this,t,e,!0)}matchContext(t){return mp(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let l=e.lastChild;if(!l||l.to!=e.to)break;l.type.isError&&l.from==l.to?(i=e,e=l.prevSibling):e=l}return i}get node(){return this}get next(){return this.parent}}class Fn extends K2{constructor(t,e,i,l){super(),this._tree=t,this.from=e,this.index=i,this._parent=l}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,l,o=0){for(let a=this;;){for(let{children:c,positions:f}=a._tree,d=e>0?c.length:-1;t!=d;t+=e){let m=c[t],p=f[t]+a.from;if($2(l,i,p,p+m.length)){if(m instanceof ls){if(o&Pe.ExcludeBuffers)continue;let b=m.findChild(0,m.buffer.length,e,i-p,l);if(b>-1)return new Ql(new y3(a,m,t,p),null,b)}else if(o&Pe.IncludeAnonymous||!m.type.isAnonymous||o0(m)){let b;if(!(o&Pe.IgnoreMounts)&&(b=Pf.get(m))&&!b.overlay)return new Fn(b.tree,p,t,a);let v=new Fn(m,p,t,a);return o&Pe.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(e<0?m.children.length-1:0,e,i,l)}}}if(o&Pe.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?t=a.index+e:t=e<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,i=0){let l;if(!(i&Pe.IgnoreOverlays)&&(l=Pf.get(this._tree))&&l.overlay){let o=t-this.from;for(let{from:a,to:c}of l.overlay)if((e>0?a<=o:a<o)&&(e<0?c>=o:c>o))return new Fn(l.tree,l.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Lx(n,t,e,i){let l=n.cursor(),o=[];if(!l.firstChild())return o;if(e!=null){for(let a=!1;!a;)if(a=l.type.is(e),!l.nextSibling())return o}for(;;){if(i!=null&&l.type.is(i))return o;if(l.type.is(t)&&o.push(l.node),!l.nextSibling())return i==null?o:[]}}function mp(n,t,e=t.length-1){for(let i=n;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}class y3{constructor(t,e,i,l){this.parent=t,this.buffer=e,this.index=i,this.start=l}}class Ql extends K2{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:l}=this.context,o=l.findChild(this.index+4,l.buffer[this.index+3],t,e-this.context.start,i);return o<0?null:new Ql(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,i=0){if(i&Pe.ExcludeBuffers)return null;let{buffer:l}=this.context,o=l.findChild(this.index+4,l.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return o<0?null:new Ql(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Ql(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Ql(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,l=this.index+4,o=i.buffer[this.index+3];if(o>l){let a=i.buffer[this.index+1];t.push(i.slice(l,o,a)),e.push(0)}return new oe(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function I2(n){if(!n.length)return null;let t=0,e=n[0];for(let o=1;o<n.length;o++){let a=n[o];(a.from>e.from||a.to<e.to)&&(e=a,t=o)}let i=e instanceof Fn&&e.index<0?null:e.parent,l=n.slice();return i?l[t]=i:l.splice(t,1),new b3(l,e)}class b3{constructor(t,e){this.heads=t,this.node=e}get next(){return I2(this.heads)}}function v3(n,t,e){let i=n.resolveInner(t,e),l=null;for(let o=i instanceof Fn?i:i.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(l||(l=[i])).push(a.resolve(t,e)),o=a}else{let a=Pf.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=t&&a.overlay[a.overlay.length-1].to>=t){let c=new Fn(a.tree,a.overlay[0].from+o.from,-1,o);(l||(l=[i])).push(Ka(c,t,e,!1))}}return l?I2(l):i}class gp{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Fn)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:l}=this.buffer;return this.type=e||l.set.types[l.buffer[t]],this.from=i+l.buffer[t+1],this.to=i+l.buffer[t+2],!0}yield(t){return t?t instanceof Fn?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:l}=this.buffer,o=l.findChild(this.index+4,l.buffer[this.index+3],t,e-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&Pe.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Pe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let l=i<0?0:this.stack[i]+4;if(this.index!=l)return this.yieldBuf(e.findChild(l,this.index,-1,0,4))}else{let l=e.buffer[this.index+3];if(l<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(l)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:l}=this;if(l){if(t>0){if(this.index<l.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(l.buffer.buffer[o+3]<this.index)return!1;({index:e,parent:i}=l)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let o=e+t,a=t<0?-1:i._tree.children.length;o!=a;o+=t){let c=i._tree.children[o];if(this.mode&Pe.IncludeAnonymous||c instanceof ls||!c.type.isAnonymous||o0(c))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let l=this.index,o=this.stack.length;o>=0;){for(let a=t;a;a=a._parent)if(a.index==l){if(l==this.index)return a;e=a,i=o+1;break t}l=this.stack[--o]}for(let l=i;l<this.stack.length;l++)e=new Ql(this.buffer,e,this.stack[l]);return this.bufferNode=new Ql(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let l=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(l=!0)}for(;;){if(l&&e&&e(this),l=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,l=!0}}}matchContext(t){if(!this.buffer)return mp(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let l=t.length-1,o=this.stack.length-1;l>=0;o--){if(o<0)return mp(this._tree,t,l);let a=i[e.buffer[this.stack[o]]];if(!a.isAnonymous){if(t[l]&&t[l]!=a.name)return!1;l--}}return!0}}function o0(n){return n.children.some(t=>t instanceof ls||!t.type.isAnonymous||o0(t))}function x3(n){var t;let{buffer:e,nodeSet:i,maxBufferLength:l=m3,reused:o=[],minRepeatType:a=i.types.length}=n,c=Array.isArray(e)?new r0(e,e.length):e,f=i.types,d=0,m=0;function p(R,B,U,Q,P,et){let{id:J,start:F,end:nt,size:T}=c,q=m,k=d;for(;T<0;)if(c.next(),T==-1){let L=o[J];U.push(L),Q.push(F-R);return}else if(T==-3){d=J;return}else if(T==-4){m=J;return}else throw new RangeError(`Unrecognized record size: ${T}`);let z=f[J],j,H,E=F-R;if(nt-F<=l&&(H=A(c.pos-B,P))){let L=new Uint16Array(H.size-H.skip),G=c.pos-H.size,W=L.length;for(;c.pos>G;)W=C(H.start,L,W);j=new ls(L,nt-H.start,i),E=H.start-R}else{let L=c.pos-T;c.next();let G=[],W=[],it=J>=a?J:-1,ut=0,ct=nt;for(;c.pos>L;)it>=0&&c.id==it&&c.size>=0?(c.end<=ct-l&&(S(G,W,F,ut,c.end,ct,it,q,k),ut=G.length,ct=c.end),c.next()):et>2500?b(F,L,G,W):p(F,L,G,W,it,et+1);if(it>=0&&ut>0&&ut<G.length&&S(G,W,F,ut,F,ct,it,q,k),G.reverse(),W.reverse(),it>-1&&ut>0){let St=v(z,k);j=a0(z,G,W,0,G.length,0,nt-F,St,St)}else j=w(z,G,W,nt-F,q-nt,k)}U.push(j),Q.push(E)}function b(R,B,U,Q){let P=[],et=0,J=-1;for(;c.pos>B;){let{id:F,start:nt,end:T,size:q}=c;if(q>4)c.next();else{if(J>-1&&nt<J)break;J<0&&(J=T-l),P.push(F,nt,T),et++,c.next()}}if(et){let F=new Uint16Array(et*4),nt=P[P.length-2];for(let T=P.length-3,q=0;T>=0;T-=3)F[q++]=P[T],F[q++]=P[T+1]-nt,F[q++]=P[T+2]-nt,F[q++]=q;U.push(new ls(F,P[2]-nt,i)),Q.push(nt-R)}}function v(R,B){return(U,Q,P)=>{let et=0,J=U.length-1,F,nt;if(J>=0&&(F=U[J])instanceof oe){if(!J&&F.type==R&&F.length==P)return F;(nt=F.prop(Lt.lookAhead))&&(et=Q[J]+F.length+nt)}return w(R,U,Q,P,et,B)}}function S(R,B,U,Q,P,et,J,F,nt){let T=[],q=[];for(;R.length>Q;)T.push(R.pop()),q.push(B.pop()+U-P);R.push(w(i.types[J],T,q,et-P,F-et,nt)),B.push(P-U)}function w(R,B,U,Q,P,et,J){if(et){let F=[Lt.contextHash,et];J=J?[F].concat(J):[F]}if(P>25){let F=[Lt.lookAhead,P];J=J?[F].concat(J):[F]}return new oe(R,B,U,Q,J)}function A(R,B){let U=c.fork(),Q=0,P=0,et=0,J=U.end-l,F={size:0,start:0,skip:0};t:for(let nt=U.pos-R;U.pos>nt;){let T=U.size;if(U.id==B&&T>=0){F.size=Q,F.start=P,F.skip=et,et+=4,Q+=4,U.next();continue}let q=U.pos-T;if(T<0||q<nt||U.start<J)break;let k=U.id>=a?4:0,z=U.start;for(U.next();U.pos>q;){if(U.size<0)if(U.size==-3)k+=4;else break t;else U.id>=a&&(k+=4);U.next()}P=z,Q+=T,et+=k}return(B<0||Q==R)&&(F.size=Q,F.start=P,F.skip=et),F.size>4?F:void 0}function C(R,B,U){let{id:Q,start:P,end:et,size:J}=c;if(c.next(),J>=0&&Q<a){let F=U;if(J>4){let nt=c.pos-(J-4);for(;c.pos>nt;)U=C(R,B,U)}B[--U]=F,B[--U]=et-R,B[--U]=P-R,B[--U]=Q}else J==-3?d=Q:J==-4&&(m=Q);return U}let O=[],_=[];for(;c.pos>0;)p(n.start||0,n.bufferStart||0,O,_,-1,0);let D=(t=n.length)!==null&&t!==void 0?t:O.length?_[0]+O[0].length:0;return new oe(f[n.topID],O.reverse(),_.reverse(),D)}const Hx=new WeakMap;function Tf(n,t){if(!n.isAnonymous||t instanceof ls||t.type!=n)return 1;let e=Hx.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=n||!(i instanceof oe)){e=1;break}e+=Tf(n,i)}Hx.set(t,e)}return e}function a0(n,t,e,i,l,o,a,c,f){let d=0;for(let S=i;S<l;S++)d+=Tf(n,t[S]);let m=Math.ceil(d*1.5/8),p=[],b=[];function v(S,w,A,C,O){for(let _=A;_<C;){let D=_,R=w[_],B=Tf(n,S[_]);for(_++;_<C;_++){let U=Tf(n,S[_]);if(B+U>=m)break;B+=U}if(_==D+1){if(B>m){let U=S[D];v(U.children,U.positions,0,U.children.length,w[D]+O);continue}p.push(S[D])}else{let U=w[_-1]+S[_-1].length-R;p.push(a0(n,S,w,D,_,R,U,null,f))}b.push(R+O-o)}}return v(t,e,i,l,0),(c||f)(p,b,a)}class Hs{constructor(t,e,i,l,o=!1,a=!1){this.from=t,this.to=e,this.tree=i,this.offset=l,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let l=[new Hs(0,t.length,t,0,!1,i)];for(let o of e)o.to>t.length&&l.push(o);return l}static applyChanges(t,e,i=128){if(!e.length)return t;let l=[],o=1,a=t.length?t[0]:null;for(let c=0,f=0,d=0;;c++){let m=c<e.length?e[c]:null,p=m?m.fromA:1e9;if(p-f>=i)for(;a&&a.from<p;){let b=a;if(f>=b.from||p<=b.to||d){let v=Math.max(b.from,f)-d,S=Math.min(b.to,p)-d;b=v>=S?null:new Hs(v,S,b.tree,b.offset+d,c>0,!!m)}if(b&&l.push(b),a.to>p)break;a=o<t.length?t[o++]:null}if(!m)break;f=m.toA,d=m.toA-m.toB}return l}}class Z2{startParse(t,e,i){return typeof t=="string"&&(t=new S3(t)),i=i?i.length?i.map(l=>new lg(l.from,l.to)):[new lg(0,0)]:[new lg(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let l=this.startParse(t,e,i);for(;;){let o=l.advance();if(o)return o}}}class S3{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new Lt({perNode:!0});let w3=0;class jn{constructor(t,e,i,l){this.name=t,this.set=e,this.base=i,this.modified=l,this.id=w3++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof jn&&(e=t),e!=null&&e.base)throw new Error("Can not derive from a modified tag");let l=new jn(i,[],null,[]);if(l.set.push(l),e)for(let o of e.set)l.set.push(o);return l}static defineModifier(t){let e=new Xf(t);return i=>i.modified.indexOf(e)>-1?i:Xf.get(i.base||i,i.modified.concat(e).sort((l,o)=>l.id-o.id))}}let A3=0;class Xf{constructor(t){this.name=t,this.instances=[],this.id=A3++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(c=>c.base==t&&M3(e,c.modified));if(i)return i;let l=[],o=new jn(t.name,l,t,e);for(let c of e)c.instances.push(o);let a=C3(e);for(let c of t.set)if(!c.modified.length)for(let f of a)l.push(Xf.get(c,f));return o}}function M3(n,t){return n.length==t.length&&n.every((e,i)=>e==t[i])}function C3(n){let t=[[]];for(let e=0;e<n.length;e++)for(let i=0,l=t.length;i<l;i++)t.push(t[i].concat(n[e]));return t.sort((e,i)=>i.length-e.length)}function E3(n){let t=Object.create(null);for(let e in n){let i=n[e];Array.isArray(i)||(i=[i]);for(let l of e.split(" "))if(l){let o=[],a=2,c=l;for(let p=0;;){if(c=="..."&&p>0&&p+3==l.length){a=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!b)throw new RangeError("Invalid path: "+l);if(o.push(b[0]=="*"?"":b[0][0]=='"'?JSON.parse(b[0]):b[0]),p+=b[0].length,p==l.length)break;let v=l[p++];if(p==l.length&&v=="!"){a=0;break}if(v!="/")throw new RangeError("Invalid path: "+l);c=l.slice(p)}let f=o.length-1,d=o[f];if(!d)throw new RangeError("Invalid path: "+l);let m=new jf(i,a,f>0?o.slice(0,f):null);t[d]=m.sort(t[d])}}return W2.add(t)}const W2=new Lt;class jf{constructor(t,e,i,l){this.tags=t,this.mode=e,this.context=i,this.next=l}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}jf.empty=new jf([],2,null);function F2(n,t){let e=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))e[o.tag.id]=o.class;else for(let a of o.tag)e[a.id]=o.class;let{scope:i,all:l=null}=t||{};return{style:o=>{let a=l;for(let c of o)for(let f of c.set){let d=e[f.id];if(d){a=a?a+" "+d:d;break}}return a},scope:i}}function k3(n,t){let e=null;for(let i of n){let l=i.style(t);l&&(e=e?e+" "+l:l)}return e}function T3(n,t,e,i=0,l=n.length){let o=new D3(i,Array.isArray(t)?t:[t],e);o.highlightRange(n.cursor(),i,l,"",o.highlighters),o.flush(l)}class D3{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,l,o){let{type:a,from:c,to:f}=t;if(c>=i||f<=e)return;a.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(a)));let d=l,m=O3(t)||jf.empty,p=k3(o,m.tags);if(p&&(d&&(d+=" "),d+=p,m.mode==1&&(l+=(l?" ":"")+p)),this.startSpan(Math.max(e,c),d),m.opaque)return;let b=t.tree&&t.tree.prop(Lt.mounted);if(b&&b.overlay){let v=t.node.enter(b.overlay[0].from+c,1),S=this.highlighters.filter(A=>!A.scope||A.scope(b.tree.type)),w=t.firstChild();for(let A=0,C=c;;A++){let O=A<b.overlay.length?b.overlay[A]:null,_=O?O.from+c:f,D=Math.max(e,C),R=Math.min(i,_);if(D<R&&w)for(;t.from<R&&(this.highlightRange(t,D,R,l,o),this.startSpan(Math.min(R,t.to),d),!(t.to>=_||!t.nextSibling())););if(!O||_>i)break;C=O.to+c,C>e&&(this.highlightRange(v.cursor(),Math.max(e,O.from+c),Math.min(i,C),"",S),this.startSpan(Math.min(i,C),d))}w&&t.parent()}else if(t.firstChild()){b&&(l="");do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,l,o),this.startSpan(Math.min(i,t.to),d)}while(t.nextSibling());t.parent()}}}function O3(n){let t=n.type.prop(W2);for(;t&&t.context&&!n.matchContext(t.context);)t=t.next;return t||null}const ft=jn.define,ef=ft(),Pl=ft(),Vx=ft(Pl),Ux=ft(Pl),Xl=ft(),nf=ft(Xl),sg=ft(Xl),Mi=ft(),Ds=ft(Mi),wi=ft(),Ai=ft(),pp=ft(),ba=ft(pp),lf=ft(),st={comment:ef,lineComment:ft(ef),blockComment:ft(ef),docComment:ft(ef),name:Pl,variableName:ft(Pl),typeName:Vx,tagName:ft(Vx),propertyName:Ux,attributeName:ft(Ux),className:ft(Pl),labelName:ft(Pl),namespace:ft(Pl),macroName:ft(Pl),literal:Xl,string:nf,docString:ft(nf),character:ft(nf),attributeValue:ft(nf),number:sg,integer:ft(sg),float:ft(sg),bool:ft(Xl),regexp:ft(Xl),escape:ft(Xl),color:ft(Xl),url:ft(Xl),keyword:wi,self:ft(wi),null:ft(wi),atom:ft(wi),unit:ft(wi),modifier:ft(wi),operatorKeyword:ft(wi),controlKeyword:ft(wi),definitionKeyword:ft(wi),moduleKeyword:ft(wi),operator:Ai,derefOperator:ft(Ai),arithmeticOperator:ft(Ai),logicOperator:ft(Ai),bitwiseOperator:ft(Ai),compareOperator:ft(Ai),updateOperator:ft(Ai),definitionOperator:ft(Ai),typeOperator:ft(Ai),controlOperator:ft(Ai),punctuation:pp,separator:ft(pp),bracket:ba,angleBracket:ft(ba),squareBracket:ft(ba),paren:ft(ba),brace:ft(ba),content:Mi,heading:Ds,heading1:ft(Ds),heading2:ft(Ds),heading3:ft(Ds),heading4:ft(Ds),heading5:ft(Ds),heading6:ft(Ds),contentSeparator:ft(Mi),list:ft(Mi),quote:ft(Mi),emphasis:ft(Mi),strong:ft(Mi),link:ft(Mi),monospace:ft(Mi),strikethrough:ft(Mi),inserted:ft(),deleted:ft(),changed:ft(),invalid:ft(),meta:lf,documentMeta:ft(lf),annotation:ft(lf),processingInstruction:ft(lf),definition:jn.defineModifier("definition"),constant:jn.defineModifier("constant"),function:jn.defineModifier("function"),standard:jn.defineModifier("standard"),local:jn.defineModifier("local"),special:jn.defineModifier("special")};for(let n in st){let t=st[n];t instanceof jn&&(t.name=n)}F2([{tag:st.link,class:"tok-link"},{tag:st.heading,class:"tok-heading"},{tag:st.emphasis,class:"tok-emphasis"},{tag:st.strong,class:"tok-strong"},{tag:st.keyword,class:"tok-keyword"},{tag:st.atom,class:"tok-atom"},{tag:st.bool,class:"tok-bool"},{tag:st.url,class:"tok-url"},{tag:st.labelName,class:"tok-labelName"},{tag:st.inserted,class:"tok-inserted"},{tag:st.deleted,class:"tok-deleted"},{tag:st.literal,class:"tok-literal"},{tag:st.string,class:"tok-string"},{tag:st.number,class:"tok-number"},{tag:[st.regexp,st.escape,st.special(st.string)],class:"tok-string2"},{tag:st.variableName,class:"tok-variableName"},{tag:st.local(st.variableName),class:"tok-variableName tok-local"},{tag:st.definition(st.variableName),class:"tok-variableName tok-definition"},{tag:st.special(st.variableName),class:"tok-variableName2"},{tag:st.definition(st.propertyName),class:"tok-propertyName tok-definition"},{tag:st.typeName,class:"tok-typeName"},{tag:st.namespace,class:"tok-namespace"},{tag:st.className,class:"tok-className"},{tag:st.macroName,class:"tok-macroName"},{tag:st.propertyName,class:"tok-propertyName"},{tag:st.operator,class:"tok-operator"},{tag:st.comment,class:"tok-comment"},{tag:st.meta,class:"tok-meta"},{tag:st.invalid,class:"tok-invalid"},{tag:st.punctuation,class:"tok-punctuation"}]);var rg;const Gr=new Lt;function R3(n){return dt.define({combine:n?t=>t.concat(n):void 0})}const N3=new Lt;class oi{constructor(t,e,i=[],l=""){this.data=t,this.name=l,Ht.prototype.hasOwnProperty("tree")||Object.defineProperty(Ht.prototype,"tree",{get(){return Qe(this)}}),this.parser=e,this.extension=[ss.of(this),Ht.languageData.of((o,a,c)=>{let f=qx(o,a,c),d=f.type.prop(Gr);if(!d)return[];let m=o.facet(d),p=f.type.prop(N3);if(p){let b=f.resolve(a-f.from,c);for(let v of p)if(v.test(b,o)){let S=o.facet(v.facet);return v.type=="replace"?S:S.concat(m)}}return m})].concat(i)}isActiveAt(t,e,i=-1){return qx(t,e,i).type.prop(Gr)==this.data}findRegions(t){let e=t.facet(ss);if((e==null?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],l=(o,a)=>{if(o.prop(Gr)==this.data){i.push({from:a,to:a+o.length});return}let c=o.prop(Lt.mounted);if(c){if(c.tree.prop(Gr)==this.data){if(c.overlay)for(let f of c.overlay)i.push({from:f.from+a,to:f.to+a});else i.push({from:a,to:a+o.length});return}else if(c.overlay){let f=i.length;if(l(c.tree,c.overlay[0].from+a),i.length>f)return}}for(let f=0;f<o.children.length;f++){let d=o.children[f];d instanceof oe&&l(d,o.positions[f]+a)}};return l(Qe(t),0),i}get allowsNesting(){return!0}}oi.setState=Et.define();function qx(n,t,e){let i=n.facet(ss),l=Qe(n).topNode;if(!i||i.allowsNesting)for(let o=l;o;o=o.enter(t,e,Pe.ExcludeBuffers))o.type.isTop&&(l=o);return l}function Qe(n){let t=n.field(oi.state,!1);return t?t.tree:oe.empty}class _3{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}}let va=null;class lo{constructor(t,e,i=[],l,o,a,c,f){this.parser=t,this.state=e,this.fragments=i,this.tree=l,this.treeLen=o,this.viewport=a,this.skipped=c,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new lo(t,e,[],oe.empty,0,i,[],null)}startParse(){return this.parser.startParse(new _3(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=oe.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let l=Date.now()+t;t=()=>Date.now()>l}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let l=this.parse.advance();if(l)if(this.fragments=this.withoutTempSkipped(Hs.addTree(l,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=l,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Hs.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=va;va=this;try{return t()}finally{va=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Yx(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:l,treeLen:o,viewport:a,skipped:c}=this;if(this.takeTree(),!t.empty){let f=[];if(t.iterChangedRanges((d,m,p,b)=>f.push({fromA:d,toA:m,fromB:p,toB:b})),i=Hs.applyChanges(i,f),l=oe.empty,o=0,a={from:t.mapPos(a.from,-1),to:t.mapPos(a.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let m=t.mapPos(d.from,1),p=t.mapPos(d.to,-1);m<p&&c.push({from:m,to:p})}}}return new lo(this.parser,e,i,l,o,a,c,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:l,to:o}=this.skipped[i];l<t.to&&o>t.from&&(this.fragments=Yx(this.fragments,l,o),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Z2{createParse(e,i,l){let o=l[0].from,a=l[l.length-1].to;return{parsedPos:o,advance(){let f=va;if(f){for(let d of l)f.tempSkipped.push(d);t&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,t]):t)}return this.parsedPos=a,new oe(vn.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return va}}function Yx(n,t,e){return Hs.applyChanges(n,[{fromA:t,toA:e,fromB:t,toB:e}])}class so{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new so(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=lo.create(t.facet(ss).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new so(i)}}oi.state=Te.define({create:so.init,update(n,t){for(let e of t.effects)if(e.is(oi.setState))return e.value;return t.startState.facet(ss)!=t.state.facet(ss)?so.init(t.state):n.apply(t)}});let Q2=n=>{let t=setTimeout(()=>n(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(Q2=n=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(n,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const og=typeof navigator<"u"&&(!((rg=navigator.scheduling)===null||rg===void 0)&&rg.isInputPending)?()=>navigator.scheduling.isInputPending():null,B3=pe.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(oi.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(oi.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=Q2(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:l}}=this.view,o=i.field(oi.state);if(o.tree==o.context.tree&&o.context.isDone(l+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,t&&!og?Math.max(25,t.timeRemaining()-5):1e9),c=o.context.treeLen<l&&i.doc.length>l+1e3,f=o.context.work(()=>og&&og()||Date.now()>a,l+(c?0:1e5));this.chunkBudget-=Date.now()-e,(f||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:oi.setState.of(new so(o.context))})),this.chunkBudget>0&&!(f&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>pn(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ss=dt.define({combine(n){return n.length?n[0]:null},enables:n=>[oi.state,B3,ht.contentAttributes.compute([n],t=>{let e=t.facet(n);return e&&e.name?{"data-language":e.name}:{}})]}),z3=dt.define(),ph=dt.define({combine:n=>{if(!n.length)return"  ";let t=n[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return t}});function js(n){let t=n.facet(ph);return t.charCodeAt(0)==9?n.tabSize*t.length:t.length}function Ia(n,t){let e="",i=n.tabSize,l=n.facet(ph)[0];if(l=="	"){for(;t>=i;)e+="	",t-=i;l=" "}for(let o=0;o<t;o++)e+=l;return e}function u0(n,t){n instanceof Ht&&(n=new yh(n));for(let i of n.state.facet(z3)){let l=i(n,t);if(l!==void 0)return l}let e=Qe(n.state);return e.length>=t?L3(n,e,t):null}class yh{constructor(t,e={}){this.state=t,this.options=e,this.unit=js(t)}lineAt(t,e=1){let i=this.state.doc.lineAt(t),{simulateBreak:l,simulateDoubleBreak:o}=this.options;return l!=null&&l>=i.from&&l<=i.to?o&&l==t?{text:"",from:t}:(e<0?l<t:l<=t)?{text:i.text.slice(l-i.from),from:l}:{text:i.text.slice(0,l-i.from),from:i.from}:i}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:l}=this.lineAt(t,e);return i.slice(t-l,Math.min(i.length,t+100-l))}column(t,e=1){let{text:i,from:l}=this.lineAt(t,e),o=this.countColumn(i,t-l),a=this.options.overrideIndentation?this.options.overrideIndentation(l):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o}countColumn(t,e=t.length){return ho(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:i,from:l}=this.lineAt(t,e),o=this.options.overrideIndentation;if(o){let a=o(l);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const J2=new Lt;function L3(n,t,e){let i=t.resolveStack(e),l=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(l!=i.node){let o=[];for(let a=l;a&&!(a.from<i.node.from||a.to>i.node.to||a.from==i.node.from&&a.type==i.node.type);a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)i={node:o[a],next:i}}return tA(i,n,e)}function tA(n,t,e){for(let i=n;i;i=i.next){let l=V3(i.node);if(l)return l(c0.create(t,e,i))}return 0}function H3(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function V3(n){let t=n.type.prop(J2);if(t)return t;let e=n.firstChild,i;if(e&&(i=e.type.prop(Lt.closedBy))){let l=n.lastChild,o=l&&i.indexOf(l.name)>-1;return a=>G3(a,!0,1,void 0,o&&!H3(a)?l.from:void 0)}return n.parent==null?U3:null}function U3(){return 0}class c0 extends yh{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.context=i}get node(){return this.context.node}static create(t,e,i){return new c0(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(q3(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){return tA(this.context.next,this.base,this.pos)}}function q3(n,t){for(let e=t;e;e=e.parent)if(n==e)return!0;return!1}function Y3(n){let t=n.node,e=t.childAfter(t.from),i=t.lastChild;if(!e)return null;let l=n.options.simulateBreak,o=n.state.doc.lineAt(e.from),a=l==null||l<=o.from?o.to:Math.min(o.to,l);for(let c=e.to;;){let f=t.childAfter(c);if(!f||f==i)return null;if(!f.type.isSkipped){if(f.from>=a)return null;let d=/^ */.exec(o.text.slice(e.to-o.from))[0].length;return{from:e.from,to:e.to+d}}c=f.to}}function G3(n,t,e,i,l){let o=n.textAfter,a=o.match(/^\s*/)[0].length,c=i&&o.slice(a,a+i.length)==i||l==n.pos+a,f=Y3(n);return f?c?n.column(f.from):n.column(f.to):n.baseIndent+(c?0:n.unit*e)}const P3=200;function X3(){return Ht.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let t=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!t.length)return n;let e=n.newDoc,{head:i}=n.newSelection.main,l=e.lineAt(i);if(i>l.from+P3)return n;let o=e.sliceString(l.from,i);if(!t.some(d=>d.test(o)))return n;let{state:a}=n,c=-1,f=[];for(let{head:d}of a.selection.ranges){let m=a.doc.lineAt(d);if(m.from==c)continue;c=m.from;let p=u0(a,m.from);if(p==null)continue;let b=/^\s*/.exec(m.text)[0],v=Ia(a,p);b!=v&&f.push({from:m.from,to:m.from+b.length,insert:v})}return f.length?[n,{changes:f,sequential:!0}]:n})}const j3=dt.define(),$3=new Lt;function K3(n,t,e){let i=Qe(n);if(i.length<e)return null;let l=i.resolveStack(e,1),o=null;for(let a=l;a;a=a.next){let c=a.node;if(c.to<=e||c.from>e)continue;if(o&&c.from<t)break;let f=c.type.prop($3);if(f&&(c.to<i.length-50||i.length==n.doc.length||!I3(c))){let d=f(c,n);d&&d.from<=e&&d.from>=t&&d.to>e&&(o=d)}}return o}function I3(n){let t=n.lastChild;return t&&t.to==n.to&&t.type.isError}function $f(n,t,e){for(let i of n.facet(j3)){let l=i(n,t,e);if(l)return l}return K3(n,t,e)}function eA(n,t){let e=t.mapPos(n.from,1),i=t.mapPos(n.to,-1);return e>=i?void 0:{from:e,to:i}}const bh=Et.define({map:eA}),gu=Et.define({map:eA});function nA(n){let t=[];for(let{head:e}of n.state.selection.ranges)t.some(i=>i.from<=e&&i.to>=e)||t.push(n.lineBlockAt(e));return t}const $s=Te.define({create(){return xt.none},update(n,t){n=n.map(t.changes);for(let e of t.effects)if(e.is(bh)&&!Z3(n,e.value.from,e.value.to)){let{preparePlaceholder:i}=t.state.facet(sA),l=i?xt.replace({widget:new nR(i(t.state,e.value))}):Gx;n=n.update({add:[l.range(e.value.from,e.value.to)]})}else e.is(gu)&&(n=n.update({filter:(i,l)=>e.value.from!=i||e.value.to!=l,filterFrom:e.value.from,filterTo:e.value.to}));if(t.selection){let e=!1,{head:i}=t.selection.main;n.between(i,i,(l,o)=>{l<i&&o>i&&(e=!0)}),e&&(n=n.update({filterFrom:i,filterTo:i,filter:(l,o)=>o<=i||l>=i}))}return n},provide:n=>ht.decorations.from(n),toJSON(n,t){let e=[];return n.between(0,t.doc.length,(i,l)=>{e.push(i,l)}),e},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<n.length;){let i=n[e++],l=n[e++];if(typeof i!="number"||typeof l!="number")throw new RangeError("Invalid JSON for fold state");t.push(Gx.range(i,l))}return xt.set(t,!0)}});function Kf(n,t,e){var i;let l=null;return(i=n.field($s,!1))===null||i===void 0||i.between(t,e,(o,a)=>{(!l||l.from>o)&&(l={from:o,to:a})}),l}function Z3(n,t,e){let i=!1;return n.between(t,t,(l,o)=>{l==t&&o==e&&(i=!0)}),i}function iA(n,t){return n.field($s,!1)?t:t.concat(Et.appendConfig.of(rA()))}const W3=n=>{for(let t of nA(n)){let e=$f(n.state,t.from,t.to);if(e)return n.dispatch({effects:iA(n.state,[bh.of(e),lA(n,e)])}),!0}return!1},F3=n=>{if(!n.state.field($s,!1))return!1;let t=[];for(let e of nA(n)){let i=Kf(n.state,e.from,e.to);i&&t.push(gu.of(i),lA(n,i,!1))}return t.length&&n.dispatch({effects:t}),t.length>0};function lA(n,t,e=!0){let i=n.state.doc.lineAt(t.from).number,l=n.state.doc.lineAt(t.to).number;return ht.announce.of(`${n.state.phrase(e?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${l}.`)}const Q3=n=>{let{state:t}=n,e=[];for(let i=0;i<t.doc.length;){let l=n.lineBlockAt(i),o=$f(t,l.from,l.to);o&&e.push(bh.of(o)),i=(o?n.lineBlockAt(o.to):l).to+1}return e.length&&n.dispatch({effects:iA(n.state,e)}),!!e.length},J3=n=>{let t=n.state.field($s,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,n.state.doc.length,(i,l)=>{e.push(gu.of({from:i,to:l}))}),n.dispatch({effects:e}),!0},tR=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:W3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:F3},{key:"Ctrl-Alt-[",run:Q3},{key:"Ctrl-Alt-]",run:J3}],eR={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},sA=dt.define({combine(n){return fi(n,eR)}});function rA(n){return[$s,sR]}function oA(n,t){let{state:e}=n,i=e.facet(sA),l=a=>{let c=n.lineBlockAt(n.posAtDOM(a.target)),f=Kf(n.state,c.from,c.to);f&&n.dispatch({effects:gu.of(f)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,l,t);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",e.phrase("folded code")),o.title=e.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=l,o}const Gx=xt.replace({widget:new class extends cl{toDOM(n){return oA(n,null)}}});class nR extends cl{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return oA(t,this.value)}}const iR={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ag extends _i{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function lR(n={}){let t={...iR,...n},e=new ag(t,!0),i=new ag(t,!1),l=pe.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(ss)!=a.state.facet(ss)||a.startState.field($s,!1)!=a.state.field($s,!1)||Qe(a.startState)!=Qe(a.state)||t.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let c=new rl;for(let f of a.viewportLineBlocks){let d=Kf(a.state,f.from,f.to)?i:$f(a.state,f.from,f.to)?e:null;d&&c.add(f.from,f.from,d)}return c.finish()}}),{domEventHandlers:o}=t;return[l,P2({class:"cm-foldGutter",markers(a){var c;return((c=a.plugin(l))===null||c===void 0?void 0:c.markers)||Vt.empty},initialSpacer(){return new ag(t,!1)},domEventHandlers:{...o,click:(a,c,f)=>{if(o.click&&o.click(a,c,f))return!0;let d=Kf(a.state,c.from,c.to);if(d)return a.dispatch({effects:gu.of(d)}),!0;let m=$f(a.state,c.from,c.to);return m?(a.dispatch({effects:bh.of(m)}),!0):!1}}}),rA()]}const sR=ht.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class pu{constructor(t,e){this.specs=t;let i;function l(c){let f=es.newName();return(i||(i=Object.create(null)))["."+f]=c,f}const o=typeof e.all=="string"?e.all:e.all?l(e.all):void 0,a=e.scope;this.scope=a instanceof oi?c=>c.prop(Gr)==a.data:a?c=>c==a:void 0,this.style=F2(t.map(c=>({tag:c.tag,class:c.class||l(Object.assign({},c,{tag:null}))})),{all:o}).style,this.module=i?new es(i):null,this.themeType=e.themeType}static define(t,e){return new pu(t,e||{})}}const yp=dt.define(),aA=dt.define({combine(n){return n.length?[n[0]]:null}});function ug(n){let t=n.facet(yp);return t.length?t:n.facet(aA)}function uA(n,t){let e=[oR],i;return n instanceof pu&&(n.module&&e.push(ht.styleModule.of(n.module)),i=n.themeType),t!=null&&t.fallback?e.push(aA.of(n)):i?e.push(yp.computeN([ht.darkTheme],l=>l.facet(ht.darkTheme)==(i=="dark")?[n]:[])):e.push(yp.of(n)),e}class rR{constructor(t){this.markCache=Object.create(null),this.tree=Qe(t.state),this.decorations=this.buildDeco(t,ug(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Qe(t.state),i=ug(t.state),l=i!=ug(t.startState),{viewport:o}=t.view,a=t.changes.mapPos(this.decoratedTo,1);e.length<o.to&&!l&&e.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=a):(e!=this.tree||t.viewportChanged||l)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i),this.decoratedTo=o.to)}buildDeco(t,e){if(!e||!this.tree.length)return xt.none;let i=new rl;for(let{from:l,to:o}of t.visibleRanges)T3(this.tree,e,(a,c,f)=>{i.add(a,c,this.markCache[f]||(this.markCache[f]=xt.mark({class:f})))},l,o);return i.finish()}}const oR=Zs.high(pe.fromClass(rR,{decorations:n=>n.decorations})),aR=pu.define([{tag:st.meta,color:"#404740"},{tag:st.link,textDecoration:"underline"},{tag:st.heading,textDecoration:"underline",fontWeight:"bold"},{tag:st.emphasis,fontStyle:"italic"},{tag:st.strong,fontWeight:"bold"},{tag:st.strikethrough,textDecoration:"line-through"},{tag:st.keyword,color:"#708"},{tag:[st.atom,st.bool,st.url,st.contentSeparator,st.labelName],color:"#219"},{tag:[st.literal,st.inserted],color:"#164"},{tag:[st.string,st.deleted],color:"#a11"},{tag:[st.regexp,st.escape,st.special(st.string)],color:"#e40"},{tag:st.definition(st.variableName),color:"#00f"},{tag:st.local(st.variableName),color:"#30a"},{tag:[st.typeName,st.namespace],color:"#085"},{tag:st.className,color:"#167"},{tag:[st.special(st.variableName),st.macroName],color:"#256"},{tag:st.definition(st.propertyName),color:"#00c"},{tag:st.comment,color:"#940"},{tag:st.invalid,color:"#f00"}]),uR=ht.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),cA=1e4,fA="()[]{}",hA=dt.define({combine(n){return fi(n,{afterCursor:!0,brackets:fA,maxScanDistance:cA,renderMatch:hR})}}),cR=xt.mark({class:"cm-matchingBracket"}),fR=xt.mark({class:"cm-nonmatchingBracket"});function hR(n){let t=[],e=n.matched?cR:fR;return t.push(e.range(n.start.from,n.start.to)),n.end&&t.push(e.range(n.end.from,n.end.to)),t}const dR=Te.define({create(){return xt.none},update(n,t){if(!t.docChanged&&!t.selection)return n;let e=[],i=t.state.facet(hA);for(let l of t.state.selection.ranges){if(!l.empty)continue;let o=Ti(t.state,l.head,-1,i)||l.head>0&&Ti(t.state,l.head-1,1,i)||i.afterCursor&&(Ti(t.state,l.head,1,i)||l.head<t.state.doc.length&&Ti(t.state,l.head+1,-1,i));o&&(e=e.concat(i.renderMatch(o,t.state)))}return xt.set(e,!0)},provide:n=>ht.decorations.from(n)}),mR=[dR,uR];function gR(n={}){return[hA.of(n),mR]}const pR=new Lt;function bp(n,t,e){let i=n.prop(t<0?Lt.openedBy:Lt.closedBy);if(i)return i;if(n.name.length==1){let l=e.indexOf(n.name);if(l>-1&&l%2==(t<0?1:0))return[e[l+t]]}return null}function vp(n){let t=n.type.prop(pR);return t?t(n.node):n}function Ti(n,t,e,i={}){let l=i.maxScanDistance||cA,o=i.brackets||fA,a=Qe(n),c=a.resolveInner(t,e);for(let f=c;f;f=f.parent){let d=bp(f.type,e,o);if(d&&f.from<f.to){let m=vp(f);if(m&&(e>0?t>=m.from&&t<m.to:t>m.from&&t<=m.to))return yR(n,t,e,f,m,d,o)}}return bR(n,t,e,a,c.type,l,o)}function yR(n,t,e,i,l,o,a){let c=i.parent,f={from:l.from,to:l.to},d=0,m=c==null?void 0:c.cursor();if(m&&(e<0?m.childBefore(i.from):m.childAfter(i.to)))do if(e<0?m.to<=i.from:m.from>=i.to){if(d==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let p=vp(m);return{start:f,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(bp(m.type,e,a))d++;else if(bp(m.type,-e,a)){if(d==0){let p=vp(m);return{start:f,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}d--}}while(e<0?m.prevSibling():m.nextSibling());return{start:f,matched:!1}}function bR(n,t,e,i,l,o,a){let c=e<0?n.sliceDoc(t-1,t):n.sliceDoc(t,t+1),f=a.indexOf(c);if(f<0||f%2==0!=e>0)return null;let d={from:e<0?t-1:t,to:e>0?t+1:t},m=n.doc.iterRange(t,e>0?n.doc.length:0),p=0;for(let b=0;!m.next().done&&b<=o;){let v=m.value;e<0&&(b+=v.length);let S=t+b*e;for(let w=e>0?0:v.length-1,A=e>0?v.length:-1;w!=A;w+=e){let C=a.indexOf(v[w]);if(!(C<0||i.resolveInner(S+w,1).type!=l))if(C%2==0==e>0)p++;else{if(p==1)return{start:d,end:{from:S+w,to:S+w+1},matched:C>>1==f>>1};p--}}e>0&&(b+=v.length)}return m.done?{start:d,matched:!1}:null}function Px(n,t,e,i=0,l=0){t==null&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length));let o=l;for(let a=i;a<t;a++)n.charCodeAt(a)==9?o+=e-o%e:o++;return o}class dA{constructor(t,e,i,l){this.string=t,this.tabSize=e,this.indentUnit=i,this.overrideIndent=l,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let e=this.string.charAt(this.pos),i;if(typeof t=="string"?i=e==t:i=e&&(t instanceof RegExp?t.test(e):t(e)),i)return++this.pos,e}eatWhile(t){let e=this.pos;for(;this.eat(t););return this.pos>e}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Px(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var t;return(t=this.overrideIndent)!==null&&t!==void 0?t:Px(this.string,null,this.tabSize)}match(t,e,i){if(typeof t=="string"){let l=a=>i?a.toLowerCase():a,o=this.string.substr(this.pos,t.length);return l(o)==l(t)?(e!==!1&&(this.pos+=t.length),!0):null}else{let l=this.string.slice(this.pos).match(t);return l&&l.index>0?null:(l&&e!==!1&&(this.pos+=l[0].length),l)}}current(){return this.string.slice(this.start,this.pos)}}function vR(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||xR,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||d0,mergeTokens:n.mergeTokens!==!1}}function xR(n){if(typeof n!="object")return n;let t={};for(let e in n){let i=n[e];t[e]=i instanceof Array?i.slice():i}return t}const Xx=new WeakMap;class f0 extends oi{constructor(t){let e=R3(t.languageData),i=vR(t),l,o=new class extends Z2{createParse(a,c,f){return new wR(l,a,c,f)}};super(e,o,[],t.name),this.topNode=CR(e,this),l=this,this.streamParser=i,this.stateAfter=new Lt({perNode:!0}),this.tokenTable=t.tokenTable?new yA(i.tokenTable):MR}static define(t){return new f0(t)}getIndent(t){let e,{overrideIndentation:i}=t.options;i&&(e=Xx.get(t.state),e!=null&&e<t.pos-1e4&&(e=void 0));let l=h0(this,t.node.tree,t.node.from,t.node.from,e??t.pos),o,a;if(l?(a=l.state,o=l.pos+1):(a=this.streamParser.startState(t.unit),o=t.node.from),t.pos-o>1e4)return null;for(;o<t.pos;){let f=t.state.doc.lineAt(o),d=Math.min(t.pos,f.to);if(f.length){let m=i?i(f.from):-1,p=new dA(f.text,t.state.tabSize,t.unit,m<0?void 0:m);for(;p.pos<d-f.from;)gA(this.streamParser.token,p,a)}else this.streamParser.blankLine(a,t.unit);if(d==t.pos)break;o=f.to+1}let c=t.lineAt(t.pos);return i&&e==null&&Xx.set(t.state,c.from),this.streamParser.indent(a,/^\s*(.*)/.exec(c.text)[1],t)}get allowsNesting(){return!1}}function h0(n,t,e,i,l){let o=e>=i&&e+t.length<=l&&t.prop(n.stateAfter);if(o)return{state:n.streamParser.copyState(o),pos:e+t.length};for(let a=t.children.length-1;a>=0;a--){let c=t.children[a],f=e+t.positions[a],d=c instanceof oe&&f<l&&h0(n,c,f,i,l);if(d)return d}return null}function mA(n,t,e,i,l){if(l&&e<=0&&i>=t.length)return t;!l&&e==0&&t.type==n.topNode&&(l=!0);for(let o=t.children.length-1;o>=0;o--){let a=t.positions[o],c=t.children[o],f;if(a<i&&c instanceof oe){if(!(f=mA(n,c,e-a,i-a,l)))break;return l?new oe(t.type,t.children.slice(0,o).concat(f),t.positions.slice(0,o+1),a+f.length):f}}return null}function SR(n,t,e,i,l){for(let o of t){let a=o.from+(o.openStart?25:0),c=o.to-(o.openEnd?25:0),f=a<=e&&c>e&&h0(n,o.tree,0-o.offset,e,c),d;if(f&&f.pos<=i&&(d=mA(n,o.tree,e+o.offset,f.pos+o.offset,!1)))return{state:f.state,tree:d}}return{state:n.streamParser.startState(l?js(l):4),tree:oe.empty}}class wR{constructor(t,e,i,l){this.lang=t,this.input=e,this.fragments=i,this.ranges=l,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=l[l.length-1].to;let o=lo.get(),a=l[0].from,{state:c,tree:f}=SR(t,i,a,this.to,o==null?void 0:o.state);this.state=c,this.parsedPos=this.chunkStart=a+f.length;for(let d=0;d<f.children.length;d++)this.chunks.push(f.children[d]),this.chunkPos.push(f.positions[d]);o&&this.parsedPos<o.viewport.from-1e5&&l.some(d=>d.from<=o.viewport.from&&d.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(js(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let t=lo.get(),e=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(e,this.chunkStart+2048);for(t&&(i=Math.min(i,t.viewport.to));this.parsedPos<i;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=e?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,e),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let e=this.input.chunk(t);if(this.input.lineChunks)e==`
`&&(e="");else{let i=e.indexOf(`
`);i>-1&&(e=e.slice(0,i))}return t+e.length<=this.to?e:e.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,e=this.lineAfter(t),i=t+e.length;for(let l=this.rangeIndex;;){let o=this.ranges[l].to;if(o>=i||(e=e.slice(0,o-(i-e.length)),l++,l==this.ranges.length))break;let a=this.ranges[l].from,c=this.lineAfter(a);e+=c,i=a+c.length}return{line:e,end:i}}skipGapsTo(t,e,i){for(;;){let l=this.ranges[this.rangeIndex].to,o=t+e;if(i>0?l>o:l>=o)break;let a=this.ranges[++this.rangeIndex].from;e+=a-l}return e}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(t,e,i,l){let o=4;if(this.ranges.length>1){l=this.skipGapsTo(e,l,1),e+=l;let c=this.chunk.length;l=this.skipGapsTo(i,l,-1),i+=l,o+=this.chunk.length-c}let a=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&o==4&&a>=0&&this.chunk[a]==t&&this.chunk[a+2]==e?this.chunk[a+2]=i:this.chunk.push(t,e,i,o),l}parseLine(t){let{line:e,end:i}=this.nextLine(),l=0,{streamParser:o}=this.lang,a=new dA(e,t?t.state.tabSize:4,t?js(t.state):2);if(a.eol())o.blankLine(this.state,a.indentUnit);else for(;!a.eol();){let c=gA(o.token,a,this.state);if(c&&(l=this.emitToken(this.lang.tokenTable.resolve(c),this.parsedPos+a.start,this.parsedPos+a.pos,l)),a.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=oe.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:AR,topID:0,maxBufferLength:2048,reused:this.chunkReused});t=new oe(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new oe(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function gA(n,t,e){t.start=t.pos;for(let i=0;i<10;i++){let l=n(t,e);if(t.pos>t.start)return l}throw new Error("Stream parser failed to advance stream.")}const d0=Object.create(null),Za=[vn.none],AR=new s0(Za),jx=[],$x=Object.create(null),pA=Object.create(null);for(let[n,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pA[n]=bA(d0,t);class yA{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),pA)}resolve(t){return t?this.table[t]||(this.table[t]=bA(this.extra,t)):0}}const MR=new yA(d0);function cg(n,t){jx.indexOf(n)>-1||(jx.push(n),console.warn(t))}function bA(n,t){let e=[];for(let c of t.split(" ")){let f=[];for(let d of c.split(".")){let m=n[d]||st[d];m?typeof m=="function"?f.length?f=f.map(m):cg(d,`Modifier ${d} used at start of tag`):f.length?cg(d,`Tag ${d} used as modifier`):f=Array.isArray(m)?m:[m]:cg(d,`Unknown highlighting tag ${d}`)}for(let d of f)e.push(d)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),l=i+" "+e.map(c=>c.id),o=$x[l];if(o)return o.id;let a=$x[l]=vn.define({id:Za.length,name:i,props:[E3({[i]:e})]});return Za.push(a),a.id}function CR(n,t){let e=vn.define({id:Za.length,name:"Document",props:[Gr.add(()=>n),J2.add(()=>i=>t.getIndent(i))],top:!0});return Za.push(e),e}ee.RTL,ee.LTR;const ER=n=>{let{state:t}=n,e=t.doc.lineAt(t.selection.main.from),i=g0(n.state,e.from);return i.line?kR(n):i.block?DR(n):!1};function m0(n,t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let l=n(t,e);return l?(i(e.update(l)),!0):!1}}const kR=m0(NR,0),TR=m0(vA,0),DR=m0((n,t)=>vA(n,t,RR(t)),0);function g0(n,t){let e=n.languageDataAt("commentTokens",t,1);return e.length?e[0]:{}}const xa=50;function OR(n,{open:t,close:e},i,l){let o=n.sliceDoc(i-xa,i),a=n.sliceDoc(l,l+xa),c=/\s*$/.exec(o)[0].length,f=/^\s*/.exec(a)[0].length,d=o.length-c;if(o.slice(d-t.length,d)==t&&a.slice(f,f+e.length)==e)return{open:{pos:i-c,margin:c&&1},close:{pos:l+f,margin:f&&1}};let m,p;l-i<=2*xa?m=p=n.sliceDoc(i,l):(m=n.sliceDoc(i,i+xa),p=n.sliceDoc(l-xa,l));let b=/^\s*/.exec(m)[0].length,v=/\s*$/.exec(p)[0].length,S=p.length-v-e.length;return m.slice(b,b+t.length)==t&&p.slice(S,S+e.length)==e?{open:{pos:i+b+t.length,margin:/\s/.test(m.charAt(b+t.length))?1:0},close:{pos:l-v-e.length,margin:/\s/.test(p.charAt(S-1))?1:0}}:null}function RR(n){let t=[];for(let e of n.selection.ranges){let i=n.doc.lineAt(e.from),l=e.to<=i.to?i:n.doc.lineAt(e.to);l.from>i.from&&l.from==e.to&&(l=e.to==i.to+1?i:n.doc.lineAt(e.to-1));let o=t.length-1;o>=0&&t[o].to>i.from?t[o].to=l.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:l.to})}return t}function vA(n,t,e=t.selection.ranges){let i=e.map(o=>g0(t,o.from).block);if(!i.every(o=>o))return null;let l=e.map((o,a)=>OR(t,i[a],o.from,o.to));if(n!=2&&!l.every(o=>o))return{changes:t.changes(e.map((o,a)=>l[a]?[]:[{from:o.from,insert:i[a].open+" "},{from:o.to,insert:" "+i[a].close}]))};if(n!=1&&l.some(o=>o)){let o=[];for(let a=0,c;a<l.length;a++)if(c=l[a]){let f=i[a],{open:d,close:m}=c;o.push({from:d.pos-f.open.length,to:d.pos+d.margin},{from:m.pos-m.margin,to:m.pos+f.close.length})}return{changes:o}}return null}function NR(n,t,e=t.selection.ranges){let i=[],l=-1;for(let{from:o,to:a}of e){let c=i.length,f=1e9,d=g0(t,o).line;if(d){for(let m=o;m<=a;){let p=t.doc.lineAt(m);if(p.from>l&&(o==a||a>p.from)){l=p.from;let b=/^\s*/.exec(p.text)[0].length,v=b==p.length,S=p.text.slice(b,b+d.length)==d?b:-1;b<p.text.length&&b<f&&(f=b),i.push({line:p,comment:S,token:d,indent:b,empty:v,single:!1})}m=p.to+1}if(f<1e9)for(let m=c;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=f);i.length==c+1&&(i[c].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:c,token:f,indent:d,empty:m,single:p}of i)(p||!m)&&o.push({from:c.from+d,insert:f+" "});let a=t.changes(o);return{changes:a,selection:t.selection.map(a,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:c,token:f}of i)if(c>=0){let d=a.from+c,m=d+f.length;a.text[m-a.from]==" "&&m++,o.push({from:d,to:m})}return{changes:o}}return null}const xp=Bi.define(),_R=Bi.define(),BR=dt.define(),xA=dt.define({combine(n){return fi(n,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(i,l)=>t(i,l)||e(i,l)})}}),SA=Te.define({create(){return Di.empty},update(n,t){let e=t.state.facet(xA),i=t.annotation(xp);if(i){let f=yn.fromTransaction(t,i.selection),d=i.side,m=d==0?n.undone:n.done;return f?m=If(m,m.length,e.minDepth,f):m=MA(m,t.startState.selection),new Di(d==0?i.rest:m,d==0?m:i.rest)}let l=t.annotation(_R);if((l=="full"||l=="before")&&(n=n.isolate()),t.annotation(ke.addToHistory)===!1)return t.changes.empty?n:n.addMapping(t.changes.desc);let o=yn.fromTransaction(t),a=t.annotation(ke.time),c=t.annotation(ke.userEvent);return o?n=n.addChanges(o,a,c,e,t):t.selection&&(n=n.addSelection(t.startState.selection,a,c,e.newGroupDelay)),(l=="full"||l=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(t=>t.toJSON()),undone:n.undone.map(t=>t.toJSON())}},fromJSON(n){return new Di(n.done.map(yn.fromJSON),n.undone.map(yn.fromJSON))}});function zR(n={}){return[SA,xA.of(n),ht.domEventHandlers({beforeinput(t,e){let i=t.inputType=="historyUndo"?wA:t.inputType=="historyRedo"?Sp:null;return i?(t.preventDefault(),i(e)):!1}})]}function vh(n,t){return function({state:e,dispatch:i}){if(!t&&e.readOnly)return!1;let l=e.field(SA,!1);if(!l)return!1;let o=l.pop(n,e,t);return o?(i(o),!0):!1}}const wA=vh(0,!1),Sp=vh(1,!1),LR=vh(0,!0),HR=vh(1,!0);class yn{constructor(t,e,i,l,o){this.changes=t,this.effects=e,this.mapped=i,this.startSelection=l,this.selectionsAfter=o}setSelAfter(t){return new yn(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,i;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(l=>l.toJSON())}}static fromJSON(t){return new yn(t.changes&&Ee.fromJSON(t.changes),[],t.mapped&&Oi.fromJSON(t.mapped),t.startSelection&&at.fromJSON(t.startSelection),t.selectionsAfter.map(at.fromJSON))}static fromTransaction(t,e){let i=Kn;for(let l of t.startState.facet(BR)){let o=l(t);o.length&&(i=i.concat(o))}return!i.length&&t.changes.empty?null:new yn(t.changes.invert(t.startState.doc),i,void 0,e||t.startState.selection,Kn)}static selection(t){return new yn(void 0,Kn,void 0,void 0,t)}}function If(n,t,e,i){let l=t+1>e+20?t-e-1:0,o=n.slice(l,t);return o.push(i),o}function VR(n,t){let e=[],i=!1;return n.iterChangedRanges((l,o)=>e.push(l,o)),t.iterChangedRanges((l,o,a,c)=>{for(let f=0;f<e.length;){let d=e[f++],m=e[f++];c>=d&&a<=m&&(i=!0)}}),i}function UR(n,t){return n.ranges.length==t.ranges.length&&n.ranges.filter((e,i)=>e.empty!=t.ranges[i].empty).length===0}function AA(n,t){return n.length?t.length?n.concat(t):n:t}const Kn=[],qR=200;function MA(n,t){if(n.length){let e=n[n.length-1],i=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-qR));return i.length&&i[i.length-1].eq(t)?n:(i.push(t),If(n,n.length-1,1e9,e.setSelAfter(i)))}else return[yn.selection([t])]}function YR(n){let t=n[n.length-1],e=n.slice();return e[n.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function fg(n,t){if(!n.length)return n;let e=n.length,i=Kn;for(;e;){let l=GR(n[e-1],t,i);if(l.changes&&!l.changes.empty||l.effects.length){let o=n.slice(0,e);return o[e-1]=l,o}else t=l.mapped,e--,i=l.selectionsAfter}return i.length?[yn.selection(i)]:Kn}function GR(n,t,e){let i=AA(n.selectionsAfter.length?n.selectionsAfter.map(c=>c.map(t)):Kn,e);if(!n.changes)return yn.selection(i);let l=n.changes.map(t),o=t.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(o):o;return new yn(l,Et.mapEffects(n.effects,t),a,n.startSelection.map(o),i)}const PR=/^(input\.type|delete)($|\.)/;class Di{constructor(t,e,i=0,l=void 0){this.done=t,this.undone=e,this.prevTime=i,this.prevUserEvent=l}isolate(){return this.prevTime?new Di(this.done,this.undone):this}addChanges(t,e,i,l,o){let a=this.done,c=a[a.length-1];return c&&c.changes&&!c.changes.empty&&t.changes&&(!i||PR.test(i))&&(!c.selectionsAfter.length&&e-this.prevTime<l.newGroupDelay&&l.joinToEvent(o,VR(c.changes,t.changes))||i=="input.type.compose")?a=If(a,a.length-1,l.minDepth,new yn(t.changes.compose(c.changes),AA(Et.mapEffects(t.effects,c.changes),c.effects),c.mapped,c.startSelection,Kn)):a=If(a,a.length,l.minDepth,t),new Di(a,Kn,e,i)}addSelection(t,e,i,l){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Kn;return o.length>0&&e-this.prevTime<l&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&UR(o[o.length-1],t)?this:new Di(MA(this.done,t),this.undone,e,i)}addMapping(t){return new Di(fg(this.done,t),fg(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,i){let l=t==0?this.done:this.undone;if(l.length==0)return null;let o=l[l.length-1],a=o.selectionsAfter[0]||e.selection;if(i&&o.selectionsAfter.length)return e.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:xp.of({side:t,rest:YR(l),selection:a}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let c=l.length==1?Kn:l.slice(0,l.length-1);return o.mapped&&(c=fg(c,o.mapped)),e.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:xp.of({side:t,rest:c,selection:a}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}Di.empty=new Di(Kn,Kn);const XR=[{key:"Mod-z",run:wA,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Sp,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Sp,preventDefault:!0},{key:"Mod-u",run:LR,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:HR,preventDefault:!0}];function mo(n,t){return at.create(n.ranges.map(t),n.mainIndex)}function zi(n,t){return n.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function hi({state:n,dispatch:t},e){let i=mo(n.selection,e);return i.eq(n.selection,!0)?!1:(t(zi(n,i)),!0)}function xh(n,t){return at.cursor(t?n.to:n.from)}function CA(n,t){return hi(n,e=>e.empty?n.moveByChar(e,t):xh(e,t))}function Je(n){return n.textDirectionAt(n.state.selection.main.head)==ee.LTR}const EA=n=>CA(n,!Je(n)),kA=n=>CA(n,Je(n));function TA(n,t){return hi(n,e=>e.empty?n.moveByGroup(e,t):xh(e,t))}const jR=n=>TA(n,!Je(n)),$R=n=>TA(n,Je(n));function KR(n,t,e){if(t.type.prop(e))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(t.from,t.to)))||t.firstChild}function Sh(n,t,e){let i=Qe(n).resolveInner(t.head),l=e?Lt.closedBy:Lt.openedBy;for(let f=t.head;;){let d=e?i.childAfter(f):i.childBefore(f);if(!d)break;KR(n,d,l)?i=d:f=e?d.to:d.from}let o=i.type.prop(l),a,c;return o&&(a=e?Ti(n,i.from,1):Ti(n,i.to,-1))&&a.matched?c=e?a.end.to:a.end.from:c=e?i.to:i.from,at.cursor(c,e?-1:1)}const IR=n=>hi(n,t=>Sh(n.state,t,!Je(n))),ZR=n=>hi(n,t=>Sh(n.state,t,Je(n)));function DA(n,t){return hi(n,e=>{if(!e.empty)return xh(e,t);let i=n.moveVertically(e,t);return i.head!=e.head?i:n.moveToLineBoundary(e,t)})}const OA=n=>DA(n,!1),RA=n=>DA(n,!0);function NA(n){let t=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,e=0,i=0,l;if(t){for(let o of n.state.facet(ht.scrollMargins)){let a=o(n);a!=null&&a.top&&(e=Math.max(a==null?void 0:a.top,e)),a!=null&&a.bottom&&(i=Math.max(a==null?void 0:a.bottom,i))}l=n.scrollDOM.clientHeight-e-i}else l=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:i,selfScroll:t,height:Math.max(n.defaultLineHeight,l-5)}}function _A(n,t){let e=NA(n),{state:i}=n,l=mo(i.selection,a=>a.empty?n.moveVertically(a,t,e.height):xh(a,t));if(l.eq(i.selection))return!1;let o;if(e.selfScroll){let a=n.coordsAtPos(i.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),f=c.top+e.marginTop,d=c.bottom-e.marginBottom;a&&a.top>f&&a.bottom<d&&(o=ht.scrollIntoView(l.main.head,{y:"start",yMargin:a.top-f}))}return n.dispatch(zi(i,l),{effects:o}),!0}const Kx=n=>_A(n,!1),wp=n=>_A(n,!0);function rs(n,t,e){let i=n.lineBlockAt(t.head),l=n.moveToLineBoundary(t,e);if(l.head==t.head&&l.head!=(e?i.to:i.from)&&(l=n.moveToLineBoundary(t,e,!1)),!e&&l.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&t.head!=i.from+o&&(l=at.cursor(i.from+o))}return l}const WR=n=>hi(n,t=>rs(n,t,!0)),FR=n=>hi(n,t=>rs(n,t,!1)),QR=n=>hi(n,t=>rs(n,t,!Je(n))),JR=n=>hi(n,t=>rs(n,t,Je(n))),tN=n=>hi(n,t=>at.cursor(n.lineBlockAt(t.head).from,1)),eN=n=>hi(n,t=>at.cursor(n.lineBlockAt(t.head).to,-1));function nN(n,t,e){let i=!1,l=mo(n.selection,o=>{let a=Ti(n,o.head,-1)||Ti(n,o.head,1)||o.head>0&&Ti(n,o.head-1,1)||o.head<n.doc.length&&Ti(n,o.head+1,-1);if(!a||!a.end)return o;i=!0;let c=a.start.from==o.head?a.end.to:a.end.from;return at.cursor(c)});return i?(t(zi(n,l)),!0):!1}const iN=({state:n,dispatch:t})=>nN(n,t);function Jn(n,t){let e=mo(n.state.selection,i=>{let l=t(i);return at.range(i.anchor,l.head,l.goalColumn,l.bidiLevel||void 0)});return e.eq(n.state.selection)?!1:(n.dispatch(zi(n.state,e)),!0)}function BA(n,t){return Jn(n,e=>n.moveByChar(e,t))}const zA=n=>BA(n,!Je(n)),LA=n=>BA(n,Je(n));function HA(n,t){return Jn(n,e=>n.moveByGroup(e,t))}const lN=n=>HA(n,!Je(n)),sN=n=>HA(n,Je(n)),rN=n=>Jn(n,t=>Sh(n.state,t,!Je(n))),oN=n=>Jn(n,t=>Sh(n.state,t,Je(n)));function VA(n,t){return Jn(n,e=>n.moveVertically(e,t))}const UA=n=>VA(n,!1),qA=n=>VA(n,!0);function YA(n,t){return Jn(n,e=>n.moveVertically(e,t,NA(n).height))}const Ix=n=>YA(n,!1),Zx=n=>YA(n,!0),aN=n=>Jn(n,t=>rs(n,t,!0)),uN=n=>Jn(n,t=>rs(n,t,!1)),cN=n=>Jn(n,t=>rs(n,t,!Je(n))),fN=n=>Jn(n,t=>rs(n,t,Je(n))),hN=n=>Jn(n,t=>at.cursor(n.lineBlockAt(t.head).from)),dN=n=>Jn(n,t=>at.cursor(n.lineBlockAt(t.head).to)),Wx=({state:n,dispatch:t})=>(t(zi(n,{anchor:0})),!0),Fx=({state:n,dispatch:t})=>(t(zi(n,{anchor:n.doc.length})),!0),Qx=({state:n,dispatch:t})=>(t(zi(n,{anchor:n.selection.main.anchor,head:0})),!0),Jx=({state:n,dispatch:t})=>(t(zi(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),mN=({state:n,dispatch:t})=>(t(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),gN=({state:n,dispatch:t})=>{let e=wh(n).map(({from:i,to:l})=>at.range(i,Math.min(l+1,n.doc.length)));return t(n.update({selection:at.create(e),userEvent:"select"})),!0},pN=({state:n,dispatch:t})=>{let e=mo(n.selection,i=>{let l=Qe(n),o=l.resolveStack(i.from,1);if(i.empty){let a=l.resolveStack(i.from,-1);a.node.from>=o.node.from&&a.node.to<=o.node.to&&(o=a)}for(let a=o;a;a=a.next){let{node:c}=a;if((c.from<i.from&&c.to>=i.to||c.to>i.to&&c.from<=i.from)&&a.next)return at.range(c.to,c.from)}return i});return e.eq(n.selection)?!1:(t(zi(n,e)),!0)},yN=({state:n,dispatch:t})=>{let e=n.selection,i=null;return e.ranges.length>1?i=at.create([e.main]):e.main.empty||(i=at.create([at.cursor(e.main.head)])),i?(t(zi(n,i)),!0):!1};function yu(n,t){if(n.state.readOnly)return!1;let e="delete.selection",{state:i}=n,l=i.changeByRange(o=>{let{from:a,to:c}=o;if(a==c){let f=t(o);f<a?(e="delete.backward",f=sf(n,f,!1)):f>a&&(e="delete.forward",f=sf(n,f,!0)),a=Math.min(a,f),c=Math.max(c,f)}else a=sf(n,a,!1),c=sf(n,c,!0);return a==c?{range:o}:{changes:{from:a,to:c},range:at.cursor(a,a<o.head?-1:1)}});return l.changes.empty?!1:(n.dispatch(i.update(l,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?ht.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function sf(n,t,e){if(n instanceof ht)for(let i of n.state.facet(ht.atomicRanges).map(l=>l(n)))i.between(t,t,(l,o)=>{l<t&&o>t&&(t=e?o:l)});return t}const GA=(n,t,e)=>yu(n,i=>{let l=i.from,{state:o}=n,a=o.doc.lineAt(l),c,f;if(e&&!t&&l>a.from&&l<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,l-a.from))){if(c[c.length-1]=="	")return l-1;let d=ho(c,o.tabSize),m=d%js(o)||js(o);for(let p=0;p<m&&c[c.length-1-p]==" ";p++)l--;f=l}else f=Xe(a.text,l-a.from,t,t)+a.from,f==l&&a.number!=(t?o.doc.lines:1)?f+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(a.text.slice(f-a.from,l-a.from))&&(f=Xe(a.text,f-a.from,!1,!1)+a.from);return f}),Ap=n=>GA(n,!1,!0),PA=n=>GA(n,!0,!1),XA=(n,t)=>yu(n,e=>{let i=e.head,{state:l}=n,o=l.doc.lineAt(i),a=l.charCategorizer(i);for(let c=null;;){if(i==(t?o.to:o.from)){i==e.head&&o.number!=(t?l.doc.lines:1)&&(i+=t?1:-1);break}let f=Xe(o.text,i-o.from,t)+o.from,d=o.text.slice(Math.min(i,f)-o.from,Math.max(i,f)-o.from),m=a(d);if(c!=null&&m!=c)break;(d!=" "||i!=e.head)&&(c=m),i=f}return i}),jA=n=>XA(n,!1),bN=n=>XA(n,!0),vN=n=>yu(n,t=>{let e=n.lineBlockAt(t.head).to;return t.head<e?e:Math.min(n.state.doc.length,t.head+1)}),xN=n=>yu(n,t=>{let e=n.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),SN=n=>yu(n,t=>{let e=n.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(n.state.doc.length,t.head+1)}),wN=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:qt.of(["",""])},range:at.cursor(i.from)}));return t(n.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},AN=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let l=i.from,o=n.doc.lineAt(l),a=l==o.from?l-1:Xe(o.text,l-o.from,!1)+o.from,c=l==o.to?l+1:Xe(o.text,l-o.from,!0)+o.from;return{changes:{from:a,to:c,insert:n.doc.slice(l,c).append(n.doc.slice(a,l))},range:at.cursor(c)}});return e.changes.empty?!1:(t(n.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function wh(n){let t=[],e=-1;for(let i of n.selection.ranges){let l=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),e>=l.number){let a=t[t.length-1];a.to=o.to,a.ranges.push(i)}else t.push({from:l.from,to:o.to,ranges:[i]});e=o.number+1}return t}function $A(n,t,e){if(n.readOnly)return!1;let i=[],l=[];for(let o of wh(n)){if(e?o.to==n.doc.length:o.from==0)continue;let a=n.doc.lineAt(e?o.to+1:o.from-1),c=a.length+1;if(e){i.push({from:o.to,to:a.to},{from:o.from,insert:a.text+n.lineBreak});for(let f of o.ranges)l.push(at.range(Math.min(n.doc.length,f.anchor+c),Math.min(n.doc.length,f.head+c)))}else{i.push({from:a.from,to:o.from},{from:o.to,insert:n.lineBreak+a.text});for(let f of o.ranges)l.push(at.range(f.anchor-c,f.head-c))}}return i.length?(t(n.update({changes:i,scrollIntoView:!0,selection:at.create(l,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const MN=({state:n,dispatch:t})=>$A(n,t,!1),CN=({state:n,dispatch:t})=>$A(n,t,!0);function KA(n,t,e){if(n.readOnly)return!1;let i=[];for(let l of wh(n))e?i.push({from:l.from,insert:n.doc.slice(l.from,l.to)+n.lineBreak}):i.push({from:l.to,insert:n.lineBreak+n.doc.slice(l.from,l.to)});return t(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const EN=({state:n,dispatch:t})=>KA(n,t,!1),kN=({state:n,dispatch:t})=>KA(n,t,!0),TN=n=>{if(n.state.readOnly)return!1;let{state:t}=n,e=t.changes(wh(t).map(({from:l,to:o})=>(l>0?l--:o<t.doc.length&&o++,{from:l,to:o}))),i=mo(t.selection,l=>{let o;if(n.lineWrapping){let a=n.lineBlockAt(l.head),c=n.coordsAtPos(l.head,l.assoc||1);c&&(o=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(l,!0,o)}).map(e);return n.dispatch({changes:e,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function DN(n,t){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=Qe(n).resolveInner(t),i=e.childBefore(t),l=e.childAfter(t),o;return i&&l&&i.to<=t&&l.from>=t&&(o=i.type.prop(Lt.closedBy))&&o.indexOf(l.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(l.from).from&&!/\S/.test(n.sliceDoc(i.to,l.from))?{from:i.to,to:l.from}:null}const tS=IA(!1),ON=IA(!0);function IA(n){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(l=>{let{from:o,to:a}=l,c=t.doc.lineAt(o),f=!n&&o==a&&DN(t,o);n&&(o=a=(a<=c.to?c:t.doc.lineAt(a)).to);let d=new yh(t,{simulateBreak:o,simulateDoubleBreak:!!f}),m=u0(d,o);for(m==null&&(m=ho(/^\s*/.exec(t.doc.lineAt(o).text)[0],t.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;f?{from:o,to:a}=f:o>c.from&&o<c.from+100&&!/\S/.test(c.text.slice(0,o))&&(o=c.from);let p=["",Ia(t,m)];return f&&p.push(Ia(t,d.lineIndent(c.from,-1))),{changes:{from:o,to:a,insert:qt.of(p)},range:at.cursor(o+1+p[1].length)}});return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function p0(n,t){let e=-1;return n.changeByRange(i=>{let l=[];for(let a=i.from;a<=i.to;){let c=n.doc.lineAt(a);c.number>e&&(i.empty||i.to>c.from)&&(t(c,l,i),e=c.number),a=c.to+1}let o=n.changes(l);return{changes:l,range:at.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const RN=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=Object.create(null),i=new yh(n,{overrideIndentation:o=>{let a=e[o];return a??-1}}),l=p0(n,(o,a,c)=>{let f=u0(i,o.from);if(f==null)return;/\S/.test(o.text)||(f=0);let d=/^\s*/.exec(o.text)[0],m=Ia(n,f);(d!=m||c.from<o.from+d.length)&&(e[o.from]=f,a.push({from:o.from,to:o.from+d.length,insert:m}))});return l.changes.empty||t(n.update(l,{userEvent:"indent"})),!0},ZA=({state:n,dispatch:t})=>n.readOnly?!1:(t(n.update(p0(n,(e,i)=>{i.push({from:e.from,insert:n.facet(ph)})}),{userEvent:"input.indent"})),!0),WA=({state:n,dispatch:t})=>n.readOnly?!1:(t(n.update(p0(n,(e,i)=>{let l=/^\s*/.exec(e.text)[0];if(!l)return;let o=ho(l,n.tabSize),a=0,c=Ia(n,Math.max(0,o-js(n)));for(;a<l.length&&a<c.length&&l.charCodeAt(a)==c.charCodeAt(a);)a++;i.push({from:e.from+a,to:e.from+l.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),NN=n=>(n.setTabFocusMode(),!0),_N=[{key:"Ctrl-b",run:EA,shift:zA,preventDefault:!0},{key:"Ctrl-f",run:kA,shift:LA},{key:"Ctrl-p",run:OA,shift:UA},{key:"Ctrl-n",run:RA,shift:qA},{key:"Ctrl-a",run:tN,shift:hN},{key:"Ctrl-e",run:eN,shift:dN},{key:"Ctrl-d",run:PA},{key:"Ctrl-h",run:Ap},{key:"Ctrl-k",run:vN},{key:"Ctrl-Alt-h",run:jA},{key:"Ctrl-o",run:wN},{key:"Ctrl-t",run:AN},{key:"Ctrl-v",run:wp}],BN=[{key:"ArrowLeft",run:EA,shift:zA,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:jR,shift:lN,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:QR,shift:cN,preventDefault:!0},{key:"ArrowRight",run:kA,shift:LA,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:$R,shift:sN,preventDefault:!0},{mac:"Cmd-ArrowRight",run:JR,shift:fN,preventDefault:!0},{key:"ArrowUp",run:OA,shift:UA,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Wx,shift:Qx},{mac:"Ctrl-ArrowUp",run:Kx,shift:Ix},{key:"ArrowDown",run:RA,shift:qA,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Fx,shift:Jx},{mac:"Ctrl-ArrowDown",run:wp,shift:Zx},{key:"PageUp",run:Kx,shift:Ix},{key:"PageDown",run:wp,shift:Zx},{key:"Home",run:FR,shift:uN,preventDefault:!0},{key:"Mod-Home",run:Wx,shift:Qx},{key:"End",run:WR,shift:aN,preventDefault:!0},{key:"Mod-End",run:Fx,shift:Jx},{key:"Enter",run:tS,shift:tS},{key:"Mod-a",run:mN},{key:"Backspace",run:Ap,shift:Ap},{key:"Delete",run:PA},{key:"Mod-Backspace",mac:"Alt-Backspace",run:jA},{key:"Mod-Delete",mac:"Alt-Delete",run:bN},{mac:"Mod-Backspace",run:xN},{mac:"Mod-Delete",run:SN}].concat(_N.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),FA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:IR,shift:rN},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:ZR,shift:oN},{key:"Alt-ArrowUp",run:MN},{key:"Shift-Alt-ArrowUp",run:EN},{key:"Alt-ArrowDown",run:CN},{key:"Shift-Alt-ArrowDown",run:kN},{key:"Escape",run:yN},{key:"Mod-Enter",run:ON},{key:"Alt-l",mac:"Ctrl-l",run:gN},{key:"Mod-i",run:pN,preventDefault:!0},{key:"Mod-[",run:WA},{key:"Mod-]",run:ZA},{key:"Mod-Alt-\\",run:RN},{key:"Shift-Mod-k",run:TN},{key:"Shift-Mod-\\",run:iN},{key:"Mod-/",run:ER},{key:"Alt-A",run:TR},{key:"Ctrl-m",mac:"Shift-Alt-m",run:NN}].concat(BN),zN={key:"Tab",run:ZA,shift:WA},eS=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ro{constructor(t,e,i=0,l=t.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,l),this.bufferStart=i,this.normalize=o?c=>o(eS(c)):eS,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return dn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Xp(t),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ei(t);let l=this.normalize(e);if(l.length)for(let o=0,a=i;;o++){let c=l.charCodeAt(o),f=this.match(c,a,this.bufferPos+this.bufferStart);if(o==l.length-1){if(f)return this.value=f,this;break}a==i&&o<e.length&&e.charCodeAt(o)==c&&a++}}}match(t,e,i){let l=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],c=!1;this.query.charCodeAt(a)==t&&(a==this.query.length-1?l={from:this.matches[o+1],to:i}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?l={from:e,to:i}:this.matches.push(1,e)),l&&this.test&&!this.test(l.from,l.to,this.buffer,this.bufferStart)&&(l=null),l}}typeof Symbol<"u"&&(ro.prototype[Symbol.iterator]=function(){return this});const QA={from:-1,to:-1,match:/.*/.exec("")},y0="gm"+(/x/.unicode==null?"":"u");class JA{constructor(t,e,i,l=0,o=t.length){if(this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=QA,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new tM(t,e,i,l,o);this.re=new RegExp(e,y0+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=t.iter();let a=t.lineAt(l);this.curLineStart=a.from,this.matchPos=Zf(t,l),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let i=this.curLineStart+e.index,l=i+e[0].length;if(this.matchPos=Zf(this.text,l+(i==l?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<l||i>this.value.to)&&(!this.test||this.test(i,l,e)))return this.value={from:i,to:l,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const hg=new WeakMap;class Ir{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,i){let l=hg.get(t);if(!l||l.from>=i||l.to<=e){let c=new Ir(e,t.sliceString(e,i));return hg.set(t,c),c}if(l.from==e&&l.to==i)return l;let{text:o,from:a}=l;return a>e&&(o=t.sliceString(e,a)+o,a=e),l.to<i&&(o+=t.sliceString(l.to,i)),hg.set(t,new Ir(a,o)),new Ir(e,o.slice(e-a,i-a))}}class tM{constructor(t,e,i,l,o){this.text=t,this.to=o,this.done=!1,this.value=QA,this.matchPos=Zf(t,l),this.re=new RegExp(e,y0+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Ir.get(t,l,this.chunkEnd(l+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let i=this.flat.from+e.index,l=i+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,l,e)))return this.value={from:i,to:l,match:e},this.matchPos=Zf(this.text,l+(i==l?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ir.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(JA.prototype[Symbol.iterator]=tM.prototype[Symbol.iterator]=function(){return this});function LN(n){try{return new RegExp(n,y0),!0}catch{return!1}}function Zf(n,t){if(t>=n.length)return t;let e=n.lineAt(t),i;for(;t<e.to&&(i=e.text.charCodeAt(t-e.from))>=56320&&i<57344;)t++;return t}function Mp(n){let t=String(n.state.doc.lineAt(n.state.selection.main.head).number),e=Zt("input",{class:"cm-textfield",name:"line",value:t}),i=Zt("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:Va.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),l())},onsubmit:o=>{o.preventDefault(),l()}},Zt("label",n.state.phrase("Go to line"),": ",e)," ",Zt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Zt("button",{name:"close",onclick:()=>{n.dispatch({effects:Va.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},["×"]));function l(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!o)return;let{state:a}=n,c=a.doc.lineAt(a.selection.main.head),[,f,d,m,p]=o,b=m?+m.slice(1):0,v=d?+d:c.number;if(d&&p){let A=v/100;f&&(A=A*(f=="-"?-1:1)+c.number/a.doc.lines),v=Math.round(a.doc.lines*A)}else d&&f&&(v=v*(f=="-"?-1:1)+c.number);let S=a.doc.line(Math.max(1,Math.min(a.doc.lines,v))),w=at.cursor(S.from+Math.max(0,Math.min(b,S.length)));n.dispatch({effects:[Va.of(!1),ht.scrollIntoView(w.from,{y:"center"})],selection:w}),n.focus()}return{dom:i}}const Va=Et.define(),nS=Te.define({create(){return!0},update(n,t){for(let e of t.effects)e.is(Va)&&(n=e.value);return n},provide:n=>$a.from(n,t=>t?Mp:null)}),HN=n=>{let t=ja(n,Mp);if(!t){let e=[Va.of(!0)];n.state.field(nS,!1)==null&&e.push(Et.appendConfig.of([nS,VN])),n.dispatch({effects:e}),t=ja(n,Mp)}return t&&t.dom.querySelector("input").select(),!0},VN=ht.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),UN={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},qN=dt.define({combine(n){return fi(n,UN,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function YN(n){return[$N,jN]}const GN=xt.mark({class:"cm-selectionMatch"}),PN=xt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function iS(n,t,e,i){return(e==0||n(t.sliceDoc(e-1,e))!=ie.Word)&&(i==t.doc.length||n(t.sliceDoc(i,i+1))!=ie.Word)}function XN(n,t,e,i){return n(t.sliceDoc(e,e+1))==ie.Word&&n(t.sliceDoc(i-1,i))==ie.Word}const jN=pe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let t=n.state.facet(qN),{state:e}=n,i=e.selection;if(i.ranges.length>1)return xt.none;let l=i.main,o,a=null;if(l.empty){if(!t.highlightWordAroundCursor)return xt.none;let f=e.wordAt(l.head);if(!f)return xt.none;a=e.charCategorizer(l.head),o=e.sliceDoc(f.from,f.to)}else{let f=l.to-l.from;if(f<t.minSelectionLength||f>200)return xt.none;if(t.wholeWords){if(o=e.sliceDoc(l.from,l.to),a=e.charCategorizer(l.head),!(iS(a,e,l.from,l.to)&&XN(a,e,l.from,l.to)))return xt.none}else if(o=e.sliceDoc(l.from,l.to),!o)return xt.none}let c=[];for(let f of n.visibleRanges){let d=new ro(e.doc,o,f.from,f.to);for(;!d.next().done;){let{from:m,to:p}=d.value;if((!a||iS(a,e,m,p))&&(l.empty&&m<=l.from&&p>=l.to?c.push(PN.range(m,p)):(m>=l.to||p<=l.from)&&c.push(GN.range(m,p)),c.length>t.maxMatches))return xt.none}}return xt.set(c)}},{decorations:n=>n.decorations}),$N=ht.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),KN=({state:n,dispatch:t})=>{let{selection:e}=n,i=at.create(e.ranges.map(l=>n.wordAt(l.head)||at.cursor(l.head)),e.mainIndex);return i.eq(e)?!1:(t(n.update({selection:i})),!0)};function IN(n,t){let{main:e,ranges:i}=n.selection,l=n.wordAt(e.head),o=l&&l.from==e.from&&l.to==e.to;for(let a=!1,c=new ro(n.doc,t,i[i.length-1].to);;)if(c.next(),c.done){if(a)return null;c=new ro(n.doc,t,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(f=>f.from==c.value.from))continue;if(o){let f=n.wordAt(c.value.from);if(!f||f.from!=c.value.from||f.to!=c.value.to)continue}return c.value}}const ZN=({state:n,dispatch:t})=>{let{ranges:e}=n.selection;if(e.some(o=>o.from===o.to))return KN({state:n,dispatch:t});let i=n.sliceDoc(e[0].from,e[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let l=IN(n,i);return l?(t(n.update({selection:n.selection.addRange(at.range(l.from,l.to),!1),effects:ht.scrollIntoView(l.to)})),!0):!1},go=dt.define({combine(n){return fi(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new o_(t),scrollToMatch:t=>ht.scrollIntoView(t)})}});class eM{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||LN(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(e,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new JN(this):new FN(this)}getCursor(t,e=0,i){let l=t.doc?t:Ht.create({doc:t});return i==null&&(i=l.doc.length),this.regexp?Ur(this,l,e,i):Vr(this,l,e,i)}}class nM{constructor(t){this.spec=t}}function Vr(n,t,e,i){return new ro(t.doc,n.unquoted,e,i,n.caseSensitive?void 0:l=>l.toLowerCase(),n.wholeWord?WN(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function WN(n,t){return(e,i,l,o)=>((o>e||o+l.length<i)&&(o=Math.max(0,e-2),l=n.sliceString(o,Math.min(n.length,i+2))),(t(Wf(l,e-o))!=ie.Word||t(Ff(l,e-o))!=ie.Word)&&(t(Ff(l,i-o))!=ie.Word||t(Wf(l,i-o))!=ie.Word))}class FN extends nM{constructor(t){super(t)}nextMatch(t,e,i){let l=Vr(this.spec,t,i,t.doc.length).nextOverlapping();if(l.done){let o=Math.min(t.doc.length,e+this.spec.unquoted.length);l=Vr(this.spec,t,0,o).nextOverlapping()}return l.done||l.value.from==e&&l.value.to==i?null:l.value}prevMatchInRange(t,e,i){for(let l=i;;){let o=Math.max(e,l-1e4-this.spec.unquoted.length),a=Vr(this.spec,t,o,l),c=null;for(;!a.nextOverlapping().done;)c=a.value;if(c)return c;if(o==e)return null;l-=1e4}}prevMatch(t,e,i){let l=this.prevMatchInRange(t,0,e);return l||(l=this.prevMatchInRange(t,Math.max(0,i-this.spec.unquoted.length),t.doc.length)),l&&(l.from!=e||l.to!=i)?l:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let i=Vr(this.spec,t,0,t.doc.length),l=[];for(;!i.next().done;){if(l.length>=e)return null;l.push(i.value)}return l}highlight(t,e,i,l){let o=Vr(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,t.doc.length));for(;!o.next().done;)l(o.value.from,o.value.to)}}function Ur(n,t,e,i){return new JA(t.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?QN(t.charCategorizer(t.selection.main.head)):void 0},e,i)}function Wf(n,t){return n.slice(Xe(n,t,!1),t)}function Ff(n,t){return n.slice(t,Xe(n,t))}function QN(n){return(t,e,i)=>!i[0].length||(n(Wf(i.input,i.index))!=ie.Word||n(Ff(i.input,i.index))!=ie.Word)&&(n(Ff(i.input,i.index+i[0].length))!=ie.Word||n(Wf(i.input,i.index+i[0].length))!=ie.Word)}class JN extends nM{nextMatch(t,e,i){let l=Ur(this.spec,t,i,t.doc.length).next();return l.done&&(l=Ur(this.spec,t,0,e).next()),l.done?null:l.value}prevMatchInRange(t,e,i){for(let l=1;;l++){let o=Math.max(e,i-l*1e4),a=Ur(this.spec,t,o,i),c=null;for(;!a.next().done;)c=a.value;if(c&&(o==e||c.from>o+10))return c;if(o==e)return null}}prevMatch(t,e,i){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(e,i)=>{if(i=="&")return t.match[0];if(i=="$")return"$";for(let l=i.length;l>0;l--){let o=+i.slice(0,l);if(o>0&&o<t.match.length)return t.match[o]+i.slice(l)}return e})}matchAll(t,e){let i=Ur(this.spec,t,0,t.doc.length),l=[];for(;!i.next().done;){if(l.length>=e)return null;l.push(i.value)}return l}highlight(t,e,i,l){let o=Ur(this.spec,t,Math.max(0,e-250),Math.min(i+250,t.doc.length));for(;!o.next().done;)l(o.value.from,o.value.to)}}const Wa=Et.define(),b0=Et.define(),Jl=Te.define({create(n){return new dg(Cp(n).create(),null)},update(n,t){for(let e of t.effects)e.is(Wa)?n=new dg(e.value.create(),n.panel):e.is(b0)&&(n=new dg(n.query,e.value?v0:null));return n},provide:n=>$a.from(n,t=>t.panel)});class dg{constructor(t,e){this.query=t,this.panel=e}}const t_=xt.mark({class:"cm-searchMatch"}),e_=xt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),n_=pe.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Jl))}update(n){let t=n.state.field(Jl);(t!=n.startState.field(Jl)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:n,panel:t}){if(!t||!n.spec.valid)return xt.none;let{view:e}=this,i=new rl;for(let l=0,o=e.visibleRanges,a=o.length;l<a;l++){let{from:c,to:f}=o[l];for(;l<a-1&&f>o[l+1].from-2*250;)f=o[++l].to;n.highlight(e.state,c,f,(d,m)=>{let p=e.state.selection.ranges.some(b=>b.from==d&&b.to==m);i.add(d,m,p?e_:t_)})}return i.finish()}},{decorations:n=>n.decorations});function bu(n){return t=>{let e=t.state.field(Jl,!1);return e&&e.query.spec.valid?n(t,e):sM(t)}}const Qf=bu((n,{query:t})=>{let{to:e}=n.state.selection.main,i=t.nextMatch(n.state,e,e);if(!i)return!1;let l=at.single(i.from,i.to),o=n.state.facet(go);return n.dispatch({selection:l,effects:[x0(n,i),o.scrollToMatch(l.main,n)],userEvent:"select.search"}),lM(n),!0}),Jf=bu((n,{query:t})=>{let{state:e}=n,{from:i}=e.selection.main,l=t.prevMatch(e,i,i);if(!l)return!1;let o=at.single(l.from,l.to),a=n.state.facet(go);return n.dispatch({selection:o,effects:[x0(n,l),a.scrollToMatch(o.main,n)],userEvent:"select.search"}),lM(n),!0}),i_=bu((n,{query:t})=>{let e=t.matchAll(n.state,1e3);return!e||!e.length?!1:(n.dispatch({selection:at.create(e.map(i=>at.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),l_=({state:n,dispatch:t})=>{let e=n.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:i,to:l}=e.main,o=[],a=0;for(let c=new ro(n.doc,n.sliceDoc(i,l));!c.next().done;){if(o.length>1e3)return!1;c.value.from==i&&(a=o.length),o.push(at.range(c.value.from,c.value.to))}return t(n.update({selection:at.create(o,a),userEvent:"select.search.matches"})),!0},lS=bu((n,{query:t})=>{let{state:e}=n,{from:i,to:l}=e.selection.main;if(e.readOnly)return!1;let o=t.nextMatch(e,i,i);if(!o)return!1;let a=o,c=[],f,d,m=[];a.from==i&&a.to==l&&(d=e.toText(t.getReplacement(a)),c.push({from:a.from,to:a.to,insert:d}),a=t.nextMatch(e,a.from,a.to),m.push(ht.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(i).number)+".")));let p=n.state.changes(c);return a&&(f=at.single(a.from,a.to).map(p),m.push(x0(n,a)),m.push(e.facet(go).scrollToMatch(f.main,n))),n.dispatch({changes:p,selection:f,effects:m,userEvent:"input.replace"}),!0}),s_=bu((n,{query:t})=>{if(n.state.readOnly)return!1;let e=t.matchAll(n.state,1e9).map(l=>{let{from:o,to:a}=l;return{from:o,to:a,insert:t.getReplacement(l)}});if(!e.length)return!1;let i=n.state.phrase("replaced $ matches",e.length)+".";return n.dispatch({changes:e,effects:ht.announce.of(i),userEvent:"input.replace.all"}),!0});function v0(n){return n.state.facet(go).createPanel(n)}function Cp(n,t){var e,i,l,o,a;let c=n.selection.main,f=c.empty||c.to>c.from+100?"":n.sliceDoc(c.from,c.to);if(t&&!f)return t;let d=n.facet(go);return new eM({search:((e=t==null?void 0:t.literal)!==null&&e!==void 0?e:d.literal)?f:f.replace(/\n/g,"\\n"),caseSensitive:(i=t==null?void 0:t.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(l=t==null?void 0:t.literal)!==null&&l!==void 0?l:d.literal,regexp:(o=t==null?void 0:t.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(a=t==null?void 0:t.wholeWord)!==null&&a!==void 0?a:d.wholeWord})}function iM(n){let t=ja(n,v0);return t&&t.dom.querySelector("[main-field]")}function lM(n){let t=iM(n);t&&t==n.root.activeElement&&t.select()}const sM=n=>{let t=n.state.field(Jl,!1);if(t&&t.panel){let e=iM(n);if(e&&e!=n.root.activeElement){let i=Cp(n.state,t.query.spec);i.valid&&n.dispatch({effects:Wa.of(i)}),e.focus(),e.select()}}else n.dispatch({effects:[b0.of(!0),t?Wa.of(Cp(n.state,t.query.spec)):Et.appendConfig.of(u_)]});return!0},rM=n=>{let t=n.state.field(Jl,!1);if(!t||!t.panel)return!1;let e=ja(n,v0);return e&&e.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:b0.of(!1)}),!0},r_=[{key:"Mod-f",run:sM,scope:"editor search-panel"},{key:"F3",run:Qf,shift:Jf,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Qf,shift:Jf,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:rM,scope:"editor search-panel"},{key:"Mod-Shift-l",run:l_},{key:"Mod-Alt-g",run:HN},{key:"Mod-d",run:ZN,preventDefault:!0}];class o_{constructor(t){this.view=t;let e=this.query=t.state.field(Jl).query.spec;this.commit=this.commit.bind(this),this.searchField=Zt("input",{value:e.search,placeholder:Dn(t,"Find"),"aria-label":Dn(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Zt("input",{value:e.replace,placeholder:Dn(t,"Replace"),"aria-label":Dn(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Zt("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Zt("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Zt("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit});function i(l,o,a){return Zt("button",{class:"cm-button",name:l,onclick:o,type:"button"},a)}this.dom=Zt("div",{onkeydown:l=>this.keydown(l),class:"cm-search"},[this.searchField,i("next",()=>Qf(t),[Dn(t,"next")]),i("prev",()=>Jf(t),[Dn(t,"previous")]),i("select",()=>i_(t),[Dn(t,"all")]),Zt("label",null,[this.caseField,Dn(t,"match case")]),Zt("label",null,[this.reField,Dn(t,"regexp")]),Zt("label",null,[this.wordField,Dn(t,"by word")]),...t.state.readOnly?[]:[Zt("br"),this.replaceField,i("replace",()=>lS(t),[Dn(t,"replace")]),i("replaceAll",()=>s_(t),[Dn(t,"replace all")])],Zt("button",{name:"close",onclick:()=>rM(t),"aria-label":Dn(t,"close"),type:"button"},["×"])])}commit(){let t=new eM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Wa.of(t)}))}keydown(t){hO(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Jf:Qf)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),lS(this.view))}update(t){for(let e of t.transactions)for(let i of e.effects)i.is(Wa)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(go).top}}function Dn(n,t){return n.state.phrase(t)}const rf=30,of=/[\s\.,:;?!]/;function x0(n,{from:t,to:e}){let i=n.state.doc.lineAt(t),l=n.state.doc.lineAt(e).to,o=Math.max(i.from,t-rf),a=Math.min(l,e+rf),c=n.state.sliceDoc(o,a);if(o!=i.from){for(let f=0;f<rf;f++)if(!of.test(c[f+1])&&of.test(c[f])){c=c.slice(f);break}}if(a!=l){for(let f=c.length-1;f>c.length-rf;f--)if(!of.test(c[f-1])&&of.test(c[f])){c=c.slice(0,f);break}}return ht.announce.of(`${n.state.phrase("current match")}. ${c} ${n.state.phrase("on line")} ${i.number}.`)}const a_=ht.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),u_=[Jl,Zs.low(n_),a_];class oM{constructor(t,e,i,l){this.state=t,this.pos=e,this.explicit=i,this.view=l,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=Qe(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),i=Math.max(e.from,this.pos-250),l=e.text.slice(i-e.from,this.pos-e.from),o=l.search(aM(t,!1));return o<0?null:{from:i+o,to:this.pos,text:l.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(t,e,i){t=="abort"&&this.abortListeners&&(this.abortListeners.push(e),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function sS(n){let t=Object.keys(n).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function c_(n){let t=Object.create(null),e=Object.create(null);for(let{label:l}of n){t[l[0]]=!0;for(let o=1;o<l.length;o++)e[l[o]]=!0}let i=sS(t)+sS(e)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function f_(n){let t=n.map(l=>typeof l=="string"?{label:l}:l),[e,i]=t.every(l=>/^\w+$/.test(l.label))?[/\w*$/,/\w+$/]:c_(t);return l=>{let o=l.matchBefore(i);return o||l.explicit?{from:o?o.from:l.pos,options:t,validFor:e}:null}}class rS{constructor(t,e,i,l){this.completion=t,this.source=e,this.match=i,this.score=l}}function Vs(n){return n.selection.main.from}function aM(n,t){var e;let{source:i}=n,l=t&&i[0]!="^",o=i[i.length-1]!="$";return!l&&!o?n:new RegExp(`${l?"^":""}(?:${i})${o?"$":""}`,(e=n.flags)!==null&&e!==void 0?e:n.ignoreCase?"i":"")}const uM=Bi.define();function h_(n,t,e,i){let{main:l}=n.selection,o=e-l.from,a=i-l.from;return Object.assign(Object.assign({},n.changeByRange(c=>{if(c!=l&&e!=i&&n.sliceDoc(c.from+o,c.from+a)!=n.sliceDoc(e,i))return{range:c};let f=n.toText(t);return{changes:{from:c.from+o,to:i==l.from?c.to:c.from+a,insert:f},range:at.cursor(c.from+o+f.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const oS=new WeakMap;function d_(n){if(!Array.isArray(n))return n;let t=oS.get(n);return t||oS.set(n,t=f_(n)),t}const th=Et.define(),Fa=Et.define();class m_{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let i=dn(t,e),l=Ei(i);this.chars.push(i);let o=t.slice(e,e+l),a=o.toUpperCase();this.folded.push(dn(a==o?o.toLowerCase():a,0)),e+=l}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:i,any:l,precise:o,byWord:a}=this;if(e.length==1){let O=dn(t,0),_=Ei(O),D=_==t.length?0:-100;if(O!=e[0])if(O==i[0])D+=-200;else return null;return this.ret(D,[0,_])}let c=t.indexOf(this.pattern);if(c==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let f=e.length,d=0;if(c<0){for(let O=0,_=Math.min(t.length,200);O<_&&d<f;){let D=dn(t,O);(D==e[d]||D==i[d])&&(l[d++]=O),O+=Ei(D)}if(d<f)return null}let m=0,p=0,b=!1,v=0,S=-1,w=-1,A=/[a-z]/.test(t),C=!0;for(let O=0,_=Math.min(t.length,200),D=0;O<_&&p<f;){let R=dn(t,O);c<0&&(m<f&&R==e[m]&&(o[m++]=O),v<f&&(R==e[v]||R==i[v]?(v==0&&(S=O),w=O+1,v++):v=0));let B,U=R<255?R>=48&&R<=57||R>=97&&R<=122?2:R>=65&&R<=90?1:0:(B=Xp(R))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!O||U==1&&A||D==0&&U!=0)&&(e[p]==R||i[p]==R&&(b=!0)?a[p++]=O:a.length&&(C=!1)),D=U,O+=Ei(R)}return p==f&&a[0]==0&&C?this.result(-100+(b?-200:0),a,t):v==f&&S==0?this.ret(-200-t.length+(w==t.length?0:-100),[0,w]):c>-1?this.ret(-700-t.length,[c,c+this.pattern.length]):v==f?this.ret(-900-t.length,[S,w]):p==f?this.result(-100+(b?-200:0)+-700+(C?0:-1100),a,t):e.length==2?null:this.result((l[0]?-700:0)+-200+-1100,l,t)}result(t,e,i){let l=[],o=0;for(let a of e){let c=a+(this.astral?Ei(dn(i,a)):1);o&&l[o-1]==a?l[o-1]=c:(l[o++]=a,l[o++]=c)}return this.ret(t-i.length,l)}}class g_{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),i=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,e.length],this.score=i+(t.length==this.pattern.length?0:-100),this)}}const Le=dt.define({combine(n){return fi(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:p_,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>i=>aS(t(i),e(i)),optionClass:(t,e)=>i=>aS(t(i),e(i)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function aS(n,t){return n?t?n+" "+t:n:t}function p_(n,t,e,i,l,o){let a=n.textDirection==ee.RTL,c=a,f=!1,d="top",m,p,b=t.left-l.left,v=l.right-t.right,S=i.right-i.left,w=i.bottom-i.top;if(c&&b<Math.min(S,v)?c=!1:!c&&v<Math.min(S,b)&&(c=!0),S<=(c?b:v))m=Math.max(l.top,Math.min(e.top,l.bottom-w))-t.top,p=Math.min(400,c?b:v);else{f=!0,p=Math.min(400,(a?t.right:l.right-t.left)-30);let O=l.bottom-t.bottom;O>=w||O>t.top?m=e.bottom-t.top:(d="bottom",m=t.bottom-e.top)}let A=(t.bottom-t.top)/o.offsetHeight,C=(t.right-t.left)/o.offsetWidth;return{style:`${d}: ${m/A}px; max-width: ${p/C}px`,class:"cm-completionInfo-"+(f?a?"left-narrow":"right-narrow":c?"left":"right")}}function y_(n){let t=n.addToOptions.slice();return n.icons&&t.push({render(e){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),e.type&&i.classList.add(...e.type.split(/\s+/g).map(l=>"cm-completionIcon-"+l)),i.setAttribute("aria-hidden","true"),i},position:20}),t.push({render(e,i,l,o){let a=document.createElement("span");a.className="cm-completionLabel";let c=e.displayLabel||e.label,f=0;for(let d=0;d<o.length;){let m=o[d++],p=o[d++];m>f&&a.appendChild(document.createTextNode(c.slice(f,m)));let b=a.appendChild(document.createElement("span"));b.appendChild(document.createTextNode(c.slice(m,p))),b.className="cm-completionMatchedText",f=p}return f<c.length&&a.appendChild(document.createTextNode(c.slice(f))),a},position:50},{render(e){if(!e.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=e.detail,i},position:80}),t.sort((e,i)=>e.position-i.position).map(e=>e.render)}function mg(n,t,e){if(n<=e)return{from:0,to:n};if(t<0&&(t=0),t<=n>>1){let l=Math.floor(t/e);return{from:l*e,to:(l+1)*e}}let i=Math.floor((n-t)/e);return{from:n-(i+1)*e,to:n-i*e}}class b_{constructor(t,e,i){this.view=t,this.stateField=e,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:f=>this.placeInfo(f),key:this},this.space=null,this.currentClass="";let l=t.state.field(e),{options:o,selected:a}=l.open,c=t.state.facet(Le);this.optionContent=y_(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=mg(o.length,a,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",f=>{let{options:d}=t.state.field(e).open;for(let m=f.target,p;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(p=/-(\d+)$/.exec(m.id))&&+p[1]<d.length){this.applyCompletion(t,d[+p[1]]),f.preventDefault();return}}),this.dom.addEventListener("focusout",f=>{let d=t.state.field(this.stateField,!1);d&&d.tooltip&&t.state.facet(Le).closeOnBlur&&f.relatedTarget!=t.contentDOM&&t.dispatch({effects:Fa.of(null)})}),this.showOptions(o,l.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var e;let i=t.state.field(this.stateField),l=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),i!=l){let{options:o,selected:a,disabled:c}=i.open;(!l.open||l.open.options!=o)&&(this.range=mg(o.length,a,t.state.facet(Le).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),c!=((e=l.open)===null||e===void 0?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of e.split(" "))i&&this.dom.classList.add(i);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=mg(e.options.length,e.selected,this.view.state.facet(Le).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:i}=e.options[e.selected],{info:l}=i;if(!l)return;let o=typeof l=="string"?document.createTextNode(l):l(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(a,i)}).catch(a=>pn(this.view.state,a,"completion info")):this.addInfoPane(o,i)}}addInfoPane(t,e){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",t.nodeType!=null)i.appendChild(t),this.infoDestroy=null;else{let{dom:l,destroy:o}=t;i.appendChild(l),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let i=this.list.firstChild,l=this.range.from;i;i=i.nextSibling,l++)i.nodeName!="LI"||!i.id?l--:l==t?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),e=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return e&&x_(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),l=t.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return l.top>Math.min(o.bottom,e.bottom)-10||l.bottom<Math.max(o.top,e.top)+10?null:this.view.state.facet(Le).positionInfo(this.view,e,l,i,o,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,i){const l=document.createElement("ul");l.id=e,l.setAttribute("role","listbox"),l.setAttribute("aria-expanded","true"),l.setAttribute("aria-label",this.view.state.phrase("Completions")),l.addEventListener("mousedown",a=>{a.target==l&&a.preventDefault()});let o=null;for(let a=i.from;a<i.to;a++){let{completion:c,match:f}=t[a],{section:d}=c;if(d){let b=typeof d=="string"?d:d.name;if(b!=o&&(a>i.from||i.from==0))if(o=b,typeof d!="string"&&d.header)l.appendChild(d.header(d));else{let v=l.appendChild(document.createElement("completion-section"));v.textContent=b}}const m=l.appendChild(document.createElement("li"));m.id=e+"-"+a,m.setAttribute("role","option");let p=this.optionClass(c);p&&(m.className=p);for(let b of this.optionContent){let v=b(c,this.view.state,this.view,f);v&&m.appendChild(v)}}return i.from&&l.classList.add("cm-completionListIncompleteTop"),i.to<t.length&&l.classList.add("cm-completionListIncompleteBottom"),l}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function v_(n,t){return e=>new b_(e,n,t)}function x_(n,t){let e=n.getBoundingClientRect(),i=t.getBoundingClientRect(),l=e.height/n.offsetHeight;i.top<e.top?n.scrollTop-=(e.top-i.top)/l:i.bottom>e.bottom&&(n.scrollTop+=(i.bottom-e.bottom)/l)}function uS(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function S_(n,t){let e=[],i=null,l=d=>{e.push(d);let{section:m}=d.completion;if(m){i||(i=[]);let p=typeof m=="string"?m:m.name;i.some(b=>b.name==p)||i.push(typeof m=="string"?{name:p}:m)}},o=t.facet(Le);for(let d of n)if(d.hasResult()){let m=d.result.getMatch;if(d.result.filter===!1)for(let p of d.result.options)l(new rS(p,d.source,m?m(p):[],1e9-e.length));else{let p=t.sliceDoc(d.from,d.to),b,v=o.filterStrict?new g_(p):new m_(p);for(let S of d.result.options)if(b=v.match(S.label)){let w=S.displayLabel?m?m(S,b.matched):[]:b.matched;l(new rS(S,d.source,w,b.score+(S.boost||0)))}}}if(i){let d=Object.create(null),m=0,p=(b,v)=>{var S,w;return((S=b.rank)!==null&&S!==void 0?S:1e9)-((w=v.rank)!==null&&w!==void 0?w:1e9)||(b.name<v.name?-1:1)};for(let b of i.sort(p))m-=1e5,d[b.name]=m;for(let b of e){let{section:v}=b.completion;v&&(b.score+=d[typeof v=="string"?v:v.name])}}let a=[],c=null,f=o.compareCompletions;for(let d of e.sort((m,p)=>p.score-m.score||f(m.completion,p.completion))){let m=d.completion;!c||c.label!=m.label||c.detail!=m.detail||c.type!=null&&m.type!=null&&c.type!=m.type||c.apply!=m.apply||c.boost!=m.boost?a.push(d):uS(d.completion)>uS(c)&&(a[a.length-1]=d),c=d.completion}return a}class Pr{constructor(t,e,i,l,o,a){this.options=t,this.attrs=e,this.tooltip=i,this.timestamp=l,this.selected=o,this.disabled=a}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new Pr(this.options,cS(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,i,l,o,a){if(l&&!a&&t.some(d=>d.isPending))return l.setDisabled();let c=S_(t,e);if(!c.length)return l&&t.some(d=>d.isPending)?l.setDisabled():null;let f=e.facet(Le).selectOnOpen?0:-1;if(l&&l.selected!=f&&l.selected!=-1){let d=l.options[l.selected].completion;for(let m=0;m<c.length;m++)if(c[m].completion==d){f=m;break}}return new Pr(c,cS(i,f),{pos:t.reduce((d,m)=>m.hasResult()?Math.min(d,m.from):d,1e8),create:k_,above:o.aboveCursor},l?l.timestamp:Date.now(),f,!1)}map(t){return new Pr(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Pr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class eh{constructor(t,e,i){this.active=t,this.id=e,this.open=i}static start(){return new eh(C_,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,i=e.facet(Le),o=(i.override||e.languageDataAt("autocomplete",Vs(e)).map(d_)).map(f=>(this.active.find(m=>m.source==f)||new In(f,this.active.some(m=>m.state!=0)?1:0)).update(t,i));o.length==this.active.length&&o.every((f,d)=>f==this.active[d])&&(o=this.active);let a=this.open,c=t.effects.some(f=>f.is(S0));a&&t.docChanged&&(a=a.map(t.changes)),t.selection||o.some(f=>f.hasResult()&&t.changes.touchesRange(f.from,f.to))||!w_(o,this.active)||c?a=Pr.build(o,e,this.id,a,i,c):a&&a.disabled&&!o.some(f=>f.isPending)&&(a=null),!a&&o.every(f=>!f.isPending)&&o.some(f=>f.hasResult())&&(o=o.map(f=>f.hasResult()?new In(f.source,0):f));for(let f of t.effects)f.is(fM)&&(a=a&&a.setSelected(f.value,this.id));return o==this.active&&a==this.open?this:new eh(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?A_:M_}}function w_(n,t){if(n==t)return!0;for(let e=0,i=0;;){for(;e<n.length&&!n[e].hasResult();)e++;for(;i<t.length&&!t[i].hasResult();)i++;let l=e==n.length,o=i==t.length;if(l||o)return l==o;if(n[e++].result!=t[i++].result)return!1}}const A_={"aria-autocomplete":"list"},M_={};function cS(n,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return t>-1&&(e["aria-activedescendant"]=n+"-"+t),e}const C_=[];function cM(n,t){if(n.isUserEvent("input.complete")){let i=n.annotation(uM);if(i&&t.activateOnCompletion(i))return 12}let e=n.isUserEvent("input.type");return e&&t.activateOnTyping?5:e?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class In{constructor(t,e,i=!1){this.source=t,this.state=e,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(t,e){let i=cM(t,e),l=this;(i&8||i&16&&this.touches(t))&&(l=new In(l.source,0)),i&4&&l.state==0&&(l=new In(this.source,1)),l=l.updateFor(t,i);for(let o of t.effects)if(o.is(th))l=new In(l.source,1,o.value);else if(o.is(Fa))l=new In(l.source,0);else if(o.is(S0))for(let a of o.value)a.source==l.source&&(l=a);return l}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(Vs(t.state))}}class Zr extends In{constructor(t,e,i,l,o,a){super(t,3,e),this.limit=i,this.result=l,this.from=o,this.to=a}hasResult(){return!0}updateFor(t,e){var i;if(!(e&3))return this.map(t.changes);let l=this.result;l.map&&!t.changes.empty&&(l=l.map(l,t.changes));let o=t.changes.mapPos(this.from),a=t.changes.mapPos(this.to,1),c=Vs(t.state);if(c>a||!l||e&2&&(Vs(t.startState)==this.from||c<this.limit))return new In(this.source,e&4?1:0);let f=t.changes.mapPos(this.limit);return E_(l.validFor,t.state,o,a)?new Zr(this.source,this.explicit,f,l,o,a):l.update&&(l=l.update(l,o,a,new oM(t.state,c,!1)))?new Zr(this.source,this.explicit,f,l,l.from,(i=l.to)!==null&&i!==void 0?i:Vs(t.state)):new In(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new Zr(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new In(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function E_(n,t,e,i){if(!n)return!1;let l=t.sliceDoc(e,i);return typeof n=="function"?n(l,e,i,t):aM(n,!0).test(l)}const S0=Et.define({map(n,t){return n.map(e=>e.map(t))}}),fM=Et.define(),gn=Te.define({create(){return eh.start()},update(n,t){return n.update(t)},provide:n=>[mh.from(n,t=>t.tooltip),ht.contentAttributes.from(n,t=>t.attrs)]});function w0(n,t){const e=t.completion.apply||t.completion.label;let i=n.state.field(gn).active.find(l=>l.source==t.source);return i instanceof Zr?(typeof e=="string"?n.dispatch(Object.assign(Object.assign({},h_(n.state,e,i.from,i.to)),{annotations:uM.of(t.completion)})):e(n,t.completion,i.from,i.to),!0):!1}const k_=v_(gn,w0);function af(n,t="option"){return e=>{let i=e.state.field(gn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<e.state.facet(Le).interactionDelay)return!1;let l=1,o;t=="page"&&(o=Y2(e,i.open.tooltip))&&(l=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,c=i.open.selected>-1?i.open.selected+l*(n?1:-1):n?0:a-1;return c<0?c=t=="page"?0:a-1:c>=a&&(c=t=="page"?a-1:0),e.dispatch({effects:fM.of(c)}),!0}}const T_=n=>{let t=n.state.field(gn,!1);return n.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<n.state.facet(Le).interactionDelay?!1:w0(n,t.open.options[t.open.selected])},fS=n=>n.state.field(gn,!1)?(n.dispatch({effects:th.of(!0)}),!0):!1,D_=n=>{let t=n.state.field(gn,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(n.dispatch({effects:Fa.of(null)}),!0)};class O_{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const R_=50,N_=1e3,__=pe.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of n.state.field(gn).active)t.isPending&&this.startQuery(t)}update(n){let t=n.state.field(gn),e=n.state.facet(Le);if(!n.selectionSet&&!n.docChanged&&n.startState.field(gn)==t)return;let i=n.transactions.some(o=>{let a=cM(o,e);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(i||a.context.abortOnDocChange&&n.docChanged||a.updates.length+n.transactions.length>R_&&Date.now()-a.time>N_){for(let c of a.context.abortListeners)try{c()}catch(f){pn(this.view.state,f)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(a=>a.is(th)))&&(this.pendingStart=!0);let l=this.pendingStart?50:e.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(o=>o.isPending&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),l):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,t=n.field(gn);for(let e of t.active)e.isPending&&!this.running.some(i=>i.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Le).updateSyncTime))}startQuery(n){let{state:t}=this.view,e=Vs(t),i=new oM(t,e,n.explicit,this.view),l=new O_(n,i);this.running.push(l),Promise.resolve(n.source(i)).then(o=>{l.context.aborted||(l.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Fa.of(null)}),pn(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Le).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(Le),i=this.view.state.field(gn);for(let l=0;l<this.running.length;l++){let o=this.running[l];if(o.done===void 0)continue;if(this.running.splice(l--,1),o.done){let c=Vs(o.updates.length?o.updates[0].startState:this.view.state),f=Math.min(c,o.done.from+(o.active.explicit?0:1)),d=new Zr(o.active.source,o.active.explicit,f,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:c);for(let m of o.updates)d=d.update(m,e);if(d.hasResult()){t.push(d);continue}}let a=i.active.find(c=>c.source==o.active.source);if(a&&a.isPending)if(o.done==null){let c=new In(o.active.source,0);for(let f of o.updates)c=c.update(f,e);c.isPending||t.push(c)}else this.startQuery(a)}(t.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:S0.of(t)})}},{eventHandlers:{blur(n){let t=this.view.state.field(gn,!1);if(t&&t.tooltip&&this.view.state.facet(Le).closeOnBlur){let e=t.open&&Y2(this.view,t.open.tooltip);(!e||!e.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Fa.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:th.of(!1)}),20),this.composing=0}}}),B_=typeof navigator=="object"&&/Win/.test(navigator.platform),z_=Zs.highest(ht.domEventHandlers({keydown(n,t){let e=t.state.field(gn,!1);if(!e||!e.open||e.open.disabled||e.open.selected<0||n.key.length>1||n.ctrlKey&&!(B_&&n.altKey)||n.metaKey)return!1;let i=e.open.options[e.open.selected],l=e.active.find(a=>a.source==i.source),o=i.completion.commitCharacters||l.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&w0(t,i),!1}})),L_=ht.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Qa={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Bs=Et.define({map(n,t){let e=t.mapPos(n,-1,sn.TrackAfter);return e??void 0}}),A0=new class extends Ys{};A0.startSide=1;A0.endSide=-1;const hM=Te.define({create(){return Vt.empty},update(n,t){if(n=n.map(t.changes),t.selection){let e=t.state.doc.lineAt(t.selection.main.head);n=n.update({filter:i=>i>=e.from&&i<=e.to})}for(let e of t.effects)e.is(Bs)&&(n=n.update({add:[A0.range(e.value,e.value+1)]}));return n}});function H_(){return[U_,hM]}const gg="()[]{}<>«»»«［］｛｝";function dM(n){for(let t=0;t<gg.length;t+=2)if(gg.charCodeAt(t)==n)return gg.charAt(t+1);return Xp(n<128?n:n+1)}function mM(n,t){return n.languageDataAt("closeBrackets",t)[0]||Qa}const V_=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),U_=ht.inputHandler.of((n,t,e,i)=>{if((V_?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let l=n.state.selection.main;if(i.length>2||i.length==2&&Ei(dn(i,0))==1||t!=l.from||e!=l.to)return!1;let o=G_(n.state,i);return o?(n.dispatch(o),!0):!1}),q_=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let i=mM(n,n.selection.main.head).brackets||Qa.brackets,l=null,o=n.changeByRange(a=>{if(a.empty){let c=P_(n.doc,a.head);for(let f of i)if(f==c&&Ah(n.doc,a.head)==dM(dn(f,0)))return{changes:{from:a.head-f.length,to:a.head+f.length},range:at.cursor(a.head-f.length)}}return{range:l=a}});return l||t(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!l},Y_=[{key:"Backspace",run:q_}];function G_(n,t){let e=mM(n,n.selection.main.head),i=e.brackets||Qa.brackets;for(let l of i){let o=dM(dn(l,0));if(t==l)return o==l?$_(n,l,i.indexOf(l+l+l)>-1,e):X_(n,l,o,e.before||Qa.before);if(t==o&&gM(n,n.selection.main.from))return j_(n,l,o)}return null}function gM(n,t){let e=!1;return n.field(hM).between(0,n.doc.length,i=>{i==t&&(e=!0)}),e}function Ah(n,t){let e=n.sliceString(t,t+2);return e.slice(0,Ei(dn(e,0)))}function P_(n,t){let e=n.sliceString(t-2,t);return Ei(dn(e,0))==e.length?e:e.slice(1)}function X_(n,t,e,i){let l=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:t,from:a.from},{insert:e,from:a.to}],effects:Bs.of(a.to+t.length),range:at.range(a.anchor+t.length,a.head+t.length)};let c=Ah(n.doc,a.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:t+e,from:a.head},effects:Bs.of(a.head+t.length),range:at.cursor(a.head+t.length)}:{range:l=a}});return l?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function j_(n,t,e){let i=null,l=n.changeByRange(o=>o.empty&&Ah(n.doc,o.head)==e?{changes:{from:o.head,to:o.head+e.length,insert:e},range:at.cursor(o.head+e.length)}:i={range:o});return i?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function $_(n,t,e,i){let l=i.stringPrefixes||Qa.stringPrefixes,o=null,a=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:t,from:c.from},{insert:t,from:c.to}],effects:Bs.of(c.to+t.length),range:at.range(c.anchor+t.length,c.head+t.length)};let f=c.head,d=Ah(n.doc,f),m;if(d==t){if(hS(n,f))return{changes:{insert:t+t,from:f},effects:Bs.of(f+t.length),range:at.cursor(f+t.length)};if(gM(n,f)){let b=e&&n.sliceDoc(f,f+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:f,to:f+b.length,insert:b},range:at.cursor(f+b.length)}}}else{if(e&&n.sliceDoc(f-2*t.length,f)==t+t&&(m=dS(n,f-2*t.length,l))>-1&&hS(n,m))return{changes:{insert:t+t+t+t,from:f},effects:Bs.of(f+t.length),range:at.cursor(f+t.length)};if(n.charCategorizer(f)(d)!=ie.Word&&dS(n,f,l)>-1&&!K_(n,f,t,l))return{changes:{insert:t+t,from:f},effects:Bs.of(f+t.length),range:at.cursor(f+t.length)}}return{range:o=c}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function hS(n,t){let e=Qe(n).resolveInner(t+1);return e.parent&&e.from==t}function K_(n,t,e,i){let l=Qe(n).resolveInner(t,-1),o=i.reduce((a,c)=>Math.max(a,c.length),0);for(let a=0;a<5;a++){let c=n.sliceDoc(l.from,Math.min(l.to,l.from+e.length+o)),f=c.indexOf(e);if(!f||f>-1&&i.indexOf(c.slice(0,f))>-1){let m=l.firstChild;for(;m&&m.from==l.from&&m.to-m.from>e.length+f;){if(n.sliceDoc(m.to-e.length,m.to)==e)return!1;m=m.firstChild}return!0}let d=l.to==t&&l.parent;if(!d)break;l=d}return!1}function dS(n,t,e){let i=n.charCategorizer(t);if(i(n.sliceDoc(t-1,t))!=ie.Word)return t;for(let l of e){let o=t-l.length;if(n.sliceDoc(o,t)==l&&i(n.sliceDoc(o-1,o))!=ie.Word)return o}return-1}function pM(n={}){return[z_,gn,Le.of(n),__,I_,L_]}const yM=[{key:"Ctrl-Space",run:fS},{mac:"Alt-`",run:fS},{key:"Escape",run:D_},{key:"ArrowDown",run:af(!0)},{key:"ArrowUp",run:af(!1)},{key:"PageDown",run:af(!0,"page")},{key:"PageUp",run:af(!1,"page")},{key:"Enter",run:T_}],I_=Zs.highest(du.computeN([Le],n=>n.facet(Le).defaultKeymap?[yM]:[]));class mS{constructor(t,e,i){this.from=t,this.to=e,this.diagnostic=i}}class Ns{constructor(t,e,i){this.diagnostics=t,this.panel=e,this.selected=i}static init(t,e,i){let l=i.facet(Ja).markerFilter;l&&(t=l(t,i));let o=t.slice().sort((m,p)=>m.from-p.from||m.to-p.to),a=new rl,c=[],f=0;for(let m=0;;){let p=m==o.length?null:o[m];if(!p&&!c.length)break;let b,v;for(c.length?(b=f,v=c.reduce((w,A)=>Math.min(w,A.to),p&&p.from>b?p.from:1e8)):(b=p.from,v=p.to,c.push(p),m++);m<o.length;){let w=o[m];if(w.from==b&&(w.to>w.from||w.to==b))c.push(w),m++,v=Math.min(w.to,v);else{v=Math.min(w.from,v);break}}let S=AM(c);if(c.some(w=>w.from==w.to||w.from==w.to-1&&i.doc.lineAt(w.from).to==w.from))a.add(b,b,xt.widget({widget:new e4(S),diagnostics:c.slice()}));else{let w=c.reduce((A,C)=>C.markClass?A+" "+C.markClass:A,"");a.add(b,v,xt.mark({class:"cm-lintRange cm-lintRange-"+S+w,diagnostics:c.slice(),inclusiveEnd:c.some(A=>A.to>v)}))}f=v;for(let w=0;w<c.length;w++)c[w].to<=f&&c.splice(w--,1)}let d=a.finish();return new Ns(d,e,oo(d))}}function oo(n,t=null,e=0){let i=null;return n.between(e,1e9,(l,o,{spec:a})=>{if(!(t&&a.diagnostics.indexOf(t)<0))if(!i)i=new mS(l,o,t||a.diagnostics[0]);else{if(a.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new mS(i.from,o,i.diagnostic)}}),i}function bM(n,t){let e=t.pos,i=t.end||e,l=n.state.facet(Ja).hideOn(n,e,i);if(l!=null)return l;let o=n.startState.doc.lineAt(t.pos);return!!(n.effects.some(a=>a.is(M0))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function Z_(n,t){return n.field(Rn,!1)?t:t.concat(Et.appendConfig.of(u4))}const M0=Et.define(),C0=Et.define(),vM=Et.define(),Rn=Te.define({create(){return new Ns(xt.none,null,null)},update(n,t){if(t.docChanged&&n.diagnostics.size){let e=n.diagnostics.map(t.changes),i=null,l=n.panel;if(n.selected){let o=t.changes.mapPos(n.selected.from,1);i=oo(e,n.selected.diagnostic,o)||oo(e,null,o)}!e.size&&l&&t.state.facet(Ja).autoPanel&&(l=null),n=new Ns(e,l,i)}for(let e of t.effects)if(e.is(M0)){let i=t.state.facet(Ja).autoPanel?e.value.length?tu.open:null:n.panel;n=Ns.init(e.value,i,t.state)}else e.is(C0)?n=new Ns(n.diagnostics,e.value?tu.open:null,n.selected):e.is(vM)&&(n=new Ns(n.diagnostics,n.panel,e.value));return n},provide:n=>[$a.from(n,t=>t.panel),ht.decorations.from(n,t=>t.diagnostics)]}),W_=xt.mark({class:"cm-lintRange cm-lintRange-active"});function F_(n,t,e){let{diagnostics:i}=n.state.field(Rn),l,o=-1,a=-1;i.between(t-(e<0?1:0),t+(e>0?1:0),(f,d,{spec:m})=>{if(t>=f&&t<=d&&(f==d||(t>f||e>0)&&(t<d||e<0)))return l=m.diagnostics,o=f,a=d,!1});let c=n.state.facet(Ja).tooltipFilter;return l&&c&&(l=c(l,n.state)),l?{pos:o,end:a,above:n.state.doc.lineAt(o).to<a,create(){return{dom:xM(n,l)}}}:null}function xM(n,t){return Zt("ul",{class:"cm-tooltip-lint"},t.map(e=>wM(n,e,!1)))}const Q_=n=>{let t=n.state.field(Rn,!1);(!t||!t.panel)&&n.dispatch({effects:Z_(n.state,[C0.of(!0)])});let e=ja(n,tu.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},gS=n=>{let t=n.state.field(Rn,!1);return!t||!t.panel?!1:(n.dispatch({effects:C0.of(!1)}),!0)},J_=n=>{let t=n.state.field(Rn,!1);if(!t)return!1;let e=n.state.selection.main,i=t.diagnostics.iter(e.to+1);return!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==e.from&&i.to==e.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},t4=[{key:"Mod-Shift-m",run:Q_,preventDefault:!0},{key:"F8",run:J_}],Ja=dt.define({combine(n){return Object.assign({sources:n.map(t=>t.source).filter(t=>t!=null)},fi(n.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,e)=>t?e?i=>t(i)||e(i):t:e}))}});function SM(n){let t=[];if(n)t:for(let{name:e}of n){for(let i=0;i<e.length;i++){let l=e[i];if(/[a-zA-Z]/.test(l)&&!t.some(o=>o.toLowerCase()==l.toLowerCase())){t.push(l);continue t}}t.push("")}return t}function wM(n,t,e){var i;let l=e?SM(t.actions):[];return Zt("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Zt("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(n):t.message),(i=t.actions)===null||i===void 0?void 0:i.map((o,a)=>{let c=!1,f=b=>{if(b.preventDefault(),c)return;c=!0;let v=oo(n.state.field(Rn).diagnostics,t);v&&o.apply(n,v.from,v.to)},{name:d}=o,m=l[a]?d.indexOf(l[a]):-1,p=m<0?d:[d.slice(0,m),Zt("u",d.slice(m,m+1)),d.slice(m+1)];return Zt("button",{type:"button",class:"cm-diagnosticAction",onclick:f,onmousedown:f,"aria-label":` Action: ${d}${m<0?"":` (access key "${l[a]})"`}.`},p)}),t.source&&Zt("div",{class:"cm-diagnosticSource"},t.source))}class e4 extends cl{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return Zt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class pS{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=wM(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class tu{constructor(t){this.view=t,this.items=[];let e=l=>{if(l.keyCode==27)gS(this.view),this.view.focus();else if(l.keyCode==38||l.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(l.keyCode==40||l.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(l.keyCode==36)this.moveSelection(0);else if(l.keyCode==35)this.moveSelection(this.items.length-1);else if(l.keyCode==13)this.view.focus();else if(l.keyCode>=65&&l.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=SM(o.actions);for(let c=0;c<a.length;c++)if(a[c].toUpperCase().charCodeAt(0)==l.keyCode){let f=oo(this.view.state.field(Rn).diagnostics,o);f&&o.actions[c].apply(t,f.from,f.to)}}else return;l.preventDefault()},i=l=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(l.target)&&this.moveSelection(o)};this.list=Zt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:i}),this.dom=Zt("div",{class:"cm-panel-lint"},this.list,Zt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>gS(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(Rn).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(Rn),i=0,l=!1,o=null,a=new Set;for(t.between(0,this.view.state.doc.length,(c,f,{spec:d})=>{for(let m of d.diagnostics){if(a.has(m))continue;a.add(m);let p=-1,b;for(let v=i;v<this.items.length;v++)if(this.items[v].diagnostic==m){p=v;break}p<0?(b=new pS(this.view,m),this.items.splice(i,0,b),l=!0):(b=this.items[p],p>i&&(this.items.splice(i,p-i),l=!0)),e&&b.diagnostic==e.diagnostic?b.dom.hasAttribute("aria-selected")||(b.dom.setAttribute("aria-selected","true"),o=b):b.dom.hasAttribute("aria-selected")&&b.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)l=!0,this.items.pop();this.items.length==0&&(this.items.push(new pS(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),l=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:f})=>{let d=f.height/this.list.offsetHeight;c.top<f.top?this.list.scrollTop-=(f.top-c.top)/d:c.bottom>f.bottom&&(this.list.scrollTop+=(c.bottom-f.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),l&&this.sync()}sync(){let t=this.list.firstChild;function e(){let i=t;t=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)e();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(Rn),i=oo(e.diagnostics,this.items[t].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:vM.of(i)})}static open(t){return new tu(t)}}function Df(n,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(n)}</svg>')`}function uf(n){return Df(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const n4=ht.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:uf("#d11")},".cm-lintRange-warning":{backgroundImage:uf("orange")},".cm-lintRange-info":{backgroundImage:uf("#999")},".cm-lintRange-hint":{backgroundImage:uf("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function i4(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function AM(n){let t="hint",e=1;for(let i of n){let l=i4(i.severity);l>e&&(e=l,t=i.severity)}return t}class MM extends _i{constructor(t){super(),this.diagnostics=t,this.severity=AM(t)}toDOM(t){let e=document.createElement("div");e.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,l=t.state.facet(Mh).tooltipFilter;return l&&(i=l(i,t.state)),i.length&&(e.onmouseover=()=>s4(t,e,i)),e}}function l4(n,t){let e=i=>{let l=t.getBoundingClientRect();if(!(i.clientX>l.left-10&&i.clientX<l.right+10&&i.clientY>l.top-10&&i.clientY<l.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",e),n.state.field(CM)&&n.dispatch({effects:E0.of(null)})}};window.addEventListener("mousemove",e)}function s4(n,t,e){function i(){let a=n.elementAtHeight(t.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(a.from)&&n.dispatch({effects:E0.of({pos:a.from,above:!1,clip:!1,create(){return{dom:xM(n,e),getCoords:()=>t.getBoundingClientRect()}}})}),t.onmouseout=t.onmousemove=null,l4(n,t)}let{hoverTime:l}=n.state.facet(Mh),o=setTimeout(i,l);t.onmouseout=()=>{clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,l)}}function r4(n,t){let e=Object.create(null);for(let l of t){let o=n.lineAt(l.from);(e[o.from]||(e[o.from]=[])).push(l)}let i=[];for(let l in e)i.push(new MM(e[l]).range(+l));return Vt.of(i,!0)}const o4=P2({class:"cm-gutter-lint",markers:n=>n.state.field(Ep),widgetMarker:(n,t,e)=>{let i=[];return n.state.field(Ep).between(e.from,e.to,(l,o,a)=>{l>e.from&&l<e.to&&i.push(...a.diagnostics)}),i.length?new MM(i):null}}),Ep=Te.define({create(){return Vt.empty},update(n,t){n=n.map(t.changes);let e=t.state.facet(Mh).markerFilter;for(let i of t.effects)if(i.is(M0)){let l=i.value;e&&(l=e(l||[],t.state)),n=r4(t.state.doc,l.slice(0))}return n}}),E0=Et.define(),CM=Te.define({create(){return null},update(n,t){return n&&t.docChanged&&(n=bM(t,n)?null:Object.assign(Object.assign({},n),{pos:t.changes.mapPos(n.pos)})),t.effects.reduce((e,i)=>i.is(E0)?i.value:e,n)},provide:n=>mh.from(n)}),a4=ht.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Df('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Df('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Df('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),u4=[Rn,ht.decorations.compute([Rn],n=>{let{selected:t,panel:e}=n.field(Rn);return!t||!e||t.from==t.to?xt.none:xt.set([W_.range(t.from,t.to)])}),t3(F_,{hideOn:bM}),n4],Mh=dt.define({combine(n){return fi(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function c4(n={}){return[Mh.of(n),Ep,o4,a4,CM]}var yS=function(t){t===void 0&&(t={});var{crosshairCursor:e=!1}=t,i=[];t.closeBracketsKeymap!==!1&&(i=i.concat(Y_)),t.defaultKeymap!==!1&&(i=i.concat(FA)),t.searchKeymap!==!1&&(i=i.concat(r_)),t.historyKeymap!==!1&&(i=i.concat(XR)),t.foldKeymap!==!1&&(i=i.concat(tR)),t.completionKeymap!==!1&&(i=i.concat(yM)),t.lintKeymap!==!1&&(i=i.concat(t4));var l=[];return t.lineNumbers!==!1&&l.push(c3()),t.highlightActiveLineGutter!==!1&&l.push(d3()),t.highlightSpecialChars!==!1&&l.push(DO()),t.history!==!1&&l.push(zR()),t.foldGutter!==!1&&l.push(lR()),t.drawSelection!==!1&&l.push(bO()),t.dropCursor!==!1&&l.push(AO()),t.allowMultipleSelections!==!1&&l.push(Ht.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&l.push(X3()),t.syntaxHighlighting!==!1&&l.push(uA(aR,{fallback:!0})),t.bracketMatching!==!1&&l.push(gR()),t.closeBrackets!==!1&&l.push(H_()),t.autocompletion!==!1&&l.push(pM()),t.rectangularSelection!==!1&&l.push(PO()),e!==!1&&l.push($O()),t.highlightActiveLine!==!1&&l.push(zO()),t.highlightSelectionMatches!==!1&&l.push(YN()),t.tabSize&&typeof t.tabSize=="number"&&l.push(ph.of(" ".repeat(t.tabSize))),l.concat([du.of(i.flat())]).filter(Boolean)};const f4="#e5c07b",bS="#e06c75",h4="#56b6c2",d4="#ffffff",Of="#abb2bf",kp="#7d8799",m4="#61afef",g4="#98c379",vS="#d19a66",p4="#c678dd",y4="#21252b",xS="#2c313a",SS="#282c34",pg="#353a42",b4="#3E4451",wS="#528bff",v4=ht.theme({"&":{color:Of,backgroundColor:SS},".cm-content":{caretColor:wS},".cm-cursor, .cm-dropCursor":{borderLeftColor:wS},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:b4},".cm-panels":{backgroundColor:y4,color:Of},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:SS,color:kp,border:"none"},".cm-activeLineGutter":{backgroundColor:xS},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:pg},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:pg,borderBottomColor:pg},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:xS,color:Of}}},{dark:!0}),x4=pu.define([{tag:st.keyword,color:p4},{tag:[st.name,st.deleted,st.character,st.propertyName,st.macroName],color:bS},{tag:[st.function(st.variableName),st.labelName],color:m4},{tag:[st.color,st.constant(st.name),st.standard(st.name)],color:vS},{tag:[st.definition(st.name),st.separator],color:Of},{tag:[st.typeName,st.className,st.number,st.changed,st.annotation,st.modifier,st.self,st.namespace],color:f4},{tag:[st.operator,st.operatorKeyword,st.url,st.escape,st.regexp,st.link,st.special(st.string)],color:h4},{tag:[st.meta,st.comment],color:kp},{tag:st.strong,fontWeight:"bold"},{tag:st.emphasis,fontStyle:"italic"},{tag:st.strikethrough,textDecoration:"line-through"},{tag:st.link,color:kp,textDecoration:"underline"},{tag:st.heading,fontWeight:"bold",color:bS},{tag:[st.atom,st.bool,st.special(st.variableName)],color:vS},{tag:[st.processingInstruction,st.string,st.inserted],color:g4},{tag:st.invalid,color:d4}]),S4=[v4,uA(x4)];var w4=ht.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),A4=function(t){t===void 0&&(t={});var{indentWithTab:e=!0,editable:i=!0,readOnly:l=!1,theme:o="light",placeholder:a="",basicSetup:c=!0}=t,f=[];switch(e&&f.unshift(du.of([zN])),c&&(typeof c=="boolean"?f.unshift(yS()):f.unshift(yS(c))),a&&f.unshift(UO(a)),o){case"light":f.push(w4);break;case"dark":f.push(S4);break;case"none":break;default:f.push(o);break}return i===!1&&f.push(ht.editable.of(!1)),l&&f.push(Ht.readOnly.of(!0)),[...f]},M4=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(t=>n.state.sliceDoc(t.from,t.to)),selectedText:n.state.selection.ranges.some(t=>!t.empty)}),AS=Bi.define(),C4=[];function E4(n){var{value:t,selection:e,onChange:i,onStatistics:l,onCreateEditor:o,onUpdate:a,extensions:c=C4,autoFocus:f,theme:d="light",height:m=null,minHeight:p=null,maxHeight:b=null,width:v=null,minWidth:S=null,maxWidth:w=null,placeholder:A="",editable:C=!0,readOnly:O=!1,indentWithTab:_=!0,basicSetup:D=!0,root:R,initialState:B}=n,[U,Q]=I.useState(),[P,et]=I.useState(),[J,F]=I.useState(),nt=ht.theme({"&":{height:m,minHeight:p,maxHeight:b,width:v,minWidth:S,maxWidth:w},"& .cm-scroller":{height:"100% !important"}}),T=ht.updateListener.of(z=>{if(z.docChanged&&typeof i=="function"&&!z.transactions.some(E=>E.annotation(AS))){var j=z.state.doc,H=j.toString();i(H,z)}l&&l(M4(z))}),q=A4({theme:d,editable:C,readOnly:O,placeholder:A,indentWithTab:_,basicSetup:D}),k=[T,nt,...q];return a&&typeof a=="function"&&k.push(ht.updateListener.of(a)),k=k.concat(c),I.useLayoutEffect(()=>{if(U&&!J){var z={doc:t,selection:e,extensions:k},j=B?Ht.fromJSON(B.json,z,B.fields):Ht.create(z);if(F(j),!P){var H=new ht({state:j,parent:U,root:R});et(H),o&&o(H,j)}}return()=>{P&&(F(void 0),et(void 0))}},[U,J]),I.useEffect(()=>{n.container&&Q(n.container)},[n.container]),I.useEffect(()=>()=>{P&&(P.destroy(),et(void 0))},[P]),I.useEffect(()=>{f&&P&&P.focus()},[f,P]),I.useEffect(()=>{P&&P.dispatch({effects:Et.reconfigure.of(k)})},[d,c,m,p,b,v,S,w,A,C,O,_,D,i,a]),I.useEffect(()=>{if(t!==void 0){var z=P?P.state.doc.toString():"";P&&t!==z&&P.dispatch({changes:{from:0,to:z.length,insert:t||""},annotations:[AS.of(!0)]})}},[t,P]),{state:J,setState:F,view:P,setView:et,container:U,setContainer:Q}}var k4=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],EM=I.forwardRef((n,t)=>{var{className:e,value:i="",selection:l,extensions:o=[],onChange:a,onStatistics:c,onCreateEditor:f,onUpdate:d,autoFocus:m,theme:p="light",height:b,minHeight:v,maxHeight:S,width:w,minWidth:A,maxWidth:C,basicSetup:O,placeholder:_,indentWithTab:D,editable:R,readOnly:B,root:U,initialState:Q}=n,P=dT(n,k4),et=I.useRef(null),{state:J,view:F,container:nt,setContainer:T}=E4({root:U,value:i,autoFocus:m,theme:p,height:b,minHeight:v,maxHeight:S,width:w,minWidth:A,maxWidth:C,basicSetup:O,placeholder:_,indentWithTab:D,editable:R,readOnly:B,selection:l,onChange:a,onStatistics:c,onCreateEditor:f,onUpdate:d,extensions:o,initialState:Q});I.useImperativeHandle(t,()=>({editor:et.current,state:J,view:F}),[et,nt,J,F]);var q=I.useCallback(z=>{et.current=z,T(z)},[T]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var k=typeof p=="string"?"cm-theme-"+p:"cm-theme";return Ct.jsx("div",Rg({ref:q,className:""+k+(e?" "+e:"")},P))});EM.displayName="CodeMirror";const T4=f0.define({token(n){return n.match(/Table|Ref|Project|Enum/i)?"keyword":n.match(/".*?"/)?"string":n.match(/\/\/.*/)?"comment":n.match(/\d+/)?"number":(n.next(),null)}});function D4(n){const t={};let e="";const i=n.split(`
`);for(let l of i){l=l.trim();const o=l.match(/^Table\s+(\w+)/i);if(o){e=o[1],t[e]=[];continue}if(e){const a=l.match(/^(\w+)/);a&&t[e].push(a[1])}l==="}"&&(e="")}return t}function O4(n){return t=>{const e=t.matchBefore(/\w*/);if(!e||e.from===e.to&&!t.explicit)return null;const i=D4(n()),l=Object.keys(i).map(a=>({label:a,type:"class"})),o=Object.entries(i).flatMap(([a,c])=>c.map(f=>({label:f,type:"property",info:`Column of ${a}`})));return{from:e.from,options:[{label:"Table",type:"keyword"},{label:"Ref",type:"keyword"},{label:"Project",type:"keyword"},{label:"Enum",type:"keyword"},...l,...o]}}}const R4=()=>{const[n,t]=I.useState(!0),[e,i]=I.useState("");return Ct.jsxs("div",{style:{display:"flex",alignItems:"stretch",height:"100vh",width:"100%"},children:[Ct.jsx("div",{style:{width:n?"400px":"0px",transition:"width 0.3s ease",overflow:"hidden",background:"#1e1e1e"},children:Ct.jsx(EM,{value:"",height:"100%",width:"100%",extensions:[T4,pM({override:[O4(()=>e)]}),c4(),du.of(FA)],theme:"dark",onChange:l=>i(l)})}),Ct.jsx("div",{style:{display:"flex",alignItems:"center",background:"#333",padding:"4px"},children:Ct.jsx("button",{onClick:()=>t(l=>!l),style:{background:"none",border:"none",color:"#fff",fontSize:"18px",cursor:"pointer",padding:"4px"},title:n?"Slide Left (Hide Editor)":"Slide Right (Show Editor)",children:n?"⮜":"⮞"})})]})};function je(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=je(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var yg={exports:{}},bg={},vg={exports:{}},xg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function N4(){if(MS)return xg;MS=1;var n=uu();function t(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,l=n.useEffect,o=n.useLayoutEffect,a=n.useDebugValue;function c(p,b){var v=b(),S=i({inst:{value:v,getSnapshot:b}}),w=S[0].inst,A=S[1];return o(function(){w.value=v,w.getSnapshot=b,f(w)&&A({inst:w})},[p,v,b]),l(function(){return f(w)&&A({inst:w}),p(function(){f(w)&&A({inst:w})})},[p]),a(v),v}function f(p){var b=p.getSnapshot;p=p.value;try{var v=b();return!e(p,v)}catch{return!0}}function d(p,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return xg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,xg}var CS;function _4(){return CS||(CS=1,vg.exports=N4()),vg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function B4(){if(ES)return bg;ES=1;var n=uu(),t=_4();function e(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var i=typeof Object.is=="function"?Object.is:e,l=t.useSyncExternalStore,o=n.useRef,a=n.useEffect,c=n.useMemo,f=n.useDebugValue;return bg.useSyncExternalStoreWithSelector=function(d,m,p,b,v){var S=o(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=c(function(){function C(B){if(!O){if(O=!0,_=B,B=b(B),v!==void 0&&w.hasValue){var U=w.value;if(v(U,B))return D=U}return D=B}if(U=D,i(_,B))return U;var Q=b(B);return v!==void 0&&v(U,Q)?(_=B,U):(_=B,D=Q)}var O=!1,_,D,R=p===void 0?null:p;return[function(){return C(m())},R===null?void 0:function(){return C(R())}]},[m,p,b,v]);var A=l(d,S[0],S[1]);return a(function(){w.hasValue=!0,w.value=A},[A]),f(A),A},bg}var kS;function z4(){return kS||(kS=1,yg.exports=B4()),yg.exports}var L4=z4();const H4=yw(L4),V4={},TS=n=>{let t;const e=new Set,i=(m,p)=>{const b=typeof m=="function"?m(t):m;if(!Object.is(b,t)){const v=t;t=p??(typeof b!="object"||b===null)?b:Object.assign({},t,b),e.forEach(S=>S(t,v))}},l=()=>t,f={setState:i,getState:l,getInitialState:()=>d,subscribe:m=>(e.add(m),()=>e.delete(m)),destroy:()=>{(V4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},d=t=n(i,l,f);return f},U4=n=>n?TS(n):TS,{useDebugValue:q4}=tt,{useSyncExternalStoreWithSelector:Y4}=H4,G4=n=>n;function kM(n,t=G4,e){const i=Y4(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return q4(i),i}const DS=(n,t)=>{const e=U4(n),i=(l,o=t)=>kM(e,l,o);return Object.assign(i,e),i},P4=(n,t)=>n?DS(n,t):DS;function He(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,l]of n)if(!Object.is(l,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}var X4={value:()=>{}};function Ch(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Rf(e)}function Rf(n){this._=n}function j4(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",l=e.indexOf(".");if(l>=0&&(i=e.slice(l+1),e=e.slice(0,l)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Rf.prototype=Ch.prototype={constructor:Rf,on:function(n,t){var e=this._,i=j4(n+"",e),l,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((l=(n=i[o]).type)&&(l=$4(e[l],n.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(l=(n=i[o]).type)e[l]=OS(e[l],n.name,t);else if(t==null)for(l in e)e[l]=OS(e[l],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Rf(n)},call:function(n,t){if((l=arguments.length-2)>0)for(var e=new Array(l),i=0,l,o;i<l;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,l=o.length;i<l;++i)o[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],l=0,o=i.length;l<o;++l)i[l].value.apply(t,e)}};function $4(n,t){for(var e=0,i=n.length,l;e<i;++e)if((l=n[e]).name===t)return l.value}function OS(n,t,e){for(var i=0,l=n.length;i<l;++i)if(n[i].name===t){n[i]=X4,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var Tp="http://www.w3.org/1999/xhtml";const RS={svg:"http://www.w3.org/2000/svg",xhtml:Tp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Eh(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),RS.hasOwnProperty(t)?{space:RS[t],local:n}:n}function K4(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Tp&&t.documentElement.namespaceURI===Tp?t.createElement(n):t.createElementNS(e,n)}}function I4(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function TM(n){var t=Eh(n);return(t.local?I4:K4)(t)}function Z4(){}function k0(n){return n==null?Z4:function(){return this.querySelector(n)}}function W4(n){typeof n!="function"&&(n=k0(n));for(var t=this._groups,e=t.length,i=new Array(e),l=0;l<e;++l)for(var o=t[l],a=o.length,c=i[l]=new Array(a),f,d,m=0;m<a;++m)(f=o[m])&&(d=n.call(f,f.__data__,m,o))&&("__data__"in f&&(d.__data__=f.__data__),c[m]=d);return new Nn(i,this._parents)}function F4(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Q4(){return[]}function DM(n){return n==null?Q4:function(){return this.querySelectorAll(n)}}function J4(n){return function(){return F4(n.apply(this,arguments))}}function tB(n){typeof n=="function"?n=J4(n):n=DM(n);for(var t=this._groups,e=t.length,i=[],l=[],o=0;o<e;++o)for(var a=t[o],c=a.length,f,d=0;d<c;++d)(f=a[d])&&(i.push(n.call(f,f.__data__,d,a)),l.push(f));return new Nn(i,l)}function OM(n){return function(){return this.matches(n)}}function RM(n){return function(t){return t.matches(n)}}var eB=Array.prototype.find;function nB(n){return function(){return eB.call(this.children,n)}}function iB(){return this.firstElementChild}function lB(n){return this.select(n==null?iB:nB(typeof n=="function"?n:RM(n)))}var sB=Array.prototype.filter;function rB(){return Array.from(this.children)}function oB(n){return function(){return sB.call(this.children,n)}}function aB(n){return this.selectAll(n==null?rB:oB(typeof n=="function"?n:RM(n)))}function uB(n){typeof n!="function"&&(n=OM(n));for(var t=this._groups,e=t.length,i=new Array(e),l=0;l<e;++l)for(var o=t[l],a=o.length,c=i[l]=[],f,d=0;d<a;++d)(f=o[d])&&n.call(f,f.__data__,d,o)&&c.push(f);return new Nn(i,this._parents)}function NM(n){return new Array(n.length)}function cB(){return new Nn(this._enter||this._groups.map(NM),this._parents)}function nh(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}nh.prototype={constructor:nh,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function fB(n){return function(){return n}}function hB(n,t,e,i,l,o){for(var a=0,c,f=t.length,d=o.length;a<d;++a)(c=t[a])?(c.__data__=o[a],i[a]=c):e[a]=new nh(n,o[a]);for(;a<f;++a)(c=t[a])&&(l[a]=c)}function dB(n,t,e,i,l,o,a){var c,f,d=new Map,m=t.length,p=o.length,b=new Array(m),v;for(c=0;c<m;++c)(f=t[c])&&(b[c]=v=a.call(f,f.__data__,c,t)+"",d.has(v)?l[c]=f:d.set(v,f));for(c=0;c<p;++c)v=a.call(n,o[c],c,o)+"",(f=d.get(v))?(i[c]=f,f.__data__=o[c],d.delete(v)):e[c]=new nh(n,o[c]);for(c=0;c<m;++c)(f=t[c])&&d.get(b[c])===f&&(l[c]=f)}function mB(n){return n.__data__}function gB(n,t){if(!arguments.length)return Array.from(this,mB);var e=t?dB:hB,i=this._parents,l=this._groups;typeof n!="function"&&(n=fB(n));for(var o=l.length,a=new Array(o),c=new Array(o),f=new Array(o),d=0;d<o;++d){var m=i[d],p=l[d],b=p.length,v=pB(n.call(m,m&&m.__data__,d,i)),S=v.length,w=c[d]=new Array(S),A=a[d]=new Array(S),C=f[d]=new Array(b);e(m,p,w,A,C,v,t);for(var O=0,_=0,D,R;O<S;++O)if(D=w[O]){for(O>=_&&(_=O+1);!(R=A[_])&&++_<S;);D._next=R||null}}return a=new Nn(a,i),a._enter=c,a._exit=f,a}function pB(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function yB(){return new Nn(this._exit||this._groups.map(NM),this._parents)}function bB(n,t,e){var i=this.enter(),l=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(l=t(l),l&&(l=l.selection())),e==null?o.remove():e(o),i&&l?i.merge(l).order():l}function vB(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,l=e.length,o=i.length,a=Math.min(l,o),c=new Array(l),f=0;f<a;++f)for(var d=e[f],m=i[f],p=d.length,b=c[f]=new Array(p),v,S=0;S<p;++S)(v=d[S]||m[S])&&(b[S]=v);for(;f<l;++f)c[f]=e[f];return new Nn(c,this._parents)}function xB(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],l=i.length-1,o=i[l],a;--l>=0;)(a=i[l])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function SB(n){n||(n=wB);function t(p,b){return p&&b?n(p.__data__,b.__data__):!p-!b}for(var e=this._groups,i=e.length,l=new Array(i),o=0;o<i;++o){for(var a=e[o],c=a.length,f=l[o]=new Array(c),d,m=0;m<c;++m)(d=a[m])&&(f[m]=d);f.sort(t)}return new Nn(l,this._parents).order()}function wB(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function AB(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function MB(){return Array.from(this)}function CB(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],l=0,o=i.length;l<o;++l){var a=i[l];if(a)return a}return null}function EB(){let n=0;for(const t of this)++n;return n}function kB(){return!this.node()}function TB(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var l=t[e],o=0,a=l.length,c;o<a;++o)(c=l[o])&&n.call(c,c.__data__,o,l);return this}function DB(n){return function(){this.removeAttribute(n)}}function OB(n){return function(){this.removeAttributeNS(n.space,n.local)}}function RB(n,t){return function(){this.setAttribute(n,t)}}function NB(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function _B(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function BB(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function zB(n,t){var e=Eh(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?OB:DB:typeof t=="function"?e.local?BB:_B:e.local?NB:RB)(e,t))}function _M(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function LB(n){return function(){this.style.removeProperty(n)}}function HB(n,t,e){return function(){this.style.setProperty(n,t,e)}}function VB(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function UB(n,t,e){return arguments.length>1?this.each((t==null?LB:typeof t=="function"?VB:HB)(n,t,e??"")):ao(this.node(),n)}function ao(n,t){return n.style.getPropertyValue(t)||_M(n).getComputedStyle(n,null).getPropertyValue(t)}function qB(n){return function(){delete this[n]}}function YB(n,t){return function(){this[n]=t}}function GB(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function PB(n,t){return arguments.length>1?this.each((t==null?qB:typeof t=="function"?GB:YB)(n,t)):this.node()[n]}function BM(n){return n.trim().split(/^|\s+/)}function T0(n){return n.classList||new zM(n)}function zM(n){this._node=n,this._names=BM(n.getAttribute("class")||"")}zM.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function LM(n,t){for(var e=T0(n),i=-1,l=t.length;++i<l;)e.add(t[i])}function HM(n,t){for(var e=T0(n),i=-1,l=t.length;++i<l;)e.remove(t[i])}function XB(n){return function(){LM(this,n)}}function jB(n){return function(){HM(this,n)}}function $B(n,t){return function(){(t.apply(this,arguments)?LM:HM)(this,n)}}function KB(n,t){var e=BM(n+"");if(arguments.length<2){for(var i=T0(this.node()),l=-1,o=e.length;++l<o;)if(!i.contains(e[l]))return!1;return!0}return this.each((typeof t=="function"?$B:t?XB:jB)(e,t))}function IB(){this.textContent=""}function ZB(n){return function(){this.textContent=n}}function WB(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function FB(n){return arguments.length?this.each(n==null?IB:(typeof n=="function"?WB:ZB)(n)):this.node().textContent}function QB(){this.innerHTML=""}function JB(n){return function(){this.innerHTML=n}}function t8(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function e8(n){return arguments.length?this.each(n==null?QB:(typeof n=="function"?t8:JB)(n)):this.node().innerHTML}function n8(){this.nextSibling&&this.parentNode.appendChild(this)}function i8(){return this.each(n8)}function l8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function s8(){return this.each(l8)}function r8(n){var t=typeof n=="function"?n:TM(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function o8(){return null}function a8(n,t){var e=typeof n=="function"?n:TM(n),i=t==null?o8:typeof t=="function"?t:k0(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function u8(){var n=this.parentNode;n&&n.removeChild(this)}function c8(){return this.each(u8)}function f8(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function h8(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function d8(n){return this.select(n?h8:f8)}function m8(n){return arguments.length?this.property("__data__",n):this.node().__data__}function g8(n){return function(t){n.call(this,t,this.__data__)}}function p8(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function y8(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,l=t.length,o;e<l;++e)o=t[e],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function b8(n,t,e){return function(){var i=this.__on,l,o=g8(t);if(i){for(var a=0,c=i.length;a<c;++a)if((l=i[a]).type===n.type&&l.name===n.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=o,l.options=e),l.value=t;return}}this.addEventListener(n.type,o,e),l={type:n.type,name:n.name,value:t,listener:o,options:e},i?i.push(l):this.__on=[l]}}function v8(n,t,e){var i=p8(n+""),l,o=i.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,d=c.length,m;f<d;++f)for(l=0,m=c[f];l<o;++l)if((a=i[l]).type===m.type&&a.name===m.name)return m.value}return}for(c=t?b8:y8,l=0;l<o;++l)this.each(c(i[l],t,e));return this}function VM(n,t,e){var i=_M(n),l=i.CustomEvent;typeof l=="function"?l=new l(t,e):(l=i.document.createEvent("Event"),e?(l.initEvent(t,e.bubbles,e.cancelable),l.detail=e.detail):l.initEvent(t,!1,!1)),n.dispatchEvent(l)}function x8(n,t){return function(){return VM(this,n,t)}}function S8(n,t){return function(){return VM(this,n,t.apply(this,arguments))}}function w8(n,t){return this.each((typeof t=="function"?S8:x8)(n,t))}function*A8(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],l=0,o=i.length,a;l<o;++l)(a=i[l])&&(yield a)}var UM=[null];function Nn(n,t){this._groups=n,this._parents=t}function vu(){return new Nn([[document.documentElement]],UM)}function M8(){return this}Nn.prototype=vu.prototype={constructor:Nn,select:W4,selectAll:tB,selectChild:lB,selectChildren:aB,filter:uB,data:gB,enter:cB,exit:yB,join:bB,merge:vB,selection:M8,order:xB,sort:SB,call:AB,nodes:MB,node:CB,size:EB,empty:kB,each:TB,attr:zB,style:UB,property:PB,classed:KB,text:FB,html:e8,raise:i8,lower:s8,append:r8,insert:a8,remove:c8,clone:d8,datum:m8,on:v8,dispatch:w8,[Symbol.iterator]:A8};function $n(n){return typeof n=="string"?new Nn([[document.querySelector(n)]],[document.documentElement]):new Nn([[n]],UM)}function C8(n){let t;for(;t=n.sourceEvent;)n=t;return n}function si(n,t){if(n=C8(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}}return[n.pageX,n.pageY]}const E8={passive:!1},eu={capture:!0,passive:!1};function Sg(n){n.stopImmediatePropagation()}function Wr(n){n.preventDefault(),n.stopImmediatePropagation()}function qM(n){var t=n.document.documentElement,e=$n(n).on("dragstart.drag",Wr,eu);"onselectstart"in t?e.on("selectstart.drag",Wr,eu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function YM(n,t){var e=n.document.documentElement,i=$n(n).on("dragstart.drag",null);t&&(i.on("click.drag",Wr,eu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const cf=n=>()=>n;function Dp(n,{sourceEvent:t,subject:e,target:i,identifier:l,active:o,x:a,y:c,dx:f,dy:d,dispatch:m}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:m}})}Dp.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function k8(n){return!n.ctrlKey&&!n.button}function T8(){return this.parentNode}function D8(n,t){return t??{x:n.x,y:n.y}}function O8(){return navigator.maxTouchPoints||"ontouchstart"in this}function R8(){var n=k8,t=T8,e=D8,i=O8,l={},o=Ch("start","drag","end"),a=0,c,f,d,m,p=0;function b(D){D.on("mousedown.drag",v).filter(i).on("touchstart.drag",A).on("touchmove.drag",C,E8).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(D,R){if(!(m||!n.call(this,D,R))){var B=_(this,t.call(this,D,R),D,R,"mouse");B&&($n(D.view).on("mousemove.drag",S,eu).on("mouseup.drag",w,eu),qM(D.view),Sg(D),d=!1,c=D.clientX,f=D.clientY,B("start",D))}}function S(D){if(Wr(D),!d){var R=D.clientX-c,B=D.clientY-f;d=R*R+B*B>p}l.mouse("drag",D)}function w(D){$n(D.view).on("mousemove.drag mouseup.drag",null),YM(D.view,d),Wr(D),l.mouse("end",D)}function A(D,R){if(n.call(this,D,R)){var B=D.changedTouches,U=t.call(this,D,R),Q=B.length,P,et;for(P=0;P<Q;++P)(et=_(this,U,D,R,B[P].identifier,B[P]))&&(Sg(D),et("start",D,B[P]))}}function C(D){var R=D.changedTouches,B=R.length,U,Q;for(U=0;U<B;++U)(Q=l[R[U].identifier])&&(Wr(D),Q("drag",D,R[U]))}function O(D){var R=D.changedTouches,B=R.length,U,Q;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),U=0;U<B;++U)(Q=l[R[U].identifier])&&(Sg(D),Q("end",D,R[U]))}function _(D,R,B,U,Q,P){var et=o.copy(),J=si(P||B,R),F,nt,T;if((T=e.call(D,new Dp("beforestart",{sourceEvent:B,target:b,identifier:Q,active:a,x:J[0],y:J[1],dx:0,dy:0,dispatch:et}),U))!=null)return F=T.x-J[0]||0,nt=T.y-J[1]||0,function q(k,z,j){var H=J,E;switch(k){case"start":l[Q]=q,E=a++;break;case"end":delete l[Q],--a;case"drag":J=si(j||z,R),E=a;break}et.call(k,D,new Dp(k,{sourceEvent:z,subject:T,target:b,identifier:Q,active:E,x:J[0]+F,y:J[1]+nt,dx:J[0]-H[0],dy:J[1]-H[1],dispatch:et}),U)}}return b.filter=function(D){return arguments.length?(n=typeof D=="function"?D:cf(!!D),b):n},b.container=function(D){return arguments.length?(t=typeof D=="function"?D:cf(D),b):t},b.subject=function(D){return arguments.length?(e=typeof D=="function"?D:cf(D),b):e},b.touchable=function(D){return arguments.length?(i=typeof D=="function"?D:cf(!!D),b):i},b.on=function(){var D=o.on.apply(o,arguments);return D===o?b:D},b.clickDistance=function(D){return arguments.length?(p=(D=+D)*D,b):Math.sqrt(p)},b}function D0(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function GM(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function xu(){}var nu=.7,ih=1/nu,Fr="\\s*([+-]?\\d+)\\s*",iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",N8=/^#([0-9a-f]{3,8})$/,_8=new RegExp(`^rgb\\(${Fr},${Fr},${Fr}\\)$`),B8=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),z8=new RegExp(`^rgba\\(${Fr},${Fr},${Fr},${iu}\\)$`),L8=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${iu}\\)$`),H8=new RegExp(`^hsl\\(${iu},${Ri},${Ri}\\)$`),V8=new RegExp(`^hsla\\(${iu},${Ri},${Ri},${iu}\\)$`),NS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};D0(xu,lu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:_S,formatHex:_S,formatHex8:U8,formatHsl:q8,formatRgb:BS,toString:BS});function _S(){return this.rgb().formatHex()}function U8(){return this.rgb().formatHex8()}function q8(){return PM(this).formatHsl()}function BS(){return this.rgb().formatRgb()}function lu(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=N8.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?zS(t):e===3?new bn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?ff(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?ff(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_8.exec(n))?new bn(t[1],t[2],t[3],1):(t=B8.exec(n))?new bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=z8.exec(n))?ff(t[1],t[2],t[3],t[4]):(t=L8.exec(n))?ff(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=H8.exec(n))?VS(t[1],t[2]/100,t[3]/100,1):(t=V8.exec(n))?VS(t[1],t[2]/100,t[3]/100,t[4]):NS.hasOwnProperty(n)?zS(NS[n]):n==="transparent"?new bn(NaN,NaN,NaN,0):null}function zS(n){return new bn(n>>16&255,n>>8&255,n&255,1)}function ff(n,t,e,i){return i<=0&&(n=t=e=NaN),new bn(n,t,e,i)}function Y8(n){return n instanceof xu||(n=lu(n)),n?(n=n.rgb(),new bn(n.r,n.g,n.b,n.opacity)):new bn}function Op(n,t,e,i){return arguments.length===1?Y8(n):new bn(n,t,e,i??1)}function bn(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}D0(bn,Op,GM(xu,{brighter(n){return n=n==null?ih:Math.pow(ih,n),new bn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?nu:Math.pow(nu,n),new bn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new bn(Us(this.r),Us(this.g),Us(this.b),lh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LS,formatHex:LS,formatHex8:G8,formatRgb:HS,toString:HS}));function LS(){return`#${zs(this.r)}${zs(this.g)}${zs(this.b)}`}function G8(){return`#${zs(this.r)}${zs(this.g)}${zs(this.b)}${zs((isNaN(this.opacity)?1:this.opacity)*255)}`}function HS(){const n=lh(this.opacity);return`${n===1?"rgb(":"rgba("}${Us(this.r)}, ${Us(this.g)}, ${Us(this.b)}${n===1?")":`, ${n})`}`}function lh(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Us(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function zs(n){return n=Us(n),(n<16?"0":"")+n.toString(16)}function VS(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new ri(n,t,e,i)}function PM(n){if(n instanceof ri)return new ri(n.h,n.s,n.l,n.opacity);if(n instanceof xu||(n=lu(n)),!n)return new ri;if(n instanceof ri)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,l=Math.min(t,e,i),o=Math.max(t,e,i),a=NaN,c=o-l,f=(o+l)/2;return c?(t===o?a=(e-i)/c+(e<i)*6:e===o?a=(i-t)/c+2:a=(t-e)/c+4,c/=f<.5?o+l:2-o-l,a*=60):c=f>0&&f<1?0:a,new ri(a,c,f,n.opacity)}function P8(n,t,e,i){return arguments.length===1?PM(n):new ri(n,t,e,i??1)}function ri(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}D0(ri,P8,GM(xu,{brighter(n){return n=n==null?ih:Math.pow(ih,n),new ri(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?nu:Math.pow(nu,n),new ri(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,l=2*e-i;return new bn(wg(n>=240?n-240:n+120,l,i),wg(n,l,i),wg(n<120?n+240:n-120,l,i),this.opacity)},clamp(){return new ri(US(this.h),hf(this.s),hf(this.l),lh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=lh(this.opacity);return`${n===1?"hsl(":"hsla("}${US(this.h)}, ${hf(this.s)*100}%, ${hf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function US(n){return n=(n||0)%360,n<0?n+360:n}function hf(n){return Math.max(0,Math.min(1,n||0))}function wg(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const XM=n=>()=>n;function X8(n,t){return function(e){return n+e*t}}function j8(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function $8(n){return(n=+n)==1?jM:function(t,e){return e-t?j8(t,e,n):XM(isNaN(t)?e:t)}}function jM(n,t){var e=t-n;return e?X8(n,e):XM(isNaN(n)?t:n)}const qS=function n(t){var e=$8(t);function i(l,o){var a=e((l=Op(l)).r,(o=Op(o)).r),c=e(l.g,o.g),f=e(l.b,o.b),d=jM(l.opacity,o.opacity);return function(m){return l.r=a(m),l.g=c(m),l.b=f(m),l.opacity=d(m),l+""}}return i.gamma=n,i}(1);function jl(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var Rp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ag=new RegExp(Rp.source,"g");function K8(n){return function(){return n}}function I8(n){return function(t){return n(t)+""}}function Z8(n,t){var e=Rp.lastIndex=Ag.lastIndex=0,i,l,o,a=-1,c=[],f=[];for(n=n+"",t=t+"";(i=Rp.exec(n))&&(l=Ag.exec(t));)(o=l.index)>e&&(o=t.slice(e,o),c[a]?c[a]+=o:c[++a]=o),(i=i[0])===(l=l[0])?c[a]?c[a]+=l:c[++a]=l:(c[++a]=null,f.push({i:a,x:jl(i,l)})),e=Ag.lastIndex;return e<t.length&&(o=t.slice(e),c[a]?c[a]+=o:c[++a]=o),c.length<2?f[0]?I8(f[0].x):K8(t):(t=f.length,function(d){for(var m=0,p;m<t;++m)c[(p=f[m]).i]=p.x(d);return c.join("")})}var YS=180/Math.PI,Np={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $M(n,t,e,i,l,o){var a,c,f;return(a=Math.sqrt(n*n+t*t))&&(n/=a,t/=a),(f=n*e+t*i)&&(e-=n*f,i-=t*f),(c=Math.sqrt(e*e+i*i))&&(e/=c,i/=c,f/=c),n*i<t*e&&(n=-n,t=-t,f=-f,a=-a),{translateX:l,translateY:o,rotate:Math.atan2(t,n)*YS,skewX:Math.atan(f)*YS,scaleX:a,scaleY:c}}var df;function W8(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?Np:$M(t.a,t.b,t.c,t.d,t.e,t.f)}function F8(n){return n==null||(df||(df=document.createElementNS("http://www.w3.org/2000/svg","g")),df.setAttribute("transform",n),!(n=df.transform.baseVal.consolidate()))?Np:(n=n.matrix,$M(n.a,n.b,n.c,n.d,n.e,n.f))}function KM(n,t,e,i){function l(d){return d.length?d.pop()+" ":""}function o(d,m,p,b,v,S){if(d!==p||m!==b){var w=v.push("translate(",null,t,null,e);S.push({i:w-4,x:jl(d,p)},{i:w-2,x:jl(m,b)})}else(p||b)&&v.push("translate("+p+t+b+e)}function a(d,m,p,b){d!==m?(d-m>180?m+=360:m-d>180&&(d+=360),b.push({i:p.push(l(p)+"rotate(",null,i)-2,x:jl(d,m)})):m&&p.push(l(p)+"rotate("+m+i)}function c(d,m,p,b){d!==m?b.push({i:p.push(l(p)+"skewX(",null,i)-2,x:jl(d,m)}):m&&p.push(l(p)+"skewX("+m+i)}function f(d,m,p,b,v,S){if(d!==p||m!==b){var w=v.push(l(v)+"scale(",null,",",null,")");S.push({i:w-4,x:jl(d,p)},{i:w-2,x:jl(m,b)})}else(p!==1||b!==1)&&v.push(l(v)+"scale("+p+","+b+")")}return function(d,m){var p=[],b=[];return d=n(d),m=n(m),o(d.translateX,d.translateY,m.translateX,m.translateY,p,b),a(d.rotate,m.rotate,p,b),c(d.skewX,m.skewX,p,b),f(d.scaleX,d.scaleY,m.scaleX,m.scaleY,p,b),d=m=null,function(v){for(var S=-1,w=b.length,A;++S<w;)p[(A=b[S]).i]=A.x(v);return p.join("")}}}var Q8=KM(W8,"px, ","px)","deg)"),J8=KM(F8,", ",")",")"),tz=1e-12;function GS(n){return((n=Math.exp(n))+1/n)/2}function ez(n){return((n=Math.exp(n))-1/n)/2}function nz(n){return((n=Math.exp(2*n))-1)/(n+1)}const iz=function n(t,e,i){function l(o,a){var c=o[0],f=o[1],d=o[2],m=a[0],p=a[1],b=a[2],v=m-c,S=p-f,w=v*v+S*S,A,C;if(w<tz)C=Math.log(b/d)/t,A=function(U){return[c+U*v,f+U*S,d*Math.exp(t*U*C)]};else{var O=Math.sqrt(w),_=(b*b-d*d+i*w)/(2*d*e*O),D=(b*b-d*d-i*w)/(2*b*e*O),R=Math.log(Math.sqrt(_*_+1)-_),B=Math.log(Math.sqrt(D*D+1)-D);C=(B-R)/t,A=function(U){var Q=U*C,P=GS(R),et=d/(e*O)*(P*nz(t*Q+R)-ez(R));return[c+et*v,f+et*S,d*P/GS(t*Q+R)]}}return A.duration=C*1e3*t/Math.SQRT2,A}return l.rho=function(o){var a=Math.max(.001,+o),c=a*a,f=c*c;return n(a,c,f)},l}(Math.SQRT2,2,4);var uo=0,Oa=0,Sa=0,IM=1e3,sh,Ra,rh=0,Ks=0,kh=0,su=typeof performance=="object"&&performance.now?performance:Date,ZM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function O0(){return Ks||(ZM(lz),Ks=su.now()+kh)}function lz(){Ks=0}function oh(){this._call=this._time=this._next=null}oh.prototype=WM.prototype={constructor:oh,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?O0():+e)+(t==null?0:+t),!this._next&&Ra!==this&&(Ra?Ra._next=this:sh=this,Ra=this),this._call=n,this._time=e,_p()},stop:function(){this._call&&(this._call=null,this._time=1/0,_p())}};function WM(n,t,e){var i=new oh;return i.restart(n,t,e),i}function sz(){O0(),++uo;for(var n=sh,t;n;)(t=Ks-n._time)>=0&&n._call.call(void 0,t),n=n._next;--uo}function PS(){Ks=(rh=su.now())+kh,uo=Oa=0;try{sz()}finally{uo=0,oz(),Ks=0}}function rz(){var n=su.now(),t=n-rh;t>IM&&(kh-=t,rh=n)}function oz(){for(var n,t=sh,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:sh=e);Ra=n,_p(i)}function _p(n){if(!uo){Oa&&(Oa=clearTimeout(Oa));var t=n-Ks;t>24?(n<1/0&&(Oa=setTimeout(PS,n-su.now()-kh)),Sa&&(Sa=clearInterval(Sa))):(Sa||(rh=su.now(),Sa=setInterval(rz,IM)),uo=1,ZM(PS))}}function XS(n,t,e){var i=new oh;return t=t==null?0:+t,i.restart(l=>{i.stop(),n(l+t)},t,e),i}var az=Ch("start","end","cancel","interrupt"),uz=[],FM=0,jS=1,Bp=2,Nf=3,$S=4,zp=5,_f=6;function Th(n,t,e,i,l,o){var a=n.__transition;if(!a)n.__transition={};else if(e in a)return;cz(n,e,{name:t,index:i,group:l,on:az,tween:uz,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:FM})}function R0(n,t){var e=di(n,t);if(e.state>FM)throw new Error("too late; already scheduled");return e}function Li(n,t){var e=di(n,t);if(e.state>Nf)throw new Error("too late; already running");return e}function di(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function cz(n,t,e){var i=n.__transition,l;i[t]=e,e.timer=WM(o,0,e.time);function o(d){e.state=jS,e.timer.restart(a,e.delay,e.time),e.delay<=d&&a(d-e.delay)}function a(d){var m,p,b,v;if(e.state!==jS)return f();for(m in i)if(v=i[m],v.name===e.name){if(v.state===Nf)return XS(a);v.state===$S?(v.state=_f,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[m]):+m<t&&(v.state=_f,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[m])}if(XS(function(){e.state===Nf&&(e.state=$S,e.timer.restart(c,e.delay,e.time),c(d))}),e.state=Bp,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Bp){for(e.state=Nf,l=new Array(b=e.tween.length),m=0,p=-1;m<b;++m)(v=e.tween[m].value.call(n,n.__data__,e.index,e.group))&&(l[++p]=v);l.length=p+1}}function c(d){for(var m=d<e.duration?e.ease.call(null,d/e.duration):(e.timer.restart(f),e.state=zp,1),p=-1,b=l.length;++p<b;)l[p].call(n,m);e.state===zp&&(e.on.call("end",n,n.__data__,e.index,e.group),f())}function f(){e.state=_f,e.timer.stop(),delete i[t];for(var d in i)return;delete n.__transition}}function Bf(n,t){var e=n.__transition,i,l,o=!0,a;if(e){t=t==null?null:t+"";for(a in e){if((i=e[a]).name!==t){o=!1;continue}l=i.state>Bp&&i.state<zp,i.state=_f,i.timer.stop(),i.on.call(l?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[a]}o&&delete n.__transition}}function fz(n){return this.each(function(){Bf(this,n)})}function hz(n,t){var e,i;return function(){var l=Li(this,n),o=l.tween;if(o!==e){i=e=o;for(var a=0,c=i.length;a<c;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}l.tween=i}}function dz(n,t,e){var i,l;if(typeof e!="function")throw new Error;return function(){var o=Li(this,n),a=o.tween;if(a!==i){l=(i=a).slice();for(var c={name:t,value:e},f=0,d=l.length;f<d;++f)if(l[f].name===t){l[f]=c;break}f===d&&l.push(c)}o.tween=l}}function mz(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=di(this.node(),e).tween,l=0,o=i.length,a;l<o;++l)if((a=i[l]).name===n)return a.value;return null}return this.each((t==null?hz:dz)(e,n,t))}function N0(n,t,e){var i=n._id;return n.each(function(){var l=Li(this,i);(l.value||(l.value={}))[t]=e.apply(this,arguments)}),function(l){return di(l,i).value[t]}}function QM(n,t){var e;return(typeof t=="number"?jl:t instanceof lu?qS:(e=lu(t))?(t=e,qS):Z8)(n,t)}function gz(n){return function(){this.removeAttribute(n)}}function pz(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yz(n,t,e){var i,l=e+"",o;return function(){var a=this.getAttribute(n);return a===l?null:a===i?o:o=t(i=a,e)}}function bz(n,t,e){var i,l=e+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===l?null:a===i?o:o=t(i=a,e)}}function vz(n,t,e){var i,l,o;return function(){var a,c=e(this),f;return c==null?void this.removeAttribute(n):(a=this.getAttribute(n),f=c+"",a===f?null:a===i&&f===l?o:(l=f,o=t(i=a,c)))}}function xz(n,t,e){var i,l,o;return function(){var a,c=e(this),f;return c==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),f=c+"",a===f?null:a===i&&f===l?o:(l=f,o=t(i=a,c)))}}function Sz(n,t){var e=Eh(n),i=e==="transform"?J8:QM;return this.attrTween(n,typeof t=="function"?(e.local?xz:vz)(e,i,N0(this,"attr."+n,t)):t==null?(e.local?pz:gz)(e):(e.local?bz:yz)(e,i,t))}function wz(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Az(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Mz(n,t){var e,i;function l(){var o=t.apply(this,arguments);return o!==i&&(e=(i=o)&&Az(n,o)),e}return l._value=t,l}function Cz(n,t){var e,i;function l(){var o=t.apply(this,arguments);return o!==i&&(e=(i=o)&&wz(n,o)),e}return l._value=t,l}function Ez(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Eh(n);return this.tween(e,(i.local?Mz:Cz)(i,t))}function kz(n,t){return function(){R0(this,n).delay=+t.apply(this,arguments)}}function Tz(n,t){return t=+t,function(){R0(this,n).delay=t}}function Dz(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?kz:Tz)(t,n)):di(this.node(),t).delay}function Oz(n,t){return function(){Li(this,n).duration=+t.apply(this,arguments)}}function Rz(n,t){return t=+t,function(){Li(this,n).duration=t}}function Nz(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Oz:Rz)(t,n)):di(this.node(),t).duration}function _z(n,t){if(typeof t!="function")throw new Error;return function(){Li(this,n).ease=t}}function Bz(n){var t=this._id;return arguments.length?this.each(_z(t,n)):di(this.node(),t).ease}function zz(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Li(this,n).ease=e}}function Lz(n){if(typeof n!="function")throw new Error;return this.each(zz(this._id,n))}function Hz(n){typeof n!="function"&&(n=OM(n));for(var t=this._groups,e=t.length,i=new Array(e),l=0;l<e;++l)for(var o=t[l],a=o.length,c=i[l]=[],f,d=0;d<a;++d)(f=o[d])&&n.call(f,f.__data__,d,o)&&c.push(f);return new al(i,this._parents,this._name,this._id)}function Vz(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,l=e.length,o=Math.min(i,l),a=new Array(i),c=0;c<o;++c)for(var f=t[c],d=e[c],m=f.length,p=a[c]=new Array(m),b,v=0;v<m;++v)(b=f[v]||d[v])&&(p[v]=b);for(;c<i;++c)a[c]=t[c];return new al(a,this._parents,this._name,this._id)}function Uz(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function qz(n,t,e){var i,l,o=Uz(t)?R0:Li;return function(){var a=o(this,n),c=a.on;c!==i&&(l=(i=c).copy()).on(t,e),a.on=l}}function Yz(n,t){var e=this._id;return arguments.length<2?di(this.node(),e).on.on(n):this.each(qz(e,n,t))}function Gz(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function Pz(){return this.on("end.remove",Gz(this._id))}function Xz(n){var t=this._name,e=this._id;typeof n!="function"&&(n=k0(n));for(var i=this._groups,l=i.length,o=new Array(l),a=0;a<l;++a)for(var c=i[a],f=c.length,d=o[a]=new Array(f),m,p,b=0;b<f;++b)(m=c[b])&&(p=n.call(m,m.__data__,b,c))&&("__data__"in m&&(p.__data__=m.__data__),d[b]=p,Th(d[b],t,e,b,d,di(m,e)));return new al(o,this._parents,t,e)}function jz(n){var t=this._name,e=this._id;typeof n!="function"&&(n=DM(n));for(var i=this._groups,l=i.length,o=[],a=[],c=0;c<l;++c)for(var f=i[c],d=f.length,m,p=0;p<d;++p)if(m=f[p]){for(var b=n.call(m,m.__data__,p,f),v,S=di(m,e),w=0,A=b.length;w<A;++w)(v=b[w])&&Th(v,t,e,w,b,S);o.push(b),a.push(m)}return new al(o,a,t,e)}var $z=vu.prototype.constructor;function Kz(){return new $z(this._groups,this._parents)}function Iz(n,t){var e,i,l;return function(){var o=ao(this,n),a=(this.style.removeProperty(n),ao(this,n));return o===a?null:o===e&&a===i?l:l=t(e=o,i=a)}}function JM(n){return function(){this.style.removeProperty(n)}}function Zz(n,t,e){var i,l=e+"",o;return function(){var a=ao(this,n);return a===l?null:a===i?o:o=t(i=a,e)}}function Wz(n,t,e){var i,l,o;return function(){var a=ao(this,n),c=e(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(n),ao(this,n))),a===f?null:a===i&&f===l?o:(l=f,o=t(i=a,c))}}function Fz(n,t){var e,i,l,o="style."+t,a="end."+o,c;return function(){var f=Li(this,n),d=f.on,m=f.value[o]==null?c||(c=JM(t)):void 0;(d!==e||l!==m)&&(i=(e=d).copy()).on(a,l=m),f.on=i}}function Qz(n,t,e){var i=(n+="")=="transform"?Q8:QM;return t==null?this.styleTween(n,Iz(n,i)).on("end.style."+n,JM(n)):typeof t=="function"?this.styleTween(n,Wz(n,i,N0(this,"style."+n,t))).each(Fz(this._id,n)):this.styleTween(n,Zz(n,i,t),e).on("end.style."+n,null)}function Jz(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function t5(n,t,e){var i,l;function o(){var a=t.apply(this,arguments);return a!==l&&(i=(l=a)&&Jz(n,a,e)),i}return o._value=t,o}function e5(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,t5(n,t,e??""))}function n5(n){return function(){this.textContent=n}}function i5(n){return function(){var t=n(this);this.textContent=t??""}}function l5(n){return this.tween("text",typeof n=="function"?i5(N0(this,"text",n)):n5(n==null?"":n+""))}function s5(n){return function(t){this.textContent=n.call(this,t)}}function r5(n){var t,e;function i(){var l=n.apply(this,arguments);return l!==e&&(t=(e=l)&&s5(l)),t}return i._value=n,i}function o5(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,r5(n))}function a5(){for(var n=this._name,t=this._id,e=tC(),i=this._groups,l=i.length,o=0;o<l;++o)for(var a=i[o],c=a.length,f,d=0;d<c;++d)if(f=a[d]){var m=di(f,t);Th(f,n,e,d,a,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new al(i,this._parents,n,e)}function u5(){var n,t,e=this,i=e._id,l=e.size();return new Promise(function(o,a){var c={value:a},f={value:function(){--l===0&&o()}};e.each(function(){var d=Li(this,i),m=d.on;m!==n&&(t=(n=m).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(f)),d.on=t}),l===0&&o()})}var c5=0;function al(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function tC(){return++c5}var el=vu.prototype;al.prototype={constructor:al,select:Xz,selectAll:jz,selectChild:el.selectChild,selectChildren:el.selectChildren,filter:Hz,merge:Vz,selection:Kz,transition:a5,call:el.call,nodes:el.nodes,node:el.node,size:el.size,empty:el.empty,each:el.each,on:Yz,attr:Sz,attrTween:Ez,style:Qz,styleTween:e5,text:l5,textTween:o5,remove:Pz,tween:mz,delay:Dz,duration:Nz,ease:Bz,easeVarying:Lz,end:u5,[Symbol.iterator]:el[Symbol.iterator]};function f5(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var h5={time:null,delay:0,duration:250,ease:f5};function d5(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function m5(n){var t,e;n instanceof al?(t=n._id,n=n._name):(t=tC(),(e=h5).time=O0(),n=n==null?null:n+"");for(var i=this._groups,l=i.length,o=0;o<l;++o)for(var a=i[o],c=a.length,f,d=0;d<c;++d)(f=a[d])&&Th(f,n,t,d,a,e||d5(f,t));return new al(i,this._parents,n,t)}vu.prototype.interrupt=fz;vu.prototype.transition=m5;const mf=n=>()=>n;function g5(n,{sourceEvent:t,target:e,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function il(n,t,e){this.k=n,this.x=t,this.y=e}il.prototype={constructor:il,scale:function(n){return n===1?this:new il(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new il(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sl=new il(1,0,0);il.prototype;function Mg(n){n.stopImmediatePropagation()}function wa(n){n.preventDefault(),n.stopImmediatePropagation()}function p5(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function y5(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function KS(){return this.__zoom||sl}function b5(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function v5(){return navigator.maxTouchPoints||"ontouchstart"in this}function x5(n,t,e){var i=n.invertX(t[0][0])-e[0][0],l=n.invertX(t[1][0])-e[1][0],o=n.invertY(t[0][1])-e[0][1],a=n.invertY(t[1][1])-e[1][1];return n.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function eC(){var n=p5,t=y5,e=x5,i=b5,l=v5,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],c=250,f=iz,d=Ch("start","zoom","end"),m,p,b,v=500,S=150,w=0,A=10;function C(T){T.property("__zoom",KS).on("wheel.zoom",Q,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",et).filter(l).on("touchstart.zoom",J).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",nt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(T,q,k,z){var j=T.selection?T.selection():T;j.property("__zoom",KS),T!==j?R(T,q,k,z):j.interrupt().each(function(){B(this,arguments).event(z).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},C.scaleBy=function(T,q,k,z){C.scaleTo(T,function(){var j=this.__zoom.k,H=typeof q=="function"?q.apply(this,arguments):q;return j*H},k,z)},C.scaleTo=function(T,q,k,z){C.transform(T,function(){var j=t.apply(this,arguments),H=this.__zoom,E=k==null?D(j):typeof k=="function"?k.apply(this,arguments):k,L=H.invert(E),G=typeof q=="function"?q.apply(this,arguments):q;return e(_(O(H,G),E,L),j,a)},k,z)},C.translateBy=function(T,q,k,z){C.transform(T,function(){return e(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),a)},null,z)},C.translateTo=function(T,q,k,z,j){C.transform(T,function(){var H=t.apply(this,arguments),E=this.__zoom,L=z==null?D(H):typeof z=="function"?z.apply(this,arguments):z;return e(sl.translate(L[0],L[1]).scale(E.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof k=="function"?-k.apply(this,arguments):-k),H,a)},z,j)};function O(T,q){return q=Math.max(o[0],Math.min(o[1],q)),q===T.k?T:new il(q,T.x,T.y)}function _(T,q,k){var z=q[0]-k[0]*T.k,j=q[1]-k[1]*T.k;return z===T.x&&j===T.y?T:new il(T.k,z,j)}function D(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function R(T,q,k,z){T.on("start.zoom",function(){B(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(z).end()}).tween("zoom",function(){var j=this,H=arguments,E=B(j,H).event(z),L=t.apply(j,H),G=k==null?D(L):typeof k=="function"?k.apply(j,H):k,W=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),it=j.__zoom,ut=typeof q=="function"?q.apply(j,H):q,ct=f(it.invert(G).concat(W/it.k),ut.invert(G).concat(W/ut.k));return function(St){if(St===1)St=ut;else{var vt=ct(St),Tt=W/vt[2];St=new il(Tt,G[0]-vt[0]*Tt,G[1]-vt[1]*Tt)}E.zoom(null,St)}})}function B(T,q,k){return!k&&T.__zooming||new U(T,q)}function U(T,q){this.that=T,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,q),this.taps=0}U.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,q){return this.mouse&&T!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var q=$n(this.that).datum();d.call(T,this.that,new g5(T,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:d}),q)}};function Q(T,...q){if(!n.apply(this,arguments))return;var k=B(this,q).event(T),z=this.__zoom,j=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,i.apply(this,arguments)))),H=si(T);if(k.wheel)(k.mouse[0][0]!==H[0]||k.mouse[0][1]!==H[1])&&(k.mouse[1]=z.invert(k.mouse[0]=H)),clearTimeout(k.wheel);else{if(z.k===j)return;k.mouse=[H,z.invert(H)],Bf(this),k.start()}wa(T),k.wheel=setTimeout(E,S),k.zoom("mouse",e(_(O(z,j),k.mouse[0],k.mouse[1]),k.extent,a));function E(){k.wheel=null,k.end()}}function P(T,...q){if(b||!n.apply(this,arguments))return;var k=T.currentTarget,z=B(this,q,!0).event(T),j=$n(T.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",W,!0),H=si(T,k),E=T.clientX,L=T.clientY;qM(T.view),Mg(T),z.mouse=[H,this.__zoom.invert(H)],Bf(this),z.start();function G(it){if(wa(it),!z.moved){var ut=it.clientX-E,ct=it.clientY-L;z.moved=ut*ut+ct*ct>w}z.event(it).zoom("mouse",e(_(z.that.__zoom,z.mouse[0]=si(it,k),z.mouse[1]),z.extent,a))}function W(it){j.on("mousemove.zoom mouseup.zoom",null),YM(it.view,z.moved),wa(it),z.event(it).end()}}function et(T,...q){if(n.apply(this,arguments)){var k=this.__zoom,z=si(T.changedTouches?T.changedTouches[0]:T,this),j=k.invert(z),H=k.k*(T.shiftKey?.5:2),E=e(_(O(k,H),z,j),t.apply(this,q),a);wa(T),c>0?$n(this).transition().duration(c).call(R,E,z,T):$n(this).call(C.transform,E,z,T)}}function J(T,...q){if(n.apply(this,arguments)){var k=T.touches,z=k.length,j=B(this,q,T.changedTouches.length===z).event(T),H,E,L,G;for(Mg(T),E=0;E<z;++E)L=k[E],G=si(L,this),G=[G,this.__zoom.invert(G),L.identifier],j.touch0?!j.touch1&&j.touch0[2]!==G[2]&&(j.touch1=G,j.taps=0):(j.touch0=G,H=!0,j.taps=1+!!m);m&&(m=clearTimeout(m)),H&&(j.taps<2&&(p=G[0],m=setTimeout(function(){m=null},v)),Bf(this),j.start())}}function F(T,...q){if(this.__zooming){var k=B(this,q).event(T),z=T.changedTouches,j=z.length,H,E,L,G;for(wa(T),H=0;H<j;++H)E=z[H],L=si(E,this),k.touch0&&k.touch0[2]===E.identifier?k.touch0[0]=L:k.touch1&&k.touch1[2]===E.identifier&&(k.touch1[0]=L);if(E=k.that.__zoom,k.touch1){var W=k.touch0[0],it=k.touch0[1],ut=k.touch1[0],ct=k.touch1[1],St=(St=ut[0]-W[0])*St+(St=ut[1]-W[1])*St,vt=(vt=ct[0]-it[0])*vt+(vt=ct[1]-it[1])*vt;E=O(E,Math.sqrt(St/vt)),L=[(W[0]+ut[0])/2,(W[1]+ut[1])/2],G=[(it[0]+ct[0])/2,(it[1]+ct[1])/2]}else if(k.touch0)L=k.touch0[0],G=k.touch0[1];else return;k.zoom("touch",e(_(E,L,G),k.extent,a))}}function nt(T,...q){if(this.__zooming){var k=B(this,q).event(T),z=T.changedTouches,j=z.length,H,E;for(Mg(T),b&&clearTimeout(b),b=setTimeout(function(){b=null},v),H=0;H<j;++H)E=z[H],k.touch0&&k.touch0[2]===E.identifier?delete k.touch0:k.touch1&&k.touch1[2]===E.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(E=si(E,this),Math.hypot(p[0]-E[0],p[1]-E[1])<A)){var L=$n(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return C.wheelDelta=function(T){return arguments.length?(i=typeof T=="function"?T:mf(+T),C):i},C.filter=function(T){return arguments.length?(n=typeof T=="function"?T:mf(!!T),C):n},C.touchable=function(T){return arguments.length?(l=typeof T=="function"?T:mf(!!T),C):l},C.extent=function(T){return arguments.length?(t=typeof T=="function"?T:mf([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),C):t},C.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],C):[o[0],o[1]]},C.translateExtent=function(T){return arguments.length?(a[0][0]=+T[0][0],a[1][0]=+T[1][0],a[0][1]=+T[0][1],a[1][1]=+T[1][1],C):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},C.constrain=function(T){return arguments.length?(e=T,C):e},C.duration=function(T){return arguments.length?(c=+T,C):c},C.interpolate=function(T){return arguments.length?(f=T,C):f},C.on=function(){var T=d.on.apply(d,arguments);return T===d?C:T},C.clickDistance=function(T){return arguments.length?(w=(T=+T)*T,C):Math.sqrt(w)},C.tapDistance=function(T){return arguments.length?(A=+T,C):A},C}bw();const Dh=I.createContext(null),S5=Dh.Provider,ul={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,t)=>`Couldn't create edge for ${n?"target":"source"} handle id: "${n?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},nC=ul.error001();function Jt(n,t){const e=I.useContext(Dh);if(e===null)throw new Error(nC);return kM(e,n,t)}const De=()=>{const n=I.useContext(Dh);if(n===null)throw new Error(nC);return I.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe,destroy:n.destroy}),[n])},w5=n=>n.userSelectionActive?"none":"all";function _0({position:n,children:t,className:e,style:i,...l}){const o=Jt(w5),a=`${n}`.split("-");return tt.createElement("div",{className:je(["react-flow__panel",e,...a]),style:{...i,pointerEvents:o},...l},t)}function A5({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:tt.createElement(_0,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},tt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const M5=({x:n,y:t,label:e,labelStyle:i={},labelShowBg:l=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:c=2,children:f,className:d,...m})=>{const p=I.useRef(null),[b,v]=I.useState({x:0,y:0,width:0,height:0}),S=je(["react-flow__edge-textwrapper",d]);return I.useEffect(()=>{if(p.current){const w=p.current.getBBox();v({x:w.x,y:w.y,width:w.width,height:w.height})}},[e]),typeof e>"u"||!e?null:tt.createElement("g",{transform:`translate(${n-b.width/2} ${t-b.height/2})`,className:S,visibility:b.width?"visible":"hidden",...m},l&&tt.createElement("rect",{width:b.width+2*a[0],x:-a[0],y:-a[1],height:b.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),tt.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:p,style:i},e),f)};var C5=I.memo(M5);const B0=n=>({width:n.offsetWidth,height:n.offsetHeight}),co=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),z0=(n={x:0,y:0},t)=>({x:co(n.x,t[0][0],t[1][0]),y:co(n.y,t[0][1],t[1][1])}),IS=(n,t,e)=>n<t?co(Math.abs(n-t),1,50)/50:n>e?-co(Math.abs(n-e),1,50)/50:0,iC=(n,t)=>{const e=IS(n.x,35,t.width-35)*20,i=IS(n.y,35,t.height-35)*20;return[e,i]},lC=n=>{var t;return((t=n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},sC=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),ru=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),rC=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),ZS=n=>({...n.positionAbsolute||{x:0,y:0},width:n.width||0,height:n.height||0}),E5=(n,t)=>rC(sC(ru(n),ru(t))),Lp=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},k5=n=>Zn(n.width)&&Zn(n.height)&&Zn(n.x)&&Zn(n.y),Zn=n=>!isNaN(n)&&isFinite(n),fe=Symbol.for("internals"),oC=["Enter"," ","Escape"],T5=(n,t)=>{},D5=n=>"nativeEvent"in n;function Hp(n){var l,o;const t=D5(n)?n.nativeEvent:n,e=((o=(l=t.composedPath)==null?void 0:l.call(t))==null?void 0:o[0])||n.target;return["INPUT","SELECT","TEXTAREA"].includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const aC=n=>"clientX"in n,ts=(n,t)=>{var o,a;const e=aC(n),i=e?n.clientX:(o=n.touches)==null?void 0:o[0].clientX,l=e?n.clientY:(a=n.touches)==null?void 0:a[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:l-((t==null?void 0:t.top)??0)}},ah=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0},Su=({id:n,path:t,labelX:e,labelY:i,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:p,markerStart:b,interactionWidth:v=20})=>tt.createElement(tt.Fragment,null,tt.createElement("path",{id:n,style:m,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:b}),v&&tt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:v,className:"react-flow__edge-interaction"}),l&&Zn(e)&&Zn(i)?tt.createElement(C5,{x:e,y:i,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d}):null);Su.displayName="BaseEdge";function Aa(n,t,e){return e===void 0?e:i=>{const l=t().edges.find(o=>o.id===n);l&&e(i,{...l})}}function uC({sourceX:n,sourceY:t,targetX:e,targetY:i}){const l=Math.abs(e-n)/2,o=e<n?e+l:e-l,a=Math.abs(i-t)/2,c=i<t?i+a:i-a;return[o,c,l,a]}function cC({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:l,sourceControlY:o,targetControlX:a,targetControlY:c}){const f=n*.125+l*.375+a*.375+e*.125,d=t*.125+o*.375+c*.375+i*.125,m=Math.abs(f-n),p=Math.abs(d-t);return[f,d,m,p]}var Is;(function(n){n.Strict="strict",n.Loose="loose"})(Is||(Is={}));var Ls;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Ls||(Ls={}));var ou;(function(n){n.Partial="partial",n.Full="full"})(ou||(ou={}));var Il;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Il||(Il={}));var uh;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(uh||(uh={}));var bt;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(bt||(bt={}));function WS({pos:n,x1:t,y1:e,x2:i,y2:l}){return n===bt.Left||n===bt.Right?[.5*(t+i),e]:[t,.5*(e+l)]}function fC({sourceX:n,sourceY:t,sourcePosition:e=bt.Bottom,targetX:i,targetY:l,targetPosition:o=bt.Top}){const[a,c]=WS({pos:e,x1:n,y1:t,x2:i,y2:l}),[f,d]=WS({pos:o,x1:i,y1:l,x2:n,y2:t}),[m,p,b,v]=cC({sourceX:n,sourceY:t,targetX:i,targetY:l,sourceControlX:a,sourceControlY:c,targetControlX:f,targetControlY:d});return[`M${n},${t} C${a},${c} ${f},${d} ${i},${l}`,m,p,b,v]}const L0=I.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,sourcePosition:l=bt.Bottom,targetPosition:o=bt.Top,label:a,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:p,style:b,markerEnd:v,markerStart:S,interactionWidth:w})=>{const[A,C,O]=fC({sourceX:n,sourceY:t,sourcePosition:l,targetX:e,targetY:i,targetPosition:o});return tt.createElement(Su,{path:A,labelX:C,labelY:O,label:a,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:p,style:b,markerEnd:v,markerStart:S,interactionWidth:w})});L0.displayName="SimpleBezierEdge";const FS={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},O5=({source:n,sourcePosition:t=bt.Bottom,target:e})=>t===bt.Left||t===bt.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},QS=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function R5({source:n,sourcePosition:t=bt.Bottom,target:e,targetPosition:i=bt.Top,center:l,offset:o}){const a=FS[t],c=FS[i],f={x:n.x+a.x*o,y:n.y+a.y*o},d={x:e.x+c.x*o,y:e.y+c.y*o},m=O5({source:f,sourcePosition:t,target:d}),p=m.x!==0?"x":"y",b=m[p];let v=[],S,w;const A={x:0,y:0},C={x:0,y:0},[O,_,D,R]=uC({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(a[p]*c[p]===-1){S=l.x??O,w=l.y??_;const U=[{x:S,y:f.y},{x:S,y:d.y}],Q=[{x:f.x,y:w},{x:d.x,y:w}];a[p]===b?v=p==="x"?U:Q:v=p==="x"?Q:U}else{const U=[{x:f.x,y:d.y}],Q=[{x:d.x,y:f.y}];if(p==="x"?v=a.x===b?Q:U:v=a.y===b?U:Q,t===i){const nt=Math.abs(n[p]-e[p]);if(nt<=o){const T=Math.min(o-1,o-nt);a[p]===b?A[p]=(f[p]>n[p]?-1:1)*T:C[p]=(d[p]>e[p]?-1:1)*T}}if(t!==i){const nt=p==="x"?"y":"x",T=a[p]===c[nt],q=f[nt]>d[nt],k=f[nt]<d[nt];(a[p]===1&&(!T&&q||T&&k)||a[p]!==1&&(!T&&k||T&&q))&&(v=p==="x"?U:Q)}const P={x:f.x+A.x,y:f.y+A.y},et={x:d.x+C.x,y:d.y+C.y},J=Math.max(Math.abs(P.x-v[0].x),Math.abs(et.x-v[0].x)),F=Math.max(Math.abs(P.y-v[0].y),Math.abs(et.y-v[0].y));J>=F?(S=(P.x+et.x)/2,w=v[0].y):(S=v[0].x,w=(P.y+et.y)/2)}return[[n,{x:f.x+A.x,y:f.y+A.y},...v,{x:d.x+C.x,y:d.y+C.y},e],S,w,D,R]}function N5(n,t,e,i){const l=Math.min(QS(n,t)/2,QS(t,e)/2,i),{x:o,y:a}=t;if(n.x===o&&o===e.x||n.y===a&&a===e.y)return`L${o} ${a}`;if(n.y===a){const d=n.x<e.x?-1:1,m=n.y<e.y?1:-1;return`L ${o+l*d},${a}Q ${o},${a} ${o},${a+l*m}`}const c=n.x<e.x?1:-1,f=n.y<e.y?-1:1;return`L ${o},${a+l*f}Q ${o},${a} ${o+l*c},${a}`}function Vp({sourceX:n,sourceY:t,sourcePosition:e=bt.Bottom,targetX:i,targetY:l,targetPosition:o=bt.Top,borderRadius:a=5,centerX:c,centerY:f,offset:d=20}){const[m,p,b,v,S]=R5({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:l},targetPosition:o,center:{x:c,y:f},offset:d});return[m.reduce((A,C,O)=>{let _="";return O>0&&O<m.length-1?_=N5(m[O-1],C,m[O+1],a):_=`${O===0?"M":"L"}${C.x} ${C.y}`,A+=_,A},""),p,b,v,S]}const Oh=I.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:m,sourcePosition:p=bt.Bottom,targetPosition:b=bt.Top,markerEnd:v,markerStart:S,pathOptions:w,interactionWidth:A})=>{const[C,O,_]=Vp({sourceX:n,sourceY:t,sourcePosition:p,targetX:e,targetY:i,targetPosition:b,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return tt.createElement(Su,{path:C,labelX:O,labelY:_,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:v,markerStart:S,interactionWidth:A})});Oh.displayName="SmoothStepEdge";const H0=I.memo(n=>{var t;return tt.createElement(Oh,{...n,pathOptions:I.useMemo(()=>{var e;return{borderRadius:0,offset:(e=n.pathOptions)==null?void 0:e.offset}},[(t=n.pathOptions)==null?void 0:t.offset])})});H0.displayName="StepEdge";function _5({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[l,o,a,c]=uC({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,l,o,a,c]}const V0=I.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:p,markerStart:b,interactionWidth:v})=>{const[S,w,A]=_5({sourceX:n,sourceY:t,targetX:e,targetY:i});return tt.createElement(Su,{path:S,labelX:w,labelY:A,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:p,markerStart:b,interactionWidth:v})});V0.displayName="StraightEdge";function gf(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function JS({pos:n,x1:t,y1:e,x2:i,y2:l,c:o}){switch(n){case bt.Left:return[t-gf(t-i,o),e];case bt.Right:return[t+gf(i-t,o),e];case bt.Top:return[t,e-gf(e-l,o)];case bt.Bottom:return[t,e+gf(l-e,o)]}}function hC({sourceX:n,sourceY:t,sourcePosition:e=bt.Bottom,targetX:i,targetY:l,targetPosition:o=bt.Top,curvature:a=.25}){const[c,f]=JS({pos:e,x1:n,y1:t,x2:i,y2:l,c:a}),[d,m]=JS({pos:o,x1:i,y1:l,x2:n,y2:t,c:a}),[p,b,v,S]=cC({sourceX:n,sourceY:t,targetX:i,targetY:l,sourceControlX:c,sourceControlY:f,targetControlX:d,targetControlY:m});return[`M${n},${t} C${c},${f} ${d},${m} ${i},${l}`,p,b,v,S]}const ch=I.memo(({sourceX:n,sourceY:t,targetX:e,targetY:i,sourcePosition:l=bt.Bottom,targetPosition:o=bt.Top,label:a,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:p,style:b,markerEnd:v,markerStart:S,pathOptions:w,interactionWidth:A})=>{const[C,O,_]=hC({sourceX:n,sourceY:t,sourcePosition:l,targetX:e,targetY:i,targetPosition:o,curvature:w==null?void 0:w.curvature});return tt.createElement(Su,{path:C,labelX:O,labelY:_,label:a,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:p,style:b,markerEnd:v,markerStart:S,interactionWidth:A})});ch.displayName="BezierEdge";const U0=I.createContext(null),B5=U0.Provider;U0.Consumer;const z5=()=>I.useContext(U0),L5=n=>"id"in n&&"source"in n&&"target"in n,H5=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`reactflow__edge-${n}${t||""}-${e}${i||""}`,Up=(n,t)=>typeof n>"u"?"":typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`,V5=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),U5=(n,t)=>{if(!n.source||!n.target)return t;let e;return L5(n)?e={...n}:e={...n,id:H5(n)},V5(e,t)?t:t.concat(e)},qp=({x:n,y:t},[e,i,l],o,[a,c])=>{const f={x:(n-e)/l,y:(t-i)/l};return o?{x:a*Math.round(f.x/a),y:c*Math.round(f.y/c)}:f},dC=({x:n,y:t},[e,i,l])=>({x:n*l+e,y:t*l+i}),qs=(n,t=[0,0])=>{if(!n)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const e=(n.width??0)*t[0],i=(n.height??0)*t[1],l={x:n.position.x-e,y:n.position.y-i};return{...l,positionAbsolute:n.positionAbsolute?{x:n.positionAbsolute.x-e,y:n.positionAbsolute.y-i}:l}},Rh=(n,t=[0,0])=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,l)=>{const{x:o,y:a}=qs(l,t).positionAbsolute;return sC(i,ru({x:o,y:a,width:l.width||0,height:l.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rC(e)},mC=(n,t,[e,i,l]=[0,0,1],o=!1,a=!1,c=[0,0])=>{const f={x:(t.x-e)/l,y:(t.y-i)/l,width:t.width/l,height:t.height/l},d=[];return n.forEach(m=>{const{width:p,height:b,selectable:v=!0,hidden:S=!1}=m;if(a&&!v||S)return!1;const{positionAbsolute:w}=qs(m,c),A={x:w.x,y:w.y,width:p||0,height:b||0},C=Lp(f,A),O=typeof p>"u"||typeof b>"u"||p===null||b===null,_=o&&C>0,D=(p||0)*(b||0);(O||_||C>=D||m.dragging)&&d.push(m)}),d},gC=(n,t)=>{const e=n.map(i=>i.id);return t.filter(i=>e.includes(i.source)||e.includes(i.target))},pC=(n,t,e,i,l,o=.1)=>{const a=t/(n.width*(1+o)),c=e/(n.height*(1+o)),f=Math.min(a,c),d=co(f,i,l),m=n.x+n.width/2,p=n.y+n.height/2,b=t/2-m*d,v=e/2-p*d;return{x:b,y:v,zoom:d}},Os=(n,t=0)=>n.transition().duration(t);function tw(n,t,e,i){return(t[e]||[]).reduce((l,o)=>{var a,c;return`${n.id}-${o.id}-${e}`!==i&&l.push({id:o.id||null,type:e,nodeId:n.id,x:(((a=n.positionAbsolute)==null?void 0:a.x)??0)+o.x+o.width/2,y:(((c=n.positionAbsolute)==null?void 0:c.y)??0)+o.y+o.height/2}),l},[])}function q5(n,t,e,i,l,o){const{x:a,y:c}=ts(n),d=t.elementsFromPoint(a,c).find(S=>S.classList.contains("react-flow__handle"));if(d){const S=d.getAttribute("data-nodeid");if(S){const w=q0(void 0,d),A=d.getAttribute("data-handleid"),C=o({nodeId:S,id:A,type:w});if(C){const O=l.find(_=>_.nodeId===S&&_.type===w&&_.id===A);return{handle:{id:A,type:w,nodeId:S,x:(O==null?void 0:O.x)||e.x,y:(O==null?void 0:O.y)||e.y},validHandleResult:C}}}}let m=[],p=1/0;if(l.forEach(S=>{const w=Math.sqrt((S.x-e.x)**2+(S.y-e.y)**2);if(w<=i){const A=o(S);w<=p&&(w<p?m=[{handle:S,validHandleResult:A}]:w===p&&m.push({handle:S,validHandleResult:A}),p=w)}}),!m.length)return{handle:null,validHandleResult:yC()};if(m.length===1)return m[0];const b=m.some(({validHandleResult:S})=>S.isValid),v=m.some(({handle:S})=>S.type==="target");return m.find(({handle:S,validHandleResult:w})=>v?S.type==="target":b?w.isValid:!0)||m[0]}const Y5={source:null,target:null,sourceHandle:null,targetHandle:null},yC=()=>({handleDomNode:null,isValid:!1,connection:Y5,endHandle:null});function bC(n,t,e,i,l,o,a){const c=l==="target",f=a.querySelector(`.react-flow__handle[data-id="${n==null?void 0:n.nodeId}-${n==null?void 0:n.id}-${n==null?void 0:n.type}"]`),d={...yC(),handleDomNode:f};if(f){const m=q0(void 0,f),p=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),v=f.classList.contains("connectable"),S=f.classList.contains("connectableend"),w={source:c?p:e,sourceHandle:c?b:i,target:c?e:p,targetHandle:c?i:b};d.connection=w,v&&S&&(t===Is.Strict?c&&m==="source"||!c&&m==="target":p!==e||b!==i)&&(d.endHandle={nodeId:p,handleId:b,type:m},d.isValid=o(w))}return d}function G5({nodes:n,nodeId:t,handleId:e,handleType:i}){return n.reduce((l,o)=>{if(o[fe]){const{handleBounds:a}=o[fe];let c=[],f=[];a&&(c=tw(o,a,"source",`${t}-${e}-${i}`),f=tw(o,a,"target",`${t}-${e}-${i}`)),l.push(...c,...f)}return l},[])}function q0(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Cg(n){n==null||n.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function P5(n,t){let e=null;return t?e="valid":n&&!t&&(e="invalid"),e}function vC({event:n,handleId:t,nodeId:e,onConnect:i,isTarget:l,getState:o,setState:a,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:d}){const m=lC(n.target),{connectionMode:p,domNode:b,autoPanOnConnect:v,connectionRadius:S,onConnectStart:w,panBy:A,getNodes:C,cancelConnection:O}=o();let _=0,D;const{x:R,y:B}=ts(n),U=m==null?void 0:m.elementFromPoint(R,B),Q=q0(f,U),P=b==null?void 0:b.getBoundingClientRect();if(!P||!Q)return;let et,J=ts(n,P),F=!1,nt=null,T=!1,q=null;const k=G5({nodes:C(),nodeId:e,handleId:t,handleType:Q}),z=()=>{if(!v)return;const[E,L]=iC(J,P);A({x:E,y:L}),_=requestAnimationFrame(z)};a({connectionPosition:J,connectionStatus:null,connectionNodeId:e,connectionHandleId:t,connectionHandleType:Q,connectionStartHandle:{nodeId:e,handleId:t,type:Q},connectionEndHandle:null}),w==null||w(n,{nodeId:e,handleId:t,handleType:Q});function j(E){const{transform:L}=o();J=ts(E,P);const{handle:G,validHandleResult:W}=q5(E,m,qp(J,L,!1,[1,1]),S,k,it=>bC(it,p,e,t,l?"target":"source",c,m));if(D=G,F||(z(),F=!0),q=W.handleDomNode,nt=W.connection,T=W.isValid,a({connectionPosition:D&&T?dC({x:D.x,y:D.y},L):J,connectionStatus:P5(!!D,T),connectionEndHandle:W.endHandle}),!D&&!T&&!q)return Cg(et);nt.source!==nt.target&&q&&(Cg(et),et=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",T),q.classList.toggle("react-flow__handle-valid",T))}function H(E){var L,G;(D||q)&&nt&&T&&(i==null||i(nt)),(G=(L=o()).onConnectEnd)==null||G.call(L,E),f&&(d==null||d(E)),Cg(et),O(),cancelAnimationFrame(_),F=!1,T=!1,nt=null,q=null,m.removeEventListener("mousemove",j),m.removeEventListener("mouseup",H),m.removeEventListener("touchmove",j),m.removeEventListener("touchend",H)}m.addEventListener("mousemove",j),m.addEventListener("mouseup",H),m.addEventListener("touchmove",j),m.addEventListener("touchend",H)}const ew=()=>!0,X5=n=>({connectionStartHandle:n.connectionStartHandle,connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName}),j5=(n,t,e)=>i=>{const{connectionStartHandle:l,connectionEndHandle:o,connectionClickStartHandle:a}=i;return{connecting:(l==null?void 0:l.nodeId)===n&&(l==null?void 0:l.handleId)===t&&(l==null?void 0:l.type)===e||(o==null?void 0:o.nodeId)===n&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===e,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===e}},xC=I.forwardRef(({type:n="source",position:t=bt.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:o=!0,id:a,onConnect:c,children:f,className:d,onMouseDown:m,onTouchStart:p,...b},v)=>{var P,et;const S=a||null,w=n==="target",A=De(),C=z5(),{connectOnClick:O,noPanClassName:_}=Jt(X5,He),{connecting:D,clickConnecting:R}=Jt(j5(C,S,n),He);C||(et=(P=A.getState()).onError)==null||et.call(P,"010",ul.error010());const B=J=>{const{defaultEdgeOptions:F,onConnect:nt,hasDefaultEdges:T}=A.getState(),q={...F,...J};if(T){const{edges:k,setEdges:z}=A.getState();z(U5(q,k))}nt==null||nt(q),c==null||c(q)},U=J=>{if(!C)return;const F=aC(J);l&&(F&&J.button===0||!F)&&vC({event:J,handleId:S,nodeId:C,onConnect:B,isTarget:w,getState:A.getState,setState:A.setState,isValidConnection:e||A.getState().isValidConnection||ew}),F?m==null||m(J):p==null||p(J)},Q=J=>{const{onClickConnectStart:F,onClickConnectEnd:nt,connectionClickStartHandle:T,connectionMode:q,isValidConnection:k}=A.getState();if(!C||!T&&!l)return;if(!T){F==null||F(J,{nodeId:C,handleId:S,handleType:n}),A.setState({connectionClickStartHandle:{nodeId:C,type:n,handleId:S}});return}const z=lC(J.target),j=e||k||ew,{connection:H,isValid:E}=bC({nodeId:C,id:S,type:n},q,T.nodeId,T.handleId||null,T.type,j,z);E&&B(H),nt==null||nt(J),A.setState({connectionClickStartHandle:null})};return tt.createElement("div",{"data-handleid":S,"data-nodeid":C,"data-handlepos":t,"data-id":`${C}-${S}-${n}`,className:je(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,d,{source:!w,target:w,connectable:i,connectablestart:l,connectableend:o,connecting:R,connectionindicator:i&&(l&&!D||o&&D)}]),onMouseDown:U,onTouchStart:U,onClick:O?Q:void 0,ref:v,...b},f)});xC.displayName="Handle";var fo=I.memo(xC);const SC=({data:n,isConnectable:t,targetPosition:e=bt.Top,sourcePosition:i=bt.Bottom})=>tt.createElement(tt.Fragment,null,tt.createElement(fo,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,tt.createElement(fo,{type:"source",position:i,isConnectable:t}));SC.displayName="DefaultNode";var Yp=I.memo(SC);const wC=({data:n,isConnectable:t,sourcePosition:e=bt.Bottom})=>tt.createElement(tt.Fragment,null,n==null?void 0:n.label,tt.createElement(fo,{type:"source",position:e,isConnectable:t}));wC.displayName="InputNode";var AC=I.memo(wC);const MC=({data:n,isConnectable:t,targetPosition:e=bt.Top})=>tt.createElement(tt.Fragment,null,tt.createElement(fo,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label);MC.displayName="OutputNode";var CC=I.memo(MC);const Y0=()=>null;Y0.displayName="GroupNode";const $5=n=>({selectedNodes:n.getNodes().filter(t=>t.selected),selectedEdges:n.edges.filter(t=>t.selected).map(t=>({...t}))}),pf=n=>n.id;function K5(n,t){return He(n.selectedNodes.map(pf),t.selectedNodes.map(pf))&&He(n.selectedEdges.map(pf),t.selectedEdges.map(pf))}const EC=I.memo(({onSelectionChange:n})=>{const t=De(),{selectedNodes:e,selectedEdges:i}=Jt($5,K5);return I.useEffect(()=>{const l={nodes:e,edges:i};n==null||n(l),t.getState().onSelectionChange.forEach(o=>o(l))},[e,i,n]),null});EC.displayName="SelectionListener";const I5=n=>!!n.onSelectionChange;function Z5({onSelectionChange:n}){const t=Jt(I5);return n||t?tt.createElement(EC,{onSelectionChange:n}):null}const W5=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset});function Br(n,t){I.useEffect(()=>{typeof n<"u"&&t(n)},[n])}function Nt(n,t,e){I.useEffect(()=>{typeof t<"u"&&e({[n]:t})},[t])}const F5=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:l,onConnectStart:o,onConnectEnd:a,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:d,nodesConnectable:m,nodesFocusable:p,edgesFocusable:b,edgesUpdatable:v,elevateNodesOnSelect:S,minZoom:w,maxZoom:A,nodeExtent:C,onNodesChange:O,onEdgesChange:_,elementsSelectable:D,connectionMode:R,snapGrid:B,snapToGrid:U,translateExtent:Q,connectOnClick:P,defaultEdgeOptions:et,fitView:J,fitViewOptions:F,onNodesDelete:nt,onEdgesDelete:T,onNodeDrag:q,onNodeDragStart:k,onNodeDragStop:z,onSelectionDrag:j,onSelectionDragStart:H,onSelectionDragStop:E,noPanClassName:L,nodeOrigin:G,rfId:W,autoPanOnConnect:it,autoPanOnNodeDrag:ut,onError:ct,connectionRadius:St,isValidConnection:vt,nodeDragThreshold:Tt})=>{const{setNodes:zt,setEdges:ae,setDefaultNodesAndEdges:le,setMinZoom:Ae,setMaxZoom:ye,setTranslateExtent:se,setNodeExtent:tn,reset:Dt}=Jt(W5,He),yt=De();return I.useEffect(()=>{const Oe=i==null?void 0:i.map(_n=>({..._n,...et}));return le(e,Oe),()=>{Dt()}},[]),Nt("defaultEdgeOptions",et,yt.setState),Nt("connectionMode",R,yt.setState),Nt("onConnect",l,yt.setState),Nt("onConnectStart",o,yt.setState),Nt("onConnectEnd",a,yt.setState),Nt("onClickConnectStart",c,yt.setState),Nt("onClickConnectEnd",f,yt.setState),Nt("nodesDraggable",d,yt.setState),Nt("nodesConnectable",m,yt.setState),Nt("nodesFocusable",p,yt.setState),Nt("edgesFocusable",b,yt.setState),Nt("edgesUpdatable",v,yt.setState),Nt("elementsSelectable",D,yt.setState),Nt("elevateNodesOnSelect",S,yt.setState),Nt("snapToGrid",U,yt.setState),Nt("snapGrid",B,yt.setState),Nt("onNodesChange",O,yt.setState),Nt("onEdgesChange",_,yt.setState),Nt("connectOnClick",P,yt.setState),Nt("fitViewOnInit",J,yt.setState),Nt("fitViewOnInitOptions",F,yt.setState),Nt("onNodesDelete",nt,yt.setState),Nt("onEdgesDelete",T,yt.setState),Nt("onNodeDrag",q,yt.setState),Nt("onNodeDragStart",k,yt.setState),Nt("onNodeDragStop",z,yt.setState),Nt("onSelectionDrag",j,yt.setState),Nt("onSelectionDragStart",H,yt.setState),Nt("onSelectionDragStop",E,yt.setState),Nt("noPanClassName",L,yt.setState),Nt("nodeOrigin",G,yt.setState),Nt("rfId",W,yt.setState),Nt("autoPanOnConnect",it,yt.setState),Nt("autoPanOnNodeDrag",ut,yt.setState),Nt("onError",ct,yt.setState),Nt("connectionRadius",St,yt.setState),Nt("isValidConnection",vt,yt.setState),Nt("nodeDragThreshold",Tt,yt.setState),Br(n,zt),Br(t,ae),Br(w,Ae),Br(A,ye),Br(Q,se),Br(C,tn),null},nw={display:"none"},Q5={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kC="react-flow__node-desc",TC="react-flow__edge-desc",J5="react-flow__aria-live",t6=n=>n.ariaLiveMessage;function e6({rfId:n}){const t=Jt(t6);return tt.createElement("div",{id:`${J5}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:Q5},t)}function n6({rfId:n,disableKeyboardA11y:t}){return tt.createElement(tt.Fragment,null,tt.createElement("div",{id:`${kC}-${n}`,style:nw},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),tt.createElement("div",{id:`${TC}-${n}`,style:nw},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&tt.createElement(e6,{rfId:n}))}var au=(n=null,t={actInsideInputWithModifier:!0})=>{const[e,i]=I.useState(!1),l=I.useRef(!1),o=I.useRef(new Set([])),[a,c]=I.useMemo(()=>{if(n!==null){const d=(Array.isArray(n)?n:[n]).filter(p=>typeof p=="string").map(p=>p.split("+")),m=d.reduce((p,b)=>p.concat(...b),[]);return[d,m]}return[[],[]]},[n]);return I.useEffect(()=>{const f=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||f;if(n!==null){const m=v=>{if(l.current=v.ctrlKey||v.metaKey||v.shiftKey,(!l.current||l.current&&!t.actInsideInputWithModifier)&&Hp(v))return!1;const w=lw(v.code,c);o.current.add(v[w]),iw(a,o.current,!1)&&(v.preventDefault(),i(!0))},p=v=>{if((!l.current||l.current&&!t.actInsideInputWithModifier)&&Hp(v))return!1;const w=lw(v.code,c);iw(a,o.current,!0)?(i(!1),o.current.clear()):o.current.delete(v[w]),v.key==="Meta"&&o.current.clear(),l.current=!1},b=()=>{o.current.clear(),i(!1)};return d==null||d.addEventListener("keydown",m),d==null||d.addEventListener("keyup",p),window.addEventListener("blur",b),()=>{d==null||d.removeEventListener("keydown",m),d==null||d.removeEventListener("keyup",p),window.removeEventListener("blur",b)}}},[n,i]),e};function iw(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(l=>t.has(l)))}function lw(n,t){return t.includes(n)?"code":"key"}function DC(n,t,e,i){var c,f;const l=n.parentNode||n.parentId;if(!l)return e;const o=t.get(l),a=qs(o,i);return DC(o,t,{x:(e.x??0)+a.x,y:(e.y??0)+a.y,z:(((c=o[fe])==null?void 0:c.z)??0)>(e.z??0)?((f=o[fe])==null?void 0:f.z)??0:e.z??0},i)}function OC(n,t,e){n.forEach(i=>{var o;const l=i.parentNode||i.parentId;if(l&&!n.has(l))throw new Error(`Parent node ${l} not found`);if(l||e!=null&&e[i.id]){const{x:a,y:c,z:f}=DC(i,n,{...i.position,z:((o=i[fe])==null?void 0:o.z)??0},t);i.positionAbsolute={x:a,y:c},i[fe].z=f,e!=null&&e[i.id]&&(i[fe].isParent=!0)}})}function Eg(n,t,e,i){const l=new Map,o={},a=i?1e3:0;return n.forEach(c=>{var v;const f=(Zn(c.zIndex)?c.zIndex:0)+(c.selected?a:0),d=t.get(c.id),m={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},p=c.parentNode||c.parentId;p&&(o[p]=!0);const b=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==c.type;Object.defineProperty(m,fe,{enumerable:!1,value:{handleBounds:b||(v=d==null?void 0:d[fe])==null?void 0:v.handleBounds,z:f}}),l.set(c.id,m)}),OC(l,e,o),l}function RC(n,t={}){const{getNodes:e,width:i,height:l,minZoom:o,maxZoom:a,d3Zoom:c,d3Selection:f,fitViewOnInitDone:d,fitViewOnInit:m,nodeOrigin:p}=n(),b=t.initial&&!d&&m;if(c&&f&&(b||!t.initial)){const S=e().filter(A=>{var O;const C=t.includeHiddenNodes?A.width&&A.height:!A.hidden;return(O=t.nodes)!=null&&O.length?C&&t.nodes.some(_=>_.id===A.id):C}),w=S.every(A=>A.width&&A.height);if(S.length>0&&w){const A=Rh(S,p),{x:C,y:O,zoom:_}=pC(A,i,l,t.minZoom??o,t.maxZoom??a,t.padding??.1),D=sl.translate(C,O).scale(_);return typeof t.duration=="number"&&t.duration>0?c.transform(Os(f,t.duration),D):c.transform(f,D),!0}}return!1}function i6(n,t){return n.forEach(e=>{const i=t.get(e.id);i&&t.set(i.id,{...i,[fe]:i[fe],selected:e.selected})}),new Map(t)}function l6(n,t){return t.map(e=>{const i=n.find(l=>l.id===e.id);return i&&(e.selected=i.selected),e})}function yf({changedNodes:n,changedEdges:t,get:e,set:i}){const{nodeInternals:l,edges:o,onNodesChange:a,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:d}=e();n!=null&&n.length&&(f&&i({nodeInternals:i6(n,l)}),a==null||a(n)),t!=null&&t.length&&(d&&i({edges:l6(t,o)}),c==null||c(t))}const zr=()=>{},s6={zoomIn:zr,zoomOut:zr,zoomTo:zr,getZoom:()=>1,setViewport:zr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:zr,fitBounds:zr,project:n=>n,screenToFlowPosition:n=>n,flowToScreenPosition:n=>n,viewportInitialized:!1},r6=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection}),o6=()=>{const n=De(),{d3Zoom:t,d3Selection:e}=Jt(r6,He);return I.useMemo(()=>e&&t?{zoomIn:l=>t.scaleBy(Os(e,l==null?void 0:l.duration),1.2),zoomOut:l=>t.scaleBy(Os(e,l==null?void 0:l.duration),1/1.2),zoomTo:(l,o)=>t.scaleTo(Os(e,o==null?void 0:o.duration),l),getZoom:()=>n.getState().transform[2],setViewport:(l,o)=>{const[a,c,f]=n.getState().transform,d=sl.translate(l.x??a,l.y??c).scale(l.zoom??f);t.transform(Os(e,o==null?void 0:o.duration),d)},getViewport:()=>{const[l,o,a]=n.getState().transform;return{x:l,y:o,zoom:a}},fitView:l=>RC(n.getState,l),setCenter:(l,o,a)=>{const{width:c,height:f,maxZoom:d}=n.getState(),m=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:d,p=c/2-l*m,b=f/2-o*m,v=sl.translate(p,b).scale(m);t.transform(Os(e,a==null?void 0:a.duration),v)},fitBounds:(l,o)=>{const{width:a,height:c,minZoom:f,maxZoom:d}=n.getState(),{x:m,y:p,zoom:b}=pC(l,a,c,f,d,(o==null?void 0:o.padding)??.1),v=sl.translate(m,p).scale(b);t.transform(Os(e,o==null?void 0:o.duration),v)},project:l=>{const{transform:o,snapToGrid:a,snapGrid:c}=n.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),qp(l,o,a,c)},screenToFlowPosition:l=>{const{transform:o,snapToGrid:a,snapGrid:c,domNode:f}=n.getState();if(!f)return l;const{x:d,y:m}=f.getBoundingClientRect(),p={x:l.x-d,y:l.y-m};return qp(p,o,a,c)},flowToScreenPosition:l=>{const{transform:o,domNode:a}=n.getState();if(!a)return l;const{x:c,y:f}=a.getBoundingClientRect(),d=dC(l,o);return{x:d.x+c,y:d.y+f}},viewportInitialized:!0}:s6,[t,e])};function G0(){const n=o6(),t=De(),e=I.useCallback(()=>t.getState().getNodes().map(w=>({...w})),[]),i=I.useCallback(w=>t.getState().nodeInternals.get(w),[]),l=I.useCallback(()=>{const{edges:w=[]}=t.getState();return w.map(A=>({...A}))},[]),o=I.useCallback(w=>{const{edges:A=[]}=t.getState();return A.find(C=>C.id===w)},[]),a=I.useCallback(w=>{const{getNodes:A,setNodes:C,hasDefaultNodes:O,onNodesChange:_}=t.getState(),D=A(),R=typeof w=="function"?w(D):w;if(O)C(R);else if(_){const B=R.length===0?D.map(U=>({type:"remove",id:U.id})):R.map(U=>({item:U,type:"reset"}));_(B)}},[]),c=I.useCallback(w=>{const{edges:A=[],setEdges:C,hasDefaultEdges:O,onEdgesChange:_}=t.getState(),D=typeof w=="function"?w(A):w;if(O)C(D);else if(_){const R=D.length===0?A.map(B=>({type:"remove",id:B.id})):D.map(B=>({item:B,type:"reset"}));_(R)}},[]),f=I.useCallback(w=>{const A=Array.isArray(w)?w:[w],{getNodes:C,setNodes:O,hasDefaultNodes:_,onNodesChange:D}=t.getState();if(_){const B=[...C(),...A];O(B)}else if(D){const R=A.map(B=>({item:B,type:"add"}));D(R)}},[]),d=I.useCallback(w=>{const A=Array.isArray(w)?w:[w],{edges:C=[],setEdges:O,hasDefaultEdges:_,onEdgesChange:D}=t.getState();if(_)O([...C,...A]);else if(D){const R=A.map(B=>({item:B,type:"add"}));D(R)}},[]),m=I.useCallback(()=>{const{getNodes:w,edges:A=[],transform:C}=t.getState(),[O,_,D]=C;return{nodes:w().map(R=>({...R})),edges:A.map(R=>({...R})),viewport:{x:O,y:_,zoom:D}}},[]),p=I.useCallback(({nodes:w,edges:A})=>{const{nodeInternals:C,getNodes:O,edges:_,hasDefaultNodes:D,hasDefaultEdges:R,onNodesDelete:B,onEdgesDelete:U,onNodesChange:Q,onEdgesChange:P}=t.getState(),et=(w||[]).map(q=>q.id),J=(A||[]).map(q=>q.id),F=O().reduce((q,k)=>{const z=k.parentNode||k.parentId,j=!et.includes(k.id)&&z&&q.find(E=>E.id===z);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(et.includes(k.id)||j)&&q.push(k),q},[]),nt=_.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),T=nt.filter(q=>J.includes(q.id));if(F||T){const q=gC(F,nt),k=[...T,...q],z=k.reduce((j,H)=>(j.includes(H.id)||j.push(H.id),j),[]);if((R||D)&&(R&&t.setState({edges:_.filter(j=>!z.includes(j.id))}),D&&(F.forEach(j=>{C.delete(j.id)}),t.setState({nodeInternals:new Map(C)}))),z.length>0&&(U==null||U(k),P&&P(z.map(j=>({id:j,type:"remove"})))),F.length>0&&(B==null||B(F),Q)){const j=F.map(H=>({id:H.id,type:"remove"}));Q(j)}}},[]),b=I.useCallback(w=>{const A=k5(w),C=A?null:t.getState().nodeInternals.get(w.id);return!A&&!C?[null,null,A]:[A?w:ZS(C),C,A]},[]),v=I.useCallback((w,A=!0,C)=>{const[O,_,D]=b(w);return O?(C||t.getState().getNodes()).filter(R=>{if(!D&&(R.id===_.id||!R.positionAbsolute))return!1;const B=ZS(R),U=Lp(B,O);return A&&U>0||U>=O.width*O.height}):[]},[]),S=I.useCallback((w,A,C=!0)=>{const[O]=b(w);if(!O)return!1;const _=Lp(O,A);return C&&_>0||_>=O.width*O.height},[]);return I.useMemo(()=>({...n,getNodes:e,getNode:i,getEdges:l,getEdge:o,setNodes:a,setEdges:c,addNodes:f,addEdges:d,toObject:m,deleteElements:p,getIntersectingNodes:v,isNodeIntersecting:S}),[n,e,i,l,o,a,c,f,d,m,p,v,S])}const a6={actInsideInputWithModifier:!1};var u6=({deleteKeyCode:n,multiSelectionKeyCode:t})=>{const e=De(),{deleteElements:i}=G0(),l=au(n,a6),o=au(t);I.useEffect(()=>{if(l){const{edges:a,getNodes:c}=e.getState(),f=c().filter(m=>m.selected),d=a.filter(m=>m.selected);i({nodes:f,edges:d}),e.setState({nodesSelectionActive:!1})}},[l]),I.useEffect(()=>{e.setState({multiSelectionActive:o})},[o])};function c6(n){const t=De();I.useEffect(()=>{let e;const i=()=>{var o,a;if(!n.current)return;const l=B0(n.current);(l.height===0||l.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",ul.error004())),t.setState({width:l.width||500,height:l.height||500})};return i(),window.addEventListener("resize",i),n.current&&(e=new ResizeObserver(()=>i()),e.observe(n.current)),()=>{window.removeEventListener("resize",i),e&&n.current&&e.unobserve(n.current)}},[])}const P0={position:"absolute",width:"100%",height:"100%",top:0,left:0},f6=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,bf=n=>({x:n.x,y:n.y,zoom:n.k}),Lr=(n,t)=>n.target.closest(`.${t}`),sw=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),rw=n=>{const t=n.ctrlKey&&ah()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t},h6=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection,d3ZoomHandler:n.d3ZoomHandler,userSelectionActive:n.userSelectionActive}),d6=({onMove:n,onMoveStart:t,onMoveEnd:e,onPaneContextMenu:i,zoomOnScroll:l=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=Ls.Free,zoomOnDoubleClick:d=!0,elementsSelectable:m,panOnDrag:p=!0,defaultViewport:b,translateExtent:v,minZoom:S,maxZoom:w,zoomActivationKeyCode:A,preventScrolling:C=!0,children:O,noWheelClassName:_,noPanClassName:D})=>{const R=I.useRef(),B=De(),U=I.useRef(!1),Q=I.useRef(!1),P=I.useRef(null),et=I.useRef({x:0,y:0,zoom:0}),{d3Zoom:J,d3Selection:F,d3ZoomHandler:nt,userSelectionActive:T}=Jt(h6,He),q=au(A),k=I.useRef(0),z=I.useRef(!1),j=I.useRef();return c6(P),I.useEffect(()=>{if(P.current){const H=P.current.getBoundingClientRect(),E=eC().scaleExtent([S,w]).translateExtent(v),L=$n(P.current).call(E),G=sl.translate(b.x,b.y).scale(co(b.zoom,S,w)),W=[[0,0],[H.width,H.height]],it=E.constrain()(G,W,v);E.transform(L,it),E.wheelDelta(rw),B.setState({d3Zoom:E,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[it.x,it.y,it.k],domNode:P.current.closest(".react-flow")})}},[]),I.useEffect(()=>{F&&J&&(a&&!q&&!T?F.on("wheel.zoom",H=>{if(Lr(H,_))return!1;H.preventDefault(),H.stopImmediatePropagation();const E=F.property("__zoom").k||1;if(H.ctrlKey&&o){const vt=si(H),Tt=rw(H),zt=E*Math.pow(2,Tt);J.scaleTo(F,zt,vt,H);return}const L=H.deltaMode===1?20:1;let G=f===Ls.Vertical?0:H.deltaX*L,W=f===Ls.Horizontal?0:H.deltaY*L;!ah()&&H.shiftKey&&f!==Ls.Vertical&&(G=H.deltaY*L,W=0),J.translateBy(F,-(G/E)*c,-(W/E)*c,{internal:!0});const it=bf(F.property("__zoom")),{onViewportChangeStart:ut,onViewportChange:ct,onViewportChangeEnd:St}=B.getState();clearTimeout(j.current),z.current||(z.current=!0,t==null||t(H,it),ut==null||ut(it)),z.current&&(n==null||n(H,it),ct==null||ct(it),j.current=setTimeout(()=>{e==null||e(H,it),St==null||St(it),z.current=!1},150))},{passive:!1}):typeof nt<"u"&&F.on("wheel.zoom",function(H,E){if(!C&&H.type==="wheel"&&!H.ctrlKey||Lr(H,_))return null;H.preventDefault(),nt.call(this,H,E)},{passive:!1}))},[T,a,f,F,J,nt,q,o,C,_,t,n,e]),I.useEffect(()=>{J&&J.on("start",H=>{var G,W;if(!H.sourceEvent||H.sourceEvent.internal)return null;k.current=(G=H.sourceEvent)==null?void 0:G.button;const{onViewportChangeStart:E}=B.getState(),L=bf(H.transform);U.current=!0,et.current=L,((W=H.sourceEvent)==null?void 0:W.type)==="mousedown"&&B.setState({paneDragging:!0}),E==null||E(L),t==null||t(H.sourceEvent,L)})},[J,t]),I.useEffect(()=>{J&&(T&&!U.current?J.on("zoom",null):T||J.on("zoom",H=>{var L;const{onViewportChange:E}=B.getState();if(B.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),Q.current=!!(i&&sw(p,k.current??0)),(n||E)&&!((L=H.sourceEvent)!=null&&L.internal)){const G=bf(H.transform);E==null||E(G),n==null||n(H.sourceEvent,G)}}))},[T,J,n,p,i]),I.useEffect(()=>{J&&J.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:E}=B.getState();if(U.current=!1,B.setState({paneDragging:!1}),i&&sw(p,k.current??0)&&!Q.current&&i(H.sourceEvent),Q.current=!1,(e||E)&&f6(et.current,H.transform)){const L=bf(H.transform);et.current=L,clearTimeout(R.current),R.current=setTimeout(()=>{E==null||E(L),e==null||e(H.sourceEvent,L)},a?150:0)}})},[J,a,p,e,i]),I.useEffect(()=>{J&&J.filter(H=>{const E=q||l,L=o&&H.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&H.button===1&&H.type==="mousedown"&&(Lr(H,"react-flow__node")||Lr(H,"react-flow__edge")))return!0;if(!p&&!E&&!a&&!d&&!o||T||!d&&H.type==="dblclick"||Lr(H,_)&&H.type==="wheel"||Lr(H,D)&&(H.type!=="wheel"||a&&H.type==="wheel"&&!q)||!o&&H.ctrlKey&&H.type==="wheel"||!E&&!a&&!L&&H.type==="wheel"||!p&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(p)&&!p.includes(H.button)&&H.type==="mousedown")return!1;const G=Array.isArray(p)&&p.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&G})},[T,J,l,o,a,d,p,m,q]),tt.createElement("div",{className:"react-flow__renderer",ref:P,style:P0},O)},m6=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function g6(){const{userSelectionActive:n,userSelectionRect:t}=Jt(m6,He);return n&&t?tt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ow(n,t){const e=t.parentNode||t.parentId,i=n.find(l=>l.id===e);if(i){const l=t.position.x+t.width-i.width,o=t.position.y+t.height-i.height;if(l>0||o>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,l>0&&(i.style.width+=l),o>0&&(i.style.height+=o),t.position.x<0){const a=Math.abs(t.position.x);i.position.x=i.position.x-a,i.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);i.position.y=i.position.y-a,i.style.height+=a,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function NC(n,t){if(n.some(i=>i.type==="reset"))return n.filter(i=>i.type==="reset").map(i=>i.item);const e=n.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,l)=>{const o=n.filter(c=>c.id===l.id);if(o.length===0)return i.push(l),i;const a={...l};for(const c of o)if(c)switch(c.type){case"select":{a.selected=c.selected;break}case"position":{typeof c.position<"u"&&(a.position=c.position),typeof c.positionAbsolute<"u"&&(a.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(a.dragging=c.dragging),a.expandParent&&ow(i,a);break}case"dimensions":{typeof c.dimensions<"u"&&(a.width=c.dimensions.width,a.height=c.dimensions.height),typeof c.updateStyle<"u"&&(a.style={...a.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(a.resizing=c.resizing),a.expandParent&&ow(i,a);break}case"remove":return i}return i.push(a),i},e)}function _C(n,t){return NC(n,t)}function p6(n,t){return NC(n,t)}const $l=(n,t)=>({id:n,type:"select",selected:t});function Xr(n,t){return n.reduce((e,i)=>{const l=t.includes(i.id);return!i.selected&&l?(i.selected=!0,e.push($l(i.id,!0))):i.selected&&!l&&(i.selected=!1,e.push($l(i.id,!1))),e},[])}const kg=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},y6=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging}),BC=I.memo(({isSelecting:n,selectionMode:t=ou.Full,panOnDrag:e,onSelectionStart:i,onSelectionEnd:l,onPaneClick:o,onPaneContextMenu:a,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:m,children:p})=>{const b=I.useRef(null),v=De(),S=I.useRef(0),w=I.useRef(0),A=I.useRef(),{userSelectionActive:C,elementsSelectable:O,dragging:_}=Jt(y6,He),D=()=>{v.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,w.current=0},R=nt=>{o==null||o(nt),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},B=nt=>{if(Array.isArray(e)&&(e!=null&&e.includes(2))){nt.preventDefault();return}a==null||a(nt)},U=c?nt=>c(nt):void 0,Q=nt=>{const{resetSelectedElements:T,domNode:q}=v.getState();if(A.current=q==null?void 0:q.getBoundingClientRect(),!O||!n||nt.button!==0||nt.target!==b.current||!A.current)return;const{x:k,y:z}=ts(nt,A.current);T(),v.setState({userSelectionRect:{width:0,height:0,startX:k,startY:z,x:k,y:z}}),i==null||i(nt)},P=nt=>{const{userSelectionRect:T,nodeInternals:q,edges:k,transform:z,onNodesChange:j,onEdgesChange:H,nodeOrigin:E,getNodes:L}=v.getState();if(!n||!A.current||!T)return;v.setState({userSelectionActive:!0,nodesSelectionActive:!1});const G=ts(nt,A.current),W=T.startX??0,it=T.startY??0,ut={...T,x:G.x<W?G.x:W,y:G.y<it?G.y:it,width:Math.abs(G.x-W),height:Math.abs(G.y-it)},ct=L(),St=mC(q,ut,z,t===ou.Partial,!0,E),vt=gC(St,k).map(zt=>zt.id),Tt=St.map(zt=>zt.id);if(S.current!==Tt.length){S.current=Tt.length;const zt=Xr(ct,Tt);zt.length&&(j==null||j(zt))}if(w.current!==vt.length){w.current=vt.length;const zt=Xr(k,vt);zt.length&&(H==null||H(zt))}v.setState({userSelectionRect:ut})},et=nt=>{if(nt.button!==0)return;const{userSelectionRect:T}=v.getState();!C&&T&&nt.target===b.current&&(R==null||R(nt)),v.setState({nodesSelectionActive:S.current>0}),D(),l==null||l(nt)},J=nt=>{C&&(v.setState({nodesSelectionActive:S.current>0}),l==null||l(nt)),D()},F=O&&(n||C);return tt.createElement("div",{className:je(["react-flow__pane",{dragging:_,selection:n}]),onClick:F?void 0:kg(R,b),onContextMenu:kg(B,b),onWheel:kg(U,b),onMouseEnter:F?void 0:f,onMouseDown:F?Q:void 0,onMouseMove:F?P:d,onMouseUp:F?et:void 0,onMouseLeave:F?J:m,ref:b,style:P0},p,tt.createElement(g6,null))});BC.displayName="Pane";function zC(n,t){const e=n.parentNode||n.parentId;if(!e)return!1;const i=t.get(e);return i?i.selected?!0:zC(i,t):!1}function aw(n,t,e){let i=n;do{if(i!=null&&i.matches(t))return!0;if(i===e.current)return!1;i=i.parentElement}while(i);return!1}function b6(n,t,e,i){return Array.from(n.values()).filter(l=>(l.selected||l.id===i)&&(!l.parentNode||l.parentId||!zC(l,n))&&(l.draggable||t&&typeof l.draggable>"u")).map(l=>{var o,a;return{id:l.id,position:l.position||{x:0,y:0},positionAbsolute:l.positionAbsolute||{x:0,y:0},distance:{x:e.x-(((o=l.positionAbsolute)==null?void 0:o.x)??0),y:e.y-(((a=l.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:l.extent,parentNode:l.parentNode||l.parentId,parentId:l.parentNode||l.parentId,width:l.width,height:l.height,expandParent:l.expandParent}})}function v6(n,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(n.width||0),t[1][1]-(n.height||0)]]}function LC(n,t,e,i,l=[0,0],o){const a=v6(n,n.extent||i);let c=a;const f=n.parentNode||n.parentId;if(n.extent==="parent"&&!n.expandParent)if(f&&n.width&&n.height){const p=e.get(f),{x:b,y:v}=qs(p,l).positionAbsolute;c=p&&Zn(b)&&Zn(v)&&Zn(p.width)&&Zn(p.height)?[[b+n.width*l[0],v+n.height*l[1]],[b+p.width-n.width+n.width*l[0],v+p.height-n.height+n.height*l[1]]]:c}else o==null||o("005",ul.error005()),c=a;else if(n.extent&&f&&n.extent!=="parent"){const p=e.get(f),{x:b,y:v}=qs(p,l).positionAbsolute;c=[[n.extent[0][0]+b,n.extent[0][1]+v],[n.extent[1][0]+b,n.extent[1][1]+v]]}let d={x:0,y:0};if(f){const p=e.get(f);d=qs(p,l).positionAbsolute}const m=c&&c!=="parent"?z0(t,c):t;return{position:{x:m.x-d.x,y:m.y-d.y},positionAbsolute:m}}function Tg({nodeId:n,dragItems:t,nodeInternals:e}){const i=t.map(l=>({...e.get(l.id),position:l.position,positionAbsolute:l.positionAbsolute}));return[n?i.find(l=>l.id===n):i[0],i]}const uw=(n,t,e,i)=>{const l=t.querySelectorAll(n);if(!l||!l.length)return null;const o=Array.from(l),a=t.getBoundingClientRect(),c={x:a.width*i[0],y:a.height*i[1]};return o.map(f=>{const d=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(d.left-a.left-c.x)/e,y:(d.top-a.top-c.y)/e,...B0(f)}})};function Ma(n,t,e){return e===void 0?e:i=>{const l=t().nodeInternals.get(n);l&&e(i,{...l})}}function Gp({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:o,multiSelectionActive:a,nodeInternals:c,onError:f}=t.getState(),d=c.get(n);if(!d){f==null||f("012",ul.error012(n));return}t.setState({nodesSelectionActive:!1}),d.selected?(e||d.selected&&a)&&(o({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):l([n])}function x6(){const n=De();return I.useCallback(({sourceEvent:e})=>{const{transform:i,snapGrid:l,snapToGrid:o}=n.getState(),a=e.touches?e.touches[0].clientX:e.clientX,c=e.touches?e.touches[0].clientY:e.clientY,f={x:(a-i[0])/i[2],y:(c-i[1])/i[2]};return{xSnapped:o?l[0]*Math.round(f.x/l[0]):f.x,ySnapped:o?l[1]*Math.round(f.y/l[1]):f.y,...f}},[])}function Dg(n){return(t,e,i)=>n==null?void 0:n(t,i)}function HC({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:l,isSelectable:o,selectNodesOnDrag:a}){const c=De(),[f,d]=I.useState(!1),m=I.useRef([]),p=I.useRef({x:null,y:null}),b=I.useRef(0),v=I.useRef(null),S=I.useRef({x:0,y:0}),w=I.useRef(null),A=I.useRef(!1),C=I.useRef(!1),O=I.useRef(!1),_=x6();return I.useEffect(()=>{if(n!=null&&n.current){const D=$n(n.current),R=({x:Q,y:P})=>{const{nodeInternals:et,onNodeDrag:J,onSelectionDrag:F,updateNodePositions:nt,nodeExtent:T,snapGrid:q,snapToGrid:k,nodeOrigin:z,onError:j}=c.getState();p.current={x:Q,y:P};let H=!1,E={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&T){const G=Rh(m.current,z);E=ru(G)}if(m.current=m.current.map(G=>{const W={x:Q-G.distance.x,y:P-G.distance.y};k&&(W.x=q[0]*Math.round(W.x/q[0]),W.y=q[1]*Math.round(W.y/q[1]));const it=[[T[0][0],T[0][1]],[T[1][0],T[1][1]]];m.current.length>1&&T&&!G.extent&&(it[0][0]=G.positionAbsolute.x-E.x+T[0][0],it[1][0]=G.positionAbsolute.x+(G.width??0)-E.x2+T[1][0],it[0][1]=G.positionAbsolute.y-E.y+T[0][1],it[1][1]=G.positionAbsolute.y+(G.height??0)-E.y2+T[1][1]);const ut=LC(G,W,et,it,z,j);return H=H||G.position.x!==ut.position.x||G.position.y!==ut.position.y,G.position=ut.position,G.positionAbsolute=ut.positionAbsolute,G}),!H)return;nt(m.current,!0,!0),d(!0);const L=l?J:Dg(F);if(L&&w.current){const[G,W]=Tg({nodeId:l,dragItems:m.current,nodeInternals:et});L(w.current,G,W)}},B=()=>{if(!v.current)return;const[Q,P]=iC(S.current,v.current);if(Q!==0||P!==0){const{transform:et,panBy:J}=c.getState();p.current.x=(p.current.x??0)-Q/et[2],p.current.y=(p.current.y??0)-P/et[2],J({x:Q,y:P})&&R(p.current)}b.current=requestAnimationFrame(B)},U=Q=>{var z;const{nodeInternals:P,multiSelectionActive:et,nodesDraggable:J,unselectNodesAndEdges:F,onNodeDragStart:nt,onSelectionDragStart:T}=c.getState();C.current=!0;const q=l?nt:Dg(T);(!a||!o)&&!et&&l&&((z=P.get(l))!=null&&z.selected||F()),l&&o&&a&&Gp({id:l,store:c,nodeRef:n});const k=_(Q);if(p.current=k,m.current=b6(P,J,k,l),q&&m.current){const[j,H]=Tg({nodeId:l,dragItems:m.current,nodeInternals:P});q(Q.sourceEvent,j,H)}};if(t)D.on(".drag",null);else{const Q=R8().on("start",P=>{const{domNode:et,nodeDragThreshold:J}=c.getState();J===0&&U(P),O.current=!1;const F=_(P);p.current=F,v.current=(et==null?void 0:et.getBoundingClientRect())||null,S.current=ts(P.sourceEvent,v.current)}).on("drag",P=>{var nt,T;const et=_(P),{autoPanOnNodeDrag:J,nodeDragThreshold:F}=c.getState();if(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1&&(O.current=!0),!O.current){if(!A.current&&C.current&&J&&(A.current=!0,B()),!C.current){const q=et.xSnapped-(((nt=p==null?void 0:p.current)==null?void 0:nt.x)??0),k=et.ySnapped-(((T=p==null?void 0:p.current)==null?void 0:T.y)??0);Math.sqrt(q*q+k*k)>F&&U(P)}(p.current.x!==et.xSnapped||p.current.y!==et.ySnapped)&&m.current&&C.current&&(w.current=P.sourceEvent,S.current=ts(P.sourceEvent,v.current),R(et))}}).on("end",P=>{if(!(!C.current||O.current)&&(d(!1),A.current=!1,C.current=!1,cancelAnimationFrame(b.current),m.current)){const{updateNodePositions:et,nodeInternals:J,onNodeDragStop:F,onSelectionDragStop:nt}=c.getState(),T=l?F:Dg(nt);if(et(m.current,!1,!1),T){const[q,k]=Tg({nodeId:l,dragItems:m.current,nodeInternals:J});T(P.sourceEvent,q,k)}}}).filter(P=>{const et=P.target;return!P.button&&(!e||!aw(et,`.${e}`,n))&&(!i||aw(et,i,n))});return D.call(Q),()=>{D.on(".drag",null)}}}},[n,t,e,i,o,c,l,a,_]),f}function VC(){const n=De();return I.useCallback(e=>{const{nodeInternals:i,nodeExtent:l,updateNodePositions:o,getNodes:a,snapToGrid:c,snapGrid:f,onError:d,nodesDraggable:m}=n.getState(),p=a().filter(O=>O.selected&&(O.draggable||m&&typeof O.draggable>"u")),b=c?f[0]:5,v=c?f[1]:5,S=e.isShiftPressed?4:1,w=e.x*b*S,A=e.y*v*S,C=p.map(O=>{if(O.positionAbsolute){const _={x:O.positionAbsolute.x+w,y:O.positionAbsolute.y+A};c&&(_.x=f[0]*Math.round(_.x/f[0]),_.y=f[1]*Math.round(_.y/f[1]));const{positionAbsolute:D,position:R}=LC(O,_,i,l,void 0,d);O.position=R,O.positionAbsolute=D}return O});o(C,!0,!1)},[])}const Qr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ca=n=>{const t=({id:e,type:i,data:l,xPos:o,yPos:a,xPosOrigin:c,yPosOrigin:f,selected:d,onClick:m,onMouseEnter:p,onMouseMove:b,onMouseLeave:v,onContextMenu:S,onDoubleClick:w,style:A,className:C,isDraggable:O,isSelectable:_,isConnectable:D,isFocusable:R,selectNodesOnDrag:B,sourcePosition:U,targetPosition:Q,hidden:P,resizeObserver:et,dragHandle:J,zIndex:F,isParent:nt,noDragClassName:T,noPanClassName:q,initialized:k,disableKeyboardA11y:z,ariaLabel:j,rfId:H,hasHandleBounds:E})=>{const L=De(),G=I.useRef(null),W=I.useRef(null),it=I.useRef(U),ut=I.useRef(Q),ct=I.useRef(i),St=_||O||m||p||b||v,vt=VC(),Tt=Ma(e,L.getState,p),zt=Ma(e,L.getState,b),ae=Ma(e,L.getState,v),le=Ma(e,L.getState,S),Ae=Ma(e,L.getState,w),ye=Dt=>{const{nodeDragThreshold:yt}=L.getState();if(_&&(!B||!O||yt>0)&&Gp({id:e,store:L,nodeRef:G}),m){const Oe=L.getState().nodeInternals.get(e);Oe&&m(Dt,{...Oe})}},se=Dt=>{if(!Hp(Dt)&&!z)if(oC.includes(Dt.key)&&_){const yt=Dt.key==="Escape";Gp({id:e,store:L,unselect:yt,nodeRef:G})}else O&&d&&Object.prototype.hasOwnProperty.call(Qr,Dt.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${Dt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),vt({x:Qr[Dt.key].x,y:Qr[Dt.key].y,isShiftPressed:Dt.shiftKey}))};I.useEffect(()=>()=>{W.current&&(et==null||et.unobserve(W.current),W.current=null)},[]),I.useEffect(()=>{if(G.current&&!P){const Dt=G.current;(!k||!E||W.current!==Dt)&&(W.current&&(et==null||et.unobserve(W.current)),et==null||et.observe(Dt),W.current=Dt)}},[P,k,E]),I.useEffect(()=>{const Dt=ct.current!==i,yt=it.current!==U,Oe=ut.current!==Q;G.current&&(Dt||yt||Oe)&&(Dt&&(ct.current=i),yt&&(it.current=U),Oe&&(ut.current=Q),L.getState().updateNodeDimensions([{id:e,nodeElement:G.current,forceUpdate:!0}]))},[e,i,U,Q]);const tn=HC({nodeRef:G,disabled:P||!O,noDragClassName:T,handleSelector:J,nodeId:e,isSelectable:_,selectNodesOnDrag:B});return P?null:tt.createElement("div",{className:je(["react-flow__node",`react-flow__node-${i}`,{[q]:O},C,{selected:d,selectable:_,parent:nt,dragging:tn}]),ref:G,style:{zIndex:F,transform:`translate(${c}px,${f}px)`,pointerEvents:St?"all":"none",visibility:k?"visible":"hidden",...A},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Tt,onMouseMove:zt,onMouseLeave:ae,onContextMenu:le,onClick:ye,onDoubleClick:Ae,onKeyDown:R?se:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":z?void 0:`${kC}-${H}`,"aria-label":j},tt.createElement(B5,{value:e},tt.createElement(n,{id:e,data:l,type:i,xPos:o,yPos:a,selected:d,isConnectable:D,sourcePosition:U,targetPosition:Q,dragging:tn,dragHandle:J,zIndex:F})))};return t.displayName="NodeWrapper",I.memo(t)};const S6=n=>{const t=n.getNodes().filter(e=>e.selected);return{...Rh(t,n.nodeOrigin),transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`,userSelectionActive:n.userSelectionActive}};function w6({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=De(),{width:l,height:o,x:a,y:c,transformString:f,userSelectionActive:d}=Jt(S6,He),m=VC(),p=I.useRef(null);if(I.useEffect(()=>{var S;e||(S=p.current)==null||S.focus({preventScroll:!0})},[e]),HC({nodeRef:p}),d||!l||!o)return null;const b=n?S=>{const w=i.getState().getNodes().filter(A=>A.selected);n(S,w)}:void 0,v=S=>{Object.prototype.hasOwnProperty.call(Qr,S.key)&&m({x:Qr[S.key].x,y:Qr[S.key].y,isShiftPressed:S.shiftKey})};return tt.createElement("div",{className:je(["react-flow__nodesselection","react-flow__container",t]),style:{transform:f}},tt.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:e?void 0:-1,onKeyDown:e?void 0:v,style:{width:l,height:o,top:c,left:a}}))}var A6=I.memo(w6);const M6=n=>n.nodesSelectionActive,UC=({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:c,onMove:f,onMoveStart:d,onMoveEnd:m,selectionKeyCode:p,selectionOnDrag:b,selectionMode:v,onSelectionStart:S,onSelectionEnd:w,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:O,elementsSelectable:_,zoomOnScroll:D,zoomOnPinch:R,panOnScroll:B,panOnScrollSpeed:U,panOnScrollMode:Q,zoomOnDoubleClick:P,panOnDrag:et,defaultViewport:J,translateExtent:F,minZoom:nt,maxZoom:T,preventScrolling:q,onSelectionContextMenu:k,noWheelClassName:z,noPanClassName:j,disableKeyboardA11y:H})=>{const E=Jt(M6),L=au(p),G=au(C),W=G||et,it=G||B,ut=L||b&&W!==!0;return u6({deleteKeyCode:c,multiSelectionKeyCode:A}),tt.createElement(d6,{onMove:f,onMoveStart:d,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:_,zoomOnScroll:D,zoomOnPinch:R,panOnScroll:it,panOnScrollSpeed:U,panOnScrollMode:Q,zoomOnDoubleClick:P,panOnDrag:!L&&W,defaultViewport:J,translateExtent:F,minZoom:nt,maxZoom:T,zoomActivationKeyCode:O,preventScrolling:q,noWheelClassName:z,noPanClassName:j},tt.createElement(BC,{onSelectionStart:S,onSelectionEnd:w,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:W,isSelecting:!!ut,selectionMode:v},n,E&&tt.createElement(A6,{onSelectionContextMenu:k,noPanClassName:j,disableKeyboardA11y:H})))};UC.displayName="FlowRenderer";var C6=I.memo(UC);function E6(n){return Jt(I.useCallback(e=>n?mC(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[n]))}function k6(n){const t={input:Ca(n.input||AC),default:Ca(n.default||Yp),output:Ca(n.output||CC),group:Ca(n.group||Y0)},e={},i=Object.keys(n).filter(l=>!["input","default","output","group"].includes(l)).reduce((l,o)=>(l[o]=Ca(n[o]||Yp),l),e);return{...t,...i}}const T6=({x:n,y:t,width:e,height:i,origin:l})=>!e||!i?{x:n,y:t}:l[0]<0||l[1]<0||l[0]>1||l[1]>1?{x:n,y:t}:{x:n-e*l[0],y:t-i*l[1]},D6=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,updateNodeDimensions:n.updateNodeDimensions,onError:n.onError}),qC=n=>{const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:l,updateNodeDimensions:o,onError:a}=Jt(D6,He),c=E6(n.onlyRenderVisibleElements),f=I.useRef(),d=I.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(p=>{const b=p.map(v=>({id:v.target.getAttribute("data-id"),nodeElement:v.target,forceUpdate:!0}));o(b)});return f.current=m,m},[]);return I.useEffect(()=>()=>{var m;(m=f==null?void 0:f.current)==null||m.disconnect()},[]),tt.createElement("div",{className:"react-flow__nodes",style:P0},c.map(m=>{var R,B,U;let p=m.type||"default";n.nodeTypes[p]||(a==null||a("003",ul.error003(p)),p="default");const b=n.nodeTypes[p]||n.nodeTypes.default,v=!!(m.draggable||t&&typeof m.draggable>"u"),S=!!(m.selectable||l&&typeof m.selectable>"u"),w=!!(m.connectable||e&&typeof m.connectable>"u"),A=!!(m.focusable||i&&typeof m.focusable>"u"),C=n.nodeExtent?z0(m.positionAbsolute,n.nodeExtent):m.positionAbsolute,O=(C==null?void 0:C.x)??0,_=(C==null?void 0:C.y)??0,D=T6({x:O,y:_,width:m.width??0,height:m.height??0,origin:n.nodeOrigin});return tt.createElement(b,{key:m.id,id:m.id,className:m.className,style:m.style,type:p,data:m.data,sourcePosition:m.sourcePosition||bt.Bottom,targetPosition:m.targetPosition||bt.Top,hidden:m.hidden,xPos:O,yPos:_,xPosOrigin:D.x,yPosOrigin:D.y,selectNodesOnDrag:n.selectNodesOnDrag,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,selected:!!m.selected,isDraggable:v,isSelectable:S,isConnectable:w,isFocusable:A,resizeObserver:d,dragHandle:m.dragHandle,zIndex:((R=m[fe])==null?void 0:R.z)??0,isParent:!!((B=m[fe])!=null&&B.isParent),noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,initialized:!!m.width&&!!m.height,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!((U=m[fe])!=null&&U.handleBounds)})}))};qC.displayName="NodeRenderer";var O6=I.memo(qC);const R6=(n,t,e)=>e===bt.Left?n-t:e===bt.Right?n+t:n,N6=(n,t,e)=>e===bt.Top?n-t:e===bt.Bottom?n+t:n,cw="react-flow__edgeupdater",fw=({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:l,onMouseEnter:o,onMouseOut:a,type:c})=>tt.createElement("circle",{onMouseDown:l,onMouseEnter:o,onMouseOut:a,className:je([cw,`${cw}-${c}`]),cx:R6(t,i,n),cy:N6(e,i,n),r:i,stroke:"transparent",fill:"transparent"}),_6=()=>!0;var Hr=n=>{const t=({id:e,className:i,type:l,data:o,onClick:a,onEdgeDoubleClick:c,selected:f,animated:d,label:m,labelStyle:p,labelShowBg:b,labelBgStyle:v,labelBgPadding:S,labelBgBorderRadius:w,style:A,source:C,target:O,sourceX:_,sourceY:D,targetX:R,targetY:B,sourcePosition:U,targetPosition:Q,elementsSelectable:P,hidden:et,sourceHandleId:J,targetHandleId:F,onContextMenu:nt,onMouseEnter:T,onMouseMove:q,onMouseLeave:k,reconnectRadius:z,onReconnect:j,onReconnectStart:H,onReconnectEnd:E,markerEnd:L,markerStart:G,rfId:W,ariaLabel:it,isFocusable:ut,isReconnectable:ct,pathOptions:St,interactionWidth:vt,disableKeyboardA11y:Tt})=>{const zt=I.useRef(null),[ae,le]=I.useState(!1),[Ae,ye]=I.useState(!1),se=De(),tn=I.useMemo(()=>`url('#${Up(G,W)}')`,[G,W]),Dt=I.useMemo(()=>`url('#${Up(L,W)}')`,[L,W]);if(et)return null;const yt=Re=>{var $e;const{edges:Sn,addSelectedEdges:Bn,unselectNodesAndEdges:zn,multiSelectionActive:nn}=se.getState(),an=Sn.find(as=>as.id===e);an&&(P&&(se.setState({nodesSelectionActive:!1}),an.selected&&nn?(zn({nodes:[],edges:[an]}),($e=zt.current)==null||$e.blur()):Bn([e])),a&&a(Re,an))},Oe=Aa(e,se.getState,c),_n=Aa(e,se.getState,nt),mi=Aa(e,se.getState,T),fl=Aa(e,se.getState,q),Hi=Aa(e,se.getState,k),ti=(Re,Sn)=>{if(Re.button!==0)return;const{edges:Bn,isValidConnection:zn}=se.getState(),nn=Sn?O:C,an=(Sn?F:J)||null,$e=Sn?"target":"source",as=zn||_6,Ws=Sn,dl=Bn.find(Vi=>Vi.id===e);ye(!0),H==null||H(Re,dl,$e);const us=Vi=>{ye(!1),E==null||E(Vi,dl,$e)};vC({event:Re,handleId:an,nodeId:nn,onConnect:Vi=>j==null?void 0:j(dl,Vi),isTarget:Ws,getState:se.getState,setState:se.setState,isValidConnection:as,edgeUpdaterType:$e,onReconnectEnd:us})},hl=Re=>ti(Re,!0),xn=Re=>ti(Re,!1),he=()=>le(!0),en=()=>le(!1),be=!P&&!a,os=Re=>{var Sn;if(!Tt&&oC.includes(Re.key)&&P){const{unselectNodesAndEdges:Bn,addSelectedEdges:zn,edges:nn}=se.getState();Re.key==="Escape"?((Sn=zt.current)==null||Sn.blur(),Bn({edges:[nn.find($e=>$e.id===e)]})):zn([e])}};return tt.createElement("g",{className:je(["react-flow__edge",`react-flow__edge-${l}`,i,{selected:f,animated:d,inactive:be,updating:ae}]),onClick:yt,onDoubleClick:Oe,onContextMenu:_n,onMouseEnter:mi,onMouseMove:fl,onMouseLeave:Hi,onKeyDown:ut?os:void 0,tabIndex:ut?0:void 0,role:ut?"button":"img","data-testid":`rf__edge-${e}`,"aria-label":it===null?void 0:it||`Edge from ${C} to ${O}`,"aria-describedby":ut?`${TC}-${W}`:void 0,ref:zt},!Ae&&tt.createElement(n,{id:e,source:C,target:O,selected:f,animated:d,label:m,labelStyle:p,labelShowBg:b,labelBgStyle:v,labelBgPadding:S,labelBgBorderRadius:w,data:o,style:A,sourceX:_,sourceY:D,targetX:R,targetY:B,sourcePosition:U,targetPosition:Q,sourceHandleId:J,targetHandleId:F,markerStart:tn,markerEnd:Dt,pathOptions:St,interactionWidth:vt}),ct&&tt.createElement(tt.Fragment,null,(ct==="source"||ct===!0)&&tt.createElement(fw,{position:U,centerX:_,centerY:D,radius:z,onMouseDown:hl,onMouseEnter:he,onMouseOut:en,type:"source"}),(ct==="target"||ct===!0)&&tt.createElement(fw,{position:Q,centerX:R,centerY:B,radius:z,onMouseDown:xn,onMouseEnter:he,onMouseOut:en,type:"target"})))};return t.displayName="EdgeWrapper",I.memo(t)};function B6(n){const t={default:Hr(n.default||ch),straight:Hr(n.bezier||V0),step:Hr(n.step||H0),smoothstep:Hr(n.step||Oh),simplebezier:Hr(n.simplebezier||L0)},e={},i=Object.keys(n).filter(l=>!["default","bezier"].includes(l)).reduce((l,o)=>(l[o]=Hr(n[o]||ch),l),e);return{...t,...i}}function hw(n,t,e=null){const i=((e==null?void 0:e.x)||0)+t.x,l=((e==null?void 0:e.y)||0)+t.y,o=(e==null?void 0:e.width)||t.width,a=(e==null?void 0:e.height)||t.height;switch(n){case bt.Top:return{x:i+o/2,y:l};case bt.Right:return{x:i+o,y:l+a/2};case bt.Bottom:return{x:i+o/2,y:l+a};case bt.Left:return{x:i,y:l+a/2}}}function dw(n,t){return n?n.length===1||!t?n[0]:t&&n.find(e=>e.id===t)||null:null}const z6=(n,t,e,i,l,o)=>{const a=hw(e,n,t),c=hw(o,i,l);return{sourceX:a.x,sourceY:a.y,targetX:c.x,targetY:c.y}};function L6({sourcePos:n,targetPos:t,sourceWidth:e,sourceHeight:i,targetWidth:l,targetHeight:o,width:a,height:c,transform:f}){const d={x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x+e,t.x+l),y2:Math.max(n.y+i,t.y+o)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const m=ru({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:a/f[2],height:c/f[2]}),p=Math.max(0,Math.min(m.x2,d.x2)-Math.max(m.x,d.x)),b=Math.max(0,Math.min(m.y2,d.y2)-Math.max(m.y,d.y));return Math.ceil(p*b)>0}function mw(n){var i,l,o,a,c;const t=((i=n==null?void 0:n[fe])==null?void 0:i.handleBounds)||null,e=t&&(n==null?void 0:n.width)&&(n==null?void 0:n.height)&&typeof((l=n==null?void 0:n.positionAbsolute)==null?void 0:l.x)<"u"&&typeof((o=n==null?void 0:n.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((a=n==null?void 0:n.positionAbsolute)==null?void 0:a.x)||0,y:((c=n==null?void 0:n.positionAbsolute)==null?void 0:c.y)||0,width:(n==null?void 0:n.width)||0,height:(n==null?void 0:n.height)||0},t,!!e]}const H6=[{level:0,isMaxLevel:!0,edges:[]}];function V6(n,t,e=!1){let i=-1;const l=n.reduce((a,c)=>{var m,p;const f=Zn(c.zIndex);let d=f?c.zIndex:0;if(e){const b=t.get(c.target),v=t.get(c.source),S=c.selected||(b==null?void 0:b.selected)||(v==null?void 0:v.selected),w=Math.max(((m=v==null?void 0:v[fe])==null?void 0:m.z)||0,((p=b==null?void 0:b[fe])==null?void 0:p.z)||0,1e3);d=(f?c.zIndex:0)+(S?w:0)}return a[d]?a[d].push(c):a[d]=[c],i=d>i?d:i,a},{}),o=Object.entries(l).map(([a,c])=>{const f=+a;return{edges:c,level:f,isMaxLevel:f===i}});return o.length===0?H6:o}function U6(n,t,e){const i=Jt(I.useCallback(l=>n?l.edges.filter(o=>{const a=t.get(o.source),c=t.get(o.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&L6({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:c.width,targetHeight:c.height,width:l.width,height:l.height,transform:l.transform})}):l.edges,[n,t]));return V6(i,t,e)}const q6=({color:n="none",strokeWidth:t=1})=>tt.createElement("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Y6=({color:n="none",strokeWidth:t=1})=>tt.createElement("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),gw={[uh.Arrow]:q6,[uh.ArrowClosed]:Y6};function G6(n){const t=De();return I.useMemo(()=>{var l,o;return Object.prototype.hasOwnProperty.call(gw,n)?gw[n]:((o=(l=t.getState()).onError)==null||o.call(l,"009",ul.error009(n)),null)},[n])}const P6=({id:n,type:t,color:e,width:i=12.5,height:l=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:c="auto-start-reverse"})=>{const f=G6(t);return f?tt.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},tt.createElement(f,{color:e,strokeWidth:a})):null},X6=({defaultColor:n,rfId:t})=>e=>{const i=[];return e.edges.reduce((l,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const c=Up(a,t);i.includes(c)||(l.push({id:c,color:a.color||n,...a}),i.push(c))}}),l),[]).sort((l,o)=>l.id.localeCompare(o.id))},YC=({defaultColor:n,rfId:t})=>{const e=Jt(I.useCallback(X6({defaultColor:n,rfId:t}),[n,t]),(i,l)=>!(i.length!==l.length||i.some((o,a)=>o.id!==l[a].id)));return tt.createElement("defs",null,e.map(i=>tt.createElement(P6,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};YC.displayName="MarkerDefinitions";var j6=I.memo(YC);const $6=n=>({nodesConnectable:n.nodesConnectable,edgesFocusable:n.edgesFocusable,edgesUpdatable:n.edgesUpdatable,elementsSelectable:n.elementsSelectable,width:n.width,height:n.height,connectionMode:n.connectionMode,nodeInternals:n.nodeInternals,onError:n.onError}),GC=({defaultMarkerColor:n,onlyRenderVisibleElements:t,elevateEdgesOnSelect:e,rfId:i,edgeTypes:l,noPanClassName:o,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:d,onEdgeClick:m,onEdgeDoubleClick:p,onReconnect:b,onReconnectStart:v,onReconnectEnd:S,reconnectRadius:w,children:A,disableKeyboardA11y:C})=>{const{edgesFocusable:O,edgesUpdatable:_,elementsSelectable:D,width:R,height:B,connectionMode:U,nodeInternals:Q,onError:P}=Jt($6,He),et=U6(t,Q,e);return R?tt.createElement(tt.Fragment,null,et.map(({level:J,edges:F,isMaxLevel:nt})=>tt.createElement("svg",{key:J,style:{zIndex:J},width:R,height:B,className:"react-flow__edges react-flow__container"},nt&&tt.createElement(j6,{defaultColor:n,rfId:i}),tt.createElement("g",null,F.map(T=>{const[q,k,z]=mw(Q.get(T.source)),[j,H,E]=mw(Q.get(T.target));if(!z||!E)return null;let L=T.type||"default";l[L]||(P==null||P("011",ul.error011(L)),L="default");const G=l[L]||l.default,W=U===Is.Strict?H.target:(H.target??[]).concat(H.source??[]),it=dw(k.source,T.sourceHandle),ut=dw(W,T.targetHandle),ct=(it==null?void 0:it.position)||bt.Bottom,St=(ut==null?void 0:ut.position)||bt.Top,vt=!!(T.focusable||O&&typeof T.focusable>"u"),Tt=T.reconnectable||T.updatable,zt=typeof b<"u"&&(Tt||_&&typeof Tt>"u");if(!it||!ut)return P==null||P("008",ul.error008(it,T)),null;const{sourceX:ae,sourceY:le,targetX:Ae,targetY:ye}=z6(q,it,ct,j,ut,St);return tt.createElement(G,{key:T.id,id:T.id,className:je([T.className,o]),type:L,data:T.data,selected:!!T.selected,animated:!!T.animated,hidden:!!T.hidden,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,style:T.style,source:T.source,target:T.target,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerEnd:T.markerEnd,markerStart:T.markerStart,sourceX:ae,sourceY:le,targetX:Ae,targetY:ye,sourcePosition:ct,targetPosition:St,elementsSelectable:D,onContextMenu:a,onMouseEnter:c,onMouseMove:f,onMouseLeave:d,onClick:m,onEdgeDoubleClick:p,onReconnect:b,onReconnectStart:v,onReconnectEnd:S,reconnectRadius:w,rfId:i,ariaLabel:T.ariaLabel,isFocusable:vt,isReconnectable:zt,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth,disableKeyboardA11y:C})})))),A):null};GC.displayName="EdgeRenderer";var K6=I.memo(GC);const I6=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function Z6({children:n}){const t=Jt(I6);return tt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},n)}function W6(n){const t=G0(),e=I.useRef(!1);I.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const F6={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},PC=({nodeId:n,handleType:t,style:e,type:i=Il.Bezier,CustomComponent:l,connectionStatus:o})=>{var B,U,Q;const{fromNode:a,handleId:c,toX:f,toY:d,connectionMode:m}=Jt(I.useCallback(P=>({fromNode:P.nodeInternals.get(n),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[n]),He),p=(B=a==null?void 0:a[fe])==null?void 0:B.handleBounds;let b=p==null?void 0:p[t];if(m===Is.Loose&&(b=b||(p==null?void 0:p[t==="source"?"target":"source"])),!a||!b)return null;const v=c?b.find(P=>P.id===c):b[0],S=v?v.x+v.width/2:(a.width??0)/2,w=v?v.y+v.height/2:a.height??0,A=(((U=a.positionAbsolute)==null?void 0:U.x)??0)+S,C=(((Q=a.positionAbsolute)==null?void 0:Q.y)??0)+w,O=v==null?void 0:v.position,_=O?F6[O]:null;if(!O||!_)return null;if(l)return tt.createElement(l,{connectionLineType:i,connectionLineStyle:e,fromNode:a,fromHandle:v,fromX:A,fromY:C,toX:f,toY:d,fromPosition:O,toPosition:_,connectionStatus:o});let D="";const R={sourceX:A,sourceY:C,sourcePosition:O,targetX:f,targetY:d,targetPosition:_};return i===Il.Bezier?[D]=hC(R):i===Il.Step?[D]=Vp({...R,borderRadius:0}):i===Il.SmoothStep?[D]=Vp(R):i===Il.SimpleBezier?[D]=fC(R):D=`M${A},${C} ${f},${d}`,tt.createElement("path",{d:D,fill:"none",className:"react-flow__connection-path",style:e})};PC.displayName="ConnectionLine";const Q6=n=>({nodeId:n.connectionNodeId,handleType:n.connectionHandleType,nodesConnectable:n.nodesConnectable,connectionStatus:n.connectionStatus,width:n.width,height:n.height});function J6({containerStyle:n,style:t,type:e,component:i}){const{nodeId:l,handleType:o,nodesConnectable:a,width:c,height:f,connectionStatus:d}=Jt(Q6,He);return!(l&&o&&c&&a)?null:tt.createElement("svg",{style:n,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},tt.createElement("g",{className:je(["react-flow__connection",d])},tt.createElement(PC,{nodeId:l,handleType:o,style:t,type:e,CustomComponent:i,connectionStatus:d})))}function pw(n,t){return I.useRef(null),De(),I.useMemo(()=>t(n),[n])}const XC=({nodeTypes:n,edgeTypes:t,onMove:e,onMoveStart:i,onMoveEnd:l,onInit:o,onNodeClick:a,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:d,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:v,onSelectionContextMenu:S,onSelectionStart:w,onSelectionEnd:A,connectionLineType:C,connectionLineStyle:O,connectionLineComponent:_,connectionLineContainerStyle:D,selectionKeyCode:R,selectionOnDrag:B,selectionMode:U,multiSelectionKeyCode:Q,panActivationKeyCode:P,zoomActivationKeyCode:et,deleteKeyCode:J,onlyRenderVisibleElements:F,elementsSelectable:nt,selectNodesOnDrag:T,defaultViewport:q,translateExtent:k,minZoom:z,maxZoom:j,preventScrolling:H,defaultMarkerColor:E,zoomOnScroll:L,zoomOnPinch:G,panOnScroll:W,panOnScrollSpeed:it,panOnScrollMode:ut,zoomOnDoubleClick:ct,panOnDrag:St,onPaneClick:vt,onPaneMouseEnter:Tt,onPaneMouseMove:zt,onPaneMouseLeave:ae,onPaneScroll:le,onPaneContextMenu:Ae,onEdgeContextMenu:ye,onEdgeMouseEnter:se,onEdgeMouseMove:tn,onEdgeMouseLeave:Dt,onReconnect:yt,onReconnectStart:Oe,onReconnectEnd:_n,reconnectRadius:mi,noDragClassName:fl,noWheelClassName:Hi,noPanClassName:ti,elevateEdgesOnSelect:hl,disableKeyboardA11y:xn,nodeOrigin:he,nodeExtent:en,rfId:be})=>{const os=pw(n,k6),Re=pw(t,B6);return W6(o),tt.createElement(C6,{onPaneClick:vt,onPaneMouseEnter:Tt,onPaneMouseMove:zt,onPaneMouseLeave:ae,onPaneContextMenu:Ae,onPaneScroll:le,deleteKeyCode:J,selectionKeyCode:R,selectionOnDrag:B,selectionMode:U,onSelectionStart:w,onSelectionEnd:A,multiSelectionKeyCode:Q,panActivationKeyCode:P,zoomActivationKeyCode:et,elementsSelectable:nt,onMove:e,onMoveStart:i,onMoveEnd:l,zoomOnScroll:L,zoomOnPinch:G,zoomOnDoubleClick:ct,panOnScroll:W,panOnScrollSpeed:it,panOnScrollMode:ut,panOnDrag:St,defaultViewport:q,translateExtent:k,minZoom:z,maxZoom:j,onSelectionContextMenu:S,preventScrolling:H,noDragClassName:fl,noWheelClassName:Hi,noPanClassName:ti,disableKeyboardA11y:xn},tt.createElement(Z6,null,tt.createElement(K6,{edgeTypes:Re,onEdgeClick:c,onEdgeDoubleClick:d,onlyRenderVisibleElements:F,onEdgeContextMenu:ye,onEdgeMouseEnter:se,onEdgeMouseMove:tn,onEdgeMouseLeave:Dt,onReconnect:yt,onReconnectStart:Oe,onReconnectEnd:_n,reconnectRadius:mi,defaultMarkerColor:E,noPanClassName:ti,elevateEdgesOnSelect:!!hl,disableKeyboardA11y:xn,rfId:be},tt.createElement(J6,{style:O,type:C,component:_,containerStyle:D})),tt.createElement("div",{className:"react-flow__edgelabel-renderer"}),tt.createElement(O6,{nodeTypes:os,onNodeClick:a,onNodeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:v,selectNodesOnDrag:T,onlyRenderVisibleElements:F,noPanClassName:ti,noDragClassName:fl,disableKeyboardA11y:xn,nodeOrigin:he,nodeExtent:en,rfId:be})))};XC.displayName="GraphView";var tL=I.memo(XC);const Pp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gl={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Pp,nodeExtent:Pp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Is.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:T5,isValidConnection:void 0},eL=()=>P4((n,t)=>({...Gl,setNodes:e=>{const{nodeInternals:i,nodeOrigin:l,elevateNodesOnSelect:o}=t();n({nodeInternals:Eg(e,i,l,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:e=>{const{defaultEdgeOptions:i={}}=t();n({edges:e.map(l=>({...i,...l}))})},setDefaultNodesAndEdges:(e,i)=>{const l=typeof e<"u",o=typeof i<"u",a=l?Eg(e,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;n({nodeInternals:a,edges:o?i:[],hasDefaultNodes:l,hasDefaultEdges:o})},updateNodeDimensions:e=>{const{onNodesChange:i,nodeInternals:l,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:c,domNode:f,nodeOrigin:d}=t(),m=f==null?void 0:f.querySelector(".react-flow__viewport");if(!m)return;const p=window.getComputedStyle(m),{m22:b}=new window.DOMMatrixReadOnly(p.transform),v=e.reduce((w,A)=>{const C=l.get(A.id);if(C!=null&&C.hidden)l.set(C.id,{...C,[fe]:{...C[fe],handleBounds:void 0}});else if(C){const O=B0(A.nodeElement);!!(O.width&&O.height&&(C.width!==O.width||C.height!==O.height||A.forceUpdate))&&(l.set(C.id,{...C,[fe]:{...C[fe],handleBounds:{source:uw(".source",A.nodeElement,b,d),target:uw(".target",A.nodeElement,b,d)}},...O}),w.push({id:C.id,type:"dimensions",dimensions:O}))}return w},[]);OC(l,d);const S=a||o&&!a&&RC(t,{initial:!0,...c});n({nodeInternals:new Map(l),fitViewOnInitDone:S}),(v==null?void 0:v.length)>0&&(i==null||i(v))},updateNodePositions:(e,i=!0,l=!1)=>{const{triggerNodeChanges:o}=t(),a=e.map(c=>{const f={id:c.id,type:"position",dragging:l};return i&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});o(a)},triggerNodeChanges:e=>{const{onNodesChange:i,nodeInternals:l,hasDefaultNodes:o,nodeOrigin:a,getNodes:c,elevateNodesOnSelect:f}=t();if(e!=null&&e.length){if(o){const d=_C(e,c()),m=Eg(d,l,a,f);n({nodeInternals:m})}i==null||i(e)}},addSelectedNodes:e=>{const{multiSelectionActive:i,edges:l,getNodes:o}=t();let a,c=null;i?a=e.map(f=>$l(f,!0)):(a=Xr(o(),e),c=Xr(l,[])),yf({changedNodes:a,changedEdges:c,get:t,set:n})},addSelectedEdges:e=>{const{multiSelectionActive:i,edges:l,getNodes:o}=t();let a,c=null;i?a=e.map(f=>$l(f,!0)):(a=Xr(l,e),c=Xr(o(),[])),yf({changedNodes:c,changedEdges:a,get:t,set:n})},unselectNodesAndEdges:({nodes:e,edges:i}={})=>{const{edges:l,getNodes:o}=t(),a=e||o(),c=i||l,f=a.map(m=>(m.selected=!1,$l(m.id,!1))),d=c.map(m=>$l(m.id,!1));yf({changedNodes:f,changedEdges:d,get:t,set:n})},setMinZoom:e=>{const{d3Zoom:i,maxZoom:l}=t();i==null||i.scaleExtent([e,l]),n({minZoom:e})},setMaxZoom:e=>{const{d3Zoom:i,minZoom:l}=t();i==null||i.scaleExtent([l,e]),n({maxZoom:e})},setTranslateExtent:e=>{var i;(i=t().d3Zoom)==null||i.translateExtent(e),n({translateExtent:e})},resetSelectedElements:()=>{const{edges:e,getNodes:i}=t(),o=i().filter(c=>c.selected).map(c=>$l(c.id,!1)),a=e.filter(c=>c.selected).map(c=>$l(c.id,!1));yf({changedNodes:o,changedEdges:a,get:t,set:n})},setNodeExtent:e=>{const{nodeInternals:i}=t();i.forEach(l=>{l.positionAbsolute=z0(l.position,e)}),n({nodeExtent:e,nodeInternals:new Map(i)})},panBy:e=>{const{transform:i,width:l,height:o,d3Zoom:a,d3Selection:c,translateExtent:f}=t();if(!a||!c||!e.x&&!e.y)return!1;const d=sl.translate(i[0]+e.x,i[1]+e.y).scale(i[2]),m=[[0,0],[l,o]],p=a==null?void 0:a.constrain()(d,m,f);return a.transform(c,p),i[0]!==p.x||i[1]!==p.y||i[2]!==p.k},cancelConnection:()=>n({connectionNodeId:Gl.connectionNodeId,connectionHandleId:Gl.connectionHandleId,connectionHandleType:Gl.connectionHandleType,connectionStatus:Gl.connectionStatus,connectionStartHandle:Gl.connectionStartHandle,connectionEndHandle:Gl.connectionEndHandle}),reset:()=>n({...Gl})}),Object.is),jC=({children:n})=>{const t=I.useRef(null);return t.current||(t.current=eL()),tt.createElement(S5,{value:t.current},n)};jC.displayName="ReactFlowProvider";const $C=({children:n})=>I.useContext(Dh)?tt.createElement(tt.Fragment,null,n):tt.createElement(jC,null,n);$C.displayName="ReactFlowWrapper";const nL={input:AC,default:Yp,output:CC,group:Y0},iL={default:ch,straight:V0,step:H0,smoothstep:Oh,simplebezier:L0},lL=[0,0],sL=[15,15],rL={x:0,y:0,zoom:1},oL={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},KC=I.forwardRef(({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:l,nodeTypes:o=nL,edgeTypes:a=iL,onNodeClick:c,onEdgeClick:f,onInit:d,onMove:m,onMoveStart:p,onMoveEnd:b,onConnect:v,onConnectStart:S,onConnectEnd:w,onClickConnectStart:A,onClickConnectEnd:C,onNodeMouseEnter:O,onNodeMouseMove:_,onNodeMouseLeave:D,onNodeContextMenu:R,onNodeDoubleClick:B,onNodeDragStart:U,onNodeDrag:Q,onNodeDragStop:P,onNodesDelete:et,onEdgesDelete:J,onSelectionChange:F,onSelectionDragStart:nt,onSelectionDrag:T,onSelectionDragStop:q,onSelectionContextMenu:k,onSelectionStart:z,onSelectionEnd:j,connectionMode:H=Is.Strict,connectionLineType:E=Il.Bezier,connectionLineStyle:L,connectionLineComponent:G,connectionLineContainerStyle:W,deleteKeyCode:it="Backspace",selectionKeyCode:ut="Shift",selectionOnDrag:ct=!1,selectionMode:St=ou.Full,panActivationKeyCode:vt="Space",multiSelectionKeyCode:Tt=ah()?"Meta":"Control",zoomActivationKeyCode:zt=ah()?"Meta":"Control",snapToGrid:ae=!1,snapGrid:le=sL,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:ye=!0,nodesDraggable:se,nodesConnectable:tn,nodesFocusable:Dt,nodeOrigin:yt=lL,edgesFocusable:Oe,edgesUpdatable:_n,elementsSelectable:mi,defaultViewport:fl=rL,minZoom:Hi=.5,maxZoom:ti=2,translateExtent:hl=Pp,preventScrolling:xn=!0,nodeExtent:he,defaultMarkerColor:en="#b1b1b7",zoomOnScroll:be=!0,zoomOnPinch:os=!0,panOnScroll:Re=!1,panOnScrollSpeed:Sn=.5,panOnScrollMode:Bn=Ls.Free,zoomOnDoubleClick:zn=!0,panOnDrag:nn=!0,onPaneClick:an,onPaneMouseEnter:$e,onPaneMouseMove:as,onPaneMouseLeave:Ws,onPaneScroll:dl,onPaneContextMenu:us,children:ml,onEdgeContextMenu:Vi,onEdgeDoubleClick:wu,onEdgeMouseEnter:Au,onEdgeMouseMove:po,onEdgeMouseLeave:yo,onEdgeUpdate:Mu,onEdgeUpdateStart:Nh,onEdgeUpdateEnd:gi,onReconnect:Ne,onReconnectStart:Ke,onReconnectEnd:gl,reconnectRadius:bo=10,edgeUpdaterRadius:_h=10,onNodesChange:Bh,onEdgesChange:Cu,noDragClassName:cs="nodrag",noWheelClassName:vo="nowheel",noPanClassName:Ui="nopan",fitView:pl=!1,fitViewOptions:fs,connectOnClick:yl=!0,attributionPosition:ve,proOptions:Eu,defaultEdgeOptions:ku,elevateNodesOnSelect:qi=!0,elevateEdgesOnSelect:bl=!1,disableKeyboardA11y:Tu=!1,autoPanOnConnect:Du=!0,autoPanOnNodeDrag:Ou=!0,connectionRadius:zh=20,isValidConnection:Fs,onError:Qs,style:ei,id:Js,nodeDragThreshold:Ru,...vl},xo)=>{const hs=Js||"1";return tt.createElement("div",{...vl,style:{...ei,...oL},ref:xo,className:je(["react-flow",l]),"data-testid":"rf__wrapper",id:Js},tt.createElement($C,null,tt.createElement(tL,{onInit:d,onMove:m,onMoveStart:p,onMoveEnd:b,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:O,onNodeMouseMove:_,onNodeMouseLeave:D,onNodeContextMenu:R,onNodeDoubleClick:B,nodeTypes:o,edgeTypes:a,connectionLineType:E,connectionLineStyle:L,connectionLineComponent:G,connectionLineContainerStyle:W,selectionKeyCode:ut,selectionOnDrag:ct,selectionMode:St,deleteKeyCode:it,multiSelectionKeyCode:Tt,panActivationKeyCode:vt,zoomActivationKeyCode:zt,onlyRenderVisibleElements:Ae,selectNodesOnDrag:ye,defaultViewport:fl,translateExtent:hl,minZoom:Hi,maxZoom:ti,preventScrolling:xn,zoomOnScroll:be,zoomOnPinch:os,zoomOnDoubleClick:zn,panOnScroll:Re,panOnScrollSpeed:Sn,panOnScrollMode:Bn,panOnDrag:nn,onPaneClick:an,onPaneMouseEnter:$e,onPaneMouseMove:as,onPaneMouseLeave:Ws,onPaneScroll:dl,onPaneContextMenu:us,onSelectionContextMenu:k,onSelectionStart:z,onSelectionEnd:j,onEdgeContextMenu:Vi,onEdgeDoubleClick:wu,onEdgeMouseEnter:Au,onEdgeMouseMove:po,onEdgeMouseLeave:yo,onReconnect:Ne??Mu,onReconnectStart:Ke??Nh,onReconnectEnd:gl??gi,reconnectRadius:bo??_h,defaultMarkerColor:en,noDragClassName:cs,noWheelClassName:vo,noPanClassName:Ui,elevateEdgesOnSelect:bl,rfId:hs,disableKeyboardA11y:Tu,nodeOrigin:yt,nodeExtent:he}),tt.createElement(F5,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:v,onConnectStart:S,onConnectEnd:w,onClickConnectStart:A,onClickConnectEnd:C,nodesDraggable:se,nodesConnectable:tn,nodesFocusable:Dt,edgesFocusable:Oe,edgesUpdatable:_n,elementsSelectable:mi,elevateNodesOnSelect:qi,minZoom:Hi,maxZoom:ti,nodeExtent:he,onNodesChange:Bh,onEdgesChange:Cu,snapToGrid:ae,snapGrid:le,connectionMode:H,translateExtent:hl,connectOnClick:yl,defaultEdgeOptions:ku,fitView:pl,fitViewOptions:fs,onNodesDelete:et,onEdgesDelete:J,onNodeDragStart:U,onNodeDrag:Q,onNodeDragStop:P,onSelectionDrag:T,onSelectionDragStart:nt,onSelectionDragStop:q,noPanClassName:Ui,nodeOrigin:yt,rfId:hs,autoPanOnConnect:Du,autoPanOnNodeDrag:Ou,onError:Qs,connectionRadius:zh,isValidConnection:Fs,nodeDragThreshold:Ru}),tt.createElement(Z5,{onSelectionChange:F}),ml,tt.createElement(A5,{proOptions:Eu,position:ve}),tt.createElement(n6,{rfId:hs,disableKeyboardA11y:Tu})))});KC.displayName="ReactFlow";const IC=({id:n,x:t,y:e,width:i,height:l,style:o,color:a,strokeColor:c,strokeWidth:f,className:d,borderRadius:m,shapeRendering:p,onClick:b,selected:v})=>{const{background:S,backgroundColor:w}=o||{},A=a||S||w;return tt.createElement("rect",{className:je(["react-flow__minimap-node",{selected:v},d]),x:t,y:e,rx:m,ry:m,width:i,height:l,fill:A,stroke:c,strokeWidth:f,shapeRendering:p,onClick:b?C=>b(C,n):void 0})};IC.displayName="MiniMapNode";var aL=I.memo(IC);const uL=n=>n.nodeOrigin,cL=n=>n.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Og=n=>n instanceof Function?n:()=>n;function fL({nodeStrokeColor:n="transparent",nodeColor:t="#e2e2e2",nodeClassName:e="",nodeBorderRadius:i=5,nodeStrokeWidth:l=2,nodeComponent:o=aL,onClick:a}){const c=Jt(cL,He),f=Jt(uL),d=Og(t),m=Og(n),p=Og(e),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return tt.createElement(tt.Fragment,null,c.map(v=>{const{x:S,y:w}=qs(v,f).positionAbsolute;return tt.createElement(o,{key:v.id,x:S,y:w,width:v.width,height:v.height,style:v.style,selected:v.selected,className:p(v),color:d(v),borderRadius:i,strokeColor:m(v),strokeWidth:l,shapeRendering:b,onClick:a,id:v.id})}))}var hL=I.memo(fL);const dL=200,mL=150,gL=n=>{const t=n.getNodes(),e={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:e,boundingRect:t.length>0?E5(Rh(t,n.nodeOrigin),e):e,rfId:n.rfId}},pL="react-flow__minimap-desc";function ZC({style:n,className:t,nodeStrokeColor:e="transparent",nodeColor:i="#e2e2e2",nodeClassName:l="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,nodeComponent:c,maskColor:f="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:m=1,position:p="bottom-right",onClick:b,onNodeClick:v,pannable:S=!1,zoomable:w=!1,ariaLabel:A="React Flow mini map",inversePan:C=!1,zoomStep:O=10,offsetScale:_=5}){const D=De(),R=I.useRef(null),{boundingRect:B,viewBB:U,rfId:Q}=Jt(gL,He),P=(n==null?void 0:n.width)??dL,et=(n==null?void 0:n.height)??mL,J=B.width/P,F=B.height/et,nt=Math.max(J,F),T=nt*P,q=nt*et,k=_*nt,z=B.x-(T-B.width)/2-k,j=B.y-(q-B.height)/2-k,H=T+k*2,E=q+k*2,L=`${pL}-${Q}`,G=I.useRef(0);G.current=nt,I.useEffect(()=>{if(R.current){const ut=$n(R.current),ct=Tt=>{const{transform:zt,d3Selection:ae,d3Zoom:le}=D.getState();if(Tt.sourceEvent.type!=="wheel"||!ae||!le)return;const Ae=-Tt.sourceEvent.deltaY*(Tt.sourceEvent.deltaMode===1?.05:Tt.sourceEvent.deltaMode?1:.002)*O,ye=zt[2]*Math.pow(2,Ae);le.scaleTo(ae,ye)},St=Tt=>{const{transform:zt,d3Selection:ae,d3Zoom:le,translateExtent:Ae,width:ye,height:se}=D.getState();if(Tt.sourceEvent.type!=="mousemove"||!ae||!le)return;const tn=G.current*Math.max(1,zt[2])*(C?-1:1),Dt={x:zt[0]-Tt.sourceEvent.movementX*tn,y:zt[1]-Tt.sourceEvent.movementY*tn},yt=[[0,0],[ye,se]],Oe=sl.translate(Dt.x,Dt.y).scale(zt[2]),_n=le.constrain()(Oe,yt,Ae);le.transform(ae,_n)},vt=eC().on("zoom",S?St:null).on("zoom.wheel",w?ct:null);return ut.call(vt),()=>{ut.on("zoom",null)}}},[S,w,C,O]);const W=b?ut=>{const ct=si(ut);b(ut,{x:ct[0],y:ct[1]})}:void 0,it=v?(ut,ct)=>{const St=D.getState().nodeInternals.get(ct);v(ut,St)}:void 0;return tt.createElement(_0,{position:p,style:n,className:je(["react-flow__minimap",t]),"data-testid":"rf__minimap"},tt.createElement("svg",{width:P,height:et,viewBox:`${z} ${j} ${H} ${E}`,role:"img","aria-labelledby":L,ref:R,onClick:W},A&&tt.createElement("title",{id:L},A),tt.createElement(hL,{onClick:it,nodeColor:i,nodeStrokeColor:e,nodeBorderRadius:o,nodeClassName:l,nodeStrokeWidth:a,nodeComponent:c}),tt.createElement("path",{className:"react-flow__minimap-mask",d:`M${z-k},${j-k}h${H+k*2}v${E+k*2}h${-H-k*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fill:f,fillRule:"evenodd",stroke:d,strokeWidth:m,pointerEvents:"none"})))}ZC.displayName="MiniMap";var yL=I.memo(ZC);function bL(){return tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},tt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function vL(){return tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},tt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function xL(){return tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},tt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function SL(){return tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},tt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function wL(){return tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},tt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Na=({children:n,className:t,...e})=>tt.createElement("button",{type:"button",className:je(["react-flow__controls-button",t]),...e},n);Na.displayName="ControlButton";const AL=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom}),WC=({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:o,onZoomOut:a,onFitView:c,onInteractiveChange:f,className:d,children:m,position:p="bottom-left"})=>{const b=De(),[v,S]=I.useState(!1),{isInteractive:w,minZoomReached:A,maxZoomReached:C}=Jt(AL,He),{zoomIn:O,zoomOut:_,fitView:D}=G0();if(I.useEffect(()=>{S(!0)},[]),!v)return null;const R=()=>{O(),o==null||o()},B=()=>{_(),a==null||a()},U=()=>{D(l),c==null||c()},Q=()=>{b.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),f==null||f(!w)};return tt.createElement(_0,{className:je(["react-flow__controls",d]),position:p,style:n,"data-testid":"rf__controls"},t&&tt.createElement(tt.Fragment,null,tt.createElement(Na,{onClick:R,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C},tt.createElement(bL,null)),tt.createElement(Na,{onClick:B,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:A},tt.createElement(vL,null))),e&&tt.createElement(Na,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view"},tt.createElement(xL,null)),i&&tt.createElement(Na,{className:"react-flow__controls-interactive",onClick:Q,title:"toggle interactivity","aria-label":"toggle interactivity"},w?tt.createElement(wL,null):tt.createElement(SL,null)),m)};WC.displayName="Controls";var ML=I.memo(WC),ai;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(ai||(ai={}));function CL({color:n,dimensions:t,lineWidth:e}){return tt.createElement("path",{stroke:n,strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function EL({color:n,radius:t}){return tt.createElement("circle",{cx:t,cy:t,r:t,fill:n})}const kL={[ai.Dots]:"#91919a",[ai.Lines]:"#eee",[ai.Cross]:"#e2e2e2"},TL={[ai.Dots]:1,[ai.Lines]:1,[ai.Cross]:6},DL=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function FC({id:n,variant:t=ai.Dots,gap:e=20,size:i,lineWidth:l=1,offset:o=2,color:a,style:c,className:f}){const d=I.useRef(null),{transform:m,patternId:p}=Jt(DL,He),b=a||kL[t],v=i||TL[t],S=t===ai.Dots,w=t===ai.Cross,A=Array.isArray(e)?e:[e,e],C=[A[0]*m[2]||1,A[1]*m[2]||1],O=v*m[2],_=w?[O,O]:C,D=S?[O/o,O/o]:[_[0]/o,_[1]/o];return tt.createElement("svg",{className:je(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},tt.createElement("pattern",{id:p+n,x:m[0]%C[0],y:m[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${D[0]},-${D[1]})`},S?tt.createElement(EL,{color:b,radius:O/o}):tt.createElement(CL,{dimensions:_,color:b,lineWidth:l})),tt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+n})`}))}FC.displayName="Background";var OL=I.memo(FC);const RL=({data:n})=>Ct.jsxs("div",{style:{border:"1px solid #ccc",borderRadius:8,background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",minWidth:180,fontSize:12},children:[Ct.jsx("div",{style:{background:"#2d3748",color:"#fff",padding:"4px 8px",borderRadius:"8px 8px 0 0",fontWeight:"bold"},children:n.tableName}),Ct.jsx("div",{style:{padding:"4px 8px"},children:n.columns.map((t,e)=>{const i=t.key==="PK"?"#38a169":t.key==="FK"?"#3182ce":"#4a5568";return Ct.jsxs("div",{style:{position:"relative",padding:"2px 6px",margin:"2px 0",borderRadius:4,display:"flex",alignItems:"center",transition:"background 0.2s"},onMouseEnter:l=>l.currentTarget.style.background="#f7fafc",onMouseLeave:l=>l.currentTarget.style.background="transparent",children:[Ct.jsx(fo,{type:"target",position:bt.Left,id:`target-${t.name}`,style:{background:i,width:8,height:8,left:-8,top:"50%",transform:"translateY(-50%)"}}),Ct.jsx(fo,{type:"source",position:bt.Right,id:`source-${t.name}`,style:{background:i,width:8,height:8,right:-8,top:"50%",transform:"translateY(-50%)"}}),Ct.jsxs("span",{style:{marginRight:2},children:[t.key==="PK"&&"🔑",t.key==="FK"&&"🔗"]}),Ct.jsxs("span",{style:{flexGrow:1},children:[Ct.jsx("strong",{children:t.name}),": ",t.type]}),t.key&&Ct.jsx("span",{style:{background:t.key==="PK"?"#38a169":"#3182ce",color:"#fff",fontSize:10,padding:"0 4px",borderRadius:4,marginLeft:4},children:t.key})]},e)})})]}),NL={dbTable:RL},_L=[{id:"follows",type:"dbTable",position:{x:0,y:100},data:{tableName:"follows",columns:[{name:"following_user_id",type:"integer",key:"FK"},{name:"created_at",type:"timestamp"}]}},{id:"users",type:"dbTable",position:{x:300,y:100},data:{tableName:"users",columns:[{name:"id",type:"integer",key:"PK"},{name:"username",type:"varchar"},{name:"role",type:"varchar"},{name:"created_at",type:"timestamp"}]}},{id:"posts",type:"dbTable",position:{x:600,y:100},data:{tableName:"posts",columns:[{name:"id",type:"integer",key:"PK"},{name:"title",type:"varchar"},{name:"body",type:"text"},{name:"user_id",type:"integer",key:"FK"},{name:"status",type:"varchar"},{name:"created_at",type:"timestamp"}]}}],BL=[{id:"e-follows-following",source:"follows",sourceHandle:"source-following_user_id",target:"users",targetHandle:"target-id",label:"following_user_id → id",animated:!0},{id:"e-follows-followed",source:"follows",sourceHandle:"source-followed_user_id",target:"users",targetHandle:"target-id",label:"followed_user_id → id",animated:!0},{id:"e-posts-user",source:"posts",sourceHandle:"source-user_id",target:"users",targetHandle:"target-id",label:"user_id → id",animated:!0}],zL=()=>{const[n,t]=I.useState(_L),[e,i]=I.useState(BL),l=c=>{t(f=>_C(c,f))},o=c=>{i(f=>p6(c,f))},a=c=>{var f,d;if(c.source&&c.target){const m={id:`e-${c.source}-${c.target}-${Date.now()}`,source:c.source,target:c.target,sourceHandle:c.sourceHandle,targetHandle:c.targetHandle,animated:!0,label:`${(f=c.sourceHandle)==null?void 0:f.replace("source-","")} → ${(d=c.targetHandle)==null?void 0:d.replace("target-","")}`};i(p=>[...p,m])}};return Ct.jsx("div",{style:{width:"100%",height:"100vh"},children:Ct.jsxs(KC,{nodes:n,edges:e,nodeTypes:NL,onNodesChange:l,onEdgesChange:o,onConnect:a,fitView:!0,children:[Ct.jsx(yL,{}),Ct.jsx(ML,{}),Ct.jsx(OL,{gap:12,color:"#eee"})]})})},LL=()=>Ct.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#1f1f1f",padding:"4px 8px",height:"40px",gap:"6px",color:"#ddd"},children:[Ct.jsx("button",{style:{background:"#007aff",border:"none",borderRadius:"4px",color:"#fff",padding:"4px 8px",fontSize:"16px",cursor:"pointer"},children:"⬈"}),Ct.jsx("input",{type:"text",placeholder:"Untitled Diagram",style:{background:"#2b2b2b",border:"none",borderRadius:"4px",color:"#ddd",padding:"4px 8px",width:"200px"}}),Ct.jsx("button",{className:"toolbar-btn",children:"💾 Save"}),Ct.jsx("button",{className:"toolbar-btn",children:"🔗 Share"}),Ct.jsx("div",{className:"toolbar-btn",children:"⬆ Import"}),Ct.jsx("div",{className:"toolbar-btn",children:"⬇ Export"}),Ct.jsxs("div",{className:"toolbar-btn",children:["🌙 ",Ct.jsx("input",{type:"checkbox"})]}),Ct.jsx("div",{style:{flex:1}}),Ct.jsx("button",{className:"toolbar-btn",children:"🔑 Sign in"}),Ct.jsx("style",{children:`
        .toolbar-btn {
          background: #2b2b2b;
          border: none;
          border-radius: 4px;
          color: #ddd;
          padding: 4px 8px;
          cursor: pointer;
          font-size: 14px;
        }

        .toolbar-btn:hover {
          background: #3a3a3a;
        }
      `})]}),HL=()=>Ct.jsxs(Ct.Fragment,{children:[Ct.jsx(LL,{}),Ct.jsxs("div",{style:{display:"flex",width:"100vw",height:"100vh",margin:0},children:[Ct.jsx("div",{style:{width:"30%",height:"100%",display:"flex",flexDirection:"column"},children:Ct.jsx(R4,{})}),Ct.jsx("div",{style:{width:"70%",height:"100%"},children:Ct.jsx(zL,{})})]})]});function VL(){return Ct.jsx(Ct.Fragment,{children:Ct.jsx(HL,{})})}hT.createRoot(document.getElementById("root")).render(Ct.jsx(I.StrictMode,{children:Ct.jsx(VL,{})}));
